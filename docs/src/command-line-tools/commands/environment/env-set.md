# Wheels env set
*This command works correctly without options (parameters). Option support is under development and will be **available soon**.*


## Overview

The `wheels env set` command allows you to set or update environment variables in `.env` files. This command provides a convenient way to manage your application's configuration without manually editing files, supporting both creation of new variables and updating existing ones.

## Command Syntax

```bash
wheels env set KEY=VALUE [KEY2=VALUE2 ...] [options]
```

## Parameters

### Required Parameters
- **`KEY=VALUE`** - Environment variable(s) to set in KEY=VALUE format
  - You can specify multiple key-value pairs in a single command
  - Keys and values are processed as provided

### Optional Parameters
- **`--file`** - The .env file to update (default: `.env`)
  - Specify a different environment file (e.g., `.env.production`, `.env.local`)

## Basic Usage Examples

### Set Single Variable
```bash
wheels env set DB_HOST=localhost
```
Sets `DB_HOST` to `localhost` in the default `.env` file

### Set Multiple Variables
```bash
wheels env set DB_PORT=3306 DB_NAME=myapp
```
Sets both `DB_PORT` and `DB_NAME` in a single command

### Set Variable in Specific File
```bash
wheels env set --file=.env.production API_KEY=secret
```
Sets `API_KEY` in the `.env.production` file

### Set Complex Values
```bash
wheels env set DATABASE_URL="mysql://user:pass@localhost:3306/db"
wheels env set API_ENDPOINTS="https://api1.com,https://api2.com"
```
Handles complex values including URLs and comma-separated lists

## Advanced Usage Examples

### Development Environment Setup
```bash
wheels env set DEBUG=true LOG_LEVEL=debug DB_HOST=localhost
```
Configure multiple development-specific variables

### Production Configuration
```bash
wheels env set --file=.env.production DEBUG=false LOG_LEVEL=error CACHE_ENABLED=true
```
Set production-specific values in a separate file

### Database Configuration
```bash
wheels env set DB_HOST=prod.db.com DB_PORT=5432 DB_SSL=true DB_POOL_SIZE=20
```
Configure complete database connection settings

### API Keys and Secrets
```bash
wheels env set API_KEY=your-secret-key JWT_SECRET=your-jwt-secret
```
Set sensitive configuration values (will be masked in output)

## How It Works

### File Creation
- If the specified `.env` file doesn't exist, it will be created automatically
- New files include helpful header comments indicating they were generated by the command

### Variable Updates
- **Existing variables** are updated with new values
- **New variables** are appended to the file
- **File format is preserved** (properties or JSON)

### Supported File Formats

#### Properties Format (Standard .env)
```
# Comment lines starting with ## are preserved
DB_HOST=localhost
DB_PORT=3306
API_KEY=secret-value
```

#### JSON Format
```json
{
  "DB_HOST": "localhost",
  "DB_PORT": "3306",
  "API_KEY": "secret-value"
}
```

### Value Cleaning
- Trailing commas are automatically removed from values
- This prevents issues with accidentally copied values

## Security Features

### Sensitive Value Masking
When displaying results, values containing these keywords are automatically masked:
- `password`
- `secret`
- `key`
- `token`

**Example output:**
```
Environment variables updated in .env:
  DB_HOST = localhost
  API_KEY = ***MASKED***
  JWT_SECRET = ***MASKED***
```

### .gitignore Warning
The command automatically checks if your `.env` file is listed in `.gitignore`:
- If `.gitignore` exists but doesn't include your env file, you'll see a warning
- This helps prevent accidentally committing sensitive data to version control

## Sample Output

### Successful Update
```
Environment variables updated in .env:
  DB_HOST = localhost
  DB_PORT = 3306
  DEBUG_MODE = true
```

### With Security Warning
```
Environment variables updated in .env:
  API_KEY = ***MASKED***
  DB_PASSWORD = ***MASKED***

Warning: .env is not in .gitignore!
  Add it to .gitignore to prevent committing secrets.
```

### Creating New File
```
Environment variables updated in .env:
  APP_NAME = MyApplication
  VERSION = 1.0.0
```

## Common Use Cases

### Initial Project Setup
```bash
# Set up basic application configuration
wheels env set APP_NAME="My Web App" VERSION=1.0.0 PORT=3000
```

### Database Configuration
```bash
# Configure database connection
wheels env set DB_HOST=localhost DB_PORT=5432 DB_NAME=myapp DB_USER=admin
```

### Environment-Specific Settings
```bash
# Development settings
wheels env set --file=.env.development DEBUG=true LOG_LEVEL=debug

# Production settings  
wheels env set --file=.env.production DEBUG=false LOG_LEVEL=error CACHE_TTL=3600
```

### API Configuration
```bash
# Set API endpoints and keys
wheels env set API_BASE_URL=https://api.example.com API_VERSION=v2 API_TIMEOUT=30
```

### Build and Deployment
```bash
# Set build-time variables
wheels env set BUILD_ENV=production ASSET_CDN=https://cdn.example.com
```

## Error Handling

The command will show an error if:
- **No key=value pairs provided**: You must specify at least one variable to set
- **File write permissions**: The target file cannot be written (check permissions)
- **Invalid file path**: The specified file path is invalid or inaccessible

### Common Error Messages

```bash
# No variables provided
No key=value pairs provided. Usage: wheels env set KEY=VALUE

# File permission error
Failed to update .env file: Access denied
```

## Best Practices

### 1. Use Descriptive Variable Names
```bash
# Good
wheels env set DATABASE_HOST=localhost API_RATE_LIMIT=1000

# Avoid
wheels env set HOST=localhost LIMIT=1000
```

### 2. Group Related Variables
```bash
# Set related variables together
wheels env set DB_HOST=localhost DB_PORT=5432 DB_NAME=myapp DB_USER=admin
```

### 3. Use Environment-Specific Files
```bash
# Separate files for different environments
wheels env set --file=.env.development DEBUG=true
wheels env set --file=.env.production DEBUG=false
wheels env set --file=.env.test DB_NAME=test_db
```

### 4. Secure Sensitive Data
```bash
# Always add .env files to .gitignore
echo ".env" >> .gitignore
echo ".env.local" >> .gitignore
echo ".env.production" >> .gitignore
```

### 5. Document Your Variables
```bash
# Consider documenting variables in a .env.example file
wheels env set --file=.env.example DB_HOST=your_db_host DB_PORT=5432
```

## Integration with Other Commands

### Use with Merge Command
```bash
# Set variables then merge with other files
wheels env set --file=.env.base APP_NAME=MyApp VERSION=1.0.0
wheels env merge .env.base .env.local --output=.env
```

### Prepare for Different Environments
```bash
# Set up base configuration
wheels env set --file=.env.base DB_PORT=5432 CACHE_ENABLED=true

# Add environment-specific overrides
wheels env set --file=.env.production DB_HOST=prod.db.com DEBUG=false
wheels env set --file=.env.development DB_HOST=localhost DEBUG=true
```

## Tips and Tricks

- **Quote complex values** to ensure they're handled correctly
- **Use consistent naming conventions** (e.g., UPPER_SNAKE_CASE)
- **Set multiple related variables at once** for efficiency
- **Always check the output** to verify variables were set correctly
- **Use specific file names** for different environments
- **Keep sensitive data in local files** that aren't committed to version control