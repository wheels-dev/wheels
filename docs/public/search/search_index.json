{"config":{"lang":["en"],"separator":"[\\s\\-\\.]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Getting Started","text":"<p>By far the quickest way to get started with Wheels is via CommandBox. CommandBox brings a whole host of command line capabilities to the CFML developer. It allows you to write scripts that can be executed at the command line written entirely in CFML. It allows you to start a CFML server from any directory on your machine and wire up the code in that directory as the web root of the server. What's more is, those servers can be either Lucee servers or Adobe ColdFusion servers. You can even specify what version of each server to launch. Lastly, CommandBox is a package manager for CFML. That means you can take some CFML code and package it up into a module, host it on ForgeBox.io, and make it available to other CFML developers. In fact we make extensive use of these capabilities to distribute Wheels plugins and templates. More on that later.</p> <p>One module that we have created is a module that extends CommandBox itself with commands and features specific to the Wheels framework. The Wheels CLI module for CommandBox is modeled after the Ruby on Rails CLI module and gives similar capabilities to the Wheels developer.</p>"},{"location":"#install-commandbox","title":"Install CommandBox","text":"<p>The first step is to get CommandBox downloaded and running. CommandBox is available for Windows, Mac &amp; Linux, and can be installed manually or using one of the respective package managers for each OS. You can use Chocolatey on Windows, Homebrew on MacOS, or Yum/Apt on Linux depending on your flavor of Linux. Please follow the instructions on how to install CommandBox on your particular operating system. At the end of the installation process you want to make sure the <code>box</code> command is part of your system path so you can call the command from any directory on your system.</p> <p>Once installed, you can either double-click on the <code>box</code> executable which opens the CommandBox shell window, or run <code>box</code> from a CMD window in Windows, Terminal window in MacOS, or shell prompt on a Linux server. Sometimes you only want to call a single CommandBox command and don't need to launch a whole CommandBox shell window to do that, for these instances you can call the CommandBox command directly from your default system terminal window by prefixing the command with the <code>box</code> prefix.</p> <p>So to run the CommandBox <code>version</code> command you could run box version from the shell or you could launch the CommandBox shell and run version inside it.</p> <p>{% tabs %} {% tab title=\"Shell\" %} box version {% endtab %}</p> <p>{% tab title=\"CommandBox\" %} version {% endtab %} {% endtabs %}</p> <p>This is a good concept to grasp, cause depending on your workflow, you may find it easier to do one versus the other. Most of the commands you will see in these CLI guides will assume that you are entering the command in the actual CommandBox shell so the <code>box</code> prefix is left off.</p>"},{"location":"#install-the-wheels-cli-commandbox-module","title":"Install the wheels-cli CommandBox Module","text":"<p>Okay, now that we have CommandBox installed, let's add the Wheels CLI module.</p> <p>{% tabs %} {% tab title=\"CommandBox\" %} install wheels-cli {% endtab %} {% endtabs %}</p> <p>Installing this module will add a number of commands to your default CommandBox installation. All of these commands are prefixed by the <code>wheels</code> name space. There are commands to create a brand new Wheels application or scaffold out sections of your application. We'll see some of these commands in action momentarily.</p>"},{"location":"#start-a-new-application-using-the-wizard","title":"Start a new Application using the Wizard","text":"<p>To install a new application using version 3.0, we can use the new application wizard and select Bleeding Edge when prompted to select the template to use.</p> <p>{% tabs %} {% tab title=\"CommandBox\" %} wheels new {% endtab %} {% endtabs %}</p>"},{"location":"#start-a-new-application-using-the-command-line","title":"Start a New Application Using the Command Line","text":"<p>Now that we have CommandBox installed and extended it with the Wheels CLI module, let's start our first Wheels app from the command line. We'll look at the simplest method for creating a Wheels app and starting our development server.</p> <p>{% tabs %} {% tab title=\"CommandBox\" %} wheels generate app myApp\\ server start {% endtab %} {% endtabs %}</p> <p></p> <p>A few minutes after submitting the above commands a new browser window should open up and display the default Wheels congratulations screen.</p> <p>So what just happened? Since we only passed the application name <code>myApp</code> to the <code>wheels generate app</code> command, it used default values for most of its parameters and downloaded our Base template (wheels-base-template) from ForgeBox.io, then downloaded the framework core files (wheels.dev) from ForgeBox.io and placed it in the <code>vendor/wheels</code> directory, then configured the application name and reload password, and started a Lucee server on a random port.</p> <p>{% hint style=\"info\" %} A Word About Command Aliases</p> <p>CommandBox commands have the capability to be called by multiple names or aliases. The command above <code>wheels generate app</code> can also be initiated by typing <code>wheels g app</code>. In fact <code>g</code> is an alias for <code>generate</code> so wherever you see a command in the CLI documentation that has <code>generate</code> in it you can substitute <code>g</code> instead.</p> <p>In addition to shortening <code>generate</code> to <code>g</code>, aliases can completely change the name space as well. A command that you haven't seen yet is the <code>wheels generate app-wizard</code> command. This command guides the user through a series of menu options, building up all the parameters needed to customize the start of a new Wheels project. You're likely to use the wizard when starting a new Wheels application so it's good to become familiar with it.</p> <p>This command has the normal alias referenced above at <code>wheels g app-wizard</code> but it also has an additional alias at <code>wheels new</code> which is the command more prevalent in the Rails community. So the three commands <code>wheels generate app-wizard</code>, <code>wheels g app-wizard</code>, and <code>wheels new</code> all call the same functionality which guides the user though a set of menus, collecting details on how to configure the desired app. Once all the parameters have been gathered, this command actually calls the <code>wheels generate app</code> command to create the actual Wheels application. {% endhint %}</p> <p>This Getting Started guide has taken you from the very beginning and gotten you to the point where you can go into any empty directory on your local development machine and start a Wheels project by issuing a couple of CLI commands. In later guides we'll explore these options further and see what else the CLI can do for us.</p>"},{"location":"SUMMARY/","title":"Table of contents","text":""},{"location":"SUMMARY/#introduction","title":"INTRODUCTION","text":"<ul> <li>Getting Started</li> <li>Running Local Development Servers</li> <li>Beginner Tutorial: Hello World</li> <li>Beginner Tutorial: Hello Database</li> <li>Tutorial: Wheels, AJAX, and You</li> <li>Frameworks and Wheels</li> <li>Requirements</li> <li>Manual Installation</li> <li>Upgrading</li> <li>Screencasts</li> </ul>"},{"location":"SUMMARY/#command-line-tools","title":"Command Line Tools","text":"<ul> <li>CLI Overview</li> <li>Quick Start Guide</li> <li>Command Reference</li> <li>Core Commands<ul> <li>wheels init</li> <li>wheels info</li> <li>wheels reload</li> <li>wheels deps</li> <li>wheels destroy</li> <li>wheels watch</li> </ul> </li> <li>Code Generation<ul> <li>wheels generate app</li> <li>wheels generate app-wizard</li> <li>wheels generate controller</li> <li>wheels generate model</li> <li>wheels generate view</li> <li>wheels generate property</li> <li>wheels generate route</li> <li>wheels generate resource</li> <li>wheels generate api-resource</li> <li>wheels generate frontend</li> <li>wheels generate test</li> <li>wheels generate snippets</li> <li>wheels scaffold</li> </ul> </li> <li>Database Commands<ul> <li>Database Management Overview</li> <li>Database Operations</li> <li>wheels db create</li> <li>wheels db drop</li> <li>wheels db setup</li> <li>wheels db reset</li> <li>wheels db status</li> <li>wheels db version</li> <li>wheels db rollback</li> <li>wheels db seed</li> <li>wheels db dump</li> <li>wheels db restore</li> <li>wheels db shell</li> <li>wheels db schema</li> <li>Migration Commands</li> <li>wheels dbmigrate info</li> <li>wheels dbmigrate latest</li> <li>wheels dbmigrate up</li> <li>wheels dbmigrate down</li> <li>wheels dbmigrate reset</li> <li>wheels dbmigrate exec</li> <li>wheels dbmigrate create blank</li> <li>wheels dbmigrate create table</li> <li>wheels dbmigrate create column</li> <li>wheels dbmigrate remove table</li> </ul> </li> <li>Testing Commands<ul> <li>wheels test</li> <li>wheels test run</li> <li>wheels test coverage</li> <li>wheels test debug</li> </ul> </li> <li>Configuration Commands<ul> <li>wheels config list</li> <li>wheels config set</li> <li>wheels config env</li> </ul> </li> <li>Environment Management<ul> <li>wheels env</li> <li>wheels env setup</li> <li>wheels env list</li> <li>wheels env switch</li> <li>wheels environment</li> <li>wheels console</li> <li>wheels runner</li> </ul> </li> <li>Server Management<ul> <li>wheels server</li> <li>wheels server start</li> <li>wheels server stop</li> <li>wheels server restart</li> <li>wheels server status</li> <li>wheels server log</li> <li>wheels server open</li> </ul> </li> <li>Plugin Management<ul> <li>wheels plugins</li> <li>wheels plugins list</li> <li>wheels plugins install</li> <li>wheels plugins remove</li> </ul> </li> <li>Code Analysis<ul> <li>wheels analyze</li> <li>wheels analyze code</li> <li>wheels analyze performance</li> <li>wheels analyze security</li> </ul> </li> <li>Security Commands<ul> <li>wheels security</li> <li>wheels security scan</li> </ul> </li> <li>Performance Commands<ul> <li>wheels optimize</li> <li>wheels optimize performance</li> </ul> </li> <li>Documentation Commands<ul> <li>wheels docs</li> <li>wheels docs generate</li> <li>wheels docs serve</li> </ul> </li> <li>CI/CD Commands<ul> <li>wheels ci init</li> </ul> </li> <li>Docker Commands<ul> <li>wheels docker init</li> <li>wheels docker deploy</li> </ul> </li> <li>Deployment Commands<ul> <li>wheels deploy</li> <li>wheels deploy audit</li> <li>wheels deploy exec</li> <li>wheels deploy hooks</li> <li>wheels deploy init</li> <li>wheels deploy lock</li> <li>wheels deploy logs</li> <li>wheels deploy proxy</li> <li>wheels deploy push</li> <li>wheels deploy rollback</li> <li>wheels deploy secrets</li> <li>wheels deploy setup</li> <li>wheels deploy status</li> <li>wheels deploy stop</li> </ul> </li> <li>CLI Development Guides</li> <li>Configuration Management</li> <li>Creating Commands</li> <li>Service Architecture</li> <li>Migrations Guide</li> <li>Testing Guide</li> </ul>"},{"location":"SUMMARY/#working-with-wheels","title":"Working with Wheels","text":"<ul> <li>Conventions</li> <li>Configuration and Defaults</li> <li>Directory Structure</li> <li>Switching Environments</li> <li>Testing Your Application</li> <li>Using the Test Environment</li> <li>Contributing to Wheels</li> <li>Submitting Pull Requests</li> <li>Documenting your Code</li> </ul>"},{"location":"SUMMARY/#handling-requests-with-controllers","title":"Handling Requests with Controllers","text":"<ul> <li>Request Handling</li> <li>Rendering Content</li> <li>Redirecting Users</li> <li>Sending Files</li> <li>Sending Email</li> <li>Responding with Multiple Formats</li> <li>Using the Flash</li> <li>Using Filters</li> <li>Verification</li> <li>Event Handlers</li> <li>Routing</li> <li>URL Rewriting</li> <li>Apache</li> <li>IIS</li> <li>Tomcat</li> <li>Nginx</li> <li>Obfuscating URLs</li> <li>Caching</li> <li>Nesting Controllers</li> <li>CORS Requests</li> </ul>"},{"location":"SUMMARY/#displaying-views-to-users","title":"Displaying Views to Users","text":"<ul> <li>Pages</li> <li>Partials</li> <li>Linking Pages</li> <li>Layouts</li> <li>Form Helpers and Showing Errors</li> <li>Displaying Links for Pagination</li> <li>Date, Media, and Text Helpers</li> <li>Creating Custom View Helpers</li> <li>Localization</li> </ul>"},{"location":"SUMMARY/#database-interaction-through-models","title":"Database Interaction Through Models","text":"<ul> <li>Object Relational Mapping</li> <li>Creating Records</li> <li>Reading Records</li> <li>Updating Records</li> <li>Deleting Records</li> <li>Column Statistics</li> <li>Dynamic Finders</li> <li>Getting Paginated Data</li> <li>Associations</li> <li>Nested Properties</li> <li>Object Validation</li> <li>Object Callbacks</li> <li>Calculated Properties</li> <li>Transactions</li> <li>Dirty Records</li> <li>Soft Delete</li> <li>Automatic Time Stamps</li> <li>Database Migrations</li> <li>Migrations in Production</li> <li>Using Multiple Data Sources</li> </ul>"},{"location":"SUMMARY/#plugins","title":"Plugins","text":"<ul> <li>Installing and Using Plugins</li> <li>Developing Plugins</li> <li>Publishing Plugins</li> </ul>"},{"location":"SUMMARY/#project-documentation","title":"Project Documentation","text":"<ul> <li>Overview</li> </ul>"},{"location":"SUMMARY/#external-links","title":"External Links","text":"<ul> <li>Source Code</li> <li>Issue Tracker</li> <li>Sponsor Us</li> <li>Community</li> </ul>"},{"location":"command-line-tools/cli-overview/","title":"Wheels CLI Documentation","text":"<p>Welcome to the comprehensive documentation for the Wheels CLI - a powerful command-line interface for the Wheels framework.</p>"},{"location":"command-line-tools/cli-overview/#what-is-wheels-cli","title":"What is Wheels CLI?","text":"<p>Wheels CLI is a CommandBox module that provides a comprehensive set of tools for developing Wheels applications. It offers:</p> <ul> <li>Code Generation - Quickly scaffold models, controllers, views, and complete CRUD operations</li> <li>Database Migrations - Manage database schema changes with version control</li> <li>Testing Tools - Run tests, generate coverage reports, and use watch mode</li> <li>Development Tools - File watching, automatic reloading, and development servers</li> <li>Code Analysis - Security scanning, performance analysis, and code quality checks</li> <li>Plugin Management - Install and manage Wheels plugins</li> <li>Environment Management - Switch between development, testing, and production</li> </ul>"},{"location":"command-line-tools/cli-overview/#documentation-structure","title":"Documentation Structure","text":""},{"location":"command-line-tools/cli-overview/#command-reference","title":"\ud83d\udcda Command Reference","text":"<p>Complete reference for all CLI commands organized by category: - Core Commands - Essential commands like init, reload, watch - Code Generation - Generate applications, models, controllers, views - Database Commands - Complete database management and migrations - Testing Commands - Run tests and generate coverage - Configuration - Manage application settings - And more...</p>"},{"location":"command-line-tools/cli-overview/#quick-start-guide","title":"\ud83d\ude80 Quick Start Guide","text":"<p>Get up and running with Wheels CLI in minutes. Learn how to: - Install Wheels CLI - Create your first application - Generate CRUD scaffolding - Run tests and migrations</p>"},{"location":"command-line-tools/cli-overview/#guides","title":"\ud83d\udcd6 Guides","text":""},{"location":"command-line-tools/cli-overview/#development-guides","title":"Development Guides","text":"<ul> <li>Service Architecture - Understand the CLI's architecture</li> <li>Creating Custom Commands - Extend the CLI with your own commands</li> <li>Template System - Customize code generation templates</li> <li>Testing Guide - Write and run tests effectively</li> </ul>"},{"location":"command-line-tools/cli-overview/#best-practices","title":"Best Practices","text":"<ul> <li>Migration Guide - Database migration best practices</li> <li>Security Guide - Security scanning and hardening</li> <li>Performance Guide - Optimization techniques</li> </ul>"},{"location":"command-line-tools/cli-overview/#reference","title":"\ud83d\udccb Reference","text":"<ul> <li>Configuration Options - All available configuration settings</li> <li>Template Variables - Variables available in templates</li> <li>Exit Codes - Understanding command exit codes</li> <li>Environment Variables - Environment configuration</li> </ul>"},{"location":"command-line-tools/cli-overview/#key-features","title":"Key Features","text":""},{"location":"command-line-tools/cli-overview/#code-generation","title":"\ud83d\udee0\ufe0f Code Generation","text":"<p>Generate complete applications or individual components:</p> <pre><code># Create new application\nwheels new blog\n\n# Generate complete CRUD scaffolding\nwheels scaffold name=post properties=title:string,content:text,published:boolean\n\n# Generate individual components\nwheels generate model user\nwheels generate controller users --rest\nwheels generate view users index\n</code></pre>"},{"location":"command-line-tools/cli-overview/#database-management","title":"\ud83d\uddc4\ufe0f Database Management","text":"<p>Complete database lifecycle management:</p> <pre><code># Database operations\nwheels db create              # Create database\nwheels db setup              # Create + migrate + seed\nwheels db reset              # Drop + recreate + migrate + seed\nwheels db shell              # Interactive database shell\nwheels db dump               # Backup database\nwheels db restore backup.sql # Restore from backup\n\n# Migrations\nwheels dbmigrate create table posts\nwheels dbmigrate latest\nwheels db status            # Check migration status\nwheels db rollback          # Rollback migrations\n</code></pre>"},{"location":"command-line-tools/cli-overview/#testing","title":"\ud83e\uddea Testing","text":"<p>Comprehensive testing support:</p> <pre><code># Run all tests\nwheels test run\n\n# Advanced testing with TestBox CLI\nwheels test:all              # Run all tests\nwheels test:unit             # Run unit tests only\nwheels test:integration      # Run integration tests only\nwheels test:watch            # Watch mode\nwheels test:coverage         # Generate coverage reports\n</code></pre>"},{"location":"command-line-tools/cli-overview/#development-tools","title":"\ud83d\udc40 Development Tools","text":"<p>Enhance your development workflow:</p> <pre><code># Watch for file changes\nwheels watch\n\n# Reload application\nwheels reload development\n\n# Analyze code\nwheels analyze code\nwheels security scan\n</code></pre>"},{"location":"command-line-tools/cli-overview/#getting-started","title":"Getting Started","text":"<ol> <li> <p>Install CommandBox (if not already installed):    <pre><code># macOS/Linux\ncurl -fsSl https://downloads.ortussolutions.com/debs/gpg | sudo apt-key add -\nor\n  brew install commandbox\n\n# Windows\nchoco install commandbox\n</code></pre></p> </li> <li> <p>Install Wheels CLI:    <pre><code>box install wheels-cli\n</code></pre></p> </li> <li> <p>Create Your First App:    <pre><code>wheels new myapp\ncd myapp\nbox server start\n</code></pre></p> </li> <li> <p>Explore Commands:    <pre><code>wheels --help\nwheels generate --help\nwheels dbmigrate --help\n</code></pre></p> </li> </ol>"},{"location":"command-line-tools/cli-overview/#version-compatibility","title":"Version Compatibility","text":"Wheels CLI Wheels CommandBox CFML Engine 3.0.x 2.5+ 5.0+ Lucee 5.3+, Adobe 2018+ 2.0.x 2.0-2.4 4.0+ Lucee 5.2+, Adobe 2016+"},{"location":"command-line-tools/cli-overview/#community-support","title":"Community &amp; Support","text":"<ul> <li>Documentation: https://wheels.dev/docs</li> <li>GitHub: https://github.com/wheels-dev/wheels</li> <li>Slack: CFML Slack - #wheels channel</li> <li>Forums: https://groups.google.com/forum/#!forum/wheels</li> </ul>"},{"location":"command-line-tools/cli-overview/#contributing","title":"Contributing","text":"<p>We welcome contributions! See our Contributing Guide for details on: - Reporting issues - Suggesting features - Submitting pull requests - Creating custom commands</p>"},{"location":"command-line-tools/cli-overview/#recent-updates","title":"Recent Updates","text":""},{"location":"command-line-tools/cli-overview/#version-300","title":"Version 3.0.0","text":"<ul> <li>\ud83c\udd95 Modernized service architecture</li> <li>\ud83c\udd95 Enhanced testing capabilities with watch mode</li> <li>\ud83c\udd95 Security scanning and performance optimization</li> <li>\ud83c\udd95 Plugin and environment management</li> <li>\ud83c\udd95 Improved code generation with more options</li> <li>\ud83d\udd27 Better error handling and user feedback</li> <li>\ud83d\udcda Comprehensive documentation</li> </ul>"},{"location":"command-line-tools/cli-overview/#quick-links","title":"Quick Links","text":"<ul> <li>All Commands - Complete command reference</li> <li>Quick Start - Get started in minutes</li> <li>Creating Commands - Extend the CLI</li> <li>Service Architecture - Technical deep dive</li> <li>Testing Guide - Testing best practices</li> </ul>"},{"location":"command-line-tools/cli-overview/#license","title":"License","text":"<p>Wheels CLI is open source software licensed under the Apache License 2.0. See LICENSE for details.</p> <p>Ready to get started? Head to the Quick Start Guide or explore the Command Reference.</p>"},{"location":"command-line-tools/configuration/","title":"Configuration Management Guide","text":"<p>This guide covers configuration management in CFWheels, including working with environment variables, settings files, and the CLI tools for managing configuration.</p>"},{"location":"command-line-tools/configuration/#overview","title":"Overview","text":"<p>CFWheels provides flexible configuration management through: - Environment-specific settings files - Environment variables (.env files) - CLI commands for configuration management - Security best practices</p>"},{"location":"command-line-tools/configuration/#environment-variables","title":"Environment Variables","text":""},{"location":"command-line-tools/configuration/#env-file-format","title":".env File Format","text":"<p>CFWheels supports two formats for .env files:</p>"},{"location":"command-line-tools/configuration/#properties-format-recommended","title":"Properties Format (Recommended)","text":"<pre><code># Database Configuration\nDB_HOST=localhost\nDB_PORT=3306\nDB_NAME=myapp_development\nDB_USER=wheels\nDB_PASSWORD=secretpassword\n\n# Application Settings\nWHEELS_ENV=development\nRELOAD_PASSWORD=myreloadpassword\nSECRET_KEY=a1b2c3d4e5f6g7h8i9j0\n\n# Feature Flags\nDEBUG_MODE=true\nCACHE_ENABLED=false\n</code></pre>"},{"location":"command-line-tools/configuration/#json-format","title":"JSON Format","text":"<pre><code>{\n  \"DB_HOST\": \"localhost\",\n  \"DB_PORT\": 3306,\n  \"DB_NAME\": \"myapp_development\",\n  \"DB_USER\": \"wheels\",\n  \"DB_PASSWORD\": \"secretpassword\",\n  \"WHEELS_ENV\": \"development\",\n  \"DEBUG_MODE\": true\n}\n</code></pre>"},{"location":"command-line-tools/configuration/#environment-specific-files","title":"Environment-Specific Files","text":"<p>CFWheels automatically loads environment-specific .env files:</p> <ol> <li><code>.env</code> - Base configuration (always loaded first)</li> <li><code>.env.{environment}</code> - Environment-specific overrides (loaded second)</li> </ol> <p>Example structure: <pre><code>myapp/\n\u251c\u2500\u2500 .env                 # Base configuration\n\u251c\u2500\u2500 .env.development     # Development overrides\n\u251c\u2500\u2500 .env.testing        # Testing overrides\n\u251c\u2500\u2500 .env.production     # Production settings\n\u2514\u2500\u2500 .gitignore          # MUST exclude .env files!\n</code></pre></p>"},{"location":"command-line-tools/configuration/#variable-interpolation","title":"Variable Interpolation","text":"<p>Use <code>${VAR}</code> syntax to reference other variables:</p> <pre><code># .env\nAPP_NAME=MyWheelsApp\nAPP_ENV=development\n\n# Database URLs with interpolation\nDB_HOST=localhost\nDB_PORT=3306\nDB_NAME=${APP_NAME}_${APP_ENV}\nDB_URL=mysql://${DB_HOST}:${DB_PORT}/${DB_NAME}\n\n# API endpoints\nAPI_BASE_URL=https://api.example.com\nAPI_USERS_URL=${API_BASE_URL}/users\nAPI_ORDERS_URL=${API_BASE_URL}/orders\n</code></pre>"},{"location":"command-line-tools/configuration/#type-casting","title":"Type Casting","text":"<p>CFWheels automatically casts certain values:</p> <pre><code># Booleans (cast to true/false)\nDEBUG_MODE=true\nCACHE_ENABLED=false\n\n# Numbers (cast to numeric values)\nMAX_CONNECTIONS=100\nCACHE_TTL=3600\nREQUEST_TIMEOUT=30\n\n# Strings (remain as strings)\nAPP_NAME=MyApp\nAPI_KEY=abc123def456\n</code></pre>"},{"location":"command-line-tools/configuration/#using-environment-variables-in-settings","title":"Using Environment Variables in Settings","text":"<p>Access environment variables in your settings files:</p> <pre><code>// config/settings.cfm\n// Using application.env struct\nset(dataSourceName = application.env['DB_NAME']);\nset(dataSourceUserName = application.env['DB_USER']);\nset(dataSourcePassword = application.env['DB_PASSWORD']);\n\n// With defaults\nset(cacheQueries = application.env['CACHE_ENABLED'] ?: false);\nset(reloadPassword = application.env['RELOAD_PASSWORD'] ?: 'defaultpassword');\n\n// Environment-specific logic\nif (application.env['WHEELS_ENV'] == 'production') {\n    set(showDebugInformation = false);\n    set(cacheFileChecking = true);\n}\n</code></pre>"},{"location":"command-line-tools/configuration/#configuration-files","title":"Configuration Files","text":""},{"location":"command-line-tools/configuration/#directory-structure","title":"Directory Structure","text":"<pre><code>config/\n\u251c\u2500\u2500 settings.cfm           # Base configuration\n\u251c\u2500\u2500 development/\n\u2502   \u2514\u2500\u2500 settings.cfm      # Development overrides\n\u251c\u2500\u2500 testing/\n\u2502   \u2514\u2500\u2500 settings.cfm      # Testing overrides\n\u251c\u2500\u2500 production/\n\u2502   \u2514\u2500\u2500 settings.cfm      # Production overrides\n\u2514\u2500\u2500 maintenance/\n    \u2514\u2500\u2500 settings.cfm      # Maintenance mode settings\n</code></pre>"},{"location":"command-line-tools/configuration/#settings-precedence","title":"Settings Precedence","text":"<p>Settings are loaded in this order (later overrides earlier): 1. Framework defaults 2. <code>config/settings.cfm</code> 3. <code>config/{environment}/settings.cfm</code> 4. Plugin settings 5. Runtime <code>set()</code> calls</p>"},{"location":"command-line-tools/configuration/#common-configuration-patterns","title":"Common Configuration Patterns","text":""},{"location":"command-line-tools/configuration/#database-configuration","title":"Database Configuration","text":"<pre><code>// config/settings.cfm\nset(dataSourceName = application.env['DB_NAME'] ?: 'wheelstutorial');\nset(dataSourceUserName = application.env['DB_USER'] ?: 'root');\nset(dataSourcePassword = application.env['DB_PASSWORD'] ?: '');\n</code></pre>"},{"location":"command-line-tools/configuration/#environment-specific-settings","title":"Environment-Specific Settings","text":"<pre><code>// config/production/settings.cfm\n// Production optimizations\nset(cacheQueries = true);\nset(cachePartials = true);\nset(cachePages = true);\nset(cacheActions = true);\nset(cacheImages = true);\nset(cacheModelConfig = true);\nset(cacheControllerConfig = true);\nset(cacheRoutes = true);\nset(cacheDatabaseSchema = true);\nset(cacheFileChecking = false);\n\n// Security\nset(showDebugInformation = false);\nset(showErrorInformation = false);\n\n// Error handling\nset(sendEmailOnError = true);\nset(errorEmailAddress = application.env['ERROR_EMAIL']);\n</code></pre>"},{"location":"command-line-tools/configuration/#cli-configuration-commands","title":"CLI Configuration Commands","text":""},{"location":"command-line-tools/configuration/#dumping-configuration","title":"Dumping Configuration","text":"<p>Export current configuration:</p> <pre><code># View current config (masked)\nwheels config dump\n\n# Export production config as JSON\nwheels config dump production --format=json --output=prod-config.json\n\n# Export as .env format\nwheels config dump --format=env --output=config.env\n\n# Export without masking (careful!)\nwheels config dump --no-mask\n</code></pre>"},{"location":"command-line-tools/configuration/#checking-configuration","title":"Checking Configuration","text":"<p>Validate configuration for issues:</p> <pre><code># Basic check\nwheels config check\n\n# Check production with fixes\nwheels config check production --fix\n\n# Verbose output with suggestions\nwheels config check --verbose\n</code></pre> <p>Common checks performed: - Missing required settings - Hardcoded sensitive values - Production security settings - Database configuration - Caching optimizations</p>"},{"location":"command-line-tools/configuration/#comparing-environments","title":"Comparing Environments","text":"<p>Find differences between environments:</p> <pre><code># Full comparison\nwheels config diff development production\n\n# Show only differences\nwheels config diff development production --changes-only\n\n# Export as JSON\nwheels config diff testing production --format=json &gt; diff.json\n</code></pre>"},{"location":"command-line-tools/configuration/#managing-secrets","title":"Managing Secrets","text":"<p>Generate secure secrets:</p> <pre><code># Generate and display\nwheels secret\nwheels secret --type=base64 --length=48\n\n# Save to .env\nwheels secret --save-to-env=SECRET_KEY\nwheels secret --type=uuid --save-to-env=API_KEY\n\n# Multiple secrets\nwheels secret --save-to-env=SESSION_SECRET\nwheels secret --save-to-env=CSRF_TOKEN\nwheels secret --save-to-env=ENCRYPTION_KEY\n</code></pre>"},{"location":"command-line-tools/configuration/#environment-variable-management","title":"Environment Variable Management","text":""},{"location":"command-line-tools/configuration/#setting-variables","title":"Setting Variables","text":"<pre><code># Set single variable\nwheels env set DB_HOST=localhost\n\n# Set multiple\nwheels env set DB_HOST=localhost DB_PORT=3306 DB_NAME=myapp\n\n# Update production file\nwheels env set --file=.env.production API_URL=https://api.example.com\n</code></pre>"},{"location":"command-line-tools/configuration/#validating-files","title":"Validating Files","text":"<pre><code># Basic validation\nwheels env validate\n\n# Check required variables\nwheels env validate --required=DB_HOST,DB_USER,DB_PASSWORD\n\n# Validate production\nwheels env validate --file=.env.production --verbose\n</code></pre>"},{"location":"command-line-tools/configuration/#merging-files","title":"Merging Files","text":"<pre><code># Merge for deployment\nwheels env merge .env .env.production --output=.env.deployed\n\n# Preview merge\nwheels env merge .env.defaults .env.local --dry-run\n</code></pre>"},{"location":"command-line-tools/configuration/#security-best-practices","title":"Security Best Practices","text":""},{"location":"command-line-tools/configuration/#1-never-commit-secrets","title":"1. Never Commit Secrets","text":"<p>Always add .env files to .gitignore:</p> <pre><code># Environment files\n.env\n.env.*\n!.env.example\n!.env.defaults\n</code></pre>"},{"location":"command-line-tools/configuration/#2-use-strong-secrets","title":"2. Use Strong Secrets","text":"<p>Generate cryptographically secure values:</p> <pre><code># For session secrets\nwheels secret --type=hex --length=64 --save-to-env=SESSION_SECRET\n\n# For API keys\nwheels secret --type=base64 --length=48 --save-to-env=API_SECRET\n\n# For passwords\nwheels secret --type=alphanumeric --length=32\n</code></pre>"},{"location":"command-line-tools/configuration/#3-validate-production-config","title":"3. Validate Production Config","text":"<p>Run checks before deployment:</p> <pre><code># Full production check\nwheels config check production --verbose\n\n# Required checks\nwheels env validate --file=.env.production \\\n  --required=DB_HOST,DB_USER,DB_PASSWORD,SECRET_KEY,RELOAD_PASSWORD\n</code></pre>"},{"location":"command-line-tools/configuration/#4-mask-sensitive-output","title":"4. Mask Sensitive Output","text":"<p>Always use masking in logs/output:</p> <pre><code>// In your code\nwriteOutput(\"Database: #application.env['DB_NAME']#\");\nwriteOutput(\"Password: ***MASKED***\"); // Never output passwords\n</code></pre>"},{"location":"command-line-tools/configuration/#5-environment-specific-secrets","title":"5. Environment-Specific Secrets","text":"<p>Use different secrets per environment:</p> <pre><code># .env.development\nSECRET_KEY=dev_secret_key_only_for_local\n\n# .env.production\nSECRET_KEY=prod_0a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0\n</code></pre>"},{"location":"command-line-tools/configuration/#common-patterns","title":"Common Patterns","text":""},{"location":"command-line-tools/configuration/#multi-environment-setup","title":"Multi-Environment Setup","text":"<pre><code># 1. Create base config\nwheels env set WHEELS_ENV=development DB_NAME=myapp_dev\n\n# 2. Create production config\nwheels env set --file=.env.production \\\n  WHEELS_ENV=production \\\n  DB_NAME=myapp_prod \\\n  DB_HOST=prod.database.com\n\n# 3. Create testing config\nwheels env set --file=.env.testing \\\n  WHEELS_ENV=testing \\\n  DB_NAME=myapp_test\n\n# 4. Validate all\nwheels env validate\nwheels env validate --file=.env.production\nwheels env validate --file=.env.testing\n</code></pre>"},{"location":"command-line-tools/configuration/#deployment-configuration","title":"Deployment Configuration","text":"<pre><code># 1. Merge configs for deployment\nwheels env merge .env.defaults .env.production --output=.env.deploy\n\n# 2. Validate merged config\nwheels env validate --file=.env.deploy \\\n  --required=DB_HOST,DB_USER,DB_PASSWORD,SECRET_KEY\n\n# 3. Check security\nwheels config check production --verbose\n</code></pre>"},{"location":"command-line-tools/configuration/#local-development","title":"Local Development","text":"<pre><code># 1. Copy example file\ncp .env.example .env\n\n# 2. Set local values\nwheels env set DB_HOST=localhost DB_USER=root DB_PASSWORD=\n\n# 3. Generate secrets\nwheels secret --save-to-env=SECRET_KEY\nwheels secret --save-to-env=RELOAD_PASSWORD\n\n# 4. Validate\nwheels env validate\n</code></pre>"},{"location":"command-line-tools/configuration/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/configuration/#environment-variables-not-loading","title":"Environment Variables Not Loading","text":"<ol> <li>Check file exists and is readable</li> <li>Verify format (properties vs JSON)</li> <li>Check for syntax errors:    <pre><code>wheels env validate\n</code></pre></li> </ol>"},{"location":"command-line-tools/configuration/#wrong-environment-loading","title":"Wrong Environment Loading","text":"<ol> <li>Check WHEELS_ENV variable:    <pre><code>wheels env show --key=WHEELS_ENV\n</code></pre></li> <li>Verify environment detection order:</li> <li><code>.env</code> file WHEELS_ENV</li> <li>System environment WHEELS_ENV</li> <li>Default to 'development'</li> </ol>"},{"location":"command-line-tools/configuration/#interpolation-not-working","title":"Interpolation Not Working","text":"<ol> <li>Ensure variables are defined before use</li> <li>Check syntax: <code>${VAR_NAME}</code></li> <li>Maximum 10 interpolation passes (prevent loops)</li> </ol>"},{"location":"command-line-tools/configuration/#sensitive-values-exposed","title":"Sensitive Values Exposed","text":"<ol> <li>Run security check:    <pre><code>wheels config check --verbose\n</code></pre></li> <li>Move hardcoded values to .env</li> <li>Use <code>application.env</code> references</li> </ol>"},{"location":"command-line-tools/configuration/#best-practices-summary","title":"Best Practices Summary","text":"<ol> <li>Use .env files for all environment-specific values</li> <li>Never commit secrets - use .gitignore</li> <li>Generate strong secrets with <code>wheels secret</code></li> <li>Validate configuration before deployment</li> <li>Use interpolation to reduce duplication</li> <li>Environment-specific files for overrides</li> <li>Check security regularly with CLI tools</li> <li>Document required variables in .env.example</li> <li>Mask sensitive values in output</li> <li>Test configuration changes in development first</li> </ol>"},{"location":"command-line-tools/development-workflow/","title":"Development Workflow Commands","text":"<p>This guide covers the Wheels CLI commands designed to enhance your development workflow, including framework upgrades, performance testing, and documentation generation.</p>"},{"location":"command-line-tools/development-workflow/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Framework Initialization</li> <li>Framework Upgrades</li> <li>Performance Testing</li> <li>Documentation Generation</li> <li>Best Practices</li> </ul>"},{"location":"command-line-tools/development-workflow/#framework-initialization","title":"Framework Initialization","text":"<p>The <code>wheels init</code> command helps bootstrap existing Wheels applications to work with the CLI.</p>"},{"location":"command-line-tools/development-workflow/#when-to-use","title":"When to Use","text":"<p>Use this command when you have: - An existing Wheels application without CLI integration - A project cloned from version control missing configuration files - A need to reset CLI configuration files</p>"},{"location":"command-line-tools/development-workflow/#basic-usage","title":"Basic Usage","text":"<pre><code># Initialize in current directory\nwheels init\n\n# Initialize with custom application name\nwheels init name=myapp\n\n# Force overwrite existing files\nwheels init --force\n</code></pre>"},{"location":"command-line-tools/development-workflow/#what-it-does","title":"What It Does","text":"<p>The command creates three essential files:</p> <ol> <li>vendor/wheels/box.json - Tracks the Wheels framework version</li> <li>server.json - CommandBox server configuration with Wheels-specific settings</li> <li>box.json - Application package configuration</li> </ol>"},{"location":"command-line-tools/development-workflow/#interactive-prompts","title":"Interactive Prompts","text":"<p>When you run <code>wheels init</code>, it will ask for:</p> <ul> <li>Application Name: Used for unique server naming (special characters are removed)</li> <li>Default CFML Engine: Your preference (e.g., lucee5, adobe2023)</li> </ul>"},{"location":"command-line-tools/development-workflow/#example","title":"Example","text":"<pre><code>$ wheels init\n======================================\nWheels CLI v3.0.0\n======================================\nYou don't have a box.json. Let's create one\n\nApplication name: My Awesome App\nWe'll use: myawesomeapp for the server name\n\nWhat's your preferred CFML Engine [lucee5]: lucee5\n\n\u2713 Created vendor/wheels/box.json\n\u2713 Created server.json\n\u2713 Created box.json\n\nYour application is now configured for the Wheels CLI!\n</code></pre>"},{"location":"command-line-tools/development-workflow/#framework-upgrades","title":"Framework Upgrades","text":"<p>The <code>wheels upgrade</code> command provides an interactive wizard for upgrading your Wheels framework version.</p>"},{"location":"command-line-tools/development-workflow/#checking-for-updates","title":"Checking for Updates","text":"<pre><code># Check if updates are available\nwheels upgrade --check\n\n# Output:\n# Current Wheels version: 2.5.0\n# Upgrade available: 3.0.0\n# Run 'wheels upgrade' to start the upgrade process.\n</code></pre>"},{"location":"command-line-tools/development-workflow/#interactive-upgrade","title":"Interactive Upgrade","text":"<pre><code># Start the upgrade wizard\nwheels upgrade\n\n# The wizard will:\n# 1. Show available versions\n# 2. Let you select target version\n# 3. Check for breaking changes\n# 4. Show upgrade steps\n# 5. Create backup (optional)\n# 6. Perform the upgrade\n</code></pre>"},{"location":"command-line-tools/development-workflow/#direct-upgrade","title":"Direct Upgrade","text":"<pre><code># Upgrade to specific version\nwheels upgrade --to=3.0.0\n\n# Skip all confirmations\nwheels upgrade --to=3.0.0 --force\n\n# Upgrade without creating backup\nwheels upgrade --backup=false\n</code></pre>"},{"location":"command-line-tools/development-workflow/#breaking-changes-detection","title":"Breaking Changes Detection","text":"<p>The upgrade command automatically detects potential breaking changes:</p> <pre><code>\u26a0\ufe0f  Breaking Changes Detected:\n  \u2022 Major version upgrade - review changelog for breaking changes\n  \u2022 Wheels 3.x uses CommandBox modules\n  \u2022 New routing engine with different syntax\n  \u2022 Updated model callback names\n</code></pre>"},{"location":"command-line-tools/development-workflow/#backup-management","title":"Backup Management","text":"<p>By default, upgrades create a backup in <code>backups/upgrade-[timestamp]/</code> containing: - <code>/app</code> directory - <code>/config</code> directory - <code>/vendor/wheels</code> directory - <code>box.json</code> and <code>server.json</code> - <code>.env</code> files</p>"},{"location":"command-line-tools/development-workflow/#post-upgrade-steps","title":"Post-Upgrade Steps","text":"<p>After a successful upgrade:</p> <ol> <li>Run your test suite: <code>wheels test run</code></li> <li>Check the upgrade guide at https://guides.cfwheels.org/upgrading</li> <li>Review deprecated features</li> <li>Update your plugins to compatible versions</li> </ol>"},{"location":"command-line-tools/development-workflow/#performance-testing","title":"Performance Testing","text":""},{"location":"command-line-tools/development-workflow/#benchmarking-with-wheels-benchmark","title":"Benchmarking with <code>wheels benchmark</code>","text":"<p>The benchmark command performs load testing on your application endpoints.</p>"},{"location":"command-line-tools/development-workflow/#basic-benchmarking","title":"Basic Benchmarking","text":"<pre><code># Benchmark homepage\nwheels benchmark /\n\n# Benchmark with more requests\nwheels benchmark /products --requests=1000 --concurrent=10\n</code></pre>"},{"location":"command-line-tools/development-workflow/#advanced-options","title":"Advanced Options","text":"<pre><code># POST request with data\nwheels benchmark /api/users \\\n  --method=POST \\\n  --data='{\"name\":\"test\",\"email\":\"test@example.com\"}' \\\n  --headers=\"Content-Type:application/json\"\n\n# Custom timeout\nwheels benchmark /slow-endpoint --timeout=60\n\n# Save results\nwheels benchmark / --output=json --save=benchmark-results.json\n</code></pre>"},{"location":"command-line-tools/development-workflow/#using-configuration-files","title":"Using Configuration Files","text":"<p>Create a <code>benchmark.json</code> file:</p> <pre><code>{\n  \"scenarios\": [\n    {\n      \"name\": \"Homepage\",\n      \"url\": \"/\",\n      \"requests\": 1000,\n      \"concurrent\": 10\n    },\n    {\n      \"name\": \"API Create User\",\n      \"url\": \"/api/users\",\n      \"method\": \"POST\",\n      \"headers\": {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer token123\"\n      },\n      \"data\": \"{\\\"name\\\":\\\"Test User\\\"}\",\n      \"requests\": 500,\n      \"concurrent\": 5\n    }\n  ]\n}\n</code></pre> <p>Run all scenarios:</p> <pre><code>wheels benchmark --config=benchmark.json\n</code></pre>"},{"location":"command-line-tools/development-workflow/#understanding-results","title":"Understanding Results","text":"<pre><code>Benchmark Results:\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nTotal Requests: 1000\nConcurrent: 10\nTotal Time: 45.23s\n\nSuccessful: 995 (99.5%)\nFailed: 5\n\nResponse Times (ms):\n  Min: 23\n  Max: 892\n  Mean: 145\n  Median: 134\n  95th percentile: 289\n  99th percentile: 456\n\nThroughput:\n  Requests/sec: 22.11\n  Data transferred: 4.5 MB\n  Avg response size: 4.6 KB\n\nStatus Codes:\n  200: 995\n  500: 5\n</code></pre>"},{"location":"command-line-tools/development-workflow/#profiling-with-wheels-profile","title":"Profiling with <code>wheels profile</code>","text":"<p>The profile command provides detailed performance analysis of individual requests.</p>"},{"location":"command-line-tools/development-workflow/#basic-profiling","title":"Basic Profiling","text":"<pre><code># Profile an endpoint\nwheels profile /products\n\n# Multiple iterations for accuracy\nwheels profile /api/users --iterations=10\n</code></pre>"},{"location":"command-line-tools/development-workflow/#interactive-mode","title":"Interactive Mode","text":"<pre><code>wheels profile --interactive\n\n# This starts an interactive session where you can:\n# 1. Profile multiple endpoints\n# 2. Compare performance\n# 3. Save results\n</code></pre>"},{"location":"command-line-tools/development-workflow/#detailed-analysis","title":"Detailed Analysis","text":"<pre><code># Generate HTML report with charts\nwheels profile /complex-page --output=html --save=profile.html\n\n# Profile POST request\nwheels profile /search \\\n  --method=POST \\\n  --data='{\"query\":\"wheels framework\"}' \\\n  --iterations=5\n</code></pre>"},{"location":"command-line-tools/development-workflow/#profile-results","title":"Profile Results","text":"<p>The profiler provides:</p> <ol> <li>Response Time Statistics</li> <li>Min, Max, Mean, Median times</li> <li>Standard deviation</li> <li> <p>Consistency analysis</p> </li> <li> <p>Phase Breakdown</p> </li> <li>DNS lookup time</li> <li>Connection time</li> <li>Request processing</li> <li> <p>Response download</p> </li> <li> <p>Wheels-Specific Metrics</p> </li> <li>Query count and time</li> <li>Memory usage</li> <li> <p>Cache hits/misses</p> </li> <li> <p>Recommendations</p> </li> <li>High query count warnings</li> <li>Slow query detection</li> <li>Optimization suggestions</li> </ol> <p>Example output: <pre><code>Profile Results:\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nURL: http://localhost:8080/products\nMethod: GET\nIterations: 10\n\nResponse Times (ms):\n  Min: 156\n  Max: 234\n  Mean: 189\n  Median: 185\n  Std Dev: 24\n\nWheels Analysis:\n  Query Count: 47 avg\n  Query Time: 134ms avg\n\nRecommendations:\n  \u2022 High query count detected (47 avg). Consider using includes() to reduce N+1 queries.\n  \u2022 Review query performance and add indexes if needed.\n</code></pre></p>"},{"location":"command-line-tools/development-workflow/#documentation-generation","title":"Documentation Generation","text":"<p>The <code>wheels docs</code> commands help manage and generate documentation for your application.</p>"},{"location":"command-line-tools/development-workflow/#opening-documentation","title":"Opening Documentation","text":"<pre><code># Open Wheels framework documentation\nwheels docs\n\n# This opens the official Wheels documentation in your browser\n</code></pre>"},{"location":"command-line-tools/development-workflow/#generating-api-documentation","title":"Generating API Documentation","text":"<pre><code># Generate documentation for all components\nwheels docs:generate\n\n# Generate with specific format\nwheels docs:generate --format=html\nwheels docs:generate --format=markdown\nwheels docs:generate --format=json\n</code></pre>"},{"location":"command-line-tools/development-workflow/#customization-options","title":"Customization Options","text":"<pre><code># Use Bootstrap template\nwheels docs:generate --format=html --template=bootstrap\n\n# Generate for specific components only\nwheels docs:generate --type=models\nwheels docs:generate --type=controllers,services\n\n# Verbose output\nwheels docs:generate --verbose\n\n# Serve documentation after generation\nwheels docs:generate --serve --port=8080\n</code></pre>"},{"location":"command-line-tools/development-workflow/#output-structure","title":"Output Structure","text":"<p>Generated documentation includes:</p> <ol> <li>Component Documentation</li> <li>Properties with types and hints</li> <li>Methods with parameters and return types</li> <li>Inheritance hierarchy</li> <li> <p>Usage examples from hints</p> </li> <li> <p>Navigation</p> </li> <li>Organized by component type</li> <li>Searchable index</li> <li> <p>Cross-references</p> </li> <li> <p>Formats</p> </li> <li>HTML: Full styling with syntax highlighting</li> <li>Markdown: GitHub-compatible format</li> <li>JSON: Raw metadata for custom processing</li> </ol>"},{"location":"command-line-tools/development-workflow/#example-html-output","title":"Example HTML Output","text":"<p>The HTML documentation includes: - Syntax highlighted code examples - Collapsible sections for methods - Parameter tables - Return type information - Property listings</p>"},{"location":"command-line-tools/development-workflow/#best-practices","title":"Best Practices","text":""},{"location":"command-line-tools/development-workflow/#1-regular-framework-updates","title":"1. Regular Framework Updates","text":"<pre><code># Check for updates monthly\nwheels upgrade --check\n\n# Test upgrades in development first\nwheels upgrade --to=3.0.0\nwheels test run\n</code></pre>"},{"location":"command-line-tools/development-workflow/#2-performance-monitoring","title":"2. Performance Monitoring","text":"<pre><code># Benchmark after significant changes\nwheels benchmark / --save=baseline.json\n\n# Profile slow pages\nwheels profile /slow-page --iterations=10\n</code></pre>"},{"location":"command-line-tools/development-workflow/#3-documentation-maintenance","title":"3. Documentation Maintenance","text":"<pre><code># Regenerate docs after API changes\nwheels docs:generate --format=markdown\n\n# Commit generated docs to repository\ngit add docs/api/\ngit commit -m \"Update API documentation\"\n</code></pre>"},{"location":"command-line-tools/development-workflow/#4-continuous-integration","title":"4. Continuous Integration","text":"<p>Add these commands to your CI pipeline:</p> <pre><code># .github/workflows/ci.yml\n- name: Check for framework updates\n  run: wheels upgrade --check\n\n- name: Run benchmarks\n  run: wheels benchmark --config=ci-benchmark.json\n\n- name: Generate documentation\n  run: wheels docs:generate --format=markdown\n</code></pre>"},{"location":"command-line-tools/development-workflow/#5-team-workflows","title":"5. Team Workflows","text":"<p>For team development:</p> <pre><code># After cloning a repository\ngit clone https://github.com/team/project\ncd project\nwheels init --force\nbox install\nwheels db setup\n\n# Before committing\nwheels profile /new-feature\nwheels docs:generate\n</code></pre>"},{"location":"command-line-tools/development-workflow/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/development-workflow/#init-command-issues","title":"Init Command Issues","text":"<p>Problem: \"Directory already has box.json\" <pre><code># Solution: Use force flag\nwheels init --force\n</code></pre></p> <p>Problem: \"Cannot determine Wheels version\" <pre><code># Solution: Ensure /vendor/wheels exists\nbox install\nwheels init\n</code></pre></p>"},{"location":"command-line-tools/development-workflow/#upgrade-command-issues","title":"Upgrade Command Issues","text":"<p>Problem: \"Backup failed\" <pre><code># Solution: Check disk space and permissions\n# Or skip backup\nwheels upgrade --backup=false\n</code></pre></p> <p>Problem: \"Version not found\" <pre><code># Solution: Check available versions\nwheels upgrade --check\n</code></pre></p>"},{"location":"command-line-tools/development-workflow/#benchmarkprofile-issues","title":"Benchmark/Profile Issues","text":"<p>Problem: \"Server not running\" <pre><code># Solution: Start server first\nserver start\nwheels benchmark /\n</code></pre></p> <p>Problem: \"Timeout errors\" <pre><code># Solution: Increase timeout\nwheels benchmark / --timeout=120\nwheels profile / --timeout=120\n</code></pre></p>"},{"location":"command-line-tools/development-workflow/#summary","title":"Summary","text":"<p>The development workflow commands enhance your Wheels development experience by providing:</p> <ul> <li>Easy CLI integration for existing projects</li> <li>Safe, guided framework upgrades</li> <li>Performance testing and profiling tools</li> <li>Automated documentation generation</li> </ul> <p>Use these tools regularly to maintain a healthy, well-documented, and performant Wheels application.</p>"},{"location":"command-line-tools/quick-start/","title":"Quick Start Guide","text":"<p>Get up and running with Wheels CLI in minutes.</p>"},{"location":"command-line-tools/quick-start/#prerequisites","title":"Prerequisites","text":"<ul> <li>CommandBox 5.0+</li> <li>Java 8+</li> <li>Database (MySQL, PostgreSQL, SQL Server, or H2)</li> </ul>"},{"location":"command-line-tools/quick-start/#installation","title":"Installation","text":""},{"location":"command-line-tools/quick-start/#install-commandbox","title":"Install CommandBox","text":"<pre><code># macOS/Linux\ncurl -fsSl https://downloads.ortussolutions.com/debs/gpg | sudo apt-key add -\necho \"deb https://downloads.ortussolutions.com/debs/noarch /\" | sudo tee -a /etc/apt/sources.list.d/commandbox.list\nsudo apt-get update &amp;&amp; sudo apt-get install commandbox\n\n# Windows (PowerShell as Admin)\niex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))\nchoco install commandbox\n</code></pre>"},{"location":"command-line-tools/quick-start/#install-wheels-cli","title":"Install Wheels CLI","text":"<pre><code>box install wheels-cli\n</code></pre>"},{"location":"command-line-tools/quick-start/#creating-your-first-application","title":"Creating Your First Application","text":""},{"location":"command-line-tools/quick-start/#1-generate-application","title":"1. Generate Application","text":"<pre><code>wheels new blog\ncd blog\n</code></pre> <p>This creates a new Wheels application with: - Complete directory structure - Configuration files - Sample code</p>"},{"location":"command-line-tools/quick-start/#2-configure-database","title":"2. Configure Database","text":"<p>Edit <code>/config/settings.cfm</code>:</p> <pre><code>&lt;cfset set(dataSourceName=\"blog_development\")&gt;\n</code></pre> <p>Or use H2 embedded database:</p> <pre><code>wheels new blog --setupH2\n</code></pre> <p>Create the database:</p> <pre><code># If using external database (MySQL, PostgreSQL, etc.)\nwheels db create\n</code></pre>"},{"location":"command-line-tools/quick-start/#3-start-server","title":"3. Start Server","text":"<pre><code>box server start\n</code></pre> <p>Visit http://localhost:3000</p>"},{"location":"command-line-tools/quick-start/#creating-your-first-feature","title":"Creating Your First Feature","text":"<p>Let's create a blog post feature:</p>"},{"location":"command-line-tools/quick-start/#1-generate-scaffold","title":"1. Generate Scaffold","text":"<pre><code>wheels scaffold name=post properties=title:string,content:text,published:boolean\n</code></pre> <p>This generates: - Model with validations - Controller with CRUD actions - Views for all actions - Database migration - Test files</p>"},{"location":"command-line-tools/quick-start/#2-run-migration","title":"2. Run Migration","text":"<pre><code>wheels dbmigrate latest\n</code></pre>"},{"location":"command-line-tools/quick-start/#3-add-routes","title":"3. Add Routes","text":"<p>Edit <code>/config/routes.cfm</code>:</p> <pre><code>&lt;cfscript&gt;\n    // Add this line\n    resources(\"posts\");\n&lt;/cfscript&gt;\n</code></pre>"},{"location":"command-line-tools/quick-start/#4-reload-application","title":"4. Reload Application","text":"<pre><code>wheels reload\n</code></pre>"},{"location":"command-line-tools/quick-start/#5-test-your-feature","title":"5. Test Your Feature","text":"<p>Visit http://localhost:3000/posts</p> <p>You now have a fully functional blog post management system!</p>"},{"location":"command-line-tools/quick-start/#development-workflow","title":"Development Workflow","text":""},{"location":"command-line-tools/quick-start/#file-watching","title":"File Watching","text":"<p>In a new terminal:</p> <pre><code>wheels watch\n</code></pre> <p>Now changes to <code>.cfc</code> and <code>.cfm</code> files trigger automatic reloads.</p>"},{"location":"command-line-tools/quick-start/#running-tests","title":"Running Tests","text":"<pre><code># Run all tests\nwheels test run\n\n# Watch mode\nwheels test run --watch\n\n# Specific tests\nwheels test run tests/models/PostTest.cfc\n</code></pre>"},{"location":"command-line-tools/quick-start/#adding-relationships","title":"Adding Relationships","text":"<p>Let's add comments to posts:</p> <pre><code># Generate comment model\nwheels generate model comment --properties=\"author:string,content:text,postId:integer\" \\\n  --belongs-to=\"post\"\n\n# Update post model\nwheels generate property post comments --has-many\n\n# Generate comments controller\nwheels generate controller comments --rest\n\n# Run migration\nwheels dbmigrate latest\n</code></pre>"},{"location":"command-line-tools/quick-start/#common-tasks","title":"Common Tasks","text":""},{"location":"command-line-tools/quick-start/#adding-authentication","title":"Adding Authentication","text":"<pre><code># Generate user model\nwheels scaffold name=user properties=email:string,password:string,admin:boolean\n\n# Generate session controller\nwheels generate controller sessions new,create,delete\n\n# Run migrations\nwheels dbmigrate latest\n</code></pre>"},{"location":"command-line-tools/quick-start/#adding-api-endpoints","title":"Adding API Endpoints","text":"<pre><code># Generate API resource\nwheels generate api-resource product --properties=\"name:string,price:decimal\"\n\n# Or convert existing to API\nwheels generate controller api/posts --api\n</code></pre>"},{"location":"command-line-tools/quick-start/#working-with-views","title":"Working with Views","text":"<pre><code># Generate specific views\nwheels generate view posts featured\nwheels generate view users profile\n\n# Add layouts\necho '&lt;cfoutput&gt;&lt;!DOCTYPE html&gt;...&lt;/cfoutput&gt;' &gt; views/layout.cfm\n</code></pre>"},{"location":"command-line-tools/quick-start/#best-practices","title":"Best Practices","text":""},{"location":"command-line-tools/quick-start/#1-use-migrations","title":"1. Use Migrations","text":"<p>Always use migrations for database changes:</p> <pre><code># Create tables\nwheels dbmigrate create table products\n\n# Add columns\nwheels dbmigrate create column products featured\n\n# Create indexes\nwheels dbmigrate create blank add_index_to_products\n</code></pre>"},{"location":"command-line-tools/quick-start/#2-write-tests","title":"2. Write Tests","text":"<p>Generate tests for your code:</p> <pre><code># After creating a model\nwheels generate test model post\n\n# After creating a controller\nwheels generate test controller posts\n</code></pre>"},{"location":"command-line-tools/quick-start/#3-use-environment-configuration","title":"3. Use Environment Configuration","text":"<pre><code># Development\nwheels reload development\n\n# Testing\nwheels reload testing\n\n# Production\nwheels reload production\n</code></pre>"},{"location":"command-line-tools/quick-start/#4-version-control","title":"4. Version Control","text":"<pre><code>git init\ngit add .\ngit commit -m \"Initial Wheels application\"\n</code></pre> <p>Add to <code>.gitignore</code>: <pre><code>/db/sql/\n/logs/\n/temp/\n.env\n</code></pre></p>"},{"location":"command-line-tools/quick-start/#debugging","title":"Debugging","text":""},{"location":"command-line-tools/quick-start/#check-logs","title":"Check Logs","text":"<pre><code>tail -f logs/wheels.log\n</code></pre>"},{"location":"command-line-tools/quick-start/#enable-debug-mode","title":"Enable Debug Mode","text":"<p>In <code>/config/settings.cfm</code>:</p> <pre><code>&lt;cfset set(showDebugInformation=true)&gt;\n</code></pre>"},{"location":"command-line-tools/quick-start/#common-issues","title":"Common Issues","text":"<p>Port already in use: <pre><code>box server start port=3001\n</code></pre></p> <p>Database connection failed: <pre><code># Check datasource\nbox server info\nbox server show\n</code></pre></p> <p>Migration failed: <pre><code># Check status\nwheels db status\n\n# Run specific migration\nwheels dbmigrate exec 20240120000000\n\n# Or rollback and try again\nwheels db rollback\n</code></pre></p> <p>Need to reset database: <pre><code># Complete reset (careful - destroys all data!)\nwheels db reset --force\n</code></pre></p> <p>Access database directly: <pre><code># CLI shell\nwheels db shell\n\n# Web console (H2 only)\nwheels db shell --web\n</code></pre></p>"},{"location":"command-line-tools/quick-start/#next-steps","title":"Next Steps","text":"<ol> <li>Read the Guides:</li> <li>Service Architecture</li> <li>Testing Guide</li> <li> <p>Migration Guide</p> </li> <li> <p>Explore Commands:</p> </li> <li><code>wheels --help</code></li> <li><code>wheels generate --help</code></li> <li> <p><code>wheels dbmigrate --help</code></p> </li> <li> <p>Join the Community:</p> </li> <li>Wheels Documentation</li> <li>GitHub Discussions</li> <li>CFML Slack #wheels channel</li> </ol>"},{"location":"command-line-tools/quick-start/#example-complete-blog-application","title":"Example: Complete Blog Application","text":"<p>Here's a complete blog setup:</p> <pre><code># Create application\nwheels new myblog --setupH2\ncd myblog\n\n# Generate blog structure\nwheels scaffold post title:string,slug:string,content:text,publishedAt:datetime\nwheels scaffold author name:string,email:string,bio:text\nwheels generate model comment author:string,email:string,content:text,postId:integer \\\n  --belongs-to=post\n\n# Update associations\nwheels generate property post authorId:integer --belongs-to=author\nwheels generate property post comments --has-many\nwheels generate property author posts --has-many\n\n# Add routes\necho '&lt;cfset resources(\"posts\")&gt;' &gt;&gt; config/routes.cfm\necho '&lt;cfset resources(\"authors\")&gt;' &gt;&gt; config/routes.cfm\n\n# Setup and seed database\nwheels db setup --seed-count=10\n\n# Start development\nwheels server start\nwheels watch\n\n# Visit http://localhost:3000/posts\n</code></pre> <p>You now have a working blog with posts, authors, and comments!</p>"},{"location":"command-line-tools/cli-guides/creating-commands/","title":"Creating Custom Commands Guide","text":"<p>Learn how to extend Wheels CLI with your own custom commands.</p>"},{"location":"command-line-tools/cli-guides/creating-commands/#overview","title":"Overview","text":"<p>Wheels CLI is built on CommandBox, making it easy to add custom commands. Commands can be simple scripts or complex operations using the service architecture.</p>"},{"location":"command-line-tools/cli-guides/creating-commands/#basic-command-structure","title":"Basic Command Structure","text":""},{"location":"command-line-tools/cli-guides/creating-commands/#1-create-command-file","title":"1. Create Command File","text":"<p>Create a new file in <code>/commands/wheels/</code>:</p> <pre><code>// commands/wheels/hello.cfc\ncomponent extends=\"wheels.cli.models.BaseCommand\" {\n\n    /**\n     * Say hello\n     */\n    function run(string name = \"World\") {\n        print.line(\"Hello, #arguments.name#!\");\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#2-run-your-command","title":"2. Run Your Command","text":"<pre><code>wheels hello\n# Output: Hello, World!\n\nwheels hello John\n# Output: Hello, John!\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#command-anatomy","title":"Command Anatomy","text":""},{"location":"command-line-tools/cli-guides/creating-commands/#component-structure","title":"Component Structure","text":"<pre><code>component extends=\"wheels.cli.models.BaseCommand\" {\n\n    // Command metadata\n    property name=\"name\" default=\"mycommand\";\n    property name=\"description\" default=\"Does something useful\";\n\n    // Service injection\n    property name=\"myService\" inject=\"MyService@wheels-cli\";\n\n    /**\n     * Main command entry point\n     * \n     * @name Name of something\n     * @force Force overwrite\n     * @name.hint The name to use\n     * @force.hint Whether to force\n     */\n    function run(\n        required string name,\n        boolean force = false\n    ) {\n        // Command logic here\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#command-help","title":"Command Help","text":"<p>CommandBox generates help from your code:</p> <pre><code>wheels hello --help\n\nNAME\n  wheels hello\n\nSYNOPSIS\n  wheels hello [name]\n\nDESCRIPTION\n  Say hello\n\nARGUMENTS\n  name = World\n    Name to greet\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#advanced-commands","title":"Advanced Commands","text":""},{"location":"command-line-tools/cli-guides/creating-commands/#1-multi-level-commands","title":"1. Multi-Level Commands","text":"<p>Create nested command structure:</p> <pre><code>// commands/wheels/deploy.cfc\ncomponent extends=\"wheels.cli.models.BaseCommand\" {\n    function run() {\n        print.line(\"Usage: wheels deploy [staging|production]\");\n    }\n}\n\n// commands/wheels/deploy/staging.cfc\ncomponent extends=\"wheels.cli.models.BaseCommand\" {\n    function run() {\n        print.line(\"Deploying to staging...\");\n    }\n}\n\n// commands/wheels/deploy/production.cfc\ncomponent extends=\"wheels.cli.models.BaseCommand\" {\n    function run() {\n        print.line(\"Deploying to production...\");\n    }\n}\n</code></pre> <p>Usage: <pre><code>wheels deploy staging\nwheels deploy production\n</code></pre></p>"},{"location":"command-line-tools/cli-guides/creating-commands/#2-interactive-commands","title":"2. Interactive Commands","text":"<p>Get user input:</p> <pre><code>component extends=\"wheels.cli.models.BaseCommand\" {\n\n    function run() {\n        // Simple input\n        var name = ask(\"What's your name? \");\n\n        // Masked input (passwords)\n        var password = ask(\"Enter password: \", \"*\");\n\n        // Confirmation\n        if (confirm(\"Are you sure?\")) {\n            print.line(\"Proceeding...\");\n        }\n\n        // Multiple choice\n        var choice = multiselect()\n            .setQuestion(\"Select features to install:\")\n            .setOptions([\n                \"Authentication\",\n                \"API\",\n                \"Admin Panel\",\n                \"Blog\"\n            ])\n            .ask();\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#3-progress-indicators","title":"3. Progress Indicators","text":"<p>Show progress for long operations:</p> <pre><code>component extends=\"wheels.cli.models.BaseCommand\" {\n\n    function run() {\n        // Progress bar\n        var progressBar = progressBar.create(total=100);\n\n        for (var i = 1; i &lt;= 100; i++) {\n            // Do work\n            sleep(50);\n\n            // Update progress\n            progressBar.update(\n                current = i,\n                message = \"Processing item #i#\"\n            );\n        }\n\n        progressBar.clear();\n        print.greenLine(\"\u2713 Complete!\");\n\n        // Spinner\n        var spinner = progressSpinner.create();\n        spinner.start(\"Loading...\");\n\n        // Do work\n        sleep(2000);\n\n        spinner.stop();\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#using-services","title":"Using Services","text":""},{"location":"command-line-tools/cli-guides/creating-commands/#1-inject-existing-services","title":"1. Inject Existing Services","text":"<pre><code>component extends=\"wheels.cli.models.BaseCommand\" {\n\n    property name=\"codeGenerationService\" inject=\"CodeGenerationService@wheels-cli\";\n    property name=\"templateService\" inject=\"TemplateService@wheels-cli\";\n\n    function run(required string name) {\n        // Use services\n        var template = templateService.getTemplate(\"custom\");\n        var result = codeGenerationService.generateFromTemplate(\n            template = template,\n            data = {name: arguments.name}\n        );\n\n        print.greenLine(\"Generated: #result.path#\");\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#2-create-custom-service","title":"2. Create Custom Service","text":"<pre><code>// models/CustomService.cfc\ncomponent singleton {\n\n    function processData(required struct data) {\n        // Service logic\n        return data;\n    }\n\n}\n\n// Register in ModuleConfig.cfc\nbinder.map(\"CustomService@wheels-cli\")\n    .to(\"wheels.cli.models.CustomService\")\n    .asSingleton();\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#file-operations","title":"File Operations","text":""},{"location":"command-line-tools/cli-guides/creating-commands/#reading-files","title":"Reading Files","text":"<pre><code>function run(required string file) {\n    var filePath = resolvePath(arguments.file);\n\n    if (!fileExists(filePath)) {\n        error(\"File not found: #filePath#\");\n    }\n\n    var content = fileRead(filePath);\n    print.line(content);\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#writing-files","title":"Writing Files","text":"<pre><code>function run(required string name) {\n    var content = \"Hello, #arguments.name#!\";\n    var filePath = resolvePath(\"output.txt\");\n\n    if (fileExists(filePath) &amp;&amp; !confirm(\"Overwrite existing file?\")) {\n        return;\n    }\n\n    fileWrite(filePath, content);\n    print.greenLine(\"\u2713 File created: #filePath#\");\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#directory-operations","title":"Directory Operations","text":"<pre><code>function run(required string dir) {\n    // Create directory\n    ensureDirectoryExists(arguments.dir);\n\n    // List files\n    var files = directoryList(\n        path = resolvePath(arguments.dir),\n        recurse = true,\n        filter = \"*.cfc\"\n    );\n\n    for (var file in files) {\n        print.line(file);\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#output-formatting","title":"Output Formatting","text":""},{"location":"command-line-tools/cli-guides/creating-commands/#colored-output","title":"Colored Output","text":"<pre><code>function run() {\n    // Basic colors\n    print.line(\"Normal text\");\n    print.redLine(\"Error message\");\n    print.greenLine(\"Success message\");\n    print.yellowLine(\"Warning message\");\n    print.blueLine(\"Info message\");\n\n    // Bold\n    print.boldLine(\"Important!\");\n    print.boldRedLine(\"Critical error!\");\n\n    // Inline colors\n    print.line(\"This is #print.red('red')# and #print.green('green')#\");\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#tables","title":"Tables","text":"<pre><code>function run() {\n    // Create table\n    print.table([\n        [\"Name\", \"Type\", \"Size\"],\n        [\"users.cfc\", \"Model\", \"2KB\"],\n        [\"posts.cfc\", \"Model\", \"3KB\"],\n        [\"comments.cfc\", \"Model\", \"1KB\"]\n    ]);\n\n    // With headers\n    var data = queryNew(\"name,type,size\", \"varchar,varchar,varchar\", [\n        [\"users.cfc\", \"Model\", \"2KB\"],\n        [\"posts.cfc\", \"Model\", \"3KB\"]\n    ]);\n\n    print.table(\n        data = data,\n        headers = [\"File Name\", \"Type\", \"File Size\"]\n    );\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#trees","title":"Trees","text":"<pre><code>function run() {\n    print.tree([\n        {\n            label: \"models\",\n            children: [\n                {label: \"User.cfc\"},\n                {label: \"Post.cfc\"},\n                {label: \"Comment.cfc\"}\n            ]\n        },\n        {\n            label: \"controllers\",\n            children: [\n                {label: \"Users.cfc\"},\n                {label: \"Posts.cfc\"}\n            ]\n        }\n    ]);\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#error-handling","title":"Error Handling","text":""},{"location":"command-line-tools/cli-guides/creating-commands/#basic-error-handling","title":"Basic Error Handling","text":"<pre><code>function run(required string file) {\n    try {\n        var content = fileRead(arguments.file);\n        processFile(content);\n        print.greenLine(\"\u2713 Success\");\n    } catch (any e) {\n        print.redLine(\"\u2717 Error: #e.message#\");\n\n        if (arguments.verbose ?: false) {\n            print.line(e.detail);\n            print.line(e.stacktrace);\n        }\n\n        // Set exit code\n        return 1;\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#custom-error-messages","title":"Custom Error Messages","text":"<pre><code>function run(required string name) {\n    // Validation\n    if (!isValidName(arguments.name)) {\n        error(\"Invalid name. Names must be alphanumeric.\");\n    }\n\n    // Warnings\n    if (hasSpecialChars(arguments.name)) {\n        print.yellowLine(\"\u26a0 Warning: Special characters detected\");\n    }\n\n    // Success\n    print.greenLine(\"\u2713 Name is valid\");\n}\n\nprivate function error(required string message) {\n    print.redLine(\"\u2717 #arguments.message#\");\n    exit(1);\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#command-testing","title":"Command Testing","text":""},{"location":"command-line-tools/cli-guides/creating-commands/#unit-testing-commands","title":"Unit Testing Commands","text":"<pre><code>// tests/commands/HelloTest.cfc\ncomponent extends=\"testbox.system.BaseSpec\" {\n\n    function run() {\n        describe(\"Hello Command\", function() {\n\n            it(\"greets with default name\", function() {\n                var result = execute(\"wheels hello\");\n                expect(result).toInclude(\"Hello, World!\");\n            });\n\n            it(\"greets with custom name\", function() {\n                var result = execute(\"wheels hello John\");\n                expect(result).toInclude(\"Hello, John!\");\n            });\n\n        });\n    }\n\n    private function execute(required string command) {\n        // Capture output\n        savecontent variable=\"local.output\" {\n            shell.run(arguments.command);\n        }\n        return local.output;\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#integration-testing","title":"Integration Testing","text":"<pre><code>it(\"generates files correctly\", function() {\n    // Run command\n    execute(\"wheels generate custom test\");\n\n    // Verify files created\n    expect(fileExists(\"/custom/test.cfc\")).toBeTrue();\n\n    // Verify content\n    var content = fileRead(\"/custom/test.cfc\");\n    expect(content).toInclude(\"component\");\n\n    // Cleanup\n    fileDelete(\"/custom/test.cfc\");\n});\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#best-practices","title":"Best Practices","text":""},{"location":"command-line-tools/cli-guides/creating-commands/#1-command-naming","title":"1. Command Naming","text":"<ul> <li>Use verbs for actions: <code>generate</code>, <code>create</code>, <code>deploy</code></li> <li>Use nouns for resources: <code>model</code>, <code>controller</code>, <code>migration</code></li> <li>Be consistent with existing commands</li> </ul>"},{"location":"command-line-tools/cli-guides/creating-commands/#2-argument-validation","title":"2. Argument Validation","text":"<pre><code>function run(required string name, string type = \"default\") {\n    // Validate required\n    if (!len(trim(arguments.name))) {\n        error(\"Name cannot be empty\");\n    }\n\n    // Validate options\n    var validTypes = [\"default\", \"custom\", \"advanced\"];\n    if (!arrayFind(validTypes, arguments.type)) {\n        error(\"Invalid type. Must be one of: #arrayToList(validTypes)#\");\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#3-provide-feedback","title":"3. Provide Feedback","text":"<pre><code>function run() {\n    print.line(\"Starting process...\").toConsole();\n\n    // Show what's happening\n    print.indentedLine(\"\u2192 Loading configuration\");\n    var config = loadConfig();\n\n    print.indentedLine(\"\u2192 Processing files\");\n    var count = processFiles();\n\n    print.indentedLine(\"\u2192 Saving results\");\n    saveResults();\n\n    print.greenBoldLine(\"\u2713 Complete! Processed #count# files.\");\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#4-make-commands-idempotent","title":"4. Make Commands Idempotent","text":"<pre><code>function run(required string name) {\n    var filePath = resolvePath(\"#arguments.name#.txt\");\n\n    // Check if already exists\n    if (fileExists(filePath)) {\n        print.yellowLine(\"File already exists, skipping\");\n        return;\n    }\n\n    // Create file\n    fileWrite(filePath, \"content\");\n    print.greenLine(\"\u2713 Created file\");\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#publishing-commands","title":"Publishing Commands","text":""},{"location":"command-line-tools/cli-guides/creating-commands/#1-package-as-module","title":"1. Package as Module","text":"<p>Create <code>box.json</code>:</p> <pre><code>{\n    \"name\": \"my-wheels-commands\",\n    \"version\": \"1.0.0\",\n    \"type\": \"commandbox-modules\",\n    \"dependencies\": {\n        \"wheels-cli\": \"^3.0.0\"\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#2-module-structure","title":"2. Module Structure","text":"<pre><code>my-wheels-commands/\n\u251c\u2500\u2500 ModuleConfig.cfc\n\u251c\u2500\u2500 commands/\n\u2502   \u2514\u2500\u2500 wheels/\n\u2502       \u2514\u2500\u2500 mycommand.cfc\n\u2514\u2500\u2500 models/\n    \u2514\u2500\u2500 MyService.cfc\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#3-publish-to-forgebox","title":"3. Publish to ForgeBox","text":"<pre><code>box forgebox publish\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#examples","title":"Examples","text":""},{"location":"command-line-tools/cli-guides/creating-commands/#database-backup-command","title":"Database Backup Command","text":"<pre><code>// commands/wheels/db/backup.cfc\ncomponent extends=\"wheels.cli.models.BaseCommand\" {\n\n    property name=\"datasource\" inject=\"coldbox:datasource\";\n\n    function run(string file = \"backup-#dateFormat(now(), 'yyyy-mm-dd')#.sql\") {\n        print.line(\"Creating database backup...\").toConsole();\n\n        var spinner = progressSpinner.create();\n        spinner.start(\"Backing up database\");\n\n        try {\n            // Get database info\n            var dbInfo = getDatabaseInfo();\n\n            // Create backup\n            var backupPath = resolvePath(arguments.file);\n            createBackup(dbInfo, backupPath);\n\n            spinner.stop();\n            print.greenBoldLine(\"\u2713 Backup created: #backupPath#\");\n\n        } catch (any e) {\n            spinner.stop();\n            print.redLine(\"\u2717 Backup failed: #e.message#\");\n            return 1;\n        }\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#code-quality-command","title":"Code Quality Command","text":"<pre><code>// commands/wheels/quality.cfc\ncomponent extends=\"wheels.cli.models.BaseCommand\" {\n\n    property name=\"analysisService\" inject=\"AnalysisService@wheels-cli\";\n\n    function run(string path = \".\", boolean fix = false) {\n        var issues = analysisService.analyze(arguments.path);\n\n        if (arrayLen(issues)) {\n            print.redLine(\"Found #arrayLen(issues)# issues:\");\n\n            for (var issue in issues) {\n                print.line(\"#issue.file#:#issue.line# - #issue.message#\");\n            }\n\n            if (arguments.fix) {\n                print.line().line(\"Attempting fixes...\");\n                var fixed = analysisService.fix(issues);\n                print.greenLine(\"Fixed #fixed# issues\");\n            }\n        } else {\n            print.greenLine(\"\u2713 No issues found!\");\n        }\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/creating-commands/#see-also","title":"See Also","text":"<ul> <li>Service Architecture</li> <li>Testing Guide</li> <li>CommandBox Documentation</li> <li>Contributing to Wheels CLI</li> </ul>"},{"location":"command-line-tools/cli-guides/migrations/","title":"Database Migration Guide","text":"<p>Learn how to manage database schema changes effectively using Wheels CLI migrations.</p>"},{"location":"command-line-tools/cli-guides/migrations/#overview","title":"Overview","text":"<p>Database migrations provide version control for your database schema. They allow you to: - Track schema changes over time - Share database changes with your team - Deploy schema updates safely - Roll back changes if needed - Keep database and code in sync</p>"},{"location":"command-line-tools/cli-guides/migrations/#migration-basics","title":"Migration Basics","text":""},{"location":"command-line-tools/cli-guides/migrations/#what-is-a-migration","title":"What is a Migration?","text":"<p>A migration is a CFC file that describes a database change. Each migration has: - A timestamp-based version number - An <code>up()</code> method to apply changes - An optional <code>down()</code> method to reverse changes</p>"},{"location":"command-line-tools/cli-guides/migrations/#migration-files","title":"Migration Files","text":"<p>Migrations are stored in <code>/app/migrator/migrations/</code> with this naming convention: <pre><code>[YYYYMMDDHHmmss]_[description].cfc\n</code></pre></p> <p>Example: <pre><code>20240125143022_create_users_table.cfc\n20240125143523_add_email_to_users.cfc\n</code></pre></p>"},{"location":"command-line-tools/cli-guides/migrations/#creating-migrations","title":"Creating Migrations","text":""},{"location":"command-line-tools/cli-guides/migrations/#generate-migration-commands","title":"Generate Migration Commands","text":"<pre><code># Create blank migration\nwheels dbmigrate create blank add_status_to_orders\n\n# Create table migration\nwheels dbmigrate create table products\n\n# Add column migration\nwheels dbmigrate create column users email\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#migration-structure","title":"Migration Structure","text":"<p>Basic migration template:</p> <pre><code>component extends=\"wheels.migrator.Migration\" {\n\n    function up() {\n        transaction {\n            // Apply changes\n        }\n    }\n\n    function down() {\n        transaction {\n            // Reverse changes\n        }\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#table-operations","title":"Table Operations","text":""},{"location":"command-line-tools/cli-guides/migrations/#creating-tables","title":"Creating Tables","text":"<pre><code>function up() {\n    transaction {\n        t = createTable(\"products\");\n\n        // Primary key (auto-created as 'id' by default)\n        t.primaryKey(\"productId\"); // Custom primary key\n\n        // Column types\n        t.string(\"name\", limit=100);\n        t.text(\"description\");\n        t.text(\"content\", size=\"mediumtext\"); // MySQL only: mediumtext (16MB)\n        t.text(\"longDescription\", size=\"longtext\"); // MySQL only: longtext (4GB)\n        t.integer(\"quantity\");\n        t.bigInteger(\"views\");\n        t.float(\"weight\");\n        t.decimal(\"price\", precision=10, scale=2);\n        t.boolean(\"active\", default=true);\n        t.date(\"releaseDate\");\n        t.datetime(\"publishedAt\");\n        t.timestamp(\"lastModified\");\n        t.time(\"openingTime\");\n        t.binary(\"data\");\n        t.uuid(\"uniqueId\");\n\n        // Special columns\n        t.timestamps(); // Creates createdAt and updatedAt\n        t.references(\"user\"); // Creates userId foreign key\n\n        // Create the table\n        t.create();\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#table-options","title":"Table Options","text":"<pre><code>function up() {\n    transaction {\n        t = createTable(\"products\", \n            id=false, // Don't create auto-increment id\n            force=true, // Drop if exists\n            options=\"ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\"\n        );\n\n        // Composite primary key\n        t.primaryKey([\"orderId\", \"productId\"]);\n\n        t.create();\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#dropping-tables","title":"Dropping Tables","text":"<pre><code>function down() {\n    transaction {\n        dropTable(\"products\");\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#column-operations","title":"Column Operations","text":""},{"location":"command-line-tools/cli-guides/migrations/#adding-columns","title":"Adding Columns","text":"<pre><code>function up() {\n    transaction {\n        addColumn(\n            table=\"users\",\n            column=\"phoneNumber\",\n            type=\"string\",\n            limit=20,\n            null=true\n        );\n\n        // Multiple columns\n        t = changeTable(\"users\");\n        t.string(\"address\");\n        t.string(\"city\");\n        t.string(\"postalCode\", limit=10);\n        t.update();\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#modifying-columns","title":"Modifying Columns","text":"<pre><code>function up() {\n    transaction {\n        changeColumn(\n            table=\"products\",\n            column=\"price\",\n            type=\"decimal\",\n            precision=12,\n            scale=2,\n            null=false,\n            default=0\n        );\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#renaming-columns","title":"Renaming Columns","text":"<pre><code>function up() {\n    transaction {\n        renameColumn(\n            table=\"users\",\n            column=\"email_address\",\n            newName=\"email\"\n        );\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#removing-columns","title":"Removing Columns","text":"<pre><code>function up() {\n    transaction {\n        removeColumn(table=\"users\", column=\"deprecated_field\");\n\n        // Multiple columns\n        t = changeTable(\"products\");\n        t.removeColumn(\"oldPrice\");\n        t.removeColumn(\"legacyCode\");\n        t.update();\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#index-operations","title":"Index Operations","text":""},{"location":"command-line-tools/cli-guides/migrations/#creating-indexes","title":"Creating Indexes","text":"<pre><code>function up() {\n    transaction {\n        // Simple index\n        addIndex(table=\"users\", column=\"email\");\n\n        // Unique index\n        addIndex(\n            table=\"users\",\n            column=\"username\",\n            unique=true\n        );\n\n        // Composite index\n        addIndex(\n            table=\"products\",\n            columns=\"category,status\",\n            name=\"idx_category_status\"\n        );\n\n        // In table creation\n        t = createTable(\"orders\");\n        t.string(\"orderNumber\");\n        t.index(\"orderNumber\", unique=true);\n        t.create();\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#removing-indexes","title":"Removing Indexes","text":"<pre><code>function down() {\n    transaction {\n        removeIndex(table=\"users\", name=\"idx_users_email\");\n\n        // Or by column\n        removeIndex(table=\"products\", column=\"sku\");\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#foreign-keys","title":"Foreign Keys","text":""},{"location":"command-line-tools/cli-guides/migrations/#adding-foreign-keys","title":"Adding Foreign Keys","text":"<pre><code>function up() {\n    transaction {\n        // Simple foreign key\n        addForeignKey(\n            table=\"orders\",\n            column=\"userId\",\n            referenceTable=\"users\",\n            referenceColumn=\"id\"\n        );\n\n        // With options\n        addForeignKey(\n            table=\"orderItems\",\n            column=\"orderId\",\n            referenceTable=\"orders\",\n            referenceColumn=\"id\",\n            onDelete=\"CASCADE\",\n            onUpdate=\"CASCADE\"\n        );\n\n        // In table creation\n        t = createTable(\"posts\");\n        t.references(\"user\", onDelete=\"SET NULL\");\n        t.references(\"category\", foreignKey=true);\n        t.create();\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#removing-foreign-keys","title":"Removing Foreign Keys","text":"<pre><code>function down() {\n    transaction {\n        removeForeignKey(\n            table=\"orders\",\n            name=\"fk_orders_users\"\n        );\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#data-migrations","title":"Data Migrations","text":""},{"location":"command-line-tools/cli-guides/migrations/#inserting-data","title":"Inserting Data","text":"<pre><code>function up() {\n    transaction {\n        // Single record\n        sql(\"\n            INSERT INTO roles (name, description, createdAt) \n            VALUES ('admin', 'Administrator', NOW())\n        \");\n\n        // Multiple records\n        addRecord(table=\"permissions\", name=\"users.create\");\n        addRecord(table=\"permissions\", name=\"users.read\");\n        addRecord(table=\"permissions\", name=\"users.update\");\n        addRecord(table=\"permissions\", name=\"users.delete\");\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#updating-data","title":"Updating Data","text":"<pre><code>function up() {\n    transaction {\n        updateRecord(\n            table=\"products\",\n            where=\"status IS NULL\",\n            values={status: \"active\"}\n        );\n\n        // Complex updates\n        sql(\"\n            UPDATE users \n            SET fullName = CONCAT(firstName, ' ', lastName)\n            WHERE fullName IS NULL\n        \");\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#removing-data","title":"Removing Data","text":"<pre><code>function down() {\n    transaction {\n        removeRecord(\n            table=\"roles\",\n            where=\"name = 'temp_role'\"\n        );\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#advanced-migrations","title":"Advanced Migrations","text":""},{"location":"command-line-tools/cli-guides/migrations/#conditional-migrations","title":"Conditional Migrations","text":"<pre><code>function up() {\n    transaction {\n        // Check if column exists\n        if (!hasColumn(\"users\", \"avatar\")) {\n            addColumn(table=\"users\", column=\"avatar\", type=\"string\");\n        }\n\n        // Check if table exists\n        if (!hasTable(\"analytics\")) {\n            t = createTable(\"analytics\");\n            t.integer(\"views\");\n            t.timestamps();\n            t.create();\n        }\n\n        // Database-specific\n        if (getDatabaseType() == \"mysql\") {\n            sql(\"ALTER TABLE users ENGINE=InnoDB\");\n        }\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#using-raw-sql","title":"Using Raw SQL","text":"<pre><code>function up() {\n    transaction {\n        // Complex operations\n        sql(\"\n            CREATE VIEW active_products AS\n            SELECT * FROM products\n            WHERE active = 1 AND deletedAt IS NULL\n        \");\n\n        // Stored procedures\n        sql(\"\n            CREATE PROCEDURE CleanupOldData()\n            BEGIN\n                DELETE FROM logs WHERE createdAt &lt; DATE_SUB(NOW(), INTERVAL 90 DAY);\n            END\n        \");\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#environment-specific","title":"Environment-Specific","text":"<pre><code>function up() {\n    transaction {\n        // Always run\n        addColumn(table=\"users\", column=\"lastLoginAt\", type=\"datetime\");\n\n        // Development only\n        if (getEnvironment() == \"development\") {\n            // Add test data\n            for (var i = 1; i &lt;= 100; i++) {\n                addRecord(\n                    table=\"users\",\n                    email=\"test#i#@example.com\",\n                    password=\"hashed_password\"\n                );\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#running-migrations","title":"Running Migrations","text":""},{"location":"command-line-tools/cli-guides/migrations/#basic-commands","title":"Basic Commands","text":"<pre><code># Check migration status\nwheels dbmigrate info\n\n# Run all pending migrations\nwheels dbmigrate latest\n\n# Run next migration only\nwheels dbmigrate up\n\n# Rollback last migration\nwheels dbmigrate down\n\n# Run specific version\nwheels dbmigrate exec 20240125143022\n\n# Reset all migrations\nwheels dbmigrate reset\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#migration-workflow","title":"Migration Workflow","text":"<ol> <li> <p>Create migration <pre><code>wheels dbmigrate create table orders\n</code></pre></p> </li> <li> <p>Edit migration file <pre><code>// Edit /app/migrator/migrations/[timestamp]_create_orders_table.cfc\n</code></pre></p> </li> <li> <p>Test migration <pre><code># Run migration\nwheels dbmigrate latest\n\n# Verify\nwheels dbmigrate info\n\n# Test rollback\nwheels dbmigrate down\n</code></pre></p> </li> <li> <p>Commit and share <pre><code>git add db/migrate/\ngit commit -m \"Add orders table migration\"\n</code></pre></p> </li> </ol>"},{"location":"command-line-tools/cli-guides/migrations/#best-practices","title":"Best Practices","text":""},{"location":"command-line-tools/cli-guides/migrations/#1-always-use-transactions","title":"1. Always Use Transactions","text":"<pre><code>function up() {\n    transaction {\n        // All operations in transaction\n        // Rollback on any error\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#2-make-migrations-reversible","title":"2. Make Migrations Reversible","text":"<pre><code>function up() {\n    transaction {\n        addColumn(table=\"users\", column=\"nickname\", type=\"string\");\n    }\n}\n\nfunction down() {\n    transaction {\n        removeColumn(table=\"users\", column=\"nickname\");\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#3-one-change-per-migration","title":"3. One Change Per Migration","text":"<pre><code># Good: Separate migrations\nwheels dbmigrate create blank add_status_to_orders\nwheels dbmigrate create blank add_priority_to_orders\n\n# Bad: Multiple unrelated changes\nwheels dbmigrate create blank update_orders_and_users\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#4-test-migrations-thoroughly","title":"4. Test Migrations Thoroughly","text":"<pre><code># Test up\nwheels dbmigrate latest\n\n# Test down\nwheels dbmigrate down\n\n# Test up again\nwheels dbmigrate up\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#5-never-modify-completed-migrations","title":"5. Never Modify Completed Migrations","text":"<pre><code># Bad: Editing existing migration\n# Good: Create new migration to fix issues\nwheels dbmigrate create blank fix_orders_status_column\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#common-patterns","title":"Common Patterns","text":""},{"location":"command-line-tools/cli-guides/migrations/#adding-non-nullable-column","title":"Adding Non-Nullable Column","text":"<pre><code>function up() {\n    transaction {\n        // Add nullable first\n        addColumn(table=\"users\", column=\"role\", type=\"string\", null=true);\n\n        // Set default values\n        updateRecord(table=\"users\", where=\"1=1\", values={role: \"member\"});\n\n        // Make non-nullable\n        changeColumn(table=\"users\", column=\"role\", null=false);\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#renaming-table-with-foreign-keys","title":"Renaming Table with Foreign Keys","text":"<pre><code>function up() {\n    transaction {\n        // Drop foreign keys first\n        removeForeignKey(table=\"posts\", name=\"fk_posts_users\");\n\n        // Rename table\n        renameTable(oldName=\"posts\", newName=\"articles\");\n\n        // Recreate foreign keys\n        addForeignKey(\n            table=\"articles\",\n            column=\"userId\",\n            referenceTable=\"users\",\n            referenceColumn=\"id\"\n        );\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#safe-column-removal","title":"Safe Column Removal","text":"<pre><code>function up() {\n    transaction {\n        // First migration: deprecate column\n        if (getEnvironment() != \"production\") {\n            announce(\"Column 'users.oldField' is deprecated and will be removed\");\n        }\n    }\n}\n\n// Later migration (after code deployment)\nfunction up() {\n    transaction {\n        removeColumn(table=\"users\", column=\"oldField\");\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/cli-guides/migrations/#migration-failed","title":"Migration Failed","text":"<pre><code># Check error\nwheels dbmigrate info\n\n# Fix migration file\n# Retry\nwheels dbmigrate latest\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#stuck-migration","title":"Stuck Migration","text":"<pre><code>-- Manually fix schema_migrations table\nDELETE FROM schema_migrations WHERE version = '20240125143022';\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#performance-issues","title":"Performance Issues","text":"<pre><code>function up() {\n    // Increase timeout for large tables\n    setting requestTimeout=\"300\";\n\n    transaction {\n        // Add index without locking (MySQL)\n        sql(\"ALTER TABLE large_table ADD INDEX idx_column (column)\");\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#integration-with-cicd","title":"Integration with CI/CD","text":""},{"location":"command-line-tools/cli-guides/migrations/#pre-deployment-check","title":"Pre-deployment Check","text":"<pre><code>#!/bin/bash\n# Check for pending migrations\nif wheels dbmigrate info | grep -q \"pending\"; then\n    echo \"\u26a0\ufe0f  Pending migrations detected!\"\n    wheels dbmigrate info\n    exit 1\nfi\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#automated-deployment","title":"Automated Deployment","text":"<pre><code># .github/workflows/deploy.yml\n- name: Run migrations\n  run: |\n    wheels dbmigrate latest\n    wheels dbmigrate info\n</code></pre>"},{"location":"command-line-tools/cli-guides/migrations/#see-also","title":"See Also","text":"<ul> <li>wheels dbmigrate commands - Migration command reference</li> <li>Database Schema - Schema import/export</li> <li>Model Generation - Generate models with migrations</li> <li>Testing Guide - Testing migrations</li> </ul>"},{"location":"command-line-tools/cli-guides/service-architecture/","title":"Service Architecture Guide","text":"<p>Understanding the Wheels CLI service layer architecture.</p>"},{"location":"command-line-tools/cli-guides/service-architecture/#overview","title":"Overview","text":"<p>The Wheels CLI uses a service-oriented architecture that separates concerns and provides reusable functionality across commands. This architecture makes the CLI more maintainable, testable, and extensible.</p>"},{"location":"command-line-tools/cli-guides/service-architecture/#architecture-diagram","title":"Architecture Diagram","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502    Commands     \u2502  \u2190 User interacts with\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502    Services     \u2502  \u2190 Business logic\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502     Models      \u2502  \u2190 Data and utilities\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502   Templates     \u2502  \u2190 Code generation\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#core-components","title":"Core Components","text":""},{"location":"command-line-tools/cli-guides/service-architecture/#1-commands-commandswheels","title":"1. Commands (<code>/commands/wheels/</code>)","text":"<p>Commands are the user-facing interface:</p> <pre><code>// commands/wheels/generate/model.cfc\ncomponent extends=\"wheels.cli.models.BaseCommand\" {\n\n    property name=\"codeGenerationService\" inject=\"CodeGenerationService@wheels-cli\";\n    property name=\"migrationService\" inject=\"MigrationService@wheels-cli\";\n\n    function run(\n        required string name,\n        boolean migration = true,\n        string properties = \"\",\n        boolean force = false\n    ) {\n        // Delegate to services\n        var result = codeGenerationService.generateModel(argumentCollection=arguments);\n\n        if (arguments.migration) {\n            migrationService.createTableMigration(arguments.name, arguments.properties);\n        }\n\n        print.greenLine(\"\u2713 Model generated successfully\");\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#2-services-models","title":"2. Services (<code>/models/</code>)","text":"<p>Services contain reusable business logic:</p> <pre><code>// models/CodeGenerationService.cfc\ncomponent accessors=\"true\" singleton {\n\n    property name=\"templateService\" inject=\"TemplateService@wheels-cli\";\n    property name=\"fileService\" inject=\"FileService@wheels-cli\";\n\n    function generateModel(\n        required string name,\n        string properties = \"\",\n        struct associations = {},\n        boolean force = false\n    ) {\n        var modelName = helpers.capitalize(arguments.name);\n        var template = templateService.getTemplate(\"model\");\n        var content = templateService.populateTemplate(template, {\n            modelName: modelName,\n            properties: parseProperties(arguments.properties),\n            associations: arguments.associations\n        });\n\n        return fileService.writeFile(\n            path = \"/models/#modelName#.cfc\",\n            content = content,\n            force = arguments.force\n        );\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#3-base-classes","title":"3. Base Classes","text":""},{"location":"command-line-tools/cli-guides/service-architecture/#basecommand-modelsbasecommandcfc","title":"BaseCommand (<code>/models/BaseCommand.cfc</code>)","text":"<p>All commands extend from BaseCommand:</p> <pre><code>component extends=\"commandbox.system.BaseCommand\" {\n\n    property name=\"print\" inject=\"print\";\n    property name=\"fileSystemUtil\" inject=\"FileSystem\";\n\n    function init() {\n        // Common initialization\n        return this;\n    }\n\n    // Common helper methods\n    function ensureDirectoryExists(required string path) {\n        if (!directoryExists(arguments.path)) {\n            directoryCreate(arguments.path, true);\n        }\n    }\n\n    function resolvePath(required string path) {\n        return fileSystemUtil.resolvePath(arguments.path);\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#service-catalog","title":"Service Catalog","text":""},{"location":"command-line-tools/cli-guides/service-architecture/#core-services","title":"Core Services","text":""},{"location":"command-line-tools/cli-guides/service-architecture/#templateservice","title":"TemplateService","text":"<p>Manages code generation templates with override system: - Template Loading: Searches app snippets first, then CLI templates - Variable Substitution: Replaces placeholders with actual values - Custom Template Support: Apps can override any CLI template - Path Resolution: <code>app/snippets/</code> overrides <code>/cli/templates/</code> - Dynamic Content: Generates form fields, validations, relationships</p> <p>Key features: - Template hierarchy allows project customization - Preserves markers for future CLI additions - Supports conditional logic in templates - Handles both simple and complex placeholders</p> <p>See Template System Guide for detailed documentation.</p>"},{"location":"command-line-tools/cli-guides/service-architecture/#migrationservice","title":"MigrationService","text":"<p>Handles database migrations: - Generate migration files - Track migration status - Execute migrations</p>"},{"location":"command-line-tools/cli-guides/service-architecture/#testservice","title":"TestService","text":"<p>Testing functionality: - Run TestBox tests - Generate coverage reports - Watch mode support</p>"},{"location":"command-line-tools/cli-guides/service-architecture/#codegenerationservice","title":"CodeGenerationService","text":"<p>Centralized code generation: - Generate models, controllers, views - Handle associations - Manage validations</p>"},{"location":"command-line-tools/cli-guides/service-architecture/#feature-services","title":"Feature Services","text":""},{"location":"command-line-tools/cli-guides/service-architecture/#analysisservice","title":"AnalysisService","text":"<p>Code analysis tools: - Complexity analysis - Code style checking - Dependency analysis</p>"},{"location":"command-line-tools/cli-guides/service-architecture/#securityservice","title":"SecurityService","text":"<p>Security scanning: - SQL injection detection - XSS vulnerability scanning - Hardcoded credential detection</p>"},{"location":"command-line-tools/cli-guides/service-architecture/#optimizationservice","title":"OptimizationService","text":"<p>Performance optimization: - Cache analysis - Query optimization - Asset optimization</p>"},{"location":"command-line-tools/cli-guides/service-architecture/#pluginservice","title":"PluginService","text":"<p>Plugin management: - Install/remove plugins - Version management - Dependency resolution</p>"},{"location":"command-line-tools/cli-guides/service-architecture/#environmentservice","title":"EnvironmentService","text":"<p>Environment management: - Environment switching - Configuration management - Docker/Vagrant support</p>"},{"location":"command-line-tools/cli-guides/service-architecture/#dependency-injection","title":"Dependency Injection","text":"<p>Services use WireBox for dependency injection:</p> <pre><code>// In ModuleConfig.cfc\nfunction configure() {\n    // Service mappings\n    binder.map(\"TemplateService@wheels-cli\")\n        .to(\"wheels.cli.models.TemplateService\")\n        .asSingleton();\n\n    binder.map(\"MigrationService@wheels-cli\")\n        .to(\"wheels.cli.models.MigrationService\")\n        .asSingleton();\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#creating-a-new-service","title":"Creating a New Service","text":""},{"location":"command-line-tools/cli-guides/service-architecture/#1-create-service-component","title":"1. Create Service Component","text":"<pre><code>// models/MyNewService.cfc\ncomponent accessors=\"true\" singleton {\n\n    // Inject dependencies\n    property name=\"fileService\" inject=\"FileService@wheels-cli\";\n    property name=\"print\" inject=\"print\";\n\n    function init() {\n        return this;\n    }\n\n    function doSomething(required string input) {\n        // Service logic here\n        return processInput(arguments.input);\n    }\n\n    private function processInput(required string input) {\n        // Private helper methods\n        return arguments.input.trim();\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#2-register-service","title":"2. Register Service","text":"<p>In <code>/ModuleConfig.cfc</code>:</p> <pre><code>binder.map(\"MyNewService@wheels-cli\")\n    .to(\"wheels.cli.models.MyNewService\")\n    .asSingleton();\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#3-use-in-commands","title":"3. Use in Commands","text":"<pre><code>component extends=\"wheels.cli.models.BaseCommand\" {\n\n    property name=\"myNewService\" inject=\"MyNewService@wheels-cli\";\n\n    function run(required string input) {\n        var result = myNewService.doSomething(arguments.input);\n        print.line(result);\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#service-patterns","title":"Service Patterns","text":""},{"location":"command-line-tools/cli-guides/service-architecture/#1-singleton-pattern","title":"1. Singleton Pattern","text":"<p>Most services are singletons:</p> <pre><code>component singleton {\n    // Shared instance across commands\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#2-factory-pattern","title":"2. Factory Pattern","text":"<p>For creating multiple instances:</p> <pre><code>component {\n    function createGenerator(required string type) {\n        switch(arguments.type) {\n            case \"model\":\n                return new ModelGenerator();\n            case \"controller\":\n                return new ControllerGenerator();\n        }\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#3-strategy-pattern","title":"3. Strategy Pattern","text":"<p>For different implementations:</p> <pre><code>component {\n    function setStrategy(required component strategy) {\n        variables.strategy = arguments.strategy;\n    }\n\n    function execute() {\n        return variables.strategy.execute();\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#testing-services","title":"Testing Services","text":""},{"location":"command-line-tools/cli-guides/service-architecture/#unit-testing-services","title":"Unit Testing Services","text":"<pre><code>component extends=\"testbox.system.BaseSpec\" {\n\n    function beforeAll() {\n        // Create service instance\n        variables.templateService = createMock(\"wheels.cli.models.TemplateService\");\n    }\n\n    function run() {\n        describe(\"TemplateService\", function() {\n\n            it(\"loads templates correctly\", function() {\n                var template = templateService.getTemplate(\"model\");\n                expect(template).toBeString();\n                expect(template).toInclude(\"component extends=\"\"Model\"\"\");\n            });\n\n            it(\"substitutes variables\", function() {\n                var result = templateService.populateTemplate(\n                    \"Hello {{name}}\",\n                    {name: \"World\"}\n                );\n                expect(result).toBe(\"Hello World\");\n            });\n\n        });\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#mocking-dependencies","title":"Mocking Dependencies","text":"<pre><code>function beforeAll() {\n    // Create mock\n    mockFileService = createEmptyMock(\"FileService\");\n\n    // Define behavior\n    mockFileService.$(\"writeFile\").$results(true);\n\n    // Inject mock\n    templateService.$property(\n        propertyName = \"fileService\",\n        mock = mockFileService\n    );\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#best-practices","title":"Best Practices","text":""},{"location":"command-line-tools/cli-guides/service-architecture/#1-single-responsibility","title":"1. Single Responsibility","text":"<p>Each service should have one clear purpose:</p> <pre><code>// Good: Focused service\ncomponent name=\"ValidationService\" {\n    function validateModel() {}\n    function validateController() {}\n}\n\n// Bad: Mixed responsibilities\ncomponent name=\"UtilityService\" {\n    function validateModel() {}\n    function sendEmail() {}\n    function generatePDF() {}\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#2-dependency-injection","title":"2. Dependency Injection","text":"<p>Always inject dependencies:</p> <pre><code>// Good: Injected dependency\nproperty name=\"fileService\" inject=\"FileService@wheels-cli\";\n\n// Bad: Direct instantiation\nvariables.fileService = new FileService();\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#3-error-handling","title":"3. Error Handling","text":"<p>Services should handle errors gracefully:</p> <pre><code>function generateFile(required string path) {\n    try {\n        // Attempt operation\n        fileWrite(arguments.path, content);\n        return {success: true};\n    } catch (any e) {\n        // Log error\n        logError(e);\n        // Return error info\n        return {\n            success: false,\n            error: e.message\n        };\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#4-configuration","title":"4. Configuration","text":"<p>Services should be configurable:</p> <pre><code>component {\n    property name=\"settings\" inject=\"coldbox:modulesettings:wheels-cli\";\n\n    function getTimeout() {\n        return variables.settings.timeout ?: 30;\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#service-communication","title":"Service Communication","text":""},{"location":"command-line-tools/cli-guides/service-architecture/#event-driven","title":"Event-Driven","text":"<p>Services can emit events:</p> <pre><code>// In service\nannounce(\"wheels-cli:modelGenerated\", {model: modelName});\n\n// In listener\nfunction onModelGenerated(event, data) {\n    // React to event\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#direct-communication","title":"Direct Communication","text":"<p>Services can call each other:</p> <pre><code>component {\n    property name=\"validationService\" inject=\"ValidationService@wheels-cli\";\n\n    function generateModel() {\n        // Validate first\n        if (!validationService.isValidModelName(name)) {\n            throw(\"Invalid model name\");\n        }\n        // Continue generation\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#extending-services","title":"Extending Services","text":""},{"location":"command-line-tools/cli-guides/service-architecture/#creating-service-plugins","title":"Creating Service Plugins","text":"<pre><code>// models/plugins/MyServicePlugin.cfc\ncomponent implements=\"IServicePlugin\" {\n\n    function enhance(required component service) {\n        // Add new method\n        arguments.service.myNewMethod = function() {\n            return \"Enhanced!\";\n        };\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#service-decorators","title":"Service Decorators","text":"<pre><code>component extends=\"BaseService\" {\n\n    property name=\"decoratedService\";\n\n    function init(required component service) {\n        variables.decoratedService = arguments.service;\n        return this;\n    }\n\n    function doSomething() {\n        // Add behavior\n        log(\"Calling doSomething\");\n        // Delegate\n        return variables.decoratedService.doSomething();\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#performance-considerations","title":"Performance Considerations","text":""},{"location":"command-line-tools/cli-guides/service-architecture/#1-lazy-loading","title":"1. Lazy Loading","text":"<p>Load services only when needed:</p> <pre><code>function getTemplateService() {\n    if (!structKeyExists(variables, \"templateService\")) {\n        variables.templateService = getInstance(\"TemplateService@wheels-cli\");\n    }\n    return variables.templateService;\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#2-caching","title":"2. Caching","text":"<p>Cache expensive operations:</p> <pre><code>component {\n    property name=\"cache\" default={};\n\n    function getTemplate(required string name) {\n        if (!structKeyExists(variables.cache, arguments.name)) {\n            variables.cache[arguments.name] = loadTemplate(arguments.name);\n        }\n        return variables.cache[arguments.name];\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#3-async-operations","title":"3. Async Operations","text":"<p>Use async for long-running tasks:</p> <pre><code>function analyzeLargeCodebase() {\n    thread name=\"analysis-#createUUID()#\" {\n        // Long running analysis\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#debugging-services","title":"Debugging Services","text":""},{"location":"command-line-tools/cli-guides/service-architecture/#enable-debug-logging","title":"Enable Debug Logging","text":"<pre><code>component {\n    property name=\"log\" inject=\"logbox:logger:{this}\";\n\n    function doSomething() {\n        log.debug(\"Starting doSomething with args: #serializeJSON(arguments)#\");\n        // ... logic ...\n        log.debug(\"Completed doSomething\");\n    }\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#service-inspection","title":"Service Inspection","text":"<pre><code># In CommandBox REPL\nrepl&gt; getInstance(\"TemplateService@wheels-cli\")\nrepl&gt; getMetadata(getInstance(\"TemplateService@wheels-cli\"))\n</code></pre>"},{"location":"command-line-tools/cli-guides/service-architecture/#future-enhancements","title":"Future Enhancements","text":"<p>Planned service architecture improvements:</p> <ol> <li>Service Mesh: Inter-service communication layer</li> <li>Service Discovery: Dynamic service registration</li> <li>Circuit Breakers: Fault tolerance patterns</li> <li>Service Metrics: Performance monitoring</li> <li>API Gateway: Unified service access</li> </ol>"},{"location":"command-line-tools/cli-guides/service-architecture/#see-also","title":"See Also","text":"<ul> <li>Creating Custom Commands</li> <li>Template System</li> <li>Testing Guide</li> <li>Contributing Guide</li> </ul>"},{"location":"command-line-tools/cli-guides/template-system/","title":"Template System","text":"<p>The Wheels CLI uses a powerful template system for code generation that allows you to customize the output to match your project's coding standards and conventions.</p>"},{"location":"command-line-tools/cli-guides/template-system/#overview","title":"Overview","text":"<p>The template system enables: - Consistent Code Generation - All generated code follows the same patterns - Project Customization - Override templates to match your project's needs - Markup Control - Customize HTML, CSS frameworks, and JavaScript patterns - Convention Enforcement - Ensure generated code follows your team's standards</p>"},{"location":"command-line-tools/cli-guides/template-system/#how-it-works","title":"How It Works","text":""},{"location":"command-line-tools/cli-guides/template-system/#template-resolution","title":"Template Resolution","text":"<p>When the CLI generates code, it looks for templates in this order:</p> <ol> <li>Application Templates (<code>/app/snippets/</code>)</li> <li>Project-specific templates that override defaults</li> <li> <p>Allows per-project customization</p> </li> <li> <p>CLI Templates (<code>/cli/templates/</code>)</p> </li> <li>Default templates shipped with the CLI</li> <li>Fallback when no app template exists</li> </ol> <p>This hierarchy ensures that your customizations always take precedence over the defaults.</p>"},{"location":"command-line-tools/cli-guides/template-system/#template-processing","title":"Template Processing","text":"<p>Templates are processed through these steps:</p> <ol> <li>Template Loading - The appropriate template file is loaded</li> <li>Placeholder Replacement - Variables and placeholders are replaced with actual values</li> <li>Code Generation - The processed content is written to the destination file</li> </ol>"},{"location":"command-line-tools/cli-guides/template-system/#template-override-system","title":"Template Override System","text":""},{"location":"command-line-tools/cli-guides/template-system/#purpose","title":"Purpose","text":"<p>The template override system allows you to: - Customize generated markup to match your CSS framework (Bootstrap, Tailwind, etc.) - Add project-specific code patterns and conventions - Include custom comments, documentation, or boilerplate - Modify the structure of generated files</p>"},{"location":"command-line-tools/cli-guides/template-system/#creating-custom-templates","title":"Creating Custom Templates","text":"<p>To override a CLI template:</p> <ol> <li> <p>Identify the template you want to customize    <pre><code># View available templates\nls /path/to/wheels/cli/templates/\n</code></pre></p> </li> <li> <p>Create the directory structure in your app    <pre><code>mkdir -p app/snippets/crud\n</code></pre></p> </li> <li> <p>Copy the template to your app    <pre><code>cp /path/to/wheels/cli/templates/crud/_form.txt app/snippets/crud/\n</code></pre></p> </li> <li> <p>Modify the template to match your needs    <pre><code># Edit with your preferred editor\ncode app/snippets/crud/_form.txt\n</code></pre></p> </li> </ol>"},{"location":"command-line-tools/cli-guides/template-system/#example-customizing-form-templates","title":"Example: Customizing Form Templates","text":"<p>Default form template (<code>/cli/templates/crud/_form.txt</code>): <pre><code>&lt;!--- |ObjectNameSingularC| Form Contents ---&gt;\n&lt;cfoutput&gt;\n|FormFields|\n&lt;!--- CLI-Appends-Here ---&gt;\n&lt;/cfoutput&gt;\n</code></pre></p> <p>Custom Bootstrap 5 template (<code>/app/snippets/crud/_form.txt</code>): <pre><code>&lt;!--- |ObjectNameSingularC| Form ---&gt;\n&lt;cfoutput&gt;\n&lt;div class=\"card\"&gt;\n    &lt;div class=\"card-body\"&gt;\n        #errorMessagesFor(\"|ObjectNameSingular|\")#\n\n        &lt;div class=\"form-fields\"&gt;\n            |FormFields|\n        &lt;/div&gt;\n\n        &lt;div class=\"form-actions mt-3\"&gt;\n            #submitTag(value=\"Save\", class=\"btn btn-primary\")#\n            #linkTo(text=\"Cancel\", action=\"index\", class=\"btn btn-secondary\")#\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;!--- CLI-Appends-Here ---&gt;\n&lt;/cfoutput&gt;\n</code></pre></p>"},{"location":"command-line-tools/cli-guides/template-system/#available-templates","title":"Available Templates","text":""},{"location":"command-line-tools/cli-guides/template-system/#model-templates","title":"Model Templates","text":"<ul> <li><code>ModelContent.txt</code> - Base model structure</li> <li><code>dbmigrate/*.txt</code> - Migration templates</li> </ul>"},{"location":"command-line-tools/cli-guides/template-system/#controller-templates","title":"Controller Templates","text":"<ul> <li><code>ControllerContent.txt</code> - Base controller structure</li> <li><code>ApiControllerContent.txt</code> - API controller structure</li> </ul>"},{"location":"command-line-tools/cli-guides/template-system/#view-templates","title":"View Templates","text":"<ul> <li><code>ViewContent.txt</code> - Generic view template</li> <li><code>crud/index.txt</code> - List/index view</li> <li><code>crud/show.txt</code> - Show single record</li> <li><code>crud/new.txt</code> - New record form</li> <li><code>crud/edit.txt</code> - Edit record form</li> <li><code>crud/_form.txt</code> - Form partial</li> </ul>"},{"location":"command-line-tools/cli-guides/template-system/#test-templates","title":"Test Templates","text":"<ul> <li><code>tests/model.txt</code> - Model test structure</li> <li><code>tests/controller.txt</code> - Controller test structure</li> <li><code>tests/view.txt</code> - View test structure</li> </ul>"},{"location":"command-line-tools/cli-guides/template-system/#configuration-templates","title":"Configuration Templates","text":"<ul> <li><code>ConfigAppContent.txt</code> - Application configuration</li> <li><code>ConfigRoutes.txt</code> - Routes configuration</li> <li><code>ConfigDataSourceH2Content.txt</code> - H2 database configuration</li> </ul>"},{"location":"command-line-tools/cli-guides/template-system/#template-variables","title":"Template Variables","text":""},{"location":"command-line-tools/cli-guides/template-system/#object-name-variables","title":"Object Name Variables","text":"<ul> <li><code>|ObjectNameSingular|</code> - Lowercase singular (e.g., \"product\")</li> <li><code>|ObjectNamePlural|</code> - Lowercase plural (e.g., \"products\")</li> <li><code>|ObjectNameSingularC|</code> - Capitalized singular (e.g., \"Product\")</li> <li><code>|ObjectNamePluralC|</code> - Capitalized plural (e.g., \"Products\")</li> </ul>"},{"location":"command-line-tools/cli-guides/template-system/#dynamic-content-variables","title":"Dynamic Content Variables","text":"<ul> <li><code>|FormFields|</code> - Generated form fields based on properties</li> <li><code>|Actions|</code> - Generated controller actions</li> <li><code>{{belongsTo}}</code> - Belongs-to relationship code</li> <li><code>{{hasMany}}</code> - Has-many relationship code</li> <li><code>{{validations}}</code> - Model validation code</li> </ul>"},{"location":"command-line-tools/cli-guides/template-system/#marker-comments","title":"Marker Comments","text":"<ul> <li><code>&lt;!--- CLI-Appends-Here ---&gt;</code> - Marker for future CLI additions</li> <li><code>&lt;!--- CLI-Appends-thead-Here ---&gt;</code> - Table header additions</li> <li><code>&lt;!--- CLI-Appends-tbody-Here ---&gt;</code> - Table body additions</li> </ul>"},{"location":"command-line-tools/cli-guides/template-system/#best-practices","title":"Best Practices","text":""},{"location":"command-line-tools/cli-guides/template-system/#1-version-control-templates","title":"1. Version Control Templates","text":"<p>Always commit your custom templates to version control: <pre><code>git add app/snippets/\ngit commit -m \"Add custom templates for Bootstrap 5\"\n</code></pre></p>"},{"location":"command-line-tools/cli-guides/template-system/#2-document-customizations","title":"2. Document Customizations","text":"<p>Add comments explaining your customizations: <pre><code>&lt;!--- \n    Custom template for Bootstrap 5 forms\n    - Uses card layout\n    - Includes form validation styles\n    - Adds cancel button\n---&gt;\n</code></pre></p>"},{"location":"command-line-tools/cli-guides/template-system/#3-maintain-placeholders","title":"3. Maintain Placeholders","text":"<p>Keep important placeholders and markers: - Always include <code>&lt;!--- CLI-Appends-Here ---&gt;</code> for future additions - Preserve variable placeholders you might need later</p>"},{"location":"command-line-tools/cli-guides/template-system/#4-test-generated-code","title":"4. Test Generated Code","text":"<p>After customizing templates: <pre><code># Generate a test scaffold\nwheels scaffold test properties=name:string\n\n# Verify the output matches expectations\n# Delete test files when done\n</code></pre></p>"},{"location":"command-line-tools/cli-guides/template-system/#5-share-team-templates","title":"5. Share Team Templates","text":"<p>Create a shared template repository for team consistency: <pre><code># Create template package\ncd app/snippets\ntar -czf project-templates.tar.gz *\n\n# Share with team\n</code></pre></p>"},{"location":"command-line-tools/cli-guides/template-system/#advanced-customization","title":"Advanced Customization","text":""},{"location":"command-line-tools/cli-guides/template-system/#conditional-generation","title":"Conditional Generation","text":"<p>Use CFML logic in templates: <pre><code>&lt;cfif arrayLen(properties) GT 5&gt;\n    &lt;!--- Use compact layout for many fields ---&gt;\n    &lt;div class=\"row\"&gt;\n        |FormFields|\n    &lt;/div&gt;\n&lt;cfelse&gt;\n    &lt;!--- Standard layout ---&gt;\n    |FormFields|\n&lt;/cfif&gt;\n</code></pre></p>"},{"location":"command-line-tools/cli-guides/template-system/#custom-placeholders","title":"Custom Placeholders","text":"<p>Add your own placeholders in templates: <pre><code>&lt;!--- |ProjectName| - |GeneratedDate| ---&gt;\n&lt;!--- Version: |Version| ---&gt;\n</code></pre></p> <p>Then handle them in your custom generator commands.</p>"},{"location":"command-line-tools/cli-guides/template-system/#framework-specific-templates","title":"Framework-Specific Templates","text":"<p>Create template sets for different CSS frameworks: <pre><code>app/snippets/\n\u251c\u2500\u2500 bootstrap5/\n\u2502   \u2514\u2500\u2500 crud/\n\u2502       \u251c\u2500\u2500 _form.txt\n\u2502       \u2514\u2500\u2500 index.txt\n\u251c\u2500\u2500 tailwind/\n\u2502   \u2514\u2500\u2500 crud/\n\u2502       \u251c\u2500\u2500 _form.txt\n\u2502       \u2514\u2500\u2500 index.txt\n\u2514\u2500\u2500 crud/  # Current active templates\n    \u251c\u2500\u2500 _form.txt\n    \u2514\u2500\u2500 index.txt\n</code></pre></p> <p>Switch between them by copying to the active directory.</p>"},{"location":"command-line-tools/cli-guides/template-system/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/cli-guides/template-system/#templates-not-being-used","title":"Templates Not Being Used","text":"<ol> <li>Check file paths - ensure templates are in <code>/app/snippets/</code></li> <li>Verify file names match exactly (case-sensitive)</li> <li>Reload CommandBox if changes aren't picked up: <code>box reload</code></li> </ol>"},{"location":"command-line-tools/cli-guides/template-system/#generated-code-has-errors","title":"Generated Code Has Errors","text":"<ol> <li>Check for syntax errors in your template</li> <li>Ensure all placeholders are properly closed</li> <li>Test with a simple template first</li> </ol>"},{"location":"command-line-tools/cli-guides/template-system/#placeholders-not-replaced","title":"Placeholders Not Replaced","text":"<ol> <li>Verify placeholder syntax is exact</li> <li>Check that the data is being passed to the template</li> <li>Some placeholders only work in specific template types</li> </ol>"},{"location":"command-line-tools/cli-guides/template-system/#see-also","title":"See Also","text":"<ul> <li>Creating Commands - Build custom generators</li> <li>Service Architecture - Understand the template service</li> <li>wheels scaffold - Main scaffold documentation</li> </ul>"},{"location":"command-line-tools/cli-guides/testing/","title":"Testing Guide","text":"<p>Comprehensive guide to testing in Wheels applications using the CLI.</p>"},{"location":"command-line-tools/cli-guides/testing/#overview","title":"Overview","text":"<p>Wheels CLI provides robust testing capabilities through TestBox integration, offering: - Unit and integration testing - BDD-style test writing - Watch mode for continuous testing - Code coverage reporting - Parallel test execution - Docker-based testing across multiple engines and databases</p>"},{"location":"command-line-tools/cli-guides/testing/#test-structure","title":"Test Structure","text":""},{"location":"command-line-tools/cli-guides/testing/#directory-layout","title":"Directory Layout","text":"<pre><code>/tests/\n\u251c\u2500\u2500 Application.cfc          # Test suite configuration\n\u251c\u2500\u2500 specs/                   # Test specifications (alternative to folders below)\n\u251c\u2500\u2500 unit/                    # Unit tests\n\u2502   \u251c\u2500\u2500 models/             # Model tests\n\u2502   \u251c\u2500\u2500 controllers/        # Controller tests\n\u2502   \u2514\u2500\u2500 services/           # Service tests\n\u251c\u2500\u2500 integration/            # Integration tests\n\u251c\u2500\u2500 fixtures/               # Test data files\n\u2514\u2500\u2500 helpers/                # Test utilities\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#test-file-naming","title":"Test File Naming","text":"<p>Follow these conventions: - Model tests: <code>UserTest.cfc</code> or <code>UserSpec.cfc</code> - Controller tests: <code>UsersControllerTest.cfc</code> - Integration tests: <code>UserFlowTest.cfc</code></p>"},{"location":"command-line-tools/cli-guides/testing/#writing-tests","title":"Writing Tests","text":""},{"location":"command-line-tools/cli-guides/testing/#basic-test-structure","title":"Basic Test Structure","text":"<pre><code>// tests/unit/models/UserTest.cfc\ncomponent extends=\"testbox.system.BaseSpec\" {\n\n    function run() {\n        describe(\"User Model\", function() {\n\n            beforeEach(function() {\n                // Setup before each test\n                variables.user = model(\"User\").new();\n            });\n\n            afterEach(function() {\n                // Cleanup after each test\n            });\n\n            it(\"validates email presence\", function() {\n                variables.user.email = \"\";\n                expect(variables.user.valid()).toBeFalse();\n                expect(variables.user.errors).toHaveKey(\"email\");\n            });\n\n            it(\"validates email format\", function() {\n                variables.user.email = \"invalid-email\";\n                expect(variables.user.valid()).toBeFalse();\n                expect(variables.user.errors.email).toInclude(\"valid email\");\n            });\n\n        });\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#model-testing","title":"Model Testing","text":"<pre><code>component extends=\"testbox.system.BaseSpec\" {\n\n    function run() {\n        describe(\"Product Model\", function() {\n\n            describe(\"Validations\", function() {\n                it(\"requires a name\", function() {\n                    var product = model(\"Product\").new();\n                    expect(product.valid()).toBeFalse();\n                    expect(product.errors).toHaveKey(\"name\");\n                });\n\n                it(\"requires price to be positive\", function() {\n                    var product = model(\"Product\").new(\n                        name = \"Test Product\",\n                        price = -10\n                    );\n                    expect(product.valid()).toBeFalse();\n                    expect(product.errors.price).toInclude(\"greater than 0\");\n                });\n            });\n\n            describe(\"Associations\", function() {\n                it(\"has many reviews\", function() {\n                    var product = model(\"Product\").findOne();\n                    expect(product).toHaveKey(\"reviews\");\n                    expect(product.reviews()).toBeQuery();\n                });\n            });\n\n            describe(\"Scopes\", function() {\n                it(\"filters active products\", function() {\n                    // Create test data\n                    model(\"Product\").create(name=\"Active\", active=true);\n                    model(\"Product\").create(name=\"Inactive\", active=false);\n\n                    var activeProducts = model(\"Product\").active().findAll();\n                    expect(activeProducts.recordCount).toBe(1);\n                    expect(activeProducts.name).toBe(\"Active\");\n                });\n            });\n\n        });\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#controller-testing","title":"Controller Testing","text":"<pre><code>component extends=\"testbox.system.BaseSpec\" {\n\n    function beforeAll() {\n        // Setup test request context\n        variables.mockController = prepareMock(createObject(\"component\", \"controllers.Products\"));\n    }\n\n    function run() {\n        describe(\"Products Controller\", function() {\n\n            describe(\"index action\", function() {\n                it(\"returns all products\", function() {\n                    // Setup\n                    var products = queryNew(\"id,name\", \"integer,varchar\", [\n                        [1, \"Product 1\"],\n                        [2, \"Product 2\"]\n                    ]);\n\n                    mockController.$(\"model\").$args(\"Product\").$returns(\n                        mockModel.$(\"findAll\").$returns(products)\n                    );\n\n                    // Execute\n                    mockController.index();\n\n                    // Assert\n                    expect(mockController.products).toBe(products);\n                    expect(mockController.products.recordCount).toBe(2);\n                });\n            });\n\n            describe(\"create action\", function() {\n                it(\"creates product with valid data\", function() {\n                    // Setup params\n                    mockController.params = {\n                        product: {\n                            name: \"New Product\",\n                            price: 99.99\n                        }\n                    };\n\n                    // Mock successful save\n                    var mockProduct = createEmptyMock(\"models.Product\");\n                    mockProduct.$(\"save\").$returns(true);\n                    mockProduct.$(\"id\", 123);\n\n                    mockController.$(\"model\").$args(\"Product\").$returns(\n                        createMock(\"models.Product\").$(\"new\").$returns(mockProduct)\n                    );\n\n                    // Execute\n                    mockController.create();\n\n                    // Assert\n                    expect(mockController.flashMessages.success).toInclude(\"created successfully\");\n                    expect(mockController.redirectTo.action).toBe(\"show\");\n                    expect(mockController.redirectTo.key).toBe(123);\n                });\n            });\n\n        });\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#integration-testing","title":"Integration Testing","text":"<pre><code>component extends=\"testbox.system.BaseSpec\" {\n\n    function run() {\n        describe(\"User Registration Flow\", function() {\n\n            it(\"allows new user to register\", function() {\n                // Visit registration page\n                var event = execute(event=\"users.new\", renderResults=true);\n                expect(event.getRenderedContent()).toInclude(\"Register\");\n\n                // Submit registration form\n                var event = execute(\n                    event = \"users.create\",\n                    eventArguments = {\n                        user: {\n                            email: \"test@example.com\",\n                            password: \"SecurePass123!\",\n                            passwordConfirmation: \"SecurePass123!\"\n                        }\n                    }\n                );\n\n                // Verify user created\n                var user = model(\"User\").findOne(where=\"email='test@example.com'\");\n                expect(user).toBeObject();\n\n                // Verify logged in\n                expect(session.userId).toBe(user.id);\n\n                // Verify redirect\n                expect(event.getValue(\"relocate_URI\")).toBe(\"/dashboard\");\n            });\n\n        });\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#test-helpers","title":"Test Helpers","text":""},{"location":"command-line-tools/cli-guides/testing/#creating-test-factories","title":"Creating Test Factories","text":"<pre><code>// tests/helpers/Factories.cfc\ncomponent {\n\n    function createUser(struct overrides = {}) {\n        var defaults = {\n            email: \"user#createUUID()#@test.com\",\n            password: \"password123\",\n            firstName: \"Test\",\n            lastName: \"User\"\n        };\n\n        defaults.append(arguments.overrides);\n        return model(\"User\").create(defaults);\n    }\n\n    function createProduct(struct overrides = {}) {\n        var defaults = {\n            name: \"Product #createUUID()#\",\n            price: randRange(10, 100),\n            stock: randRange(0, 50)\n        };\n\n        defaults.append(arguments.overrides);\n        return model(\"Product\").create(defaults);\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#test-data-management","title":"Test Data Management","text":"<pre><code>// tests/helpers/TestDatabase.cfc\ncomponent {\n\n    function setUp() {\n        // Start transaction\n        transaction action=\"begin\";\n    }\n\n    function tearDown() {\n        // Rollback transaction\n        transaction action=\"rollback\";\n    }\n\n    function clean() {\n        // Clean specific tables\n        queryExecute(\"DELETE FROM users WHERE email LIKE '%@test.com'\");\n        queryExecute(\"DELETE FROM products WHERE name LIKE 'Test%'\");\n    }\n\n    function loadFixtures(required string name) {\n        var fixtures = deserializeJSON(\n            fileRead(\"/tests/fixtures/#arguments.name#.json\")\n        );\n\n        for (var record in fixtures) {\n            queryExecute(\n                \"INSERT INTO #arguments.name# (#structKeyList(record)#)\n                 VALUES (#structKeyList(record, ':')#)\",\n                record\n            );\n        }\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#running-tests","title":"Running Tests","text":""},{"location":"command-line-tools/cli-guides/testing/#basic-commands","title":"Basic Commands","text":"<pre><code># Run all tests\nwheels test run\n\n# Run specific test file\nwheels test run tests/unit/models/UserTest.cfc\n\n# Run tests in directory\nwheels test run tests/unit/models/\n\n# Run with specific reporter\nwheels test run --reporter=json\nwheels test run --reporter=junit --outputFile=results.xml\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#watch-mode","title":"Watch Mode","text":"<pre><code># Watch for changes and rerun tests\nwheels test run --watch\n\n# Watch specific directory\nwheels test run tests/models --watch\n\n# Watch with custom debounce\nwheels test run --watch --watchDelay=1000\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#filtering-tests","title":"Filtering Tests","text":"<pre><code># Run by test bundles\nwheels test run --bundles=models,controllers\n\n# Run by labels\nwheels test run --labels=critical\n\n# Run by test name pattern\nwheels test run --filter=\"user\"\n\n# Exclude patterns\nwheels test run --excludes=\"slow,integration\"\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#code-coverage","title":"Code Coverage","text":""},{"location":"command-line-tools/cli-guides/testing/#generate-coverage-report","title":"Generate Coverage Report","text":"<pre><code># Generate HTML coverage report\nwheels test coverage\n\n# With custom output directory\nwheels test coverage --outputDir=coverage-reports\n\n# Include only specific paths\nwheels test coverage --includes=\"models/,controllers/\"\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#coverage-configuration","title":"Coverage Configuration","text":"<p>In <code>tests/Application.cfc</code>:</p> <pre><code>this.coverage = {\n    enabled: true,\n    includes: [\"models\", \"controllers\"],\n    excludes: [\"tests\", \"wheels\"],\n    outputDir: expandPath(\"/tests/coverage/\"),\n    reportFormats: [\"html\", \"json\"]\n};\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#test-configuration","title":"Test Configuration","text":""},{"location":"command-line-tools/cli-guides/testing/#test-suite-configuration","title":"Test Suite Configuration","text":"<pre><code>// tests/Application.cfc\ncomponent {\n\n    this.name = \"WheelsTestSuite\" &amp; Hash(GetCurrentTemplatePath());\n\n    // Test datasource\n    this.datasources[\"test\"] = {\n        url: \"jdbc:h2:mem:test;MODE=MySQL\",\n        driver: \"org.h2.Driver\"\n    };\n    this.datasource = \"test\";\n\n    // TestBox settings\n    this.testbox = {\n        bundles: [\"tests\"],\n        recurse: true,\n        reporter: \"simple\",\n        reportpath: \"/tests/results\",\n        runner: [\"tests/runner.cfm\"],\n        labels: [],\n        options: {}\n    };\n\n}\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#environment-variables","title":"Environment Variables","text":"<pre><code># Set test environment\nexport WHEELS_ENV=testing\n\n# Set test datasource\nexport WHEELS_TEST_DATASOURCE=myapp_test\n\n# Enable verbose output\nexport TESTBOX_VERBOSE=true\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#testing-best-practices","title":"Testing Best Practices","text":""},{"location":"command-line-tools/cli-guides/testing/#1-test-organization","title":"1. Test Organization","text":"<pre><code>tests/\n\u251c\u2500\u2500 unit/              # Fast, isolated tests\n\u2502   \u251c\u2500\u2500 models/       # One file per model\n\u2502   \u2514\u2500\u2500 services/     # Service layer tests\n\u251c\u2500\u2500 integration/      # Tests with dependencies\n\u2514\u2500\u2500 e2e/             # End-to-end tests\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#2-test-isolation","title":"2. Test Isolation","text":"<pre><code>describe(\"User Model\", function() {\n\n    beforeEach(function() {\n        // Fresh instance for each test\n        variables.user = model(\"User\").new();\n\n        // Clear caches\n        application.wheels.cache.queries = {};\n    });\n\n    afterEach(function() {\n        // Clean up test data\n        if (isDefined(\"variables.user.id\")) {\n            variables.user.delete();\n        }\n    });\n\n});\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#3-descriptive-tests","title":"3. Descriptive Tests","text":"<pre><code>// Good: Descriptive test names\nit(\"validates email format with standard RFC 5322 regex\", function() {\n    // test implementation\n});\n\nit(\"prevents duplicate email addresses case-insensitively\", function() {\n    // test implementation\n});\n\n// Bad: Vague test names\nit(\"works\", function() {\n    // test implementation\n});\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#4-aaa-pattern","title":"4. AAA Pattern","text":"<pre><code>it(\"calculates order total with tax\", function() {\n    // Arrange\n    var order = createOrder();\n    var item1 = createOrderItem(price: 100, quantity: 2);\n    var item2 = createOrderItem(price: 50, quantity: 1);\n    order.addItem(item1);\n    order.addItem(item2);\n\n    // Act\n    var total = order.calculateTotal(taxRate: 0.08);\n\n    // Assert\n    expect(total).toBe(270); // (200 + 50) * 1.08\n});\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#continuous-integration","title":"Continuous Integration","text":""},{"location":"command-line-tools/cli-guides/testing/#github-actions","title":"GitHub Actions","text":"<pre><code>name: Tests\n\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    steps:\n    - uses: actions/checkout@v2\n\n    - name: Setup CommandBox\n      uses: Ortus-Solutions/setup-commandbox@v2.0.0\n\n    - name: Install dependencies\n      run: box install\n\n    - name: Run tests\n      run: |\n        box server start\n        wheels test run --reporter=junit --outputFile=test-results.xml\n\n    - name: Upload test results\n      uses: actions/upload-artifact@v4\n      with:\n        name: test-results\n        path: test-results.xml\n\n    - name: Generate coverage\n      run: wheels test coverage\n\n    - name: Upload coverage\n      uses: codecov/codecov-action@v1\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#pre-commit-hooks","title":"Pre-commit Hooks","text":"<pre><code>#!/bin/bash\n# .git/hooks/pre-commit\n\necho \"Running tests...\"\nwheels test run --labels=unit\n\nif [ $? -ne 0 ]; then\n    echo \"Tests failed! Commit aborted.\"\n    exit 1\nfi\n\necho \"Running linter...\"\nwheels analyze code\n\nif [ $? -ne 0 ]; then\n    echo \"Code quality check failed!\"\n    exit 1\nfi\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#debugging-tests","title":"Debugging Tests","text":""},{"location":"command-line-tools/cli-guides/testing/#using-debug-output","title":"Using Debug Output","text":"<pre><code>it(\"processes data correctly\", function() {\n    var result = processData(testData);\n\n    // Debug output\n    debug(result);\n    writeDump(var=result, abort=false);\n\n    // Conditional debugging\n    if (request.debug ?: false) {\n        writeOutput(\"Result: #serializeJSON(result)#\");\n    }\n\n    expect(result.status).toBe(\"success\");\n});\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#interactive-debugging","title":"Interactive Debugging","text":"<pre><code># Run specific test with debugging\nwheels test debug tests/unit/models/UserTest.cfc\n\n# Enable verbose mode\nwheels test run --verbose\n\n# Show SQL queries\nwheels test run --showSQL\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#performance-testing","title":"Performance Testing","text":""},{"location":"command-line-tools/cli-guides/testing/#load-testing","title":"Load Testing","text":"<pre><code>describe(\"Performance\", function() {\n\n    it(\"handles 1000 concurrent users\", function() {\n        var threads = [];\n\n        for (var i = 1; i &lt;= 1000; i++) {\n            arrayAppend(threads, function() {\n                var result = model(\"Product\").findAll();\n                return result.recordCount;\n            });\n        }\n\n        var start = getTickCount();\n        var results = parallel(threads);\n        var duration = getTickCount() - start;\n\n        expect(duration).toBeLT(5000); // Less than 5 seconds\n        expect(arrayLen(results)).toBe(1000);\n    });\n\n});\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#common-testing-patterns","title":"Common Testing Patterns","text":""},{"location":"command-line-tools/cli-guides/testing/#testing-private-methods","title":"Testing Private Methods","text":"<pre><code>it(\"tests private method\", function() {\n    var user = model(\"User\").new();\n\n    // Use makePublic() for testing\n    makePublic(user, \"privateMethod\");\n\n    var result = user.privateMethod();\n    expect(result).toBe(\"expected\");\n});\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#mocking-external-services","title":"Mocking External Services","text":"<pre><code>it(\"sends email on user creation\", function() {\n    // Mock email service\n    var mockMailer = createEmptyMock(\"services.Mailer\");\n    mockMailer.$(\"send\").$returns(true);\n\n    // Inject mock\n    var user = model(\"User\").new();\n    user.$property(\"mailer\", mockMailer);\n\n    // Test\n    user.save();\n\n    // Verify\n    expect(mockMailer.$times(\"send\")).toBe(1);\n    expect(mockMailer.$callLog().send[1].to).toBe(user.email);\n});\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#docker-based-testing","title":"Docker-Based Testing","text":"<p>Wheels provides a comprehensive Docker environment for testing across multiple CFML engines and databases.</p>"},{"location":"command-line-tools/cli-guides/testing/#quick-start-with-docker","title":"Quick Start with Docker","text":"<pre><code># Start the TestUI and all test containers\ndocker compose --profile all up -d\n\n# Access the TestUI\nopen http://localhost:3000\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#testui-features","title":"TestUI Features","text":"<p>The modern TestUI provides: - Visual Test Runner: Run and monitor tests in real-time - Container Management: Start/stop containers directly from the UI - Multi-Engine Support: Test on Lucee 5/6 and Adobe ColdFusion 2018/2021/2023 - Multi-Database Support: MySQL, PostgreSQL, SQL Server, H2, and Oracle - Pre-flight Checks: Ensures all services are running before tests - Test History: Track test results over time</p>"},{"location":"command-line-tools/cli-guides/testing/#container-management","title":"Container Management","text":"<p>The TestUI includes an API server that allows you to: 1. Click on any stopped engine or database to start it 2. Monitor container health and status 3. View real-time logs 4. No terminal required for basic operations</p>"},{"location":"command-line-tools/cli-guides/testing/#docker-profiles","title":"Docker Profiles","text":"<p>Use profiles to start specific combinations:</p> <pre><code># Just the UI\ndocker compose --profile ui up -d\n\n# Quick test setup (Lucee 5 + MySQL)\ndocker compose --profile quick-test up -d\n\n# All Lucee engines\ndocker compose --profile lucee up -d\n\n# All Adobe engines\ndocker compose --profile adobe up -d\n\n# All databases\ndocker compose --profile db up -d\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#running-tests-via-docker","title":"Running Tests via Docker","text":"<pre><code># Using the CLI inside a container\ndocker exec -it wheels-lucee5-1 wheels test run\n\n# Direct URL access\ncurl http://localhost:60005/wheels/testbox?format=json&amp;db=mysql\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#database-testing","title":"Database Testing","text":"<p>Test against different databases by using the <code>db</code> parameter:</p> <pre><code># MySQL\nwheels test run --db=mysql\n\n# PostgreSQL\nwheels test run --db=postgres\n\n# SQL Server\nwheels test run --db=sqlserver\n\n# H2 (Lucee only)\nwheels test run --db=h2\n\n# Oracle\nwheels test run --db=oracle\n</code></pre>"},{"location":"command-line-tools/cli-guides/testing/#see-also","title":"See Also","text":"<ul> <li>wheels test run - Test execution command</li> <li>wheels test coverage - Coverage generation</li> <li>wheels generate test - Generate test files</li> <li>TestBox Documentation - Complete TestBox guide</li> <li>Docker Testing Guide - Detailed Docker testing documentation</li> </ul>"},{"location":"command-line-tools/commands/","title":"Wheels CLI Command Reference","text":"<p>Complete reference for all Wheels CLI commands organized by category.</p>"},{"location":"command-line-tools/commands/#quick-reference","title":"Quick Reference","text":""},{"location":"command-line-tools/commands/#most-common-commands","title":"Most Common Commands","text":"Command Description <code>wheels generate app [name]</code> Create new application <code>wheels scaffold [name]</code> Generate complete CRUD <code>wheels dbmigrate latest</code> Run database migrations <code>wheels test run</code> Run application tests <code>wheels server start</code> Start development server <code>wheels server status</code> Check server status <code>wheels watch</code> Watch files for changes <code>wheels reload</code> Reload application"},{"location":"command-line-tools/commands/#core-commands","title":"Core Commands","text":"<p>Essential commands for managing your Wheels application.</p> Command Description Documentation <code>wheels init</code> Bootstrap existing app for CLI Details <code>wheels info</code> Display version information Details <code>wheels reload [mode]</code> Reload application Details <code>wheels deps</code> Manage dependencies Details <code>wheels destroy [type] [name]</code> Remove generated code Details <code>wheels watch</code> Watch for file changes Details"},{"location":"command-line-tools/commands/#server-management","title":"Server Management","text":"<p>Enhanced server commands that wrap CommandBox's native functionality with Wheels-specific features.</p> Command Description Documentation <code>wheels server</code> Display server commands help Details <code>wheels server start</code> Start development server Details <code>wheels server stop</code> Stop development server Details <code>wheels server restart</code> Restart server and reload app Details <code>wheels server status</code> Show server status with Wheels info Details <code>wheels server log</code> Tail server logs Details <code>wheels server open</code> Open application in browser Details"},{"location":"command-line-tools/commands/#server-command-features","title":"Server Command Features","text":"<ul> <li>Validates Wheels application directory</li> <li>Shows framework-specific information</li> <li>Integrates with application reload</li> <li>Provides helpful error messages</li> </ul>"},{"location":"command-line-tools/commands/#code-generation","title":"Code Generation","text":"<p>Commands for generating application code and resources.</p> Command Alias Description Documentation <code>wheels generate app</code> <code>wheels new</code> Create new application Details <code>wheels generate app-wizard</code> Interactive app creation Details <code>wheels generate controller</code> <code>wheels g controller</code> Generate controller Details <code>wheels generate model</code> <code>wheels g model</code> Generate model Details <code>wheels generate view</code> <code>wheels g view</code> Generate view Details <code>wheels generate property</code> Add model property Details <code>wheels generate route</code> Generate route Details <code>wheels generate resource</code> REST resource Details <code>wheels generate api-resource</code> API resource (Currently broken) Details <code>wheels generate frontend</code> Frontend code Details <code>wheels generate test</code> Generate tests Details <code>wheels generate snippets</code> Code snippets Details <code>wheels scaffold</code> Complete CRUD Details"},{"location":"command-line-tools/commands/#generator-options","title":"Generator Options","text":"<p>Common options across generators: - <code>--force</code> - Overwrite existing files - <code>--help</code> - Show command help</p>"},{"location":"command-line-tools/commands/#database-commands","title":"Database Commands","text":"<p>Commands for managing database schema and migrations.</p>"},{"location":"command-line-tools/commands/#migration-management","title":"Migration Management","text":"Command Description Documentation <code>wheels dbmigrate info</code> Show migration status Details <code>wheels dbmigrate latest</code> Run all pending migrations Details <code>wheels dbmigrate up</code> Run next migration Details <code>wheels dbmigrate down</code> Rollback last migration Details <code>wheels dbmigrate reset</code> Reset all migrations Details <code>wheels dbmigrate exec [version]</code> Run specific migration Details"},{"location":"command-line-tools/commands/#migration-creation","title":"Migration Creation","text":"Command Description Documentation <code>wheels dbmigrate create blank [name]</code> Create empty migration Details <code>wheels dbmigrate create table [name]</code> Create table migration Details <code>wheels dbmigrate create column [table] [column]</code> Add column migration Details <code>wheels dbmigrate remove table [name]</code> Drop table migration Details"},{"location":"command-line-tools/commands/#database-operations","title":"Database Operations","text":"Command Description Documentation <code>wheels db schema</code> Export/import schema Details <code>wheels db seed</code> Seed database Details"},{"location":"command-line-tools/commands/#testing-commands","title":"Testing Commands","text":"<p>Commands for running and managing tests.</p> Command Description Documentation <code>wheels test [type]</code> Run framework tests Details <code>wheels test run [spec]</code> Run TestBox tests Details <code>wheels test coverage</code> Generate coverage report Details <code>wheels test debug</code> Debug test execution Details"},{"location":"command-line-tools/commands/#test-options","title":"Test Options","text":"<ul> <li><code>--watch</code> - Auto-run on changes</li> <li><code>--reporter</code> - Output format (simple, json, junit)</li> <li><code>--bundles</code> - Specific test bundles</li> <li><code>--labels</code> - Filter by labels</li> </ul>"},{"location":"command-line-tools/commands/#configuration-commands","title":"Configuration Commands","text":"<p>Commands for managing application configuration.</p> Command Description Documentation <code>wheels config list</code> List configuration Details <code>wheels config set [key] [value]</code> Set configuration Details <code>wheels config env</code> Environment config Details"},{"location":"command-line-tools/commands/#environment-management","title":"Environment Management","text":"<p>Commands for managing development environments and application context.</p> Command Description Documentation <code>wheels environment</code> Display/switch environment Details <code>wheels environment set [env]</code> Set environment with reload Details <code>wheels environment list</code> List available environments Details <code>wheels console</code> Interactive REPL console Details <code>wheels runner [script]</code> Execute scripts with context Details"},{"location":"command-line-tools/commands/#legacy-environment-commands","title":"Legacy Environment Commands","text":"Command Description Documentation <code>wheels env</code> Environment base command Details <code>wheels env setup [name]</code> Setup environment Details <code>wheels env list</code> List environments Details <code>wheels env switch [name]</code> Switch environment Details"},{"location":"command-line-tools/commands/#plugin-management","title":"Plugin Management","text":"<p>Commands for managing Wheels plugins.</p> Command Description Documentation <code>wheels plugins</code> Plugin management base command Details <code>wheels plugins list</code> List plugins Details <code>wheels plugins install [name]</code> Install plugin Details <code>wheels plugins remove [name]</code> Remove plugin Details"},{"location":"command-line-tools/commands/#plugin-options","title":"Plugin Options","text":"<ul> <li><code>--global</code> - Install/list globally</li> <li><code>--dev</code> - Development dependency</li> </ul>"},{"location":"command-line-tools/commands/#code-analysis","title":"Code Analysis","text":"<p>Commands for analyzing code quality and patterns.</p> Command Description Documentation <code>wheels analyze</code> Code analysis base command Details <code>wheels analyze code</code> Analyze code quality Details <code>wheels analyze performance</code> Performance analysis Details <code>wheels analyze security</code> Security analysis (deprecated) Details"},{"location":"command-line-tools/commands/#security-commands","title":"Security Commands","text":"<p>Commands for security scanning and hardening.</p> Command Description Documentation <code>wheels security</code> Security management base command Details <code>wheels security scan</code> Scan for vulnerabilities Details"},{"location":"command-line-tools/commands/#security-options","title":"Security Options","text":"<ul> <li><code>--fix</code> - Auto-fix issues</li> <li><code>--path</code> - Specific path to scan</li> </ul>"},{"location":"command-line-tools/commands/#performance-commands","title":"Performance Commands","text":"<p>Commands for optimizing application performance.</p> Command Description Documentation <code>wheels optimize</code> Optimization base command Details <code>wheels optimize performance</code> Optimize application Details"},{"location":"command-line-tools/commands/#documentation-commands","title":"Documentation Commands","text":"<p>Commands for generating and serving documentation.</p> Command Description Documentation <code>wheels docs</code> Documentation base command (Currently broken) Details <code>wheels docs generate</code> Generate documentation Details <code>wheels docs serve</code> Serve documentation Details"},{"location":"command-line-tools/commands/#documentation-options","title":"Documentation Options","text":"<ul> <li><code>--format</code> - Output format (html, markdown)</li> <li><code>--output</code> - Output directory</li> <li><code>--port</code> - Server port</li> </ul>"},{"location":"command-line-tools/commands/#maintenance-commands","title":"Maintenance Commands","text":"<p>Commands for managing application maintenance mode and cleanup tasks.</p> Command Description Documentation <code>wheels maintenance:on</code> Enable maintenance mode Details <code>wheels maintenance:off</code> Disable maintenance mode Details <code>wheels cleanup:logs</code> Remove old log files Details <code>wheels cleanup:tmp</code> Remove temporary files Details <code>wheels cleanup:sessions</code> Remove expired sessions Details"},{"location":"command-line-tools/commands/#maintenance-options","title":"Maintenance Options","text":"<ul> <li><code>--force</code> - Skip confirmation prompts</li> <li><code>--dryRun</code> - Preview changes without executing</li> </ul>"},{"location":"command-line-tools/commands/#cicd-commands","title":"CI/CD Commands","text":"<p>Commands for continuous integration and deployment workflows.</p> Command Description Documentation <code>wheels ci init</code> Initialize CI/CD configuration Details"},{"location":"command-line-tools/commands/#docker-commands","title":"Docker Commands","text":"<p>Commands for Docker container management and deployment.</p> Command Description Documentation <code>wheels docker init</code> Initialize Docker configuration Details <code>wheels docker deploy</code> Deploy using Docker Details"},{"location":"command-line-tools/commands/#deployment-commands","title":"Deployment Commands","text":"<p>Commands for managing application deployments.</p> Command Description Documentation <code>wheels deploy</code> Deployment base command Details <code>wheels deploy audit</code> Audit deployment configuration Details <code>wheels deploy exec</code> Execute deployment Details <code>wheels deploy hooks</code> Manage deployment hooks Details <code>wheels deploy init</code> Initialize deployment Details <code>wheels deploy lock</code> Lock deployment state Details <code>wheels deploy logs</code> View deployment logs Details <code>wheels deploy proxy</code> Configure deployment proxy Details <code>wheels deploy push</code> Push deployment Details <code>wheels deploy rollback</code> Rollback deployment Details <code>wheels deploy secrets</code> Manage deployment secrets Details <code>wheels deploy setup</code> Setup deployment environment Details <code>wheels deploy status</code> Check deployment status Details <code>wheels deploy stop</code> Stop deployment Details"},{"location":"command-line-tools/commands/#deployment-options","title":"Deployment Options","text":"<ul> <li><code>--environment</code> - Target environment</li> <li><code>--force</code> - Force deployment</li> <li><code>--dry-run</code> - Preview changes without deploying</li> </ul>"},{"location":"command-line-tools/commands/#command-patterns","title":"Command Patterns","text":""},{"location":"command-line-tools/commands/#getting-help","title":"Getting Help","text":"<p>Every command supports <code>--help</code>:</p> <pre><code>wheels [command] --help\nwheels generate controller --help\nwheels dbmigrate create table --help\n</code></pre>"},{"location":"command-line-tools/commands/#command-aliases","title":"Command Aliases","text":"<p>Many commands have shorter aliases:</p> <pre><code>wheels g controller users  # Same as: wheels generate controller users\nwheels g model user       # Same as: wheels generate model user\nwheels new myapp         # Same as: wheels generate app myapp\n</code></pre>"},{"location":"command-line-tools/commands/#common-workflows","title":"Common Workflows","text":"<p>Creating a new feature: <pre><code>wheels scaffold name=product properties=name:string,price:decimal\nwheels dbmigrate latest\nwheels test run\n</code></pre></p> <p>Starting development: <pre><code>wheels server start      # Start the server\nwheels watch            # Terminal 1: Watch for file changes\nwheels server log       # Terminal 2: Monitor logs\nwheels test run --watch # Terminal 3: Run tests in watch mode\n</code></pre></p> <p>Deployment preparation: <pre><code>wheels test run\nwheels security scan\nwheels optimize performance\nwheels dbmigrate info\nwheels environment production\n</code></pre></p> <p>Interactive debugging: <pre><code>wheels console                    # Start REPL\nwheels console environment=testing # Test in specific env\nwheels console execute=\"model('User').count()\"  # Quick check\n</code></pre></p> <p>Running maintenance scripts: <pre><code>wheels runner scripts/cleanup.cfm\nwheels runner scripts/migrate.cfm environment=production\nwheels runner scripts/report.cfm params='{\"month\":12}'\n</code></pre></p>"},{"location":"command-line-tools/commands/#environment-variables","title":"Environment Variables","text":"Variable Description Default <code>WHEELS_ENV</code> Environment mode <code>development</code> <code>WHEELS_DATASOURCE</code> Database name From config <code>WHEELS_RELOAD_PASSWORD</code> Reload password From config"},{"location":"command-line-tools/commands/#exit-codes","title":"Exit Codes","text":"Code Description <code>0</code> Success <code>1</code> General error <code>2</code> Invalid arguments <code>3</code> File not found <code>4</code> Permission denied <code>5</code> Database error"},{"location":"command-line-tools/commands/#command-status-notes","title":"Command Status Notes","text":"<p>Some commands in the Wheels CLI are currently in various states of development or maintenance:</p>"},{"location":"command-line-tools/commands/#broken-commands","title":"Broken Commands","text":"<ul> <li><code>wheels docs</code> - Base documentation command is currently broken</li> <li><code>wheels generate api-resource</code> - API resource generation is currently broken</li> </ul>"},{"location":"command-line-tools/commands/#disabled-commands","title":"Disabled Commands","text":"<p>The following commands exist in the codebase but are currently disabled: - Some CI and Docker commands have disabled variants in the codebase</p> <p>These commands may be re-enabled in future versions of Wheels.</p>"},{"location":"command-line-tools/commands/#see-also","title":"See Also","text":"<ul> <li>Installation Guide</li> <li>Quick Start Guide</li> <li>Creating Custom Commands</li> <li>CLI Architecture</li> </ul>"},{"location":"command-line-tools/commands/assets-cache-management/","title":"Asset &amp; Cache Management","text":"<p>The Wheels CLI provides comprehensive commands for managing assets, caches, logs, and temporary files in your application. These commands help optimize performance, clean up disk space, and maintain your application.</p>"},{"location":"command-line-tools/commands/assets-cache-management/#overview","title":"Overview","text":"<p>Asset and cache management commands are organized into four categories:</p> <ul> <li>Asset Commands (<code>wheels assets:*</code>) - Compile, clean, and manage static assets</li> <li>Cache Commands (<code>wheels cache:*</code>) - Clear various application caches</li> <li>Log Commands (<code>wheels log:*</code>) - Manage and view log files</li> <li>Temp Commands (<code>wheels tmp:*</code>) - Clean temporary files and directories</li> </ul>"},{"location":"command-line-tools/commands/assets-cache-management/#asset-management","title":"Asset Management","text":""},{"location":"command-line-tools/commands/assets-cache-management/#precompiling-assets","title":"Precompiling Assets","text":"<p>The <code>wheels assets:precompile</code> command prepares your assets for production deployment by minifying and optimizing them.</p> <pre><code># Basic precompilation\nwheels assets:precompile\n\n# Force recompilation of all assets\nwheels assets:precompile --force\n\n# Target specific environment\nwheels assets:precompile --environment=staging\n</code></pre> <p>What it does: - Minifies JavaScript files (removes comments and whitespace) - Minifies CSS files (removes comments, whitespace, optimizes rules) - Generates cache-busted filenames with MD5 hashes - Creates a manifest.json file mapping original to compiled filenames - Copies images with cache-busted names - Stores all compiled assets in <code>/public/assets/compiled/</code></p> <p>Example manifest.json: <pre><code>{\n  \"application.js\": \"application-a1b2c3d4.min.js\",\n  \"styles.css\": \"styles-e5f6g7h8.min.css\",\n  \"logo.png\": \"logo-i9j0k1l2.png\"\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/assets-cache-management/#cleaning-old-assets","title":"Cleaning Old Assets","text":"<p>The <code>wheels assets:clean</code> command removes old compiled assets while keeping recent versions.</p> <pre><code># Clean old assets (keeps 3 versions by default)\nwheels assets:clean\n\n# Keep 5 versions of each asset\nwheels assets:clean --keep=5\n\n# Preview what would be deleted\nwheels assets:clean --dryRun\n</code></pre> <p>This is useful for: - Freeing disk space after multiple deployments - Keeping a few recent versions for rollback capability - Maintaining a clean assets directory</p>"},{"location":"command-line-tools/commands/assets-cache-management/#removing-all-assets","title":"Removing All Assets","text":"<p>The <code>wheels assets:clobber</code> command completely removes all compiled assets.</p> <pre><code># Remove all compiled assets (with confirmation)\nwheels assets:clobber\n\n# Skip confirmation prompt\nwheels assets:clobber --force\n</code></pre> <p>Warning: This command deletes all compiled assets and the manifest file. You'll need to run <code>wheels assets:precompile</code> again before deploying.</p>"},{"location":"command-line-tools/commands/assets-cache-management/#cache-management","title":"Cache Management","text":""},{"location":"command-line-tools/commands/assets-cache-management/#understanding-cache-types","title":"Understanding Cache Types","text":"<p>Wheels uses several cache types to improve performance:</p> <ul> <li>Query Cache: Stores database query results</li> <li>Page Cache: Stores complete rendered HTML pages</li> <li>Partial Cache: Stores rendered view fragments</li> <li>Action Cache: Stores controller action results</li> <li>SQL Cache: Stores parsed SQL file contents</li> </ul>"},{"location":"command-line-tools/commands/assets-cache-management/#clearing-caches","title":"Clearing Caches","text":"<p>The <code>wheels cache:clear</code> command manages these caches:</p> <pre><code># Clear all caches (with confirmation)\nwheels cache:clear\n\n# Clear all caches without confirmation\nwheels cache:clear --force\n\n# Clear specific cache type\nwheels cache:clear query      # Database query results\nwheels cache:clear page       # Full page cache\nwheels cache:clear partial    # View fragments\nwheels cache:clear action     # Controller actions\nwheels cache:clear sql        # SQL file cache\n</code></pre> <p>Note: The command automatically reloads the application after clearing caches to ensure changes take effect.</p>"},{"location":"command-line-tools/commands/assets-cache-management/#log-management","title":"Log Management","text":""},{"location":"command-line-tools/commands/assets-cache-management/#clearing-log-files","title":"Clearing Log Files","text":"<p>The <code>wheels log:clear</code> command manages application log files:</p> <pre><code># Clear all log files (with confirmation)\nwheels log:clear\n\n# Clear specific environment logs\nwheels log:clear --environment=production\n\n# Clear logs older than 30 days\nwheels log:clear --days=30\n\n# Combine options\nwheels log:clear --environment=production --days=7 --force\n</code></pre>"},{"location":"command-line-tools/commands/assets-cache-management/#tailing-log-files","title":"Tailing Log Files","text":"<p>The <code>wheels log:tail</code> command displays log content in real-time:</p> <pre><code># Tail development log (default)\nwheels log:tail\n\n# Tail production log\nwheels log:tail --environment=production\n\n# Show last 50 lines\nwheels log:tail --lines=50\n\n# Tail specific log file\nwheels log:tail --file=custom.log\n\n# Non-follow mode (just display and exit)\nwheels log:tail --follow=false\n</code></pre> <p>Log Entry Color Coding: - \ud83d\udd34 Red: ERROR level messages - \ud83d\udfe1 Yellow: WARN/WARNING level messages - \ud83d\udd35 Cyan: INFO level messages - \u26aa Grey: DEBUG level messages</p> <p>Press <code>Ctrl+C</code> to stop following the log file.</p>"},{"location":"command-line-tools/commands/assets-cache-management/#temporary-files-management","title":"Temporary Files Management","text":""},{"location":"command-line-tools/commands/assets-cache-management/#clearing-temporary-files","title":"Clearing Temporary Files","text":"<p>The <code>wheels tmp:clear</code> command manages temporary files:</p> <pre><code># Clear all temporary files (with confirmation)\nwheels tmp:clear\n\n# Skip confirmation\nwheels tmp:clear --force\n\n# Clear specific types\nwheels tmp:clear cache        # Cache files only\nwheels tmp:clear sessions     # Session files only\nwheels tmp:clear uploads      # Upload files only\n\n# Clear files older than 7 days\nwheels tmp:clear --days=7\n\n# Combine options\nwheels tmp:clear --type=sessions --days=30 --force\n</code></pre> <p>The command also cleans up empty directories after removing files.</p>"},{"location":"command-line-tools/commands/assets-cache-management/#best-practices","title":"Best Practices","text":""},{"location":"command-line-tools/commands/assets-cache-management/#production-deployment","title":"Production Deployment","text":"<ol> <li> <p>Before Deployment: <pre><code># Compile assets\nwheels assets:precompile --environment=production\n\n# Clean old assets\nwheels assets:clean --keep=3\n</code></pre></p> </li> <li> <p>After Deployment: <pre><code># Clear all caches\nwheels cache:clear all --force\n\n# Monitor logs\nwheels log:tail --environment=production\n</code></pre></p> </li> </ol>"},{"location":"command-line-tools/commands/assets-cache-management/#regular-maintenance","title":"Regular Maintenance","text":"<p>Create a maintenance script for regular cleanup:</p> <pre><code>#!/bin/bash\n# maintenance.sh\n\n# Clear old logs (older than 30 days)\nwheels log:clear --days=30 --force\n\n# Clear old temp files (older than 7 days)\nwheels tmp:clear --days=7 --force\n\n# Clean old assets (keep last 5 versions)\nwheels assets:clean --keep=5\n\n# Clear query cache\nwheels cache:clear query --force\n</code></pre>"},{"location":"command-line-tools/commands/assets-cache-management/#development-workflow","title":"Development Workflow","text":"<p>During development:</p> <pre><code># Watch logs while developing\nwheels log:tail\n\n# Clear cache after model changes\nwheels cache:clear query\n\n# Clear all caches when debugging\nwheels cache:clear all --force\n\n# Clean temp files periodically\nwheels tmp:clear --force\n</code></pre>"},{"location":"command-line-tools/commands/assets-cache-management/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/assets-cache-management/#assets-not-updating","title":"Assets Not Updating","text":"<p>If assets aren't updating in production:</p> <pre><code># Force recompilation\nwheels assets:precompile --force\n\n# Clear all caches\nwheels cache:clear all --force\n\n# Verify manifest\ncat public/assets/compiled/manifest.json\n</code></pre>"},{"location":"command-line-tools/commands/assets-cache-management/#cache-not-clearing","title":"Cache Not Clearing","text":"<p>If caches don't seem to clear:</p> <pre><code># Check cache directories\nls -la tmp/cache/\n\n# Force application reload\nwheels reload --force\n\n# Clear specific cache with reload\nwheels cache:clear query &amp;&amp; wheels reload\n</code></pre>"},{"location":"command-line-tools/commands/assets-cache-management/#log-file-issues","title":"Log File Issues","text":"<p>If log files are missing or not updating:</p> <pre><code># Check log directory\nls -la logs/\n\n# Create new log file\nwheels log:clear --environment=development\n\n# Check permissions\nls -la logs/*.log\n</code></pre>"},{"location":"command-line-tools/commands/assets-cache-management/#disk-space-issues","title":"Disk Space Issues","text":"<p>To free up disk space:</p> <pre><code># Check disk usage\ndu -sh tmp/ logs/ public/assets/compiled/\n\n# Clean everything\nwheels assets:clean --keep=1\nwheels log:clear --days=7 --force\nwheels tmp:clear --force\nwheels cache:clear all --force\n</code></pre>"},{"location":"command-line-tools/commands/assets-cache-management/#configuration","title":"Configuration","text":""},{"location":"command-line-tools/commands/assets-cache-management/#asset-configuration","title":"Asset Configuration","text":"<p>In your Wheels settings:</p> <pre><code>// config/settings.cfm\nset(assetsCacheMinutes = 1440); // 24 hours\nset(assetsPath = \"/assets\");\nset(useAssetFingerprinting = true);\n</code></pre>"},{"location":"command-line-tools/commands/assets-cache-management/#cache-configuration","title":"Cache Configuration","text":"<pre><code>// config/settings.cfm\nset(cacheQueries = true);\nset(cachePages = true);\nset(cachePartials = true);\nset(cacheActions = true);\nset(cacheCullPercentage = 10);\nset(cacheCullInterval = 5);\nset(maximumItemsToCache = 5000);\nset(defaultCacheTime = 60); // minutes\n</code></pre>"},{"location":"command-line-tools/commands/assets-cache-management/#log-configuration","title":"Log Configuration","text":"<pre><code>// config/settings.cfm\nset(logSQL = false); // Set to true in development\nset(logQueries = false); // Set to true for debugging\n</code></pre>"},{"location":"command-line-tools/commands/assets-cache-management/#integration-with-cicd","title":"Integration with CI/CD","text":""},{"location":"command-line-tools/commands/assets-cache-management/#github-actions-example","title":"GitHub Actions Example","text":"<pre><code># .github/workflows/deploy.yml\n- name: Compile Assets\n  run: wheels assets:precompile --environment=production\n\n- name: Clean Old Assets\n  run: wheels assets:clean --keep=3\n\n- name: Clear Caches\n  run: wheels cache:clear all --force\n</code></pre>"},{"location":"command-line-tools/commands/assets-cache-management/#docker-integration","title":"Docker Integration","text":"<pre><code># Dockerfile\nRUN wheels assets:precompile --environment=production\nRUN wheels assets:clean --keep=1\n</code></pre>"},{"location":"command-line-tools/commands/assets-cache-management/#summary","title":"Summary","text":"<p>The asset and cache management commands provide essential tools for maintaining a healthy Wheels application:</p> <ul> <li>Assets: Compile for production, clean old versions, remove all when needed</li> <li>Caches: Clear specific or all caches to ensure fresh data</li> <li>Logs: Monitor in real-time, clean old files to save space</li> <li>Temp Files: Regular cleanup prevents disk space issues</li> </ul> <p>Regular use of these commands as part of your deployment and maintenance routines will keep your application running smoothly and efficiently.</p>"},{"location":"command-line-tools/commands/analysis/analyze-code/","title":"analyze code","text":"<p>Analyzes code quality in your Wheels application, checking for best practices, potential issues, and code standards compliance.</p>"},{"location":"command-line-tools/commands/analysis/analyze-code/#usage","title":"Usage","text":"<pre><code>wheels analyze code [path] [--fix] [--format=&lt;format&gt;] [--severity=&lt;severity&gt;] [--report]\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze-code/#parameters","title":"Parameters","text":"<ul> <li><code>path</code> - (Optional) Path to analyze. Default: current directory (<code>.</code>)</li> <li><code>--fix</code> - (Optional) Attempt to fix issues automatically</li> <li><code>--format</code> - (Optional) Output format: <code>console</code>, <code>json</code>, <code>junit</code>. Default: <code>console</code></li> <li><code>--severity</code> - (Optional) Minimum severity level: <code>info</code>, <code>warning</code>, <code>error</code>. Default: <code>warning</code></li> <li><code>--report</code> - (Optional) Generate HTML report</li> </ul>"},{"location":"command-line-tools/commands/analysis/analyze-code/#description","title":"Description","text":"<p>The <code>analyze code</code> command performs comprehensive code quality analysis on your Wheels application. It checks for:</p> <ul> <li>Code complexity and maintainability</li> <li>Adherence to Wheels coding standards</li> <li>Potential bugs and code smells</li> <li>Duplicate code detection</li> <li>Function length and complexity metrics</li> <li>Variable naming conventions</li> <li>Deprecated function usage</li> </ul>"},{"location":"command-line-tools/commands/analysis/analyze-code/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/analysis/analyze-code/#basic-code-analysis","title":"Basic code analysis","text":"<pre><code>wheels analyze code\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze-code/#analyze-specific-directory","title":"Analyze specific directory","text":"<pre><code>wheels analyze code app/controllers\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze-code/#auto-fix-issues","title":"Auto-fix issues","text":"<pre><code>wheels analyze code --fix\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze-code/#generate-html-report","title":"Generate HTML report","text":"<pre><code>wheels analyze code --report\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze-code/#analyze-with-json-output-for-cicd","title":"Analyze with JSON output for CI/CD","text":"<pre><code>wheels analyze code --format=json\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze-code/#check-only-errors-skip-warnings","title":"Check only errors (skip warnings)","text":"<pre><code>wheels analyze code --severity=error\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze-code/#analyze-and-fix-specific-path-with-report","title":"Analyze and fix specific path with report","text":"<pre><code>wheels analyze code app/models --fix --report\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze-code/#output","title":"Output","text":"<p>The command provides detailed feedback including:</p> <ul> <li>Complexity Score: Cyclomatic complexity for functions</li> <li>Code Standards: Violations of Wheels conventions</li> <li>Duplicate Code: Similar code blocks that could be refactored</li> <li>Suggestions: Recommendations for improvement</li> <li>Metrics Summary: Overall code health indicators</li> </ul>"},{"location":"command-line-tools/commands/analysis/analyze-code/#notes","title":"Notes","text":"<ul> <li>Large codebases may take several minutes to analyze</li> <li>The <code>--fix</code> flag will automatically fix issues where possible</li> <li>HTML reports are saved to the <code>reports/</code> directory with timestamps</li> <li>Integration with CI/CD pipelines is supported via JSON and JUnit output formats</li> <li>Use <code>.wheelscheck</code> config file for custom rules and configurations</li> </ul>"},{"location":"command-line-tools/commands/analysis/analyze-performance/","title":"analyze performance","text":"<p>Analyzes application performance, identifying bottlenecks and optimization opportunities in your Wheels application.</p>"},{"location":"command-line-tools/commands/analysis/analyze-performance/#usage","title":"Usage","text":"<pre><code>wheels analyze performance [--target=&lt;target&gt;] [--duration=&lt;seconds&gt;] [--report] [--threshold=&lt;ms&gt;] [--profile]\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze-performance/#parameters","title":"Parameters","text":"<ul> <li><code>--target</code> - (Optional) Analysis target: <code>all</code>, <code>controller</code>, <code>view</code>, <code>query</code>, <code>memory</code>. Default: <code>all</code></li> <li><code>--duration</code> - (Optional) Duration to run analysis in seconds. Default: <code>30</code></li> <li><code>--report</code> - (Optional) Generate HTML performance report</li> <li><code>--threshold</code> - (Optional) Performance threshold in milliseconds. Default: <code>100</code></li> <li><code>--profile</code> - (Optional) Enable profiling mode</li> </ul>"},{"location":"command-line-tools/commands/analysis/analyze-performance/#description","title":"Description","text":"<p>The <code>analyze performance</code> command profiles your Wheels application to identify performance bottlenecks and provide optimization recommendations. It monitors:</p> <ul> <li>Request execution times</li> <li>Database query performance</li> <li>Memory usage patterns</li> <li>Cache effectiveness</li> <li>View rendering times</li> <li>Component instantiation overhead</li> </ul>"},{"location":"command-line-tools/commands/analysis/analyze-performance/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/analysis/analyze-performance/#basic-performance-analysis","title":"Basic performance analysis","text":"<pre><code>wheels analyze performance\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze-performance/#analyze-for-60-seconds-with-profiling","title":"Analyze for 60 seconds with profiling","text":"<pre><code>wheels analyze performance --duration=60 --profile\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze-performance/#focus-on-database-queries-only","title":"Focus on database queries only","text":"<pre><code>wheels analyze performance --target=query\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze-performance/#show-only-slow-operations-500ms","title":"Show only slow operations (&gt;500ms)","text":"<pre><code>wheels analyze performance --threshold=500\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze-performance/#generate-html-performance-report","title":"Generate HTML performance report","text":"<pre><code>wheels analyze performance --report\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze-performance/#complete-analysis-with-all-options","title":"Complete analysis with all options","text":"<pre><code>wheels analyze performance --target=all --duration=60 --threshold=200 --profile --report\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze-performance/#output","title":"Output","text":"<p>The analysis provides:</p> <ul> <li>Slowest Requests: Top 10 slowest request paths</li> <li>Query Analysis: Slow queries and N+1 query detection</li> <li>Memory Hotspots: Areas of high memory allocation</li> <li>Cache Statistics: Hit/miss ratios for various caches</li> <li>Recommendations: Specific optimization suggestions</li> </ul>"},{"location":"command-line-tools/commands/analysis/analyze-performance/#sample-output","title":"Sample Output","text":"<pre><code>Performance Analysis Results\n===========================\n\nSlowest Requests:\n1. GET /users/search (avg: 850ms, calls: 45)\n2. POST /orders/create (avg: 650ms, calls: 12)\n3. GET /reports/generate (avg: 1200ms, calls: 8)\n\nDatabase Issues:\n- N+1 queries detected in UsersController.index\n- Slow query in Order.findRecent() - 450ms avg\n- Missing index suggested for users.created_at\n\nMemory Usage:\n- High allocation in ReportService.generate()\n- Potential memory leak in SessionManager\n\nRecommendations:\n1. Add eager loading to UsersController.index\n2. Create index on users.created_at\n3. Implement query result caching for Order.findRecent()\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze-performance/#notes","title":"Notes","text":"<ul> <li>Profiling adds minimal overhead to your application</li> <li>Best run in a staging environment with production-like data</li> <li>Can be integrated with APM tools for continuous monitoring</li> <li>Results are aggregated across all application instances</li> </ul>"},{"location":"command-line-tools/commands/analysis/analyze-security/","title":"analyze security (Deprecated)","text":"<p>\u26a0\ufe0f DEPRECATED: This command has been deprecated. Please use <code>wheels security scan</code> instead.</p>"},{"location":"command-line-tools/commands/analysis/analyze-security/#migration-notice","title":"Migration Notice","text":"<p>The <code>analyze security</code> command has been moved to provide better organization and expanded functionality. </p>"},{"location":"command-line-tools/commands/analysis/analyze-security/#old-command-still-works","title":"Old Command (Still Works)","text":"<pre><code>wheels analyze security [path] [--fix] [--report=&lt;format&gt;] [--severity=&lt;level&gt;] [--deep]\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze-security/#new-command","title":"New Command","text":"<pre><code>wheels security scan [path] [--fix] [--output=&lt;format&gt;] [--detailed]\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze-security/#parameter-mapping","title":"Parameter Mapping","text":"<p>When called, the deprecated command forwards parameters to the new command: - <code>path</code> \u2192 <code>path</code> - <code>--fix</code> \u2192 <code>--fix</code> - <code>--report</code> \u2192 <code>--output</code> - <code>--severity</code> \u2192 (handled internally) - <code>--deep</code> \u2192 <code>--detailed</code></p>"},{"location":"command-line-tools/commands/analysis/analyze-security/#why-the-change","title":"Why the Change?","text":"<ul> <li>Better command organization with dedicated security namespace</li> <li>Enhanced scanning capabilities</li> <li>Improved reporting options</li> <li>Integration with security vulnerability databases</li> </ul>"},{"location":"command-line-tools/commands/analysis/analyze-security/#see-also","title":"See Also","text":"<ul> <li>security scan - The replacement command with enhanced features</li> </ul>"},{"location":"command-line-tools/commands/analysis/analyze-security/#deprecation-timeline","title":"Deprecation Timeline","text":"<ul> <li>Deprecated: v1.5.0</li> <li>Warning Added: v1.6.0</li> <li>Removal Planned: v2.0.0</li> </ul> <p>The command currently redirects to <code>wheels security scan</code> with a deprecation warning.</p>"},{"location":"command-line-tools/commands/analysis/analyze/","title":"wheels analyze","text":"<p>Base command for code analysis and quality checks.</p>"},{"location":"command-line-tools/commands/analysis/analyze/#synopsis","title":"Synopsis","text":"<pre><code>wheels analyze [subcommand] [options]\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze/#description","title":"Description","text":"<p>The <code>wheels analyze</code> command provides comprehensive code analysis tools for Wheels applications. It helps identify code quality issues, performance bottlenecks, security vulnerabilities, and provides actionable insights for improvement.</p>"},{"location":"command-line-tools/commands/analysis/analyze/#subcommands","title":"Subcommands","text":"Command Description <code>code</code> Analyze code quality and patterns <code>performance</code> Analyze performance characteristics <code>security</code> Security vulnerability analysis (deprecated)"},{"location":"command-line-tools/commands/analysis/analyze/#options","title":"Options","text":"Option Description <code>--help</code> Show help information <code>--version</code> Show version information"},{"location":"command-line-tools/commands/analysis/analyze/#direct-usage","title":"Direct Usage","text":"<p>When called without subcommands, runs all analyses:</p> <pre><code>wheels analyze\n</code></pre> <p>This executes: 1. Code quality analysis 2. Performance analysis 3. Security scanning (if not deprecated)</p>"},{"location":"command-line-tools/commands/analysis/analyze/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/analysis/analyze/#run-all-analyses","title":"Run all analyses","text":"<pre><code>wheels analyze\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze/#quick-analysis-with-summary","title":"Quick analysis with summary","text":"<pre><code>wheels analyze --summary\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze/#analyze-specific-directory","title":"Analyze specific directory","text":"<pre><code>wheels analyze --path=./models\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze/#generate-analysis-report","title":"Generate analysis report","text":"<pre><code>wheels analyze --report=html --output=./analysis-report\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze/#analysis-overview","title":"Analysis Overview","text":"<p>The analyze command examines:</p>"},{"location":"command-line-tools/commands/analysis/analyze/#code-quality","title":"Code Quality","text":"<ul> <li>Coding standards compliance</li> <li>Code complexity metrics</li> <li>Duplication detection</li> <li>Best practices adherence</li> </ul>"},{"location":"command-line-tools/commands/analysis/analyze/#performance","title":"Performance","text":"<ul> <li>N+1 query detection</li> <li>Slow query identification</li> <li>Memory usage patterns</li> <li>Cache effectiveness</li> </ul>"},{"location":"command-line-tools/commands/analysis/analyze/#security","title":"Security","text":"<ul> <li>SQL injection risks</li> <li>XSS vulnerabilities</li> <li>Insecure configurations</li> <li>Outdated dependencies</li> </ul>"},{"location":"command-line-tools/commands/analysis/analyze/#output-example","title":"Output Example","text":"<pre><code>Wheels Code Analysis Report\n==========================\n\nCode Quality\n------------\n\u2713 Files analyzed: 234\n\u2713 Total lines: 12,456\n\u26a0 Issues found: 23\n  - High priority: 3\n  - Medium priority: 12\n  - Low priority: 8\n\nPerformance\n-----------\n\u2713 Queries analyzed: 156\n\u26a0 Potential N+1 queries: 4\n\u26a0 Slow queries detected: 2\n\u2713 Cache hit ratio: 87%\n\nSecurity (Deprecated)\n--------------------\n! Security analysis has been deprecated\n! Use 'wheels security scan' instead\n\nSummary Score: B+ (82/100)\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze/#analysis-configuration","title":"Analysis Configuration","text":"<p>Configure via <code>.wheels-analysis.json</code>:</p> <pre><code>{\n  \"analyze\": {\n    \"exclude\": [\n      \"vendor/**\",\n      \"tests/**\",\n      \"*.min.js\"\n    ],\n    \"rules\": {\n      \"complexity\": {\n        \"maxComplexity\": 10,\n        \"maxDepth\": 4\n      },\n      \"duplication\": {\n        \"minLines\": 5,\n        \"threshold\": 0.05\n      }\n    },\n    \"performance\": {\n      \"slowQueryThreshold\": 1000,\n      \"cacheTargetRatio\": 0.8\n    }\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze/#integration-with-cicd","title":"Integration with CI/CD","text":""},{"location":"command-line-tools/commands/analysis/analyze/#github-actions-example","title":"GitHub Actions Example","text":"<pre><code>- name: Run code analysis\n  run: |\n    wheels analyze --format=json --output=analysis.json\n    wheels analyze --format=badge &gt; analysis-badge.svg\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze/#quality-gates","title":"Quality Gates","text":"<p>Set minimum scores: <pre><code>wheels analyze --min-score=80 --fail-on-issues=high\n</code></pre></p>"},{"location":"command-line-tools/commands/analysis/analyze/#report-formats","title":"Report Formats","text":""},{"location":"command-line-tools/commands/analysis/analyze/#html-report","title":"HTML Report","text":"<p><pre><code>wheels analyze --report=html\n</code></pre> - Interactive dashboard - Detailed issue breakdown - Code snippets with issues</p>"},{"location":"command-line-tools/commands/analysis/analyze/#json-report","title":"JSON Report","text":"<p><pre><code>wheels analyze --format=json\n</code></pre> - Machine-readable format - CI/CD integration - Custom processing</p>"},{"location":"command-line-tools/commands/analysis/analyze/#markdown-report","title":"Markdown Report","text":"<p><pre><code>wheels analyze --format=markdown\n</code></pre> - Documentation-friendly - Pull request comments - Wiki integration</p>"},{"location":"command-line-tools/commands/analysis/analyze/#analysis-rules","title":"Analysis Rules","text":""},{"location":"command-line-tools/commands/analysis/analyze/#built-in-rules","title":"Built-in Rules","text":"<ul> <li>CFScript best practices</li> <li>SQL query optimization</li> <li>Security patterns</li> <li>Memory management</li> </ul>"},{"location":"command-line-tools/commands/analysis/analyze/#custom-rules","title":"Custom Rules","text":"<p>Create custom rules in <code>.wheels-analysis-rules/</code>: <pre><code>module.exports = {\n  name: \"custom-rule\",\n  check: function(file, content) {\n    // Rule implementation\n  }\n};\n</code></pre></p>"},{"location":"command-line-tools/commands/analysis/analyze/#baseline","title":"Baseline","text":"<p>Track improvement over time:</p> <pre><code># Create baseline\nwheels analyze --save-baseline\n\n# Compare with baseline\nwheels analyze --compare-baseline\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze/#ignoring-issues","title":"Ignoring Issues","text":""},{"location":"command-line-tools/commands/analysis/analyze/#inline-comments","title":"Inline Comments","text":"<pre><code>// wheels-analyze-ignore-next-line\ncomplexQuery = ormExecuteQuery(sql, params);\n\n/* wheels-analyze-ignore-start */\n// Complex code block\n/* wheels-analyze-ignore-end */\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze/#configuration-file","title":"Configuration File","text":"<pre><code>{\n  \"ignore\": [\n    {\n      \"rule\": \"sql-injection\",\n      \"file\": \"legacy/*.cfc\"\n    }\n  ]\n}\n</code></pre>"},{"location":"command-line-tools/commands/analysis/analyze/#performance-tips","title":"Performance Tips","text":"<ol> <li>Incremental Analysis: Analyze only changed files</li> <li>Parallel Processing: Use multiple cores</li> <li>Cache Results: Reuse analysis for unchanged files</li> <li>Focused Scans: Target specific directories</li> </ol>"},{"location":"command-line-tools/commands/analysis/analyze/#use-cases","title":"Use Cases","text":"<ol> <li>Pre-commit Hooks: Catch issues before commit</li> <li>Pull Request Checks: Automated code review</li> <li>Technical Debt: Track and reduce over time</li> <li>Team Standards: Enforce coding guidelines</li> <li>Performance Monitoring: Identify bottlenecks</li> </ol>"},{"location":"command-line-tools/commands/analysis/analyze/#best-practices","title":"Best Practices","text":"<ol> <li>Run analysis regularly</li> <li>Fix high-priority issues first</li> <li>Set realistic quality gates</li> <li>Track metrics over time</li> <li>Integrate with development workflow</li> </ol>"},{"location":"command-line-tools/commands/analysis/analyze/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/analysis/analyze/#analysis-takes-too-long","title":"Analysis Takes Too Long","text":"<ul> <li>Exclude vendor directories</li> <li>Use incremental mode</li> <li>Increase memory allocation</li> </ul>"},{"location":"command-line-tools/commands/analysis/analyze/#too-many-false-positives","title":"Too Many False Positives","text":"<ul> <li>Tune rule sensitivity</li> <li>Add specific ignores</li> <li>Update rule definitions</li> </ul>"},{"location":"command-line-tools/commands/analysis/analyze/#notes","title":"Notes","text":"<ul> <li>First run may take longer due to initial scanning</li> <li>Results are cached for performance</li> <li>Some rules require database connection</li> <li>Memory usage scales with codebase size</li> </ul>"},{"location":"command-line-tools/commands/analysis/analyze/#see-also","title":"See Also","text":"<ul> <li>wheels analyze code - Code quality analysis</li> <li>wheels analyze performance - Performance analysis</li> <li>wheels security scan - Security scanning</li> <li>wheels test - Run tests</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/","title":"Application Utilities Commands","text":"<p>The Application Utilities commands provide essential tools for inspecting, analyzing, and managing your Wheels application. These commands help you understand your application's structure, health, and performance.</p>"},{"location":"command-line-tools/commands/application-utilities/#available-commands","title":"Available Commands","text":""},{"location":"command-line-tools/commands/application-utilities/#route-management","title":"Route Management","text":"<ul> <li><code>wheels routes</code> - Display all application routes</li> <li><code>wheels routes:match</code> - Find which route matches a given URL</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/#application-information","title":"Application Information","text":"<ul> <li><code>wheels about</code> - Display comprehensive application information</li> <li><code>wheels version</code> - Show version information</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/#code-analysis","title":"Code Analysis","text":"<ul> <li><code>wheels stats</code> - Display code statistics for your application</li> <li><code>wheels notes</code> - Extract and display code annotations (TODO, FIXME, etc.)</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/#health-dependencies","title":"Health &amp; Dependencies","text":"<ul> <li><code>wheels doctor</code> - Run health checks on your application</li> <li><code>wheels deptree</code> - Display dependency tree</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/#quick-examples","title":"Quick Examples","text":""},{"location":"command-line-tools/commands/application-utilities/#inspect-routes","title":"Inspect Routes","text":"<pre><code># Show all routes\nwheels routes\n\n# Filter routes\nwheels routes name=users\n\n# Output as JSON\nwheels routes format=json\n\n# Find matching route\nwheels routes:match /users/123 method=GET\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/#analyze-code","title":"Analyze Code","text":"<pre><code># Get code statistics\nwheels stats\n\n# Extract TODOs and FIXMEs\nwheels notes\n\n# Run health check\nwheels doctor\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/#check-dependencies","title":"Check Dependencies","text":"<pre><code># Show dependency tree\nwheels deptree\n\n# Show only production dependencies\nwheels deptree production=true\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/#common-use-cases","title":"Common Use Cases","text":""},{"location":"command-line-tools/commands/application-utilities/#1-understanding-application-structure","title":"1. Understanding Application Structure","text":"<p>When you're new to a Wheels application or returning after some time: <pre><code># Get overview\nwheels about\n\n# Check routes\nwheels routes\n\n# See code statistics\nwheels stats\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/#2-code-quality-review","title":"2. Code Quality Review","text":"<p>Before committing code or during code reviews: <pre><code># Check for TODOs\nwheels notes\n\n# Run health checks\nwheels doctor\n\n# Review statistics\nwheels stats verbose=true\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/#3-debugging-route-issues","title":"3. Debugging Route Issues","text":"<p>When a URL isn't working as expected: <pre><code># Find matching route\nwheels routes:match /api/users/123\n\n# Check all user routes\nwheels routes name=user\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/#4-dependency-management","title":"4. Dependency Management","text":"<p>When updating or auditing dependencies: <pre><code># View full dependency tree\nwheels deptree\n\n# Check production dependencies only\nwheels deptree production=true\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/#best-practices","title":"Best Practices","text":"<ol> <li> <p>Regular Health Checks: Run <code>wheels doctor</code> regularly to catch configuration issues early</p> </li> <li> <p>Track Technical Debt: Use <code>wheels notes</code> to track TODOs and technical debt</p> </li> <li> <p>Monitor Code Growth: Use <code>wheels stats</code> to monitor code growth and maintain good test coverage</p> </li> <li> <p>Document Routes: Keep route names descriptive and use <code>wheels routes</code> to verify routing setup</p> </li> <li> <p>Dependency Audits: Regularly check dependencies with <code>wheels deptree</code> to identify outdated or unnecessary packages</p> </li> </ol>"},{"location":"command-line-tools/commands/application-utilities/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels test</code> - Run tests to ensure code quality</li> <li><code>wheels analyze</code> - Deep code analysis</li> <li><code>wheels deps</code> - Manage Wheels-specific dependencies</li> <li><code>wheels env</code> - Manage environments</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/#tips","title":"Tips","text":"<ul> <li>Use <code>wheels doctor</code> before deploying to catch potential issues</li> <li>Export route information with <code>wheels routes format=json</code> for documentation</li> <li>Combine <code>wheels stats</code> with <code>wheels test:coverage</code> for comprehensive code metrics</li> <li>Use <code>wheels notes custom=HACK,REVIEW</code> to track custom annotations</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/about/","title":"wheels about","text":"<p>Display comprehensive information about your Wheels application and environment.</p>"},{"location":"command-line-tools/commands/application-utilities/about/#synopsis","title":"Synopsis","text":"<pre><code>wheels about\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/about/#description","title":"Description","text":"<p>The <code>about</code> command provides a complete overview of your Wheels application, including framework versions, environment details, configuration status, and application statistics. It's your go-to command for understanding the current state of your application.</p>"},{"location":"command-line-tools/commands/application-utilities/about/#options","title":"Options","text":"<p>This command has no options.</p>"},{"location":"command-line-tools/commands/application-utilities/about/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/application-utilities/about/#basic-usage","title":"Basic Usage","text":"<pre><code>wheels about\n</code></pre> <p>Output: <pre><code>  _____ _______          ___               _     \n / ____|  ____\\ \\        / / |             | |    \n| |    | |__   \\ \\  /\\  / /| |__   ___  ___| |___ \n| |    |  __|   \\ \\/  \\/ / | '_ \\ / _ \\/ _ \\ / __|\n| |____| |       \\  /\\  /  | | | |  __/  __/ \\__ \\\n \\_____|_|        \\/  \\/   |_| |_|\\___|\\___|_|___/\n\nWheels Framework\n  Version: 2.5.0\n\nWheels CLI\n  Version: 1.0.0\n  Location: /commandbox/modules/cfwheels-cli/\n\nApplication\n  Path: /Users/developer/myapp\n  Name: MyWheelsApp\n  Environment: development\n  Database: Configured\n\nServer Environment\n  CFML Engine: Lucee 5.4.1.8\n  Java Version: 11.0.15\n  OS: macOS 13.0\n  Architecture: x86_64\n\nCommandBox\n  Version: 5.9.0\n  Home: /Users/developer/.CommandBox\n\nApplication Statistics\n  Controllers: 12\n  Models: 8\n  Views: 45\n  Tests: 23\n  Migrations: 15\n\nResources\n  Documentation: https://guides.cfwheels.org\n  API Reference: https://api.cfwheels.org\n  GitHub: https://github.com/cfwheels/cfwheels\n  Community: https://community.cfwheels.org\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/about/#information-sections","title":"Information Sections","text":""},{"location":"command-line-tools/commands/application-utilities/about/#wheels-framework","title":"Wheels Framework","text":"<ul> <li>Version: The version of CFWheels framework installed</li> <li>Shows the core framework version your app is using</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/about/#wheels-cli","title":"Wheels CLI","text":"<ul> <li>Version: Version of the Wheels CLI module</li> <li>Location: Where the CLI module is installed</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/about/#application","title":"Application","text":"<ul> <li>Path: Current application directory</li> <li>Name: Application name from Application.cfc</li> <li>Environment: Current environment (development/testing/production)</li> <li>Database: Whether database is configured</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/about/#server-environment","title":"Server Environment","text":"<ul> <li>CFML Engine: Lucee or Adobe ColdFusion with version</li> <li>Java Version: JVM version being used</li> <li>OS: Operating system name and version</li> <li>Architecture: System architecture (x86_64, arm64, etc.)</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/about/#commandbox","title":"CommandBox","text":"<ul> <li>Version: CommandBox version</li> <li>Home: CommandBox home directory</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/about/#application-statistics","title":"Application Statistics","text":"<ul> <li>Controllers: Number of controller CFCs</li> <li>Models: Number of model CFCs</li> <li>Views: Number of view templates</li> <li>Tests: Number of test files</li> <li>Migrations: Number of database migrations</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/about/#resources","title":"Resources","text":"<p>Quick links to: - Official documentation - API reference - GitHub repository - Community forums</p>"},{"location":"command-line-tools/commands/application-utilities/about/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/application-utilities/about/#1-environment-verification","title":"1. Environment Verification","text":"<p>Before deployment or when debugging: <pre><code>wheels about\n</code></pre> Check that: - Correct Wheels version is installed - Environment is set properly - Database is configured</p>"},{"location":"command-line-tools/commands/application-utilities/about/#2-new-team-member-onboarding","title":"2. New Team Member Onboarding","text":"<p>Help new developers understand: - Application structure (controllers, models, views count) - Development environment setup - Where to find documentation</p>"},{"location":"command-line-tools/commands/application-utilities/about/#3-troubleshooting","title":"3. Troubleshooting","text":"<p>When reporting issues: <pre><code>wheels about &gt; environment-info.txt\n</code></pre> Share the output to provide complete context.</p>"},{"location":"command-line-tools/commands/application-utilities/about/#4-project-documentation","title":"4. Project Documentation","text":"<p>Include output in project README to document: - Required Wheels version - CFML engine requirements - Application structure overview</p>"},{"location":"command-line-tools/commands/application-utilities/about/#environment-detection","title":"Environment Detection","text":"<p>The command detects the environment through: 1. <code>server.json</code> WHEELS_ENV setting 2. System environment variable WHEELS_ENV 3. Default to \"development\" if not set</p>"},{"location":"command-line-tools/commands/application-utilities/about/#database-configuration","title":"Database Configuration","text":"<p>Database status is determined by checking: 1. <code>config/settings.cfm</code> for datasource settings 2. <code>.env</code> file for database environment variables 3. Presence of database-related configuration</p>"},{"location":"command-line-tools/commands/application-utilities/about/#statistics-collection","title":"Statistics Collection","text":"<p>Statistics are gathered by counting files in: - <code>/app/controllers/*.cfc</code> - Controllers - <code>/app/models/*.cfc</code> - Models - <code>/app/views/**/*.cfm</code> - Views - <code>/tests/**/*.cfc</code> - Tests - <code>/db/migrate/*.cfc</code> - Migrations</p>"},{"location":"command-line-tools/commands/application-utilities/about/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels version</code> - Show just version information</li> <li><code>wheels doctor</code> - Run health checks</li> <li><code>wheels stats</code> - Detailed code statistics</li> <li><code>wheels env</code> - Manage environments</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/about/#tips","title":"Tips","text":"<ul> <li>Run <code>wheels about</code> when starting work on an unfamiliar project</li> <li>Include output in bug reports for better troubleshooting</li> <li>Use to verify environment after deployment</li> <li>Check before upgrading Wheels or CFML engine</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/about/#customization","title":"Customization","text":"<p>The application name is read from: <pre><code>// Application.cfc\nthis.name = \"MyWheelsApp\";\n</code></pre></p> <p>Environment can be set via: <pre><code>// server.json\n{\n  \"env\": {\n    \"WHEELS_ENV\": \"production\"\n  }\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/about/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/application-utilities/about/#missing-information","title":"Missing Information","text":"<p>If some information is missing: - Application Name: Check Application.cfc has <code>this.name</code> set - Database Status: Ensure database configuration exists - Statistics: Verify directory structure follows Wheels conventions</p>"},{"location":"command-line-tools/commands/application-utilities/about/#permission-issues","title":"Permission Issues","text":"<p>If statistics can't be calculated: - Check read permissions on application directories - Ensure you're running from application root</p>"},{"location":"command-line-tools/commands/application-utilities/deptree/","title":"wheels deptree","text":"<p>Display the dependency tree for your Wheels application.</p>"},{"location":"command-line-tools/commands/application-utilities/deptree/#synopsis","title":"Synopsis","text":"<pre><code>wheels deptree [depth=&lt;number&gt;] [production=&lt;boolean&gt;] [format=&lt;format&gt;]\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/deptree/#description","title":"Description","text":"<p>The <code>deptree</code> command visualizes your application's dependency hierarchy, showing which packages depend on which others. It helps you understand your dependency graph, identify outdated packages, and spot potential conflicts.</p>"},{"location":"command-line-tools/commands/application-utilities/deptree/#options","title":"Options","text":""},{"location":"command-line-tools/commands/application-utilities/deptree/#depth","title":"depth","text":"<ul> <li>Type: Number</li> <li>Default: 3</li> <li>Description: Maximum depth to traverse in the dependency tree</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/deptree/#production","title":"production","text":"<ul> <li>Type: Boolean</li> <li>Default: false</li> <li>Description: Only show production dependencies (exclude devDependencies)</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/deptree/#format","title":"format","text":"<ul> <li>Type: String</li> <li>Default: tree</li> <li>Options: tree, list</li> <li>Description: Output format for dependencies</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/deptree/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/application-utilities/deptree/#basic-dependency-tree","title":"Basic Dependency Tree","text":"<pre><code>wheels deptree\n</code></pre> <p>Output: <pre><code>Application Dependencies\n======================================================================\nProject: myapp\nVersion: 1.0.0\n\n\u251c\u2500\u2500 cfwheels @ ^2.5.0 [installed: 2.5.0]\n\u2502   \u251c\u2500\u2500 wirebox @ ^7.0.0 [installed: 7.2.0]\n\u2502   \u2514\u2500\u2500 testbox @ ^5.0.0 [installed: 5.2.0]\n\u2502       \u2514\u2500\u2500 mockdatacfc @ ^3.6.0 [installed: 3.6.0]\n\u251c\u2500\u2500 commandbox-dotenv @ ^1.0.0 [installed: 1.5.0]\n\u251c\u2500\u2500 commandbox-cfformat @ ^0.15.0 [installed: 0.15.3]\n\u2502   \u2514\u2500\u2500 cbjavaloader @ ^2.0.0 [installed: 2.1.0]\n\u2514\u2500\u2500 qb @ ^9.0.0 [installed: 9.2.0]\n    \u2514\u2500\u2500 cbpaginator @ ^2.5.0 [installed: 2.5.0]\n\n======================================================================\nTotal: 4 production, 2 development dependencies\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/deptree/#limited-depth","title":"Limited Depth","text":"<p>Show only direct dependencies: <pre><code>wheels deptree depth=1\n</code></pre></p> <p>Output: <pre><code>\u251c\u2500\u2500 cfwheels @ ^2.5.0 [installed: 2.5.0]\n\u251c\u2500\u2500 commandbox-dotenv @ ^1.0.0 [installed: 1.5.0]\n\u251c\u2500\u2500 commandbox-cfformat @ ^0.15.0 [installed: 0.15.3]\n\u2514\u2500\u2500 qb @ ^9.0.0 [installed: 9.2.0]\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/deptree/#production-only","title":"Production Only","text":"<pre><code>wheels deptree production=true\n</code></pre> <p>Shows only dependencies, not devDependencies.</p>"},{"location":"command-line-tools/commands/application-utilities/deptree/#list-format","title":"List Format","text":"<pre><code>wheels deptree format=list\n</code></pre> <p>Output: <pre><code>Application Dependencies\n======================================================================\nProject: myapp\nVersion: 1.0.0\n\nPackage                  Required        Installed      Status\n----------------------------------------------------------------------\ncfwheels                ^2.5.0          2.5.0          Installed\ncommandbox-dotenv       ^1.0.0          1.5.0          Installed\ncommandbox-cfformat     ^0.15.0         0.15.3         Installed\nqb                      ^9.0.0          9.2.0          Installed\ntestbox                 ^5.0.0          Not installed  Missing\nmockdatacfc            ^3.6.0          3.6.0          Installed\n\n======================================================================\nTotal: 4 production, 2 development dependencies\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/deptree/#understanding-the-output","title":"Understanding the Output","text":""},{"location":"command-line-tools/commands/application-utilities/deptree/#tree-format-symbols","title":"Tree Format Symbols","text":"<ul> <li><code>\u251c\u2500\u2500</code> Branch connection</li> <li><code>\u2514\u2500\u2500</code> Last item in branch</li> <li><code>\u2502</code> Vertical continuation</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/deptree/#version-information","title":"Version Information","text":"<ul> <li><code>@</code> Required version/range</li> <li><code>[installed: x.x.x]</code> Actual installed version</li> <li><code>[not installed]</code> Package is missing</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/deptree/#status-indicators","title":"Status Indicators","text":"<ul> <li>Green <code>[installed]</code> - Package is installed</li> <li>Red <code>[not installed]</code> - Package is missing</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/deptree/#version-ranges","title":"Version Ranges","text":"<p>Common version specifications: - <code>^2.5.0</code> - Compatible with 2.5.0 (&gt;=2.5.0 &lt;3.0.0) - <code>~2.5.0</code> - Approximately 2.5.0 (&gt;=2.5.0 &lt;2.6.0) - <code>&gt;=2.5.0</code> - 2.5.0 or higher - <code>2.5.0</code> - Exact version - <code>*</code> - Any version</p>"},{"location":"command-line-tools/commands/application-utilities/deptree/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/application-utilities/deptree/#1-dependency-audit","title":"1. Dependency Audit","text":"<pre><code># Check all dependencies\nwheels deptree\n\n# Look for missing packages (red items)\n# Check for version mismatches\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/deptree/#2-before-updates","title":"2. Before Updates","text":"<pre><code># See what depends on what\nwheels deptree depth=2\n\n# Plan update strategy\nbox update packageName\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/deptree/#3-troubleshooting-conflicts","title":"3. Troubleshooting Conflicts","text":"<pre><code># Deep dive into dependencies\nwheels deptree depth=5\n\n# Find conflicting sub-dependencies\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/deptree/#4-documentation","title":"4. Documentation","text":"<pre><code># Document production dependencies\nwheels deptree production=true format=list &gt; dependencies.txt\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/deptree/#5-cicd-verification","title":"5. CI/CD Verification","text":"<pre><code># Ensure all dependencies are installed\nwheels deptree format=list | grep \"Not installed\" &amp;&amp; exit 1\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/deptree/#dependency-sources","title":"Dependency Sources","text":"<p>The command reads from <code>box.json</code>:</p> <pre><code>{\n  \"name\": \"myapp\",\n  \"version\": \"1.0.0\",\n  \"dependencies\": {\n    \"cfwheels\": \"^2.5.0\",\n    \"qb\": \"^9.0.0\"\n  },\n  \"devDependencies\": {\n    \"testbox\": \"^5.0.0\",\n    \"commandbox-cfformat\": \"^0.15.0\"\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/deptree/#installation-status","title":"Installation Status","text":"<p>The command checks if packages are installed by looking in: - <code>/modules/</code> directory - Package-specific subdirectories - <code>box.json</code> files within packages</p>"},{"location":"command-line-tools/commands/application-utilities/deptree/#common-issues","title":"Common Issues","text":""},{"location":"command-line-tools/commands/application-utilities/deptree/#missing-dependencies","title":"Missing Dependencies","text":"<p><pre><code>\u2514\u2500\u2500 testbox @ ^5.0.0 [not installed]\n</code></pre> Solution: Run <code>box install</code></p>"},{"location":"command-line-tools/commands/application-utilities/deptree/#version-mismatches","title":"Version Mismatches","text":"<p><pre><code>\u251c\u2500\u2500 cfwheels @ ^2.5.0 [installed: 2.3.0]\n</code></pre> Solution: Run <code>box update cfwheels</code></p>"},{"location":"command-line-tools/commands/application-utilities/deptree/#deep-dependency-conflicts","title":"Deep Dependency Conflicts","text":"<p>When sub-dependencies conflict: <pre><code>\u251c\u2500\u2500 packageA @ ^1.0.0\n\u2502   \u2514\u2500\u2500 sharedLib @ ^2.0.0\n\u2514\u2500\u2500 packageB @ ^1.0.0\n    \u2514\u2500\u2500 sharedLib @ ^3.0.0  // Conflict!\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/deptree/#best-practices","title":"Best Practices","text":""},{"location":"command-line-tools/commands/application-utilities/deptree/#1-regular-audits","title":"1. Regular Audits","text":"<pre><code># Weekly dependency check\nwheels deptree\nbox outdated\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/deptree/#2-document-dependencies","title":"2. Document Dependencies","text":"<pre><code># Add to README\nwheels deptree production=true format=list\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/deptree/#3-minimal-dependencies","title":"3. Minimal Dependencies","text":"<ul> <li>Only add necessary packages</li> <li>Prefer packages with fewer sub-dependencies</li> <li>Regular cleanup of unused packages</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/deptree/#4-version-pinning","title":"4. Version Pinning","text":"<p>For critical applications: <pre><code>\"dependencies\": {\n  \"cfwheels\": \"2.5.0\",  // Exact version\n  \"qb\": \"9.2.0\"\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/deptree/#integration-with-other-commands","title":"Integration with Other Commands","text":""},{"location":"command-line-tools/commands/application-utilities/deptree/#update-workflow","title":"Update Workflow","text":"<pre><code># 1. Check current state\nwheels deptree\n\n# 2. Check for updates\nbox outdated\n\n# 3. Update specific package\nbox update packageName\n\n# 4. Verify\nwheels deptree\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/deptree/#installation-workflow","title":"Installation Workflow","text":"<pre><code># 1. Install all dependencies\nbox install\n\n# 2. Verify installation\nwheels deptree\n\n# 3. Run health check\nwheels doctor\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/deptree/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels deps</code> - Manage Wheels-specific dependencies</li> <li><code>box install</code> - Install packages</li> <li><code>box update</code> - Update packages</li> <li><code>box outdated</code> - Check for updates</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/deptree/#tips","title":"Tips","text":"<ul> <li>Use <code>depth=1</code> for a quick overview</li> <li>Check dependencies before major updates</li> <li>Document your dependency tree in project docs</li> <li>Use production=true for deployment documentation</li> <li>Regular audits help prevent security issues</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/deptree/#future-enhancements","title":"Future Enhancements","text":"<p>Planned features: - Circular dependency detection - License information display - Security vulnerability warnings - Dependency size information - Export to various formats (JSON, GraphViz)</p>"},{"location":"command-line-tools/commands/application-utilities/doctor/","title":"wheels doctor","text":"<p>Run comprehensive health checks on your Wheels application.</p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#synopsis","title":"Synopsis","text":"<pre><code>wheels doctor [verbose=&lt;boolean&gt;]\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/doctor/#description","title":"Description","text":"<p>The <code>doctor</code> command performs a series of health checks on your Wheels application, identifying configuration issues, missing dependencies, and potential problems. It's like a medical checkup for your application.</p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#options","title":"Options","text":""},{"location":"command-line-tools/commands/application-utilities/doctor/#verbose","title":"verbose","text":"<ul> <li>Type: Boolean</li> <li>Default: false</li> <li>Description: Show detailed diagnostic information including passed checks</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/doctor/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/application-utilities/doctor/#basic-health-check","title":"Basic Health Check","text":"<pre><code>wheels doctor\n</code></pre> <p>Output when issues are found: <pre><code>Wheels Application Health Check\n======================================================================\n\nIssues Found (2):\n  \u2717 Missing critical directory: app/helpers\n  \u2717 Database configuration not found\n\nWarnings (3):\n  \u26a0 Missing recommended directory: tests\n  \u26a0 No database migrations found\n  \u26a0 No .gitignore file (sensitive files may be committed)\n\n======================================================================\nHealth Status: CRITICAL\nFound 2 critical issues that need immediate attention.\n\nRecommendations:\n  \u2022 Configure your database connection in config/settings.cfm\n  \u2022 Run 'wheels g app' to create missing directories\n  \u2022 Add tests to improve code quality and reliability\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#verbose-output","title":"Verbose Output","text":"<pre><code>wheels doctor verbose=true\n</code></pre> <p>Shows all checks including passed ones: <pre><code>Wheels Application Health Check\n======================================================================\n\nIssues Found (1):\n  \u2717 Missing critical directory: app/helpers\n\nWarnings (2):\n  \u26a0 No tests found\n  \u26a0 Modules not installed (run 'box install')\n\nChecks Passed (15):\n  \u2713 Directory exists: app\n  \u2713 Directory exists: app/controllers\n  \u2713 Directory exists: app/models\n  \u2713 Directory exists: app/views\n  \u2713 Directory exists: config\n  \u2713 Directory exists: public\n  \u2713 File exists: Application.cfc\n  \u2713 File exists: config/routes.cfm\n  \u2713 File exists: config/settings.cfm\n  \u2713 Application name is configured\n  \u2713 Session management is configured\n  \u2713 Routes are configured\n  \u2713 Write permission OK: db/migrate\n  \u2713 CFWheels dependency declared\n  \u2713 .gitignore file exists\n\n======================================================================\nHealth Status: WARNING\nFound 2 warnings that should be addressed.\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#health-checks-performed","title":"Health Checks Performed","text":""},{"location":"command-line-tools/commands/application-utilities/doctor/#required-directories","title":"Required Directories","text":"<p>Checks for critical directories: - <code>app/</code> - Application root - <code>app/controllers/</code> - Controllers - <code>app/models/</code> - Models - <code>app/views/</code> - Views - <code>config/</code> - Configuration - <code>public/</code> - Public assets</p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#recommended-directories","title":"Recommended Directories","text":"<p>Checks for optional but recommended: - <code>db/</code> - Database files - <code>db/migrate/</code> - Migrations - <code>tests/</code> - Test suite</p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#required-files","title":"Required Files","text":"<p>Verifies essential files exist: - <code>Application.cfc</code> - CF application file - <code>config/routes.cfm</code> - Route definitions - <code>config/settings.cfm</code> - Application settings</p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#recommended-files","title":"Recommended Files","text":"<p>Checks for best practice files: - <code>box.json</code> - Package definition - <code>.gitignore</code> - Git ignore rules - <code>README.md</code> - Documentation</p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#configuration-checks","title":"Configuration Checks","text":"<p>Validates Application.cfc settings: - <code>this.name</code> - Application name - <code>this.sessionManagement</code> - Session handling - Route definitions not empty</p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#database-configuration","title":"Database Configuration","text":"<p>Looks for database setup in: - <code>config/settings.cfm</code> - datasource settings - <code>.env</code> - Database environment variables - Checks for existing migrations</p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#permissions","title":"Permissions","text":"<p>Tests write permissions on: - <code>db/migrate/</code> - For migrations - <code>public/files/</code> - For uploads - <code>tmp/</code> - For temporary files - <code>logs/</code> - For log files</p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#dependencies","title":"Dependencies","text":"<p>Verifies package management: - CFWheels listed in dependencies - Modules directory exists - Dependencies installed</p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#environment","title":"Environment","text":"<p>Checks runtime environment: - CFML engine version - Test suite presence - Security files (.gitignore)</p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#health-status-levels","title":"Health Status Levels","text":""},{"location":"command-line-tools/commands/application-utilities/doctor/#healthy","title":"HEALTHY","text":"<p>All checks passed: <pre><code>Health Status: HEALTHY\nAll 23 checks passed!\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#warning","title":"WARNING","text":"<p>Non-critical issues found: <pre><code>Health Status: WARNING\nFound 3 warnings that should be addressed.\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#critical","title":"CRITICAL","text":"<p>Must-fix issues found: <pre><code>Health Status: CRITICAL\nFound 2 critical issues that need immediate attention.\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#common-issues-and-solutions","title":"Common Issues and Solutions","text":""},{"location":"command-line-tools/commands/application-utilities/doctor/#missing-directories","title":"Missing Directories","text":"<p><pre><code>\u2717 Missing critical directory: app/helpers\n</code></pre> Solution: Run <code>wheels g app</code> or create manually</p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#database-not-configured","title":"Database Not Configured","text":"<p><pre><code>\u2717 Database configuration not found\n</code></pre> Solution: Add datasource to <code>config/settings.cfm</code>: <pre><code>set(dataSourceName=\"myapp\");\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#no-write-permissions","title":"No Write Permissions","text":"<p><pre><code>\u26a0 No write permission: logs\n</code></pre> Solution: Fix permissions: <pre><code>chmod 755 logs\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#dependencies-not-installed","title":"Dependencies Not Installed","text":"<p><pre><code>\u26a0 Modules not installed (run 'box install')\n</code></pre> Solution: Install dependencies: <pre><code>box install\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#no-tests","title":"No Tests","text":"<p><pre><code>\u26a0 No tests found\n</code></pre> Solution: Create test structure: <pre><code>wheels g test User\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/application-utilities/doctor/#1-new-project-setup","title":"1. New Project Setup","text":"<p>After creating a project: <pre><code>wheels g app myapp\ncd myapp\nwheels doctor\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#2-pre-deployment-check","title":"2. Pre-Deployment Check","text":"<p>Before deploying: <pre><code>wheels doctor\n# Fix any critical issues\n# Deploy only when \"HEALTHY\" or minor \"WARNING\"\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#3-environment-verification","title":"3. Environment Verification","text":"<p>After server setup: <pre><code>wheels doctor verbose=true\n# Verify all components are properly configured\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#4-troubleshooting","title":"4. Troubleshooting","text":"<p>When things aren't working: <pre><code>wheels doctor verbose=true &gt; health-report.txt\n# Share report when seeking help\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#5-cicd-integration","title":"5. CI/CD Integration","text":"<p>In build pipeline: <pre><code># Fail build on critical issues\nwheels doctor || exit 1\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#recommendations","title":"Recommendations","text":"<p>The doctor provides specific recommendations:</p>"},{"location":"command-line-tools/commands/application-utilities/doctor/#database-issues","title":"Database Issues","text":"<ul> <li>Configure database connection</li> <li>Create database with <code>wheels db create</code></li> <li>Run migrations with <code>wheels dbmigrate latest</code></li> </ul>"},{"location":"command-line-tools/commands/application-utilities/doctor/#missing-directories_1","title":"Missing Directories","text":"<ul> <li>Use generators to create structure</li> <li>Ensure proper Wheels conventions</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/doctor/#testing","title":"Testing","text":"<ul> <li>Add test files to <code>/tests</code></li> <li>Use <code>wheels g test</code> to create tests</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/doctor/#security","title":"Security","text":"<ul> <li>Add <code>.gitignore</code> for sensitive files</li> <li>Check file permissions</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/doctor/#best-practices","title":"Best Practices","text":"<ol> <li>Run Regularly: Include in development workflow</li> <li>Fix Critical Issues First: Address red \u2717 items immediately</li> <li>Address Warnings: Yellow \u26a0 items before production</li> <li>Automate Checks: Add to CI/CD pipeline</li> <li>Document Exceptions: If ignoring warnings, document why</li> </ol>"},{"location":"command-line-tools/commands/application-utilities/doctor/#integration","title":"Integration","text":""},{"location":"command-line-tools/commands/application-utilities/doctor/#git-hooks","title":"Git Hooks","text":"<pre><code># pre-commit hook\n#!/bin/bash\nwheels doctor || {\n  echo \"Health check failed. Fix issues before committing.\"\n  exit 1\n}\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/doctor/#cicd","title":"CI/CD","text":"<pre><code># .github/workflows/health.yml\n- name: Health Check\n  run: |\n    box install\n    wheels doctor\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/doctor/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels about</code> - Application information</li> <li><code>wheels test</code> - Run test suite</li> <li><code>wheels db status</code> - Database status</li> <li><code>wheels deps list</code> - Check dependencies</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/doctor/#tips","title":"Tips","text":"<ul> <li>Run after cloning a project</li> <li>Use verbose mode for complete picture</li> <li>Save output for documentation</li> <li>Create project-specific health standards</li> <li>Consider health status in deployment decisions</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/doctor/#customization","title":"Customization","text":"<p>Future versions may support: - Custom health check plugins - Project-specific checks via <code>.doctor.json</code> - Severity level configuration - Integration with monitoring tools</p>"},{"location":"command-line-tools/commands/application-utilities/notes/","title":"wheels notes","text":"<p>Extract and display code annotations like TODO, FIXME, and OPTIMIZE from your application.</p>"},{"location":"command-line-tools/commands/application-utilities/notes/#synopsis","title":"Synopsis","text":"<pre><code>wheels notes [annotations=&lt;list&gt;] [custom=&lt;list&gt;] [verbose=&lt;boolean&gt;]\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/notes/#description","title":"Description","text":"<p>The <code>notes</code> command scans your application code for annotations (comments with special markers) and displays them in an organized format. This helps track technical debt, pending tasks, and areas needing attention.</p>"},{"location":"command-line-tools/commands/application-utilities/notes/#options","title":"Options","text":""},{"location":"command-line-tools/commands/application-utilities/notes/#annotations","title":"annotations","text":"<ul> <li>Type: String (comma-separated list)</li> <li>Default: TODO,FIXME,OPTIMIZE</li> <li>Description: Annotations to search for</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/notes/#custom","title":"custom","text":"<ul> <li>Type: String (comma-separated list)</li> <li>Default: (none)</li> <li>Description: Additional custom annotations to search for</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/notes/#verbose","title":"verbose","text":"<ul> <li>Type: Boolean</li> <li>Default: false</li> <li>Description: Show file paths with line numbers</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/notes/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/application-utilities/notes/#basic-usage","title":"Basic Usage","text":"<p>Find default annotations: <pre><code>wheels notes\n</code></pre></p> <p>Output: <pre><code>Code Annotations\nSearching for: TODO, FIXME, OPTIMIZE\n======================================================================\n\nApplication:\n  [TODO] Add validation for email format\n  [TODO] Implement password reset functionality\n  [FIXME] Handle null values in calculateTotal()\n  [OPTIMIZE] Cache this query result\n\nTests:\n  [TODO] Add integration tests for checkout process\n  [FIXME] Mock external API calls\n\n======================================================================\nSummary:\n  TODO: 3\n  FIXME: 2\n  OPTIMIZE: 1\n\nTotal annotations: 6\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/notes/#verbose-output","title":"Verbose Output","text":"<p>Show with file locations: <pre><code>wheels notes verbose=true\n</code></pre></p> <p>Output: <pre><code>Application:\n\n  app/models/User.cfc:45\n  TODO: Add validation for email format\n\n  app/controllers/Auth.cfc:78\n  TODO: Implement password reset functionality\n\n  app/models/Order.cfc:123\n  FIXME: Handle null values in calculateTotal()\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/notes/#specific-annotations","title":"Specific Annotations","text":"<p>Search for only TODOs: <pre><code>wheels notes TODO\n</code></pre></p> <p>Search for multiple: <pre><code>wheels notes TODO,FIXME\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/notes/#custom-annotations","title":"Custom Annotations","text":"<p>Add custom markers: <pre><code>wheels notes custom=HACK,REVIEW\n</code></pre></p> <p>Search only custom markers: <pre><code>wheels notes annotations=\"\" custom=HACK,SECURITY,PERFORMANCE\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/notes/#supported-comment-formats","title":"Supported Comment Formats","text":"<p>The command recognizes annotations in various comment styles:</p>"},{"location":"command-line-tools/commands/application-utilities/notes/#cfml-comments","title":"CFML Comments","text":"<pre><code>// TODO: Implement this feature\n&lt;!--- FIXME: This needs error handling ---&gt;\n// TODO Add validation (colon optional)\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/notes/#javascript-comments","title":"JavaScript Comments","text":"<pre><code>// TODO: Refactor this function\n/* FIXME: Memory leak here */\n// HACK: Temporary workaround\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/notes/#css-comments","title":"CSS Comments","text":"<pre><code>/* TODO: Add responsive styles */\n/* OPTIMIZE: Combine these selectors */\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/notes/#other-formats","title":"Other Formats","text":"<pre><code>## TODO: Document this method (Markdown-style)\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/notes/#annotation-guidelines","title":"Annotation Guidelines","text":""},{"location":"command-line-tools/commands/application-utilities/notes/#todo","title":"TODO","text":"<p>Use for: - Features to implement - Code to write - Documentation to add</p> <p>Example: <pre><code>// TODO: Add email notification when order ships\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/notes/#fixme","title":"FIXME","text":"<p>Use for: - Broken code that needs fixing - Known bugs - Error handling gaps</p> <p>Example: <pre><code>// FIXME: This breaks when user.name is null\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/notes/#optimize","title":"OPTIMIZE","text":"<p>Use for: - Performance improvements needed - Inefficient algorithms - Caching opportunities</p> <p>Example: <pre><code>// OPTIMIZE: This query runs on every request\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/notes/#custom-annotations_1","title":"Custom Annotations","text":"<p>Common custom annotations:</p> <ul> <li>HACK: Temporary workarounds</li> <li>REVIEW: Code needing review</li> <li>SECURITY: Security concerns</li> <li>DEPRECATED: Code to be removed</li> <li>PERFORMANCE: Performance bottlenecks</li> <li>REFACTOR: Code needing refactoring</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/notes/#search-locations","title":"Search Locations","text":"<p>The command searches in:</p>"},{"location":"command-line-tools/commands/application-utilities/notes/#application","title":"Application","text":"<ul> <li><code>/app/**/*.cfc</code> - Controllers, Models</li> <li><code>/app/**/*.cfm</code> - Views</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/notes/#configuration","title":"Configuration","text":"<ul> <li><code>/config/**/*.cfm</code> - Configuration files</li> <li><code>/config/**/*.cfc</code> - Configuration components</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/notes/#tests","title":"Tests","text":"<ul> <li><code>/tests/**/*.cfc</code> - Test files</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/notes/#migrations","title":"Migrations","text":"<ul> <li><code>/db/migrate/**/*.cfc</code> - Database migrations</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/notes/#assets-with-javascriptcss-support","title":"Assets (with JavaScript/CSS support)","text":"<ul> <li><code>/public/javascripts/**/*.js</code> - JavaScript files</li> <li><code>/public/stylesheets/**/*.css</code> - CSS files</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/notes/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/application-utilities/notes/#1-sprint-planning","title":"1. Sprint Planning","text":"<pre><code># Find all pending tasks\nwheels notes TODO verbose=true\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/notes/#2-code-review","title":"2. Code Review","text":"<pre><code># Check for issues before merging\nwheels notes FIXME,HACK verbose=true\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/notes/#3-technical-debt-tracking","title":"3. Technical Debt Tracking","text":"<pre><code># Regular debt assessment\nwheels notes TODO,FIXME,OPTIMIZE,REFACTOR\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/notes/#4-security-audit","title":"4. Security Audit","text":"<pre><code># Find security-related notes\nwheels notes custom=SECURITY,VULNERABILITY\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/notes/#5-performance-review","title":"5. Performance Review","text":"<pre><code># Find optimization opportunities\nwheels notes OPTIMIZE custom=PERFORMANCE,SLOW\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/notes/#best-practices","title":"Best Practices","text":""},{"location":"command-line-tools/commands/application-utilities/notes/#writing-good-annotations","title":"Writing Good Annotations","text":"<ol> <li> <p>Be Specific <pre><code>// TODO: Add email validation using regex pattern for corporate emails\n// Not: TODO: Add validation\n</code></pre></p> </li> <li> <p>Include Context <pre><code>// FIXME: calculateTax() returns negative values when discount &gt; subtotal\n</code></pre></p> </li> <li> <p>Add Names/Dates <pre><code>// TODO (john.doe - 2024-01): Implement after payment gateway is ready\n</code></pre></p> </li> <li> <p>Link to Issues <pre><code>// FIXME: Issue #1234 - Handle UTF-8 characters in exports\n</code></pre></p> </li> </ol>"},{"location":"command-line-tools/commands/application-utilities/notes/#team-standards","title":"Team Standards","text":"<p>Establish conventions: - Which annotations to use - When to add them - Format requirements - Review frequency</p>"},{"location":"command-line-tools/commands/application-utilities/notes/#output-organization","title":"Output Organization","text":"<p>Annotations are grouped by location: - Application: Core application code - Configuration: Config files - Tests: Test suite - Migrations: Database migrations</p>"},{"location":"command-line-tools/commands/application-utilities/notes/#integration-ideas","title":"Integration Ideas","text":""},{"location":"command-line-tools/commands/application-utilities/notes/#git-hooks","title":"Git Hooks","text":"<pre><code># Pre-commit hook to check TODOs\nif wheels notes TODO | grep -q \"TODO\"; then\n  echo \"Warning: TODOs found\"\nfi\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/notes/#cicd-pipeline","title":"CI/CD Pipeline","text":"<pre><code># Fail if critical issues exist\nwheels notes FIXME custom=CRITICAL,BLOCKER\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/notes/#documentation","title":"Documentation","text":"<pre><code># Export for project docs\nwheels notes verbose=true &gt; technical-debt.txt\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/notes/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels stats</code> - Code statistics</li> <li><code>wheels analyze code</code> - Code quality analysis</li> <li><code>wheels test</code> - Run tests</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/notes/#tips","title":"Tips","text":"<ul> <li>Review annotations regularly (weekly/sprint)</li> <li>Remove completed TODOs promptly</li> <li>Convert important TODOs to issue tracker tickets</li> <li>Use consistent annotation formats across the team</li> <li>Consider annotation count as a code quality metric</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/notes/#performance","title":"Performance","text":"<p>The command is optimized to: - Read files only once - Use efficient regex matching - Skip binary files - Process files in memory</p>"},{"location":"command-line-tools/commands/application-utilities/notes/#limitations","title":"Limitations","text":"<ul> <li>Only searches comments, not string contents</li> <li>May miss annotations in unconventional comment formats</li> <li>Doesn't integrate with issue tracking systems</li> <li>No priority or categorization beyond annotation type</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/routes-match/","title":"wheels routes:match","text":"<p>Find which route matches a given URL and HTTP method.</p>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#synopsis","title":"Synopsis","text":"<pre><code>wheels routes:match &lt;url&gt; [method=&lt;method&gt;]\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#description","title":"Description","text":"<p>The <code>routes:match</code> command helps you debug routing issues by showing which route would handle a specific URL. It displays the matching route's pattern, controller, action, and any extracted parameters.</p>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#arguments","title":"Arguments","text":""},{"location":"command-line-tools/commands/application-utilities/routes-match/#url","title":"url","text":"<ul> <li>Type: String</li> <li>Required: Yes</li> <li>Description: The URL path to match (with or without leading slash)</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#options","title":"Options","text":""},{"location":"command-line-tools/commands/application-utilities/routes-match/#method","title":"method","text":"<ul> <li>Type: String</li> <li>Default: GET</li> <li>Options: GET, POST, PUT, PATCH, DELETE</li> <li>Description: HTTP method to use for matching</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/application-utilities/routes-match/#basic-url-matching","title":"Basic URL Matching","text":"<p>Find route for a simple URL: <pre><code>wheels routes:match /users\n</code></pre></p> <p>Output: <pre><code>Matching route found!\n\nURL: /users [GET]\n\nRoute Name: users_index\nPattern: /users\nController: users\nAction: index\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#url-with-parameters","title":"URL with Parameters","text":"<p>Match URL with ID parameter: <pre><code>wheels routes:match /users/123\n</code></pre></p> <p>Output: <pre><code>Matching route found!\n\nURL: /users/123 [GET]\n\nRoute Name: users_show\nPattern: /users/[key]\nController: users\nAction: show\n\nParameters:\n  key: 123\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#different-http-methods","title":"Different HTTP Methods","text":"<p>Match POST request: <pre><code>wheels routes:match /users method=POST\n</code></pre></p> <p>Match DELETE request: <pre><code>wheels routes:match /users/123 method=DELETE\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#complex-urls","title":"Complex URLs","text":"<p>Match nested resource: <pre><code>wheels routes:match /users/123/posts/456/edit\n</code></pre></p> <p>Match URL with query string (ignored in routing): <pre><code>wheels routes:match \"/products?category=electronics\"\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#understanding-the-output","title":"Understanding the Output","text":"<p>The command provides:</p> <ol> <li>Matching Status: Whether a route was found</li> <li>URL &amp; Method: The URL and HTTP method being tested</li> <li>Route Details:</li> <li>Name: Used for link generation</li> <li>Pattern: The route pattern that matched</li> <li>Controller: Which controller handles the request</li> <li>Action: Which action method will be called</li> <li>Parameters: Extracted URL parameters (like IDs)</li> <li>Other Matches: Alternative routes that could match</li> </ol>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#route-matching-rules","title":"Route Matching Rules","text":"<p>Wheels matches routes based on:</p> <ol> <li>Method: HTTP method must match (or be \"*\" for any)</li> <li>Pattern: URL must match the pattern</li> <li>Order: First matching route wins</li> </ol> <p>Pattern matching: - <code>[key]</code> matches numeric values - <code>:param</code> matches named parameters - Exact strings must match exactly</p>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/application-utilities/routes-match/#1-debugging-404-errors","title":"1. Debugging 404 Errors","text":"<pre><code># Check why a URL returns 404\nwheels routes:match /api/v1/users\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#2-verifying-restful-routes","title":"2. Verifying RESTful Routes","text":"<pre><code># Verify all CRUD operations\nwheels routes:match /products method=GET      # index\nwheels routes:match /products/new method=GET  # new\nwheels routes:match /products method=POST     # create\nwheels routes:match /products/123 method=GET  # show\nwheels routes:match /products/123/edit method=GET  # edit\nwheels routes:match /products/123 method=PUT  # update\nwheels routes:match /products/123 method=DELETE # delete\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#3-api-endpoint-testing","title":"3. API Endpoint Testing","text":"<pre><code># Test API endpoints\nwheels routes:match /api/users method=POST\nwheels routes:match /api/auth/login method=POST\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/application-utilities/routes-match/#no-routes-match","title":"No Routes Match","text":"<p>If no routes match: <pre><code>No routes match URL: /unknown [GET]\n</code></pre></p> <p>Solutions: 1. Check spelling of the URL 2. Verify the HTTP method 3. Use <code>wheels routes</code> to see all available routes 4. Check if routes are conditionally defined</p>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#multiple-matches","title":"Multiple Matches","text":"<p>When multiple routes could match: <pre><code>Other possible matches:\n  - /products/* -&gt; products#catch_all\n  - /* -&gt; main#not_found\n</code></pre></p> <p>This helps identify route conflicts or fallback routes.</p>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#parameter-extraction","title":"Parameter Extraction","text":"<p>The command shows extracted parameters: <pre><code>Parameters:\n  key: 123\n  slug: my-product\n</code></pre></p> <p>This helps verify that parameters are correctly extracted from URLs.</p>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels routes</code> - Display all routes</li> <li><code>wheels generate route</code> - Generate new routes</li> <li><code>wheels server</code> - Start server to test routes</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#tips","title":"Tips","text":"<ul> <li>Always include the HTTP method for accurate matching</li> <li>Use quotes for URLs with special characters: <code>wheels routes:match \"/search?q=test\"</code></li> <li>The leading slash is optional: <code>users</code> and <code>/users</code> are equivalent</li> <li>Remember that routes are matched in the order they're defined</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#common-patterns","title":"Common Patterns","text":""},{"location":"command-line-tools/commands/application-utilities/routes-match/#restful-resources","title":"RESTful Resources","text":"<pre><code>wheels routes:match /articles         # GET -&gt; index\nwheels routes:match /articles/123     # GET -&gt; show\nwheels routes:match /articles/new     # GET -&gt; new\nwheels routes:match /articles/123/edit # GET -&gt; edit\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#nested-resources","title":"Nested Resources","text":"<pre><code>wheels routes:match /blogs/45/posts/123\nwheels routes:match /users/1/settings\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/routes-match/#api-versioning","title":"API Versioning","text":"<pre><code>wheels routes:match /api/v1/users\nwheels routes:match /api/v2/users\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/routes/","title":"wheels routes","text":"<p>Display all defined routes in your Wheels application with filtering and format options.</p>"},{"location":"command-line-tools/commands/application-utilities/routes/#synopsis","title":"Synopsis","text":"<pre><code>wheels routes [name=&lt;filter&gt;] [format=&lt;format&gt;]\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/routes/#description","title":"Description","text":"<p>The <code>routes</code> command displays all routes defined in your application's <code>config/routes.cfm</code> file. It provides a clear overview of your application's URL structure, showing which controllers and actions handle each route.</p>"},{"location":"command-line-tools/commands/application-utilities/routes/#options","title":"Options","text":""},{"location":"command-line-tools/commands/application-utilities/routes/#name","title":"name","text":"<ul> <li>Type: String</li> <li>Default: (none)</li> <li>Description: Filter routes by name or pattern. Case-insensitive partial matching.</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/routes/#format","title":"format","text":"<ul> <li>Type: String</li> <li>Default: table</li> <li>Options: table, json</li> <li>Description: Output format for the route information.</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/routes/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/application-utilities/routes/#basic-usage","title":"Basic Usage","text":"<p>Display all routes in table format: <pre><code>wheels routes\n</code></pre></p> <p>Output: <pre><code>Application Routes:\n\nName                Method    Pattern                 Controller          Action\n--------------------------------------------------------------------------------\nusers_index         GET       /users                  users               index\nusers_new           GET       /users/new              users               new\nusers_create        POST      /users                  users               create\nusers_show          GET       /users/[key]            users               show\nusers_edit          GET       /users/[key]/edit       users               edit\nusers_update        PUT,PATCH /users/[key]            users               update\nusers_delete        DELETE    /users/[key]            users               delete\nroot                GET       /                       main                index\n\nTotal routes: 8\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/routes/#filter-routes","title":"Filter Routes","text":"<p>Filter routes by name: <pre><code>wheels routes name=user\n</code></pre></p> <p>Filter routes containing \"admin\": <pre><code>wheels routes name=admin\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/routes/#json-output","title":"JSON Output","text":"<p>Get routes in JSON format for parsing: <pre><code>wheels routes format=json\n</code></pre></p> <p>Output: <pre><code>[\n  {\n    \"name\": \"users_index\",\n    \"methods\": \"GET\",\n    \"pattern\": \"/users\",\n    \"controller\": \"users\",\n    \"action\": \"index\"\n  },\n  {\n    \"name\": \"users_show\",\n    \"methods\": \"GET\",\n    \"pattern\": \"/users/[key]\",\n    \"controller\": \"users\",\n    \"action\": \"show\"\n  }\n]\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/routes/#combined-options","title":"Combined Options","text":"<p>Filter and format together: <pre><code>wheels routes name=admin format=json\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/routes/#route-information","title":"Route Information","text":"<p>The command displays the following information for each route:</p> <ul> <li>Name: The route's name (used for link generation)</li> <li>Method: HTTP method(s) (GET, POST, PUT, PATCH, DELETE)</li> <li>Pattern: URL pattern with placeholders (e.g., [key])</li> <li>Controller: The controller that handles the route</li> <li>Action: The action method within the controller</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/routes/#understanding-route-patterns","title":"Understanding Route Patterns","text":"<p>Wheels uses special placeholders in route patterns:</p> <ul> <li><code>[key]</code> - Matches numeric IDs (e.g., /users/123)</li> <li><code>:param</code> - Matches named parameters (e.g., :slug)</li> <li><code>*</code> - Wildcard matching</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/routes/#limitations","title":"Limitations","text":"<p>The current implementation extracts routes by parsing the routes.cfm file. It recognizes:</p> <ul> <li>Resource routes (<code>resources()</code>)</li> <li>Named routes (<code>get()</code>, <code>post()</code>, etc. with name parameter)</li> <li>Root route (<code>root()</code>)</li> </ul> <p>For complete route information, the routes.cfm file would need to be executed in the application context.</p>"},{"location":"command-line-tools/commands/application-utilities/routes/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/application-utilities/routes/#1-debugging-routing-issues","title":"1. Debugging Routing Issues","text":"<pre><code># Check if a route exists\nwheels routes name=products\n\n# Verify API routes\nwheels routes name=api\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/routes/#2-documentation","title":"2. Documentation","text":"<pre><code># Export routes for API documentation\nwheels routes format=json &gt; routes.json\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/routes/#3-development-reference","title":"3. Development Reference","text":"<pre><code># Quick lookup during development\nwheels routes name=user\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/routes/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels routes:match</code> - Find which route matches a URL</li> <li><code>wheels generate route</code> - Generate new routes</li> <li><code>wheels info</code> - General application information</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/routes/#tips","title":"Tips","text":"<ul> <li>Route names are used with link helpers like <code>linkTo(route=\"users_show\", key=user.id)</code></li> <li>RESTful resources automatically generate 7 standard routes</li> <li>Custom routes can be added before or after resource definitions</li> <li>Routes are matched in the order they are defined</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/routes/#common-issues","title":"Common Issues","text":""},{"location":"command-line-tools/commands/application-utilities/routes/#no-routes-found","title":"No Routes Found","text":"<p>If no routes are displayed: 1. Ensure you're in a Wheels application directory 2. Check that <code>config/routes.cfm</code> exists 3. Verify the routes file has proper syntax</p>"},{"location":"command-line-tools/commands/application-utilities/routes/#missing-routes","title":"Missing Routes","text":"<p>If expected routes are missing: 1. Check route definition order in routes.cfm 2. Ensure resources are properly defined 3. Look for conditional route definitions</p>"},{"location":"command-line-tools/commands/application-utilities/stats/","title":"wheels stats","text":"<p>Display comprehensive code statistics for your Wheels application.</p>"},{"location":"command-line-tools/commands/application-utilities/stats/#synopsis","title":"Synopsis","text":"<pre><code>wheels stats [verbose=&lt;boolean&gt;]\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/stats/#description","title":"Description","text":"<p>The <code>stats</code> command analyzes your application's codebase and provides detailed statistics including lines of code, comments, file counts, and code quality metrics. It helps you understand the size and complexity of your application.</p>"},{"location":"command-line-tools/commands/application-utilities/stats/#options","title":"Options","text":""},{"location":"command-line-tools/commands/application-utilities/stats/#verbose","title":"verbose","text":"<ul> <li>Type: Boolean</li> <li>Default: false</li> <li>Description: Show detailed statistics including largest files</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/stats/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/application-utilities/stats/#basic-statistics","title":"Basic Statistics","text":"<pre><code>wheels stats\n</code></pre> <p>Output: <pre><code>Code Statistics\n======================================================================\nType                Files     Lines     LOC       Comments  Blank\n----------------------------------------------------------------------\nControllers         12        2,450     1,890     230       330\nModels             8         3,200     2,750     180       270\nViews              45        1,800     1,500     50        250\nHelpers            3         450       380       40        30\nTests              23        4,500     3,800     200       500\nMigrations         15        600       500       20        80\nConfig             5         300       250       30        20\nJavascripts        10        2,000     1,600     200       200\nStylesheets        5         800       600       100       100\n----------------------------------------------------------------------\nTotal              126       16,100    13,270    1,050     1,780\n\nCode Metrics\n======================================================================\nCode to Test Ratio: 1:1.1 (110% test coverage by LOC)\nAverage Lines per File: 128\nAverage LOC per File: 105\nComment Percentage: 7%\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/stats/#verbose-output","title":"Verbose Output","text":"<pre><code>wheels stats verbose=true\n</code></pre> <p>Additional output: <pre><code>Detailed File Analysis\n======================================================================\nLargest Files (by LOC):\n  1. app/models/User.cfc (450 LOC)\n  2. app/controllers/Admin.cfc (380 LOC)\n  3. tests/models/UserTest.cfc (350 LOC)\n  4. app/models/Product.cfc (320 LOC)\n  5. app/controllers/Products.cfc (290 LOC)\n  6. public/javascripts/application.js (280 LOC)\n  7. app/models/Order.cfc (250 LOC)\n  8. tests/integration/CheckoutTest.cfc (240 LOC)\n  9. app/controllers/Api.cfc (220 LOC)\n  10. public/stylesheets/main.css (200 LOC)\n</code></pre></p>"},{"location":"command-line-tools/commands/application-utilities/stats/#metrics-explained","title":"Metrics Explained","text":""},{"location":"command-line-tools/commands/application-utilities/stats/#file-types","title":"File Types","text":"<ul> <li>Controllers: Application controllers (*.cfc in /app/controllers)</li> <li>Models: Domain models (*.cfc in /app/models)</li> <li>Views: View templates (*.cfm in /app/views)</li> <li>Helpers: Helper functions (*.cfc in /app/helpers)</li> <li>Tests: Test files (*.cfc in /tests)</li> <li>Migrations: Database migrations (*.cfc in /db/migrate)</li> <li>Config: Configuration files (.cfm, .cfc in /config)</li> <li>Javascripts: JavaScript files (*.js in /public/javascripts)</li> <li>Stylesheets: CSS/SCSS files (.css, .scss, *.sass in /public/stylesheets)</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/stats/#statistics-columns","title":"Statistics Columns","text":"<ul> <li>Files: Number of files of this type</li> <li>Lines: Total lines including blanks and comments</li> <li>LOC: Lines of Code (actual code, excluding comments and blanks)</li> <li>Comments: Lines containing comments</li> <li>Blank: Empty lines</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/stats/#code-metrics","title":"Code Metrics","text":"<ul> <li>Code to Test Ratio: Ratio of test LOC to application code LOC</li> <li>Average Lines per File: Total lines divided by file count</li> <li>Average LOC per File: Total LOC divided by file count</li> <li>Comment Percentage: Percentage of comments to total code</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/stats/#comment-detection","title":"Comment Detection","text":"<p>The command recognizes different comment styles:</p>"},{"location":"command-line-tools/commands/application-utilities/stats/#cfml-comments","title":"CFML Comments","text":"<pre><code>// Single line comment\n&lt;!--- Multi-line\n      comment ---&gt;\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/stats/#javascript-comments","title":"JavaScript Comments","text":"<pre><code>// Single line comment\n/* Multi-line\n   comment */\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/stats/#css-comments","title":"CSS Comments","text":"<pre><code>/* CSS comment */\n</code></pre>"},{"location":"command-line-tools/commands/application-utilities/stats/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/application-utilities/stats/#1-project-health-assessment","title":"1. Project Health Assessment","text":"<p><pre><code>wheels stats\n</code></pre> Check: - Test coverage ratio (aim for 1:1 or higher) - Comment percentage (5-15% is typical) - File size distribution</p>"},{"location":"command-line-tools/commands/application-utilities/stats/#2-code-review-preparation","title":"2. Code Review Preparation","text":"<p><pre><code>wheels stats verbose=true\n</code></pre> Identify: - Largest files that may need refactoring - Areas with low test coverage - Files lacking documentation</p>"},{"location":"command-line-tools/commands/application-utilities/stats/#3-project-documentation","title":"3. Project Documentation","text":"<p><pre><code>wheels stats &gt; project-stats.txt\n</code></pre> Include in documentation to show: - Project size and complexity - Test coverage metrics - Code organization</p>"},{"location":"command-line-tools/commands/application-utilities/stats/#4-refactoring-targets","title":"4. Refactoring Targets","text":"<p>Use verbose mode to find: - Oversized files (&gt;300 LOC) - Controllers/models that do too much - Areas needing more tests</p>"},{"location":"command-line-tools/commands/application-utilities/stats/#best-practices","title":"Best Practices","text":""},{"location":"command-line-tools/commands/application-utilities/stats/#ideal-metrics","title":"Ideal Metrics","text":"<ul> <li>Code to Test Ratio: 1:1 or higher</li> <li>Average LOC per File: 100-200 lines</li> <li>Comment Percentage: 5-15%</li> <li>Largest Files: Under 500 LOC</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/stats/#warning-signs","title":"Warning Signs","text":"<ul> <li>Test ratio below 1:0.5 (50% coverage)</li> <li>Files over 500 LOC</li> <li>Comment percentage below 3%</li> <li>Controllers larger than models</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/stats/#interpreting-results","title":"Interpreting Results","text":""},{"location":"command-line-tools/commands/application-utilities/stats/#good-signs","title":"Good Signs","text":"<ul> <li>High test coverage (1:1 or better)</li> <li>Consistent file sizes</li> <li>Adequate comments</li> <li>More view files than controllers (proper MVC separation)</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/stats/#areas-for-improvement","title":"Areas for Improvement","text":"<ul> <li>Low test coverage (below 1:0.5)</li> <li>Very large files (over 500 LOC)</li> <li>Low comment percentage (under 3%)</li> <li>More controller code than model code</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/stats/#performance","title":"Performance","text":"<p>The command efficiently analyzes files by: - Reading files once - Processing in memory - Skipping binary files - Ignoring vendor/modules directories</p>"},{"location":"command-line-tools/commands/application-utilities/stats/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels about</code> - General application information</li> <li><code>wheels notes</code> - Extract code annotations</li> <li><code>wheels test:coverage</code> - Actual test coverage</li> <li><code>wheels analyze code</code> - Code quality analysis</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/stats/#tips","title":"Tips","text":"<ul> <li>Run regularly to track code growth</li> <li>Use verbose mode to identify refactoring candidates</li> <li>Compare stats before and after major features</li> <li>Set team standards for file sizes and test coverage</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/stats/#limitations","title":"Limitations","text":"<ul> <li>LOC counting is line-based, not statement-based</li> <li>Test coverage ratio is based on LOC, not actual code coverage</li> <li>Comments in strings may be counted as comments</li> <li>Doesn't analyze code complexity or quality</li> </ul>"},{"location":"command-line-tools/commands/application-utilities/stats/#file-filters","title":"File Filters","text":"<p>The command uses these patterns: - Controllers: <code>*.cfc</code> in <code>/app/controllers</code> - Models: <code>*.cfc</code> in <code>/app/models</code> - Views: <code>*.cfm</code> in <code>/app/views</code> - Tests: <code>*.cfc</code> in <code>/tests</code> - JavaScript: <code>*.js</code> in <code>/public/javascripts</code> - CSS: <code>*.css</code>, <code>*.scss</code>, <code>*.sass</code> in <code>/public/stylesheets</code></p>"},{"location":"command-line-tools/commands/ci/ci-init/","title":"wheels ci init","text":"<p>Initialize continuous integration configuration for your Wheels application.</p>"},{"location":"command-line-tools/commands/ci/ci-init/#synopsis","title":"Synopsis","text":"<pre><code>wheels ci init [provider] [options]\n</code></pre>"},{"location":"command-line-tools/commands/ci/ci-init/#description","title":"Description","text":"<p>The <code>wheels ci init</code> command sets up continuous integration (CI) configuration files for your Wheels application. It generates CI/CD pipeline configurations for popular CI providers like GitHub Actions, GitLab CI, Jenkins, and others.</p>"},{"location":"command-line-tools/commands/ci/ci-init/#arguments","title":"Arguments","text":"Argument Description Default <code>provider</code> CI provider to configure (github, gitlab, jenkins, travis, circle) <code>github</code>"},{"location":"command-line-tools/commands/ci/ci-init/#options","title":"Options","text":"Option Description <code>--template</code> Use a specific template (basic, full, minimal) <code>--branch</code> Default branch name <code>--engines</code> CFML engines to test (lucee5, lucee6, adobe2018, adobe2021, adobe2023) <code>--databases</code> Databases to test against (h2, mysql, postgresql, sqlserver) <code>--force</code> Overwrite existing CI configuration <code>--help</code> Show help information"},{"location":"command-line-tools/commands/ci/ci-init/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/ci/ci-init/#initialize-github-actions","title":"Initialize GitHub Actions","text":"<pre><code>wheels ci init github\n</code></pre>"},{"location":"command-line-tools/commands/ci/ci-init/#initialize-with-specific-engines","title":"Initialize with specific engines","text":"<pre><code>wheels ci init github --engines=lucee6,adobe2023\n</code></pre>"},{"location":"command-line-tools/commands/ci/ci-init/#initialize-with-multiple-databases","title":"Initialize with multiple databases","text":"<pre><code>wheels ci init github --databases=mysql,postgresql\n</code></pre>"},{"location":"command-line-tools/commands/ci/ci-init/#initialize-gitlab-ci","title":"Initialize GitLab CI","text":"<pre><code>wheels ci init gitlab --branch=develop\n</code></pre>"},{"location":"command-line-tools/commands/ci/ci-init/#use-full-template-with-force-overwrite","title":"Use full template with force overwrite","text":"<pre><code>wheels ci init github --template=full --force\n</code></pre>"},{"location":"command-line-tools/commands/ci/ci-init/#what-it-does","title":"What It Does","text":"<ol> <li>Creates CI configuration files in the appropriate location:</li> <li>GitHub Actions: <code>.github/workflows/ci.yml</code></li> <li>GitLab CI: <code>.gitlab-ci.yml</code></li> <li>Jenkins: <code>Jenkinsfile</code></li> <li>Travis CI: <code>.travis.yml</code></li> <li> <p>CircleCI: <code>.circleci/config.yml</code></p> </li> <li> <p>Configures test matrix for:</p> </li> <li>Multiple CFML engines</li> <li>Multiple database systems</li> <li> <p>Different operating systems (if supported)</p> </li> <li> <p>Sets up common CI tasks:</p> </li> <li>Dependency installation</li> <li>Database setup</li> <li>Test execution</li> <li>Code coverage reporting</li> <li>Artifact generation</li> </ol>"},{"location":"command-line-tools/commands/ci/ci-init/#generated-configuration","title":"Generated Configuration","text":"<p>Example GitHub Actions configuration:</p> <pre><code>name: CI\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        cfengine: [lucee5, lucee6, adobe2023]\n        database: [h2]\n\n    steps:\n      - uses: actions/checkout@v4\n      - name: Setup CommandBox\n        uses: ortus-solutions/setup-commandbox@v2\n      - name: Install dependencies\n        run: box install\n      - name: Start server\n        run: box server start cfengine=${{ matrix.cfengine }}\n      - name: Run tests\n        run: box testbox run\n</code></pre>"},{"location":"command-line-tools/commands/ci/ci-init/#templates","title":"Templates","text":""},{"location":"command-line-tools/commands/ci/ci-init/#basic-template","title":"Basic Template","text":"<ul> <li>Single engine and database</li> <li>Essential test execution</li> <li>Minimal configuration</li> </ul>"},{"location":"command-line-tools/commands/ci/ci-init/#full-template","title":"Full Template","text":"<ul> <li>Multiple engines and databases</li> <li>Code coverage</li> <li>Deployment steps</li> <li>Notifications</li> </ul>"},{"location":"command-line-tools/commands/ci/ci-init/#minimal-template","title":"Minimal Template","text":"<ul> <li>Bare minimum for CI</li> <li>Quick setup</li> <li>No extras</li> </ul>"},{"location":"command-line-tools/commands/ci/ci-init/#use-cases","title":"Use Cases","text":"<ol> <li>New Project Setup: Quickly add CI/CD to a new Wheels project</li> <li>Migration: Move from one CI provider to another</li> <li>Standardization: Apply consistent CI configuration across projects</li> <li>Multi-Engine Testing: Ensure compatibility across CFML engines</li> </ol>"},{"location":"command-line-tools/commands/ci/ci-init/#notes","title":"Notes","text":"<ul> <li>Requires a valid Wheels application structure</li> <li>Some providers may require additional authentication setup</li> <li>Database services are configured as Docker containers where possible</li> <li>The command respects existing <code>.gitignore</code> patterns</li> </ul>"},{"location":"command-line-tools/commands/ci/ci-init/#see-also","title":"See Also","text":"<ul> <li>wheels test - Run tests locally</li> <li>wheels docker init - Initialize Docker configuration</li> <li>wheels deploy - Deployment commands</li> </ul>"},{"location":"command-line-tools/commands/config/config-env/","title":"wheels config env","text":"<p>Manage environment-specific configuration for your Wheels application.</p>"},{"location":"command-line-tools/commands/config/config-env/#usage","title":"Usage","text":"<pre><code>wheels config env &lt;action&gt; [source] [target]\n</code></pre>"},{"location":"command-line-tools/commands/config/config-env/#parameters","title":"Parameters","text":"<ul> <li><code>action</code> - (Required) Action to perform: <code>list</code>, <code>create</code>, <code>copy</code></li> <li><code>source</code> - (Optional) Source environment for copy action</li> <li><code>target</code> - (Optional) Target environment for create or copy action</li> </ul>"},{"location":"command-line-tools/commands/config/config-env/#description","title":"Description","text":"<p>The <code>wheels config env</code> command provides tools for managing environment-specific configurations. It helps you list, create, and copy configurations between different environments.</p>"},{"location":"command-line-tools/commands/config/config-env/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/config/config-env/#list-all-environments","title":"List all environments","text":"<pre><code>wheels config env list\n</code></pre>"},{"location":"command-line-tools/commands/config/config-env/#create-a-new-environment","title":"Create a new environment","text":"<pre><code>wheels config env create production\n</code></pre>"},{"location":"command-line-tools/commands/config/config-env/#copy-environment-configuration","title":"Copy environment configuration","text":"<pre><code>wheels config env copy development production\n</code></pre>"},{"location":"command-line-tools/commands/config/config-env/#actions","title":"Actions","text":""},{"location":"command-line-tools/commands/config/config-env/#list-environments","title":"List Environments","text":"<p>Display all available environments:</p> <pre><code>wheels config env list\n</code></pre> <p>Output: <pre><code>Available Environments:\n----------------------\n\u2022 development (active)\n\u2022 testing\n\u2022 maintenance  \n\u2022 production\n</code></pre></p>"},{"location":"command-line-tools/commands/config/config-env/#create-environment","title":"Create Environment","text":"<p>Create a new environment configuration:</p> <pre><code>wheels config env create staging\n</code></pre> <p>This creates a new environment configuration file at <code>/config/staging/settings.cfm</code>.</p>"},{"location":"command-line-tools/commands/config/config-env/#copy-environment","title":"Copy Environment","text":"<p>Copy configuration from one environment to another:</p> <pre><code>wheels config env copy development staging\n</code></pre> <p>This copies all settings from the development environment to the staging environment, preserving environment-specific values like datasource names.</p>"},{"location":"command-line-tools/commands/config/config-env/#notes","title":"Notes","text":"<ul> <li>Some operations require application restart</li> <li>Sensitive values protected by default</li> <li>Changes logged for audit purposes</li> <li>Use templates for consistency</li> </ul>"},{"location":"command-line-tools/commands/config/config-env/#see-also","title":"See Also","text":"<ul> <li>wheels config list - List all settings</li> <li>wheels config set - Set configuration values</li> <li>wheels env - Environment management</li> <li>Configuration Guide</li> </ul>"},{"location":"command-line-tools/commands/config/config-list/","title":"wheels config list","text":"<p>List all configuration settings for your Wheels application.</p>"},{"location":"command-line-tools/commands/config/config-list/#usage","title":"Usage","text":"<pre><code>wheels config list [--environment=&lt;env&gt;] [--filter=&lt;pattern&gt;] [--show-sensitive]\n</code></pre>"},{"location":"command-line-tools/commands/config/config-list/#parameters","title":"Parameters","text":"<ul> <li><code>--environment</code> - (Optional) Environment to display settings for: <code>development</code>, <code>testing</code>, <code>production</code></li> <li><code>--filter</code> - (Optional) Filter results by this string</li> <li><code>--show-sensitive</code> - (Optional) Show sensitive information (passwords, keys, etc.)</li> </ul>"},{"location":"command-line-tools/commands/config/config-list/#description","title":"Description","text":"<p>The <code>wheels config list</code> command displays all configuration settings for your Wheels application. It shows current values and helps you understand your application's configuration state.</p>"},{"location":"command-line-tools/commands/config/config-list/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/config/config-list/#list-all-settings","title":"List all settings","text":"<pre><code>wheels config list\n</code></pre>"},{"location":"command-line-tools/commands/config/config-list/#filter-by-pattern","title":"Filter by pattern","text":"<pre><code>wheels config list --filter=cache\nwheels config list --filter=database\n</code></pre>"},{"location":"command-line-tools/commands/config/config-list/#show-sensitive-values","title":"Show sensitive values","text":"<pre><code>wheels config list --show-sensitive\n</code></pre>"},{"location":"command-line-tools/commands/config/config-list/#environment-specific-settings","title":"Environment-specific settings","text":"<pre><code>wheels config list --environment=production\nwheels config list --environment=testing\n</code></pre>"},{"location":"command-line-tools/commands/config/config-list/#combined-options","title":"Combined options","text":"<pre><code>wheels config list --environment=production --filter=cache --show-sensitive\n</code></pre>"},{"location":"command-line-tools/commands/config/config-list/#output-example","title":"Output Example","text":"<pre><code>Wheels Configuration Settings\n============================\n\nSetting                          Value\n-------------------------------- --------------------------------\ndataSourceName                   wheels_dev\nenvironment                      development\nreloadPassword                   ********\nshowDebugInformation            true\nshowErrorInformation            true\ncacheFileChecking               false\ncacheQueries                    false\ncacheActions                    false\nurlRewriting                    partial\nassetQueryString                true\nassetPaths                      true\n</code></pre> <p>When using <code>--show-sensitive</code>, password values are displayed: <pre><code>reloadPassword                   mySecretPassword123\n</code></pre></p>"},{"location":"command-line-tools/commands/config/config-list/#common-configuration-settings","title":"Common Configuration Settings","text":"<p>The command displays all Wheels configuration settings including:</p> <ul> <li>Database: <code>dataSourceName</code>, <code>dataSourceUserName</code>, <code>dataSourcePassword</code></li> <li>Cache: <code>cacheQueries</code>, <code>cacheActions</code>, <code>cachePages</code>, <code>cachePartials</code></li> <li>Security: <code>reloadPassword</code>, <code>showDebugInformation</code>, <code>showErrorInformation</code></li> <li>URLs/Routing: <code>urlRewriting</code>, <code>assetQueryString</code>, <code>assetPaths</code></li> <li>Environment: <code>environment</code>, <code>hostName</code></li> </ul>"},{"location":"command-line-tools/commands/config/config-list/#filtering","title":"Filtering","text":"<p>Use the <code>--filter</code> parameter to search for specific settings:</p> <pre><code># Find all cache-related settings\nwheels config list --filter=cache\n\n# Find datasource settings\nwheels config list --filter=datasource\n</code></pre>"},{"location":"command-line-tools/commands/config/config-list/#security","title":"Security","text":"<p>By default, sensitive values like passwords are masked with asterisks (<code>********</code>). Use <code>--show-sensitive</code> to display actual values:</p> <pre><code># Show all settings including passwords\nwheels config list --show-sensitive\n</code></pre>"},{"location":"command-line-tools/commands/config/config-list/#environment-specific-settings_1","title":"Environment-Specific Settings","text":"<p>View settings for different environments:</p> <pre><code># Production settings\nwheels config list --environment=production\n\n# Testing environment\nwheels config list --environment=testing\n</code></pre>"},{"location":"command-line-tools/commands/config/config-list/#notes","title":"Notes","text":"<ul> <li>Some settings require restart to take effect</li> <li>Sensitive values are automatically hidden</li> <li>Custom settings from plugins included</li> <li>Performance impact minimal</li> </ul>"},{"location":"command-line-tools/commands/config/config-list/#see-also","title":"See Also","text":"<ul> <li>wheels config set - Set configuration values</li> <li>wheels config env - Environment configuration</li> <li>wheels env - Environment management</li> <li>Configuration Guide</li> </ul>"},{"location":"command-line-tools/commands/config/config-set/","title":"wheels config set","text":"<p>Set configuration values for your Wheels application.</p>"},{"location":"command-line-tools/commands/config/config-set/#usage","title":"Usage","text":"<pre><code>wheels config set &lt;key&gt;=&lt;value&gt; [--environment=&lt;env&gt;] [--encrypt]\n</code></pre>"},{"location":"command-line-tools/commands/config/config-set/#parameters","title":"Parameters","text":"<ul> <li><code>setting</code> - (Required) Key=Value pair for the setting to update</li> <li><code>--environment</code> - (Optional) Environment to apply settings to: <code>development</code>, <code>testing</code>, <code>production</code>, <code>all</code>. Default: <code>development</code></li> <li><code>--encrypt</code> - (Optional) Encrypt sensitive values</li> </ul>"},{"location":"command-line-tools/commands/config/config-set/#description","title":"Description","text":"<p>The <code>wheels config set</code> command updates configuration settings in your Wheels application. Settings must be provided in <code>key=value</code> format.</p>"},{"location":"command-line-tools/commands/config/config-set/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/config/config-set/#set-basic-configuration","title":"Set basic configuration","text":"<pre><code>wheels config set dataSourceName=wheels_production\n</code></pre>"},{"location":"command-line-tools/commands/config/config-set/#set-for-specific-environment","title":"Set for specific environment","text":"<pre><code>wheels config set showDebugInformation=false --environment=production\nwheels config set reloadPassword=newPassword --environment=production\n</code></pre>"},{"location":"command-line-tools/commands/config/config-set/#set-for-all-environments","title":"Set for all environments","text":"<pre><code>wheels config set defaultLayout=main --environment=all\n</code></pre>"},{"location":"command-line-tools/commands/config/config-set/#set-encrypted-value","title":"Set encrypted value","text":"<pre><code>wheels config set apiKey=sk_live_abc123 --encrypt\nwheels config set dataSourcePassword=mySecret --encrypt\n</code></pre>"},{"location":"command-line-tools/commands/config/config-set/#configuration-values","title":"Configuration Values","text":"<p>The command accepts various value types:</p>"},{"location":"command-line-tools/commands/config/config-set/#string-values","title":"String Values","text":"<pre><code>wheels config set appName=\"My Wheels App\"\nwheels config set emailFrom=noreply@example.com\n</code></pre>"},{"location":"command-line-tools/commands/config/config-set/#boolean-values","title":"Boolean Values","text":"<pre><code>wheels config set showDebugInformation=true\nwheels config set cacheQueries=false\n</code></pre>"},{"location":"command-line-tools/commands/config/config-set/#numeric-values","title":"Numeric Values","text":"<pre><code>wheels config set sessionTimeout=1800\nwheels config set maxUploadSize=10485760\n</code></pre>"},{"location":"command-line-tools/commands/config/config-set/#where-settings-are-saved","title":"Where Settings Are Saved","text":"<p>Settings are saved to environment-specific configuration files:</p> <ul> <li>Development: <code>/config/development/settings.cfm</code></li> <li>Testing: <code>/config/testing/settings.cfm</code> </li> <li>Production: <code>/config/production/settings.cfm</code></li> <li>All environments: <code>/config/settings.cfm</code></li> </ul> <p>Example: <pre><code>// Added to /config/production/settings.cfm\nset(dataSourceName=\"wheels_production\");\n</code></pre></p>"},{"location":"command-line-tools/commands/config/config-set/#sensitive-values","title":"Sensitive Values","text":"<p>Use the <code>--encrypt</code> flag for sensitive values:</p> <pre><code>wheels config set reloadPassword=mySecret --encrypt\nwheels config set apiKey=sk_live_123456 --encrypt\n</code></pre>"},{"location":"command-line-tools/commands/config/config-set/#environment-specific-settings","title":"Environment-Specific Settings","text":"<p>Target specific environments with the <code>--environment</code> flag:</p> <pre><code># Development only\nwheels config set showDebugInformation=true --environment=development\n\n# Production only\nwheels config set cacheQueries=true --environment=production\n\n# All environments\nwheels config set appName=\"My App\" --environment=all\n</code></pre>"},{"location":"command-line-tools/commands/config/config-set/#best-practices","title":"Best Practices","text":"<ol> <li>Use environment-specific settings: Don't set production values in development</li> <li>Encrypt sensitive data: Use <code>--encrypt</code> for passwords and keys</li> <li>Test changes: Verify settings with <code>wheels config list</code></li> <li>Restart after changes: Some settings require application restart</li> </ol>"},{"location":"command-line-tools/commands/config/config-set/#notes","title":"Notes","text":"<ul> <li>Some settings require application restart</li> <li>Encrypted values can't be read back</li> <li>Changes are logged for audit</li> <li>Use environment variables for containers</li> </ul>"},{"location":"command-line-tools/commands/config/config-set/#see-also","title":"See Also","text":"<ul> <li>wheels config list - List configuration</li> <li>wheels config env - Environment config</li> <li>wheels env - Environment management</li> <li>Configuration Guide</li> </ul>"},{"location":"command-line-tools/commands/core/deps/","title":"wheels deps","text":"<p>Manage application dependencies using box.json.</p>"},{"location":"command-line-tools/commands/core/deps/#synopsis","title":"Synopsis","text":"<pre><code>wheels deps &lt;action&gt; [name] [options]\n</code></pre>"},{"location":"command-line-tools/commands/core/deps/#description","title":"Description","text":"<p>The <code>wheels deps</code> command provides a streamlined interface for managing your Wheels application's dependencies through box.json. It integrates with CommandBox's package management system while providing Wheels-specific conveniences.</p>"},{"location":"command-line-tools/commands/core/deps/#arguments","title":"Arguments","text":"Argument Description Default <code>action</code> Required - Action to perform: <code>list</code>, <code>install</code>, <code>update</code>, <code>remove</code>, <code>report</code> None <code>name</code> Package name (required for install/update/remove actions) None <code>version</code> Specific version to install (optional, for install action only) Latest version"},{"location":"command-line-tools/commands/core/deps/#options","title":"Options","text":"Option Description Default <code>--dev</code> Install as development dependency (install action only) false"},{"location":"command-line-tools/commands/core/deps/#actions","title":"Actions","text":""},{"location":"command-line-tools/commands/core/deps/#list","title":"List","text":"<p>Display all dependencies from box.json with their installation status.</p> <pre><code>wheels deps list\n</code></pre> <p>Output shows: - Package name - Version specification - Type (Production/Development) - Installation status</p> <p>Example output: <pre><code>Dependencies:\n  wheels-core @ ^3.0.0 (Production) - Installed\n  wirebox @ ^7 (Production) - Installed\n  testbox @ ^5 (Production) - Installed\n\nDev Dependencies:\n  commandbox-dotenv @ * (Development) - Not Installed\n  commandbox-cfformat @ * (Development) - Installed\n</code></pre></p>"},{"location":"command-line-tools/commands/core/deps/#install","title":"Install","text":"<p>Install a new dependency and add it to box.json.</p> <pre><code>wheels deps install &lt;name&gt;\nwheels deps install &lt;name&gt; &lt;version&gt;\nwheels deps install &lt;name&gt; --dev\n</code></pre> <p>Examples: <pre><code># Install latest version as production dependency\nwheels deps install cbvalidation\n\n# Install specific version\nwheels deps install cbvalidation 3.0.0\n\n# Install as development dependency\nwheels deps install testbox --dev\n</code></pre></p>"},{"location":"command-line-tools/commands/core/deps/#update","title":"Update","text":"<p>Update an existing dependency to the latest version allowed by its version specification.</p> <pre><code>wheels deps update &lt;name&gt;\n</code></pre> <p>Example: <pre><code>wheels deps update wirebox\n</code></pre></p> <p>The command will: - Check if the dependency exists in box.json - Determine if it's a production or dev dependency - Update to the latest compatible version - Show version change information</p>"},{"location":"command-line-tools/commands/core/deps/#remove","title":"Remove","text":"<p>Remove a dependency from both box.json and the file system.</p> <pre><code>wheels deps remove &lt;name&gt;\n</code></pre> <p>Example: <pre><code>wheels deps remove oldpackage\n</code></pre></p> <p>Note: Remove action will ask for confirmation before proceeding.</p>"},{"location":"command-line-tools/commands/core/deps/#report","title":"Report","text":"<p>Generate a comprehensive dependency report with outdated package check.</p> <pre><code>wheels deps report\n</code></pre> <p>The report includes: - Project information (name, version) - Wheels version - CFML engine details - All dependencies with installation status - Development dependencies - Installed modules information - Outdated package check - Export to JSON file</p> <p>Example output: <pre><code>Dependency Report:\n\nGenerated: 2025-06-04 10:05:35\nProject: my-wheels-app\nProject Version: 1.0.0\nWheels Version: 3.0.0\nCFML Engine: Lucee 5.4.6.9\n\nDependencies:\n  wheels-core @ ^3.0.0 - Installed: Yes\n  wirebox @ ^7 - Installed: Yes\n\nDev Dependencies:\n  testbox @ ^5 - Installed: Yes\n\nChecking for outdated packages...\nAll packages are up to date!\n\nFull report exported to: dependency-report-20250604-100535.json\n</code></pre></p>"},{"location":"command-line-tools/commands/core/deps/#integration-with-commandbox","title":"Integration with CommandBox","text":"<p>The <code>wheels deps</code> commands delegate to CommandBox's package management system: - <code>install</code> uses <code>box install</code> - <code>update</code> uses <code>box update</code> - <code>remove</code> uses <code>box uninstall</code> - <code>report</code> uses <code>box outdated</code></p> <p>This ensures compatibility with the broader CFML package ecosystem.</p>"},{"location":"command-line-tools/commands/core/deps/#working-with-boxjson","title":"Working with box.json","text":"<p>The command manages two dependency sections in box.json:</p>"},{"location":"command-line-tools/commands/core/deps/#production-dependencies","title":"Production Dependencies","text":"<pre><code>{\n  \"dependencies\": {\n    \"wheels-core\": \"^3.0.0\",\n    \"wirebox\": \"^7\"\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/core/deps/#development-dependencies","title":"Development Dependencies","text":"<pre><code>{\n  \"devDependencies\": {\n    \"testbox\": \"^5\",\n    \"commandbox-cfformat\": \"*\"\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/core/deps/#installation-status","title":"Installation Status","text":"<p>The command checks for installed packages in the <code>/modules</code> directory. It handles various package naming conventions: - Simple names: <code>wirebox</code> - Namespaced: <code>forgebox:wirebox</code> - Versioned: <code>wirebox@7.0.0</code></p>"},{"location":"command-line-tools/commands/core/deps/#error-handling","title":"Error Handling","text":"<p>Common scenarios: - No box.json: Prompts to run <code>box init</code> - Package not found: Shows available dependencies - Update failures: Shows current and attempted versions - Network issues: Displays CommandBox error messages</p>"},{"location":"command-line-tools/commands/core/deps/#best-practices","title":"Best Practices","text":"<ol> <li>Initialize First: Run <code>box init</code> before managing dependencies</li> <li>Use Version Constraints: Specify version ranges for stability</li> <li>Separate Dev Dependencies: Use <code>--dev</code> for test/build tools</li> <li>Regular Updates: Run <code>wheels deps report</code> to check for outdated packages</li> <li>Commit box.json: Always version control your dependency specifications</li> </ol>"},{"location":"command-line-tools/commands/core/deps/#notes","title":"Notes","text":"<ul> <li>Dependencies are installed to the <code>/modules</code> directory</li> <li>The command respects CommandBox's dependency resolution</li> <li>Version specifications follow npm-style semver patterns</li> <li>Dev dependencies are not installed in production environments</li> </ul>"},{"location":"command-line-tools/commands/core/deps/#see-also","title":"See Also","text":"<ul> <li>box install - CommandBox package installation</li> <li>box.json - Package descriptor documentation</li> <li>wheels init - Initialize a Wheels application</li> <li>wheels plugins - Manage Wheels CLI plugins</li> </ul>"},{"location":"command-line-tools/commands/core/destroy/","title":"wheels destroy","text":"<p>Remove generated code and files associated with a model, controller, views, and tests.</p>"},{"location":"command-line-tools/commands/core/destroy/#synopsis","title":"Synopsis","text":"<pre><code>wheels destroy &lt;name&gt;\nwheels d &lt;name&gt;\n</code></pre>"},{"location":"command-line-tools/commands/core/destroy/#description","title":"Description","text":"<p>The <code>wheels destroy</code> command removes all files and code associated with a resource that was previously generated. It's useful for cleaning up mistakes or removing features completely. This command will also drop the associated database table and remove resource routes.</p>"},{"location":"command-line-tools/commands/core/destroy/#arguments","title":"Arguments","text":"Argument Description Required <code>name</code> Name of the resource to destroy Yes"},{"location":"command-line-tools/commands/core/destroy/#options","title":"Options","text":"<p>This command has no additional options. It always prompts for confirmation before proceeding.</p>"},{"location":"command-line-tools/commands/core/destroy/#what-gets-removed","title":"What Gets Removed","text":"<p>When you destroy a resource, the following items are deleted: - Model file (<code>/app/models/[Name].cfc</code>) - Controller file (<code>/app/controllers/[Names].cfc</code>) - Views directory (<code>/app/views/[names]/</code>) - Model test file (<code>/tests/Testbox/specs/models/[Name].cfc</code>) - Controller test file (<code>/tests/Testbox/specs/controllers/[Names].cfc</code>) - View test directory (<code>/tests/Testbox/specs/views/[names]/</code>) - Resource route entry in <code>/config/routes.cfm</code> - Database table (if confirmed)</p>"},{"location":"command-line-tools/commands/core/destroy/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/core/destroy/#basic-destroy","title":"Basic destroy","text":"<pre><code>wheels destroy user\n</code></pre> <p>This will prompt: <pre><code>================================================\n= Watch Out!                                   =\n================================================\nThis will delete the associated database table 'users', and\nthe following files and directories:\n\n/app/models/User.cfc\n/app/controllers/Users.cfc\n/app/views/users/\n/tests/Testbox/specs/models/User.cfc\n/tests/Testbox/specs/controllers/Users.cfc\n/tests/Testbox/specs/views/users/\n/config/routes.cfm\n.resources(\"users\")\n\nAre you sure? [y/n]\n</code></pre></p>"},{"location":"command-line-tools/commands/core/destroy/#using-the-alias","title":"Using the alias","text":"<pre><code>wheels d product\n</code></pre>"},{"location":"command-line-tools/commands/core/destroy/#confirmation","title":"Confirmation","text":"<p>The command always asks for confirmation and shows exactly what will be deleted:</p> <pre><code>================================================\n= Watch Out!                                   =\n================================================\nThis will delete the associated database table 'users', and\nthe following files and directories:\n\n/app/models/User.cfc\n/app/controllers/Users.cfc\n/app/views/users/\n/tests/Testbox/specs/models/User.cfc\n/tests/Testbox/specs/controllers/Users.cfc\n/tests/Testbox/specs/views/users/\n/config/routes.cfm\n.resources(\"users\")\n\nAre you sure? [y/n]\n</code></pre>"},{"location":"command-line-tools/commands/core/destroy/#safety-features","title":"Safety Features","text":"<ol> <li>Confirmation Required: Always asks for confirmation before proceeding</li> <li>Shows All Changes: Lists all files and directories that will be deleted</li> <li>Database Migration: Creates and runs a migration to drop the table</li> <li>Route Cleanup: Automatically removes resource routes from routes.cfm</li> </ol>"},{"location":"command-line-tools/commands/core/destroy/#what-gets-destroyed","title":"What Gets Destroyed","text":"<ol> <li>Files Deleted:</li> <li>Model file</li> <li>Controller file </li> <li>Views directory and all view files</li> <li> <p>Test files (model, controller, and view tests)</p> </li> <li> <p>Database Changes:</p> </li> <li>Creates a migration to drop the table</li> <li> <p>Runs <code>wheels dbmigrate latest</code> to execute the migration</p> </li> <li> <p>Route Changes:</p> </li> <li>Removes <code>.resources(\"name\")</code> from routes.cfm</li> <li>Cleans up extra whitespace</li> </ol>"},{"location":"command-line-tools/commands/core/destroy/#best-practices","title":"Best Practices","text":"<ol> <li>Commit First: Always commit your changes before destroying</li> <li>Review Carefully: Read the confirmation list carefully</li> <li>Check Dependencies: Make sure other code doesn't depend on what you're destroying</li> <li>Backup Database: Have a database backup before running in production</li> </ol>"},{"location":"command-line-tools/commands/core/destroy/#common-workflows","title":"Common Workflows","text":""},{"location":"command-line-tools/commands/core/destroy/#undo-a-generated-resource","title":"Undo a generated resource","text":"<pre><code># Generated the wrong name\nwheels generate resource prduct  # Oops, typo!\nwheels destroy prduct            # Remove it\nwheels generate resource product # Create correct one\n</code></pre>"},{"location":"command-line-tools/commands/core/destroy/#clean-up-after-experimentation","title":"Clean up after experimentation","text":"<pre><code># Try out a feature\nwheels generate scaffold blog_post title:string content:text\n# Decide you don't want it\nwheels destroy blog_post\n</code></pre>"},{"location":"command-line-tools/commands/core/destroy/#notes","title":"Notes","text":"<ul> <li>Cannot be undone - files are permanently deleted</li> <li>Database table is dropped via migration</li> <li>Resource routes are automatically removed from routes.cfm</li> <li>Only works with resources that follow Wheels naming conventions</li> </ul>"},{"location":"command-line-tools/commands/core/destroy/#see-also","title":"See Also","text":"<ul> <li>wheels generate resource - Generate resources</li> <li>wheels generate scaffold - Generate scaffolding</li> <li>wheels dbmigrate remove table - Remove database tables</li> </ul>"},{"location":"command-line-tools/commands/core/info/","title":"wheels info","text":"<p>Display CLI and Wheels framework version information.</p>"},{"location":"command-line-tools/commands/core/info/#synopsis","title":"Synopsis","text":"<pre><code>wheels info\n</code></pre>"},{"location":"command-line-tools/commands/core/info/#description","title":"Description","text":"<p>The <code>wheels info</code> command displays information about the Wheels CLI module and identifies the Wheels framework version in the current directory.</p>"},{"location":"command-line-tools/commands/core/info/#arguments","title":"Arguments","text":"<p>This command has no arguments.</p>"},{"location":"command-line-tools/commands/core/info/#options","title":"Options","text":"Option Description <code>--help</code> Show help information"},{"location":"command-line-tools/commands/core/info/#output","title":"Output","text":"<p>The command displays:</p> <ol> <li>Wheels ASCII Art - A colorful banner</li> <li>Current Working Directory - Where you're running the command from</li> <li>CommandBox Module Root - Where the CLI module is installed</li> <li>Current Wheels Version - The detected Wheels framework version in this directory</li> </ol>"},{"location":"command-line-tools/commands/core/info/#example-output","title":"Example Output","text":"<pre><code>,--.   ,--.,--.                   ,--.            ,-----.,--.   ,--. \n|  |   |  ||  ,---.  ,---.  ,---. |  | ,---.     '  .--./|  |   |  | \n|  |.'.|  ||  .-.  || .-. :| .-. :|  |(  .-'     |  |    |  |   |  | \n|   ,'.   ||  | |  |\\   --.\\   --.|  |.-'  `)    '  '--'\\|  '--.|  | \n'--'   '--'`--' `--' `----' `----'`--'`----'      `-----'`-----'`--' \n============================ Wheels CLI ============================\nCurrent Working Directory: /Users/username/myapp\nCommandBox Module Root: /Users/username/.CommandBox/cfml/modules/cfwheels-cli/\nCurrent Wheels Version in this directory: 2.5.0\n====================================================================\n</code></pre>"},{"location":"command-line-tools/commands/core/info/#use-cases","title":"Use Cases","text":"<ul> <li>Verify CLI installation location</li> <li>Check Wheels framework version in current directory</li> <li>Troubleshoot path issues</li> <li>Quick visual confirmation of Wheels environment</li> </ul>"},{"location":"command-line-tools/commands/core/info/#notes","title":"Notes","text":"<ul> <li>The Wheels version is detected by looking for box.json files in the vendor/wheels directory</li> <li>If no Wheels version is found, it will show \"Not Found\"</li> <li>The colorful ASCII art helps quickly identify you're using Wheels CLI</li> </ul>"},{"location":"command-line-tools/commands/core/info/#see-also","title":"See Also","text":"<ul> <li>wheels init - Initialize a Wheels application</li> <li>wheels deps - Manage dependencies</li> </ul>"},{"location":"command-line-tools/commands/core/init/","title":"wheels init","text":"<p>Bootstrap an existing Wheels application for CLI usage.</p>"},{"location":"command-line-tools/commands/core/init/#synopsis","title":"Synopsis","text":"<pre><code>wheels init\n</code></pre>"},{"location":"command-line-tools/commands/core/init/#description","title":"Description","text":"<p>The <code>wheels init</code> command initializes an existing Wheels application to work with the Wheels CLI. It's an interactive command that helps set up necessary configuration files (box.json and server.json) for an existing Wheels installation.</p>"},{"location":"command-line-tools/commands/core/init/#arguments","title":"Arguments","text":"<p>This command has no arguments - it runs interactively and prompts for required information.</p>"},{"location":"command-line-tools/commands/core/init/#options","title":"Options","text":"Option Description <code>--help</code> Show help information"},{"location":"command-line-tools/commands/core/init/#interactive-prompts","title":"Interactive Prompts","text":"<p>When you run <code>wheels init</code>, you'll be prompted for:</p> <ol> <li>Confirmation - Confirm you want to proceed with initialization</li> <li>Application Name - Used to make server.json server name unique (if box.json doesn't exist)</li> <li>CF Engine - Default CFML engine (e.g., <code>lucee5</code>, <code>adobe2021</code>) (if server.json doesn't exist)</li> </ol>"},{"location":"command-line-tools/commands/core/init/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/core/init/#initialize-current-directory","title":"Initialize current directory","text":"<pre><code>wheels init\n</code></pre> <p>Example interaction: <pre><code>==================================== Wheels init ===================================\n This function will attempt to add a few things \n to an EXISTING Wheels installation to help   \n the CLI interact.\n\n We're going to assume the following:\n  - you've already setup a local datasource/database\n  - you've already set a reload password\n\n We're going to try and do the following:\n  - create a box.json to help keep track of the wheels version\n  - create a server.json\n====================================================================================\n\nSound ok? [y/n] y\nPlease enter an application name: myapp\nPlease enter a default cfengine: lucee5\n</code></pre></p>"},{"location":"command-line-tools/commands/core/init/#what-it-does","title":"What It Does","text":"<ol> <li>Creates <code>vendor/wheels/box.json</code> - Tracks the Wheels framework version</li> <li>Creates <code>server.json</code> - Configures CommandBox server settings with:</li> <li>Unique server name based on application name</li> <li>Selected CF engine</li> <li>Default port and settings</li> <li>Creates <code>box.json</code> - Main project configuration file with:</li> <li>Application name</li> <li>Wheels version dependency</li> <li>Project metadata</li> </ol>"},{"location":"command-line-tools/commands/core/init/#generated-files","title":"Generated Files","text":""},{"location":"command-line-tools/commands/core/init/#serverjson","title":"server.json","text":"<pre><code>{\n  \"name\": \"myapp\",\n  \"web\": {\n    \"http\": {\n      \"port\": 60000\n    }\n  },\n  \"app\": {\n    \"cfengine\": \"lucee5\"\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/core/init/#boxjson","title":"box.json","text":"<pre><code>{\n  \"name\": \"myapp\",\n  \"version\": \"1.0.0\",\n  \"dependencies\": {\n    \"wheels\": \"^2.5.0\"\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/core/init/#prerequisites","title":"Prerequisites","text":"<p>Before running <code>wheels init</code>: - Have an existing Wheels application - Database/datasource already configured - Reload password already set in your application settings</p>"},{"location":"command-line-tools/commands/core/init/#notes","title":"Notes","text":"<ul> <li>Run this command in the root directory of your Wheels application</li> <li>Files are only created if they don't already exist</li> <li>The command detects your current Wheels version automatically</li> <li>Special characters are stripped from application names</li> </ul>"},{"location":"command-line-tools/commands/core/init/#see-also","title":"See Also","text":"<ul> <li>wheels generate app - Create a new Wheels application</li> <li>wheels reload - Reload the application</li> <li>wheels info - Display version information</li> </ul>"},{"location":"command-line-tools/commands/core/reload/","title":"wheels reload","text":"<p>Reload the Wheels application in different modes.</p>"},{"location":"command-line-tools/commands/core/reload/#synopsis","title":"Synopsis","text":"<pre><code>wheels reload [options]\nwheels r [options]\n</code></pre>"},{"location":"command-line-tools/commands/core/reload/#description","title":"Description","text":"<p>The <code>wheels reload</code> command reloads your Wheels application, clearing caches and reinitializing the framework. This is useful during development when you've made changes to configuration, routes, or framework settings. Note: the server must be running for this command to work.</p>"},{"location":"command-line-tools/commands/core/reload/#arguments","title":"Arguments","text":"Argument Description Default <code>mode</code> Reload mode: <code>development</code>, <code>testing</code>, <code>maintenance</code>, <code>production</code> <code>development</code> <code>password</code> Required - The reload password configured in your application None"},{"location":"command-line-tools/commands/core/reload/#options","title":"Options","text":"Option Description <code>--help</code> Show help information"},{"location":"command-line-tools/commands/core/reload/#reload-modes","title":"Reload Modes","text":""},{"location":"command-line-tools/commands/core/reload/#development-mode","title":"Development Mode","text":"<p><pre><code>wheels reload password=mypassword\n</code></pre> - Enables debugging - Shows detailed error messages - Disables caching - Ideal for active development</p>"},{"location":"command-line-tools/commands/core/reload/#testing-mode","title":"Testing Mode","text":"<p><pre><code>wheels reload mode=testing password=mypassword\n</code></pre> - Optimized for running tests - Consistent environment - Predictable caching</p>"},{"location":"command-line-tools/commands/core/reload/#maintenance-mode","title":"Maintenance Mode","text":"<p><pre><code>wheels reload mode=maintenance password=mypassword\n</code></pre> - Shows maintenance page to users - Allows admin access - Useful for deployments</p>"},{"location":"command-line-tools/commands/core/reload/#production-mode","title":"Production Mode","text":"<p><pre><code>wheels reload mode=production password=mypassword\n</code></pre> - Full caching enabled - Minimal error information - Optimized performance</p>"},{"location":"command-line-tools/commands/core/reload/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/core/reload/#basic-reload-development-mode","title":"Basic reload (development mode)","text":"<pre><code>wheels reload password=wheels\n</code></pre>"},{"location":"command-line-tools/commands/core/reload/#reload-in-production-mode","title":"Reload in production mode","text":"<pre><code>wheels reload mode=production password=mySecretPassword\n</code></pre>"},{"location":"command-line-tools/commands/core/reload/#using-the-alias","title":"Using the alias","text":"<pre><code>wheels r password=wheels\n</code></pre>"},{"location":"command-line-tools/commands/core/reload/#reload-for-testing","title":"Reload for testing","text":"<pre><code>wheels reload mode=testing password=wheels\n</code></pre>"},{"location":"command-line-tools/commands/core/reload/#security","title":"Security","text":"<ul> <li>The reload password must match the one configured in your Wheels application</li> <li>Password is sent via URL parameter to the running application</li> <li>Always use a strong password in production environments</li> </ul>"},{"location":"command-line-tools/commands/core/reload/#configuration","title":"Configuration","text":"<p>Set the reload password in your Wheels <code>settings.cfm</code>:</p> <pre><code>set(reloadPassword=\"mySecretPassword\");\n</code></pre>"},{"location":"command-line-tools/commands/core/reload/#notes","title":"Notes","text":"<ul> <li>Reload clears all application caches</li> <li>Session data may be lost during reload</li> <li>Database connections are refreshed</li> <li>All singletons are recreated</li> <li>The server must be running for this command to work</li> </ul>"},{"location":"command-line-tools/commands/core/reload/#common-issues","title":"Common Issues","text":"<ul> <li>Invalid password: Check password in settings.cfm</li> <li>Server not running: Start server with <code>box server start</code></li> <li>Connection refused: Ensure server is accessible on expected port</li> <li>Timeout: Large applications may take time to reload</li> </ul>"},{"location":"command-line-tools/commands/core/reload/#see-also","title":"See Also","text":"<ul> <li>wheels init - Initialize application configuration</li> <li>wheels watch - Auto-reload on file changes</li> <li>wheels info - Display application information</li> </ul>"},{"location":"command-line-tools/commands/core/watch/","title":"wheels watch","text":"<p>Watch Wheels application files for changes and automatically reload the application.</p>"},{"location":"command-line-tools/commands/core/watch/#synopsis","title":"Synopsis","text":"<pre><code>wheels watch [options]\n</code></pre>"},{"location":"command-line-tools/commands/core/watch/#description","title":"Description","text":"<p>The <code>wheels watch</code> command monitors your application files for changes and automatically triggers actions like reloading the application, running tests, or executing custom commands. This provides a smooth development workflow with instant feedback.</p>"},{"location":"command-line-tools/commands/core/watch/#arguments","title":"Arguments","text":"Argument Description Default <code>includeDirs</code> Comma-delimited list of directories to watch <code>controllers,models,views,config,migrator/migrations</code> <code>excludeFiles</code> Comma-delimited list of file patterns to ignore (none) <code>interval</code> Interval in seconds to check for changes <code>1</code> <code>reload</code> Reload framework on changes <code>true</code> <code>tests</code> Run tests on changes <code>false</code> <code>migrations</code> Run migrations on schema changes <code>false</code> <code>command</code> Custom command to run on changes (none) <code>debounce</code> Debounce delay in milliseconds <code>500</code> <p>Note: In CommandBox, boolean flags are specified with <code>--flagname</code> and value parameters with <code>paramname=value</code>.</p>"},{"location":"command-line-tools/commands/core/watch/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/core/watch/#basic-file-watching","title":"Basic file watching","text":"<p><pre><code>wheels watch\n</code></pre> Watches default directories for changes and reloads the application</p>"},{"location":"command-line-tools/commands/core/watch/#watch-with-tests","title":"Watch with tests","text":"<p><pre><code>wheels watch --tests\n</code></pre> Runs tests automatically when files change</p>"},{"location":"command-line-tools/commands/core/watch/#watch-specific-directories","title":"Watch specific directories","text":"<pre><code>wheels watch includeDirs=\"controllers,models\"\n</code></pre>"},{"location":"command-line-tools/commands/core/watch/#exclude-file-patterns","title":"Exclude file patterns","text":"<pre><code>wheels watch excludeFiles=\"*.txt,*.log\"\n</code></pre>"},{"location":"command-line-tools/commands/core/watch/#watch-with-all-features","title":"Watch with all features","text":"<pre><code>wheels watch --reload --tests --migrations\n</code></pre>"},{"location":"command-line-tools/commands/core/watch/#custom-command-on-changes","title":"Custom command on changes","text":"<pre><code>wheels watch command=\"wheels test run\"\n</code></pre>"},{"location":"command-line-tools/commands/core/watch/#adjust-check-interval","title":"Adjust check interval","text":"<pre><code>wheels watch interval=2 debounce=1000\n</code></pre>"},{"location":"command-line-tools/commands/core/watch/#disable-reload-but-run-tests","title":"Disable reload but run tests","text":"<pre><code>wheels watch reload=false --tests\n</code></pre>"},{"location":"command-line-tools/commands/core/watch/#what-it-does","title":"What It Does","text":"<p>The watch command starts with: 1. An initial scan of all watched directories to establish baseline 2. Displays count of files being monitored 3. Checks for changes at the specified interval</p> <p>When changes are detected: - With <code>--reload</code>: Reloads the application - With <code>--tests</code>: Runs tests (smart filtering based on changed files) - With <code>--migrations</code>: Runs migrations if schema files changed - With <code>--command</code>: Executes the specified command</p>"},{"location":"command-line-tools/commands/core/watch/#output-example","title":"Output Example","text":"<pre><code>\ud83d\udd04 Wheels Watch Mode\nMonitoring files for changes...\nPress Ctrl+C to stop watching\n\n\u2713 Will reload framework on changes\n\u2713 Will run tests on changes\n\nWatching 145 files across 5 directories\n\n\ud83d\udcdd Detected changes:\n  ~ /app/models/User.cfc (modified)\n  + /app/models/Profile.cfc (new)\n\n\ud83d\udd04 Reloading application...\n\u2705 Application reloaded successfully at 14:32:15\n\n\ud83e\uddea Running tests...\n\u2705 All actions completed, watching for more changes...\n</code></pre>"},{"location":"command-line-tools/commands/core/watch/#file-exclusion","title":"File Exclusion","text":"<p>The <code>excludeFiles</code> parameter supports patterns: - <code>*.txt</code> - Exclude all .txt files - <code>*.log</code> - Exclude all .log files - <code>temp.cfc</code> - Exclude specific file name - Multiple patterns: <code>excludeFiles=\"*.txt,*.log,temp.*\"</code></p>"},{"location":"command-line-tools/commands/core/watch/#smart-test-running","title":"Smart Test Running","text":"<p>When <code>--tests</code> is enabled, the command intelligently determines which tests to run: - Changes to models run model tests - Changes to controllers run controller tests - Multiple changes batch test execution</p>"},{"location":"command-line-tools/commands/core/watch/#migration-detection","title":"Migration Detection","text":"<p>With <code>--migrations</code> enabled, the command detects: - New migration files in <code>/migrator/migrations/</code> - Changes to schema files - Automatically runs <code>wheels dbmigrate up</code></p>"},{"location":"command-line-tools/commands/core/watch/#performance-considerations","title":"Performance Considerations","text":"<ul> <li>Initial scan time depends on project size</li> <li>Use <code>includeDirs</code> to limit scope</li> <li>Use <code>excludeFiles</code> to skip large files</li> <li>Adjust <code>interval</code> for less frequent checks</li> <li>Use <code>debounce</code> to batch rapid changes</li> </ul>"},{"location":"command-line-tools/commands/core/watch/#common-workflows","title":"Common Workflows","text":""},{"location":"command-line-tools/commands/core/watch/#development-workflow","title":"Development Workflow","text":"<pre><code># Terminal 1: Run server\nbox server start\n\n# Terminal 2: Watch with reload and tests\nwheels watch --reload --tests\n</code></pre>"},{"location":"command-line-tools/commands/core/watch/#frontend-backend","title":"Frontend + Backend","text":"<pre><code># Watch backend files and run build command\nwheels watch command=\"npm run build\"\n</code></pre>"},{"location":"command-line-tools/commands/core/watch/#test-driven-development","title":"Test-Driven Development","text":"<pre><code># Focus on models and controllers with tests\nwheels watch includeDirs=\"models,controllers\" --tests\n</code></pre>"},{"location":"command-line-tools/commands/core/watch/#database-development","title":"Database Development","text":"<pre><code># Watch for migration changes\nwheels watch includeDirs=\"migrator/migrations\" --migrations\n</code></pre>"},{"location":"command-line-tools/commands/core/watch/#best-practices","title":"Best Practices","text":"<ol> <li>Start Simple: Use <code>wheels watch</code> with defaults first</li> <li>Add Features Gradually: Enable tests, migrations as needed</li> <li>Optimize Scope: Use <code>includeDirs</code> for faster performance</li> <li>Exclude Wisely: Skip log files, temp files, etc.</li> <li>Batch Changes: Increase debounce for multiple file saves</li> </ol>"},{"location":"command-line-tools/commands/core/watch/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>High CPU Usage: Reduce check frequency with <code>interval</code></li> <li>Missed Changes: Check excluded patterns</li> <li>Reload Errors: Ensure reload password is configured</li> <li>Test Failures: Run tests manually to debug</li> </ul>"},{"location":"command-line-tools/commands/core/watch/#notes","title":"Notes","text":"<ul> <li>Changes are tracked by file modification time</li> <li>New files are automatically detected</li> <li>Deleted files are removed from tracking</li> <li>Press Ctrl+C to stop watching</li> </ul>"},{"location":"command-line-tools/commands/core/watch/#see-also","title":"See Also","text":"<ul> <li>wheels reload - Manual application reload</li> <li>wheels test run - Run tests manually</li> <li>wheels dbmigrate up - Run migrations</li> </ul>"},{"location":"command-line-tools/commands/database/database-management/","title":"Database Management","text":"<p>The Wheels CLI provides comprehensive database management commands that make it easy to create, manage, and maintain your application's database throughout the development lifecycle.</p>"},{"location":"command-line-tools/commands/database/database-management/#overview","title":"Overview","text":"<p>Database management in Wheels is divided into two main categories:</p> <ol> <li>Database Commands (<code>wheels db</code>) - High-level database operations</li> <li>Migration Commands (<code>wheels dbmigrate</code>) - Schema versioning and changes</li> </ol> <p>This guide covers the database management commands. For migration-specific operations, see the migrations guide.</p>"},{"location":"command-line-tools/commands/database/database-management/#database-lifecycle-commands","title":"Database Lifecycle Commands","text":""},{"location":"command-line-tools/commands/database/database-management/#creating-a-database","title":"Creating a Database","text":"<p>The <code>wheels db create</code> command creates a new database based on your datasource configuration:</p> <pre><code># Create database using default datasource\nwheels db create\n\n# Create database for specific datasource\nwheels db create --datasource=myapp_dev\n\n# Create database for specific environment\nwheels db create --environment=production\n</code></pre> <p>Note: The datasource must already be configured in your CFML server admin. The command will create the database itself but not the datasource configuration.</p>"},{"location":"command-line-tools/commands/database/database-management/#dropping-a-database","title":"Dropping a Database","text":"<p>The <code>wheels db drop</code> command removes an existing database:</p> <pre><code># Drop database (with confirmation)\nwheels db drop\n\n# Drop database without confirmation\nwheels db drop --force\n\n# Drop specific datasource\nwheels db drop --datasource=myapp_dev\n</code></pre> <p>Warning: This is a destructive operation. Always backup important data before dropping a database.</p>"},{"location":"command-line-tools/commands/database/database-management/#database-setup","title":"Database Setup","text":"<p>The <code>wheels db setup</code> command performs a complete database initialization:</p> <pre><code># Full setup: create + migrate + seed\nwheels db setup\n\n# Setup without seeding\nwheels db setup --skip-seed\n\n# Setup with custom seed count\nwheels db setup --seed-count=20\n</code></pre> <p>This is ideal for setting up a new development environment or initializing a test database.</p>"},{"location":"command-line-tools/commands/database/database-management/#database-reset","title":"Database Reset","text":"<p>The <code>wheels db reset</code> command completely rebuilds your database:</p> <pre><code># Reset database (drop + create + migrate + seed)\nwheels db reset\n\n# Reset without confirmation\nwheels db reset --force\n\n# Reset without seeding\nwheels db reset --skip-seed\n\n# Reset specific environment\nwheels db reset --environment=testing\n</code></pre> <p>Important: This command will destroy all existing data. Use with caution, especially in production environments.</p>"},{"location":"command-line-tools/commands/database/database-management/#data-management","title":"Data Management","text":""},{"location":"command-line-tools/commands/database/database-management/#seeding-the-database","title":"Seeding the Database","text":"<p>The <code>wheels db seed</code> command populates your database with test or sample data:</p> <pre><code># Seed with default settings (5 records per model)\nwheels db seed\n\n# Seed with custom record count\nwheels db seed --count=10\n\n# Seed specific models only\nwheels db seed --models=user,post,comment\n\n# Seed from a JSON file\nwheels db seed --dataFile=seeds/test-data.json\n</code></pre> <p>Example seed data file format: <pre><code>{\n  \"users\": [\n    {\n      \"name\": \"John Doe\",\n      \"email\": \"john@example.com\",\n      \"role\": \"admin\"\n    },\n    {\n      \"name\": \"Jane Smith\",\n      \"email\": \"jane@example.com\",\n      \"role\": \"user\"\n    }\n  ],\n  \"posts\": [\n    {\n      \"title\": \"Welcome Post\",\n      \"content\": \"This is the first post\",\n      \"userId\": 1\n    }\n  ]\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/database/database-management/#status-and-information-commands","title":"Status and Information Commands","text":""},{"location":"command-line-tools/commands/database/database-management/#checking-migration-status","title":"Checking Migration Status","text":"<p>The <code>wheels db status</code> command shows the current state of your migrations:</p> <pre><code># Show migration status in table format\nwheels db status\n\n# Show status in JSON format\nwheels db status --format=json\n\n# Show only pending migrations\nwheels db status --pending\n</code></pre> <p>Output example: <pre><code>| Version              | Description                      | Status   | Applied At         |\n|---------------------|----------------------------------|----------|-------------------|\n| 20231201120000      | CreateUsersTable                 | applied  | 2023-12-01 12:30  |\n| 20231202140000      | AddEmailToUsers                  | applied  | 2023-12-02 14:15  |\n| 20231203160000      | CreatePostsTable                 | pending  | Not applied       |\n</code></pre></p>"},{"location":"command-line-tools/commands/database/database-management/#checking-database-version","title":"Checking Database Version","text":"<p>The <code>wheels db version</code> command shows the current schema version:</p> <pre><code># Show current version\nwheels db version\n\n# Show detailed version information\nwheels db version --detailed\n</code></pre>"},{"location":"command-line-tools/commands/database/database-management/#migration-management","title":"Migration Management","text":""},{"location":"command-line-tools/commands/database/database-management/#rolling-back-migrations","title":"Rolling Back Migrations","text":"<p>The <code>wheels db rollback</code> command reverses previously applied migrations:</p> <pre><code># Rollback last migration\nwheels db rollback\n\n# Rollback multiple migrations\nwheels db rollback --steps=3\n\n# Rollback to specific version\nwheels db rollback --target=20231201120000\n\n# Force rollback without confirmation\nwheels db rollback --steps=5 --force\n</code></pre>"},{"location":"command-line-tools/commands/database/database-management/#backup-and-restore","title":"Backup and Restore","text":""},{"location":"command-line-tools/commands/database/database-management/#creating-database-backups","title":"Creating Database Backups","text":"<p>The <code>wheels db dump</code> command exports your database:</p> <pre><code># Basic dump (auto-named with timestamp)\nwheels db dump\n\n# Dump to specific file\nwheels db dump --output=backup.sql\n\n# Dump schema only (no data)\nwheels db dump --schema-only\n\n# Dump data only (no schema)\nwheels db dump --data-only\n\n# Dump specific tables\nwheels db dump --tables=users,posts,comments\n\n# Dump with compression\nwheels db dump --output=backup.sql.gz --compress\n</code></pre>"},{"location":"command-line-tools/commands/database/database-management/#restoring-from-backups","title":"Restoring from Backups","text":"<p>The <code>wheels db restore</code> command imports a database dump:</p> <pre><code># Restore from SQL file\nwheels db restore backup.sql\n\n# Restore compressed file\nwheels db restore backup.sql.gz --compressed\n\n# Clean restore (drop existing objects first)\nwheels db restore backup.sql --clean\n\n# Force restore without confirmation\nwheels db restore backup.sql --force\n</code></pre>"},{"location":"command-line-tools/commands/database/database-management/#common-workflows","title":"Common Workflows","text":""},{"location":"command-line-tools/commands/database/database-management/#setting-up-a-new-development-environment","title":"Setting Up a New Development Environment","text":"<pre><code># 1. Clone the repository\ngit clone https://github.com/myapp/repo.git\ncd repo\n\n# 2. Install dependencies\nbox install\n\n# 3. Setup database\nwheels db setup\n\n# 4. Start the server\nserver start\n</code></pre>"},{"location":"command-line-tools/commands/database/database-management/#resetting-development-database","title":"Resetting Development Database","text":"<pre><code># Quick reset with fresh data\nwheels db reset --force\n\n# Or manually:\nwheels db drop --force\nwheels db create\nwheels dbmigrate latest\nwheels db seed --count=10\n</code></pre>"},{"location":"command-line-tools/commands/database/database-management/#production-database-backup","title":"Production Database Backup","text":"<pre><code># Create timestamped backup\nwheels db dump --compress\n\n# Or with custom filename\nwheels db dump --output=prod-backup-$(date +%Y%m%d).sql.gz --compress\n</code></pre>"},{"location":"command-line-tools/commands/database/database-management/#migrating-between-environments","title":"Migrating Between Environments","text":"<pre><code># Export from development\nwheels db dump --output=dev-data.sql --environment=development\n\n# Import to staging\nwheels db restore dev-data.sql --environment=staging\n</code></pre>"},{"location":"command-line-tools/commands/database/database-management/#interactive-database-shell","title":"Interactive Database Shell","text":"<p>The <code>wheels db shell</code> command provides direct access to your database's interactive shell:</p> <pre><code># Launch CLI shell for current datasource\nwheels db shell\n\n# Launch web-based console (H2 only)\nwheels db shell --web\n\n# Use specific datasource\nwheels db shell --datasource=myapp_dev\n\n# Execute single command\nwheels db shell --command=\"SELECT COUNT(*) FROM users\"\n</code></pre>"},{"location":"command-line-tools/commands/database/database-management/#database-specific-shells","title":"Database-Specific Shells","text":"<p>H2 Database: <pre><code># CLI shell\nwheels db shell\n\n# Web console (opens in browser)\nwheels db shell --web\n</code></pre></p> <p>MySQL: <pre><code># Opens mysql client\nwheels db shell\n# Connects to: mysql -h host -P port -u user -p database\n</code></pre></p> <p>PostgreSQL: <pre><code># Opens psql client\nwheels db shell\n# Connects to: psql -h host -p port -U user -d database\n</code></pre></p> <p>SQL Server: <pre><code># Opens sqlcmd client\nwheels db shell\n# Connects to: sqlcmd -S server -d database -U user\n</code></pre></p>"},{"location":"command-line-tools/commands/database/database-management/#shell-requirements","title":"Shell Requirements","text":"<p>The database shell commands require the appropriate database client tools to be installed:</p> <ul> <li>H2: No additional installation needed (included with Lucee)</li> <li>MySQL: Install <code>mysql</code> client</li> <li>PostgreSQL: Install <code>psql</code> client</li> <li>SQL Server: Install <code>sqlcmd</code> client</li> </ul>"},{"location":"command-line-tools/commands/database/database-management/#database-support","title":"Database Support","text":"<p>The database commands support multiple database engines:</p> <ul> <li>MySQL/MariaDB - Full support for all operations</li> <li>PostgreSQL - Full support for all operations</li> <li>SQL Server - Full support for most operations</li> <li>H2 - Full support (auto-created databases)</li> <li>Oracle - Limited support (basic operations)</li> </ul>"},{"location":"command-line-tools/commands/database/database-management/#configuration","title":"Configuration","text":"<p>Database commands use the datasource configuration from your Wheels application. You can override settings using command parameters:</p> <pre><code># Use specific datasource\nwheels db create --datasource=myapp_test\n\n# Use specific environment\nwheels db setup --environment=testing\n</code></pre>"},{"location":"command-line-tools/commands/database/database-management/#safety-features","title":"Safety Features","text":"<ol> <li>Confirmation Prompts - Destructive operations require confirmation</li> <li>Force Flag - Use <code>--force</code> to skip confirmations in scripts</li> <li>Environment Detection - Extra warnings for production environments</li> <li>Transaction Support - Operations are wrapped in transactions where possible</li> </ol>"},{"location":"command-line-tools/commands/database/database-management/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/database/database-management/#common-issues","title":"Common Issues","text":"<p>Datasource Not Found <pre><code>Error: Datasource 'myapp' not found in server configuration\n</code></pre> Solution: Create the datasource in your CFML server admin first.</p> <p>Database Already Exists <pre><code>Error: Database already exists: myapp_dev\n</code></pre> Solution: Use <code>wheels db drop</code> first or use <code>wheels db reset</code> instead.</p> <p>Permission Denied <pre><code>Error: Access denied for user 'myuser'@'localhost'\n</code></pre> Solution: Ensure the database user has CREATE/DROP privileges.</p> <p>Missing Database Tools <pre><code>Error: mysqldump not found in PATH\n</code></pre> Solution: Install database client tools for dump/restore operations.</p>"},{"location":"command-line-tools/commands/database/database-management/#best-practices","title":"Best Practices","text":"<ol> <li> <p>Always backup before destructive operations <pre><code>wheels db dump --output=backup-before-reset.sql\nwheels db reset\n</code></pre></p> </li> <li> <p>Use environment-specific datasources</p> </li> <li><code>myapp_dev</code> for development</li> <li><code>myapp_test</code> for testing</li> <li> <p><code>myapp_prod</code> for production</p> </li> <li> <p>Automate with scripts <pre><code>#!/bin/bash\n# reset-db.sh\nwheels db dump --output=backups/pre-reset-$(date +%s).sql\nwheels db reset --force\necho \"Database reset complete\"\n</code></pre></p> </li> <li> <p>Version control your seeds</p> </li> <li>Keep seed files in <code>db/seeds/</code></li> <li>Use environment-specific seed files</li> <li>Document seed data structure</li> </ol>"},{"location":"command-line-tools/commands/database/database-management/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels dbmigrate</code> - Database migration commands</li> <li><code>wheels test</code> - Test database operations</li> <li><code>wheels generate model</code> - Generate models with migrations</li> </ul>"},{"location":"command-line-tools/commands/database/db-create/","title":"wheels db create","text":"<p>Create a new database based on your datasource configuration.</p>"},{"location":"command-line-tools/commands/database/db-create/#synopsis","title":"Synopsis","text":"<pre><code>wheels db create [--datasource=&lt;name&gt;] [--environment=&lt;env&gt;]\n</code></pre>"},{"location":"command-line-tools/commands/database/db-create/#description","title":"Description","text":"<p>The <code>wheels db create</code> command creates a new database using the connection information from your configured datasource. The datasource must already exist in your CFML server configuration - this command creates the database itself, not the datasource.</p>"},{"location":"command-line-tools/commands/database/db-create/#options","title":"Options","text":""},{"location":"command-line-tools/commands/database/db-create/#-datasource","title":"--datasource= <p>Specify which datasource to use. If not provided, uses the default datasource from your Wheels configuration.</p> <pre><code>wheels db create --datasource=myapp_dev\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-create/#-environment","title":"--environment= <p>Specify the environment to use. Defaults to the current environment.</p> <pre><code>wheels db create --environment=testing\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-create/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/database/db-create/#basic-usage","title":"Basic Usage <p>Create database using default datasource: <pre><code>wheels db create\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-create/#specific-datasource","title":"Specific Datasource <p>Create database for development: <pre><code>wheels db create --datasource=myapp_dev\n</code></pre></p> <p>Create database for testing: <pre><code>wheels db create --datasource=myapp_test --environment=testing\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-create/#database-specific-behavior","title":"Database-Specific Behavior","text":""},{"location":"command-line-tools/commands/database/db-create/#mysqlmariadb","title":"MySQL/MariaDB <ul> <li>Creates database with UTF8MB4 character set</li> <li>Uses utf8mb4_unicode_ci collation</li> <li>Connects to <code>information_schema</code> to execute CREATE DATABASE</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-create/#postgresql","title":"PostgreSQL <ul> <li>Creates database with UTF8 encoding</li> <li>Checks if database already exists before creating</li> <li>Connects to <code>postgres</code> system database</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-create/#sql-server","title":"SQL Server <ul> <li>Creates database with default settings</li> <li>Checks if database already exists before creating</li> <li>Connects to <code>master</code> system database</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-create/#h2","title":"H2 <ul> <li>Displays message that H2 databases are created automatically</li> <li>No action needed - database file is created on first connection</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-create/#prerequisites","title":"Prerequisites","text":"<ol> <li>Datasource Configuration: The datasource must be configured in your CFML server admin</li> <li>Database Privileges: The database user must have CREATE DATABASE privileges</li> <li>Network Access: The database server must be accessible</li> </ol>"},{"location":"command-line-tools/commands/database/db-create/#error-messages","title":"Error Messages","text":""},{"location":"command-line-tools/commands/database/db-create/#datasource-not-found","title":"\"Datasource not found\" <p>The specified datasource doesn't exist in your server configuration. Create it in your CFML admin first.</p>","text":""},{"location":"command-line-tools/commands/database/db-create/#database-already-exists","title":"\"Database already exists\" <p>The database already exists. Use <code>wheels db drop</code> first if you need to recreate it.</p>","text":""},{"location":"command-line-tools/commands/database/db-create/#access-denied","title":"\"Access denied\" <p>The database user doesn't have permission to create databases. Grant CREATE privileges to the user.</p>","text":""},{"location":"command-line-tools/commands/database/db-create/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels db drop</code> - Drop an existing database</li> <li><code>wheels db setup</code> - Create and setup database</li> <li><code>wheels dbmigrate latest</code> - Run migrations after creating database</li> </ul>"},{"location":"command-line-tools/commands/database/db-drop/","title":"wheels db drop","text":"<p>Drop an existing database.</p>"},{"location":"command-line-tools/commands/database/db-drop/#synopsis","title":"Synopsis","text":"<pre><code>wheels db drop [--datasource=&lt;name&gt;] [--environment=&lt;env&gt;] [--force]\n</code></pre>"},{"location":"command-line-tools/commands/database/db-drop/#description","title":"Description","text":"<p>The <code>wheels db drop</code> command permanently deletes a database. This is a destructive operation that cannot be undone. By default, it requires confirmation unless the <code>--force</code> flag is used.</p>"},{"location":"command-line-tools/commands/database/db-drop/#options","title":"Options","text":""},{"location":"command-line-tools/commands/database/db-drop/#-datasource","title":"--datasource= <p>Specify which datasource's database to drop. If not provided, uses the default datasource from your Wheels configuration.</p> <pre><code>wheels db drop --datasource=myapp_dev\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-drop/#-environment","title":"--environment= <p>Specify the environment to use. Defaults to the current environment.</p> <pre><code>wheels db drop --environment=testing\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-drop/#-force","title":"--force <p>Skip the confirmation prompt. Useful for scripting.</p> <pre><code>wheels db drop --force\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-drop/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/database/db-drop/#basic-usage","title":"Basic Usage <p>Drop database with confirmation: <pre><code>wheels db drop\n# Will prompt: Are you sure you want to drop the database 'myapp_dev'? Type 'yes' to confirm:\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-drop/#force-drop","title":"Force Drop <p>Drop without confirmation: <pre><code>wheels db drop --force\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-drop/#drop-test-database","title":"Drop Test Database <pre><code>wheels db drop --datasource=myapp_test --environment=testing --force\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-drop/#safety-features","title":"Safety Features","text":"<ol> <li>Confirmation Required: By default, you must type \"yes\" to confirm</li> <li>Production Warning: Extra warning when dropping production databases</li> <li>Clear Messaging: Shows database name and environment before dropping</li> </ol>"},{"location":"command-line-tools/commands/database/db-drop/#database-specific-behavior","title":"Database-Specific Behavior","text":""},{"location":"command-line-tools/commands/database/db-drop/#mysqlmariadb","title":"MySQL/MariaDB <ul> <li>Uses <code>DROP DATABASE IF EXISTS</code> statement</li> <li>Connects to <code>information_schema</code> to execute command</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-drop/#postgresql","title":"PostgreSQL <ul> <li>Terminates existing connections before dropping</li> <li>Uses <code>DROP DATABASE IF EXISTS</code> statement</li> <li>Connects to <code>postgres</code> system database</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-drop/#sql-server","title":"SQL Server <ul> <li>Sets database to single-user mode to close connections</li> <li>Uses <code>DROP DATABASE IF EXISTS</code> statement</li> <li>Connects to <code>master</code> system database</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-drop/#h2","title":"H2 <ul> <li>Deletes database files (.mv.db, .lock.db, .trace.db)</li> <li>Shows which files were deleted</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-drop/#warning","title":"Warning","text":"<p>This operation is irreversible! Always ensure you have backups before dropping a database.</p>"},{"location":"command-line-tools/commands/database/db-drop/#best-practices","title":"Best Practices","text":"<ol> <li> <p>Always backup first:    <pre><code>wheels db dump --output=backup-before-drop.sql\nwheels db drop\n</code></pre></p> </li> <li> <p>Use --force carefully: Only in scripts where you're certain</p> </li> <li> <p>Double-check environment: Especially important for production</p> </li> </ol>"},{"location":"command-line-tools/commands/database/db-drop/#error-messages","title":"Error Messages","text":""},{"location":"command-line-tools/commands/database/db-drop/#database-not-found","title":"\"Database not found\" <p>The database doesn't exist. No action needed.</p>","text":""},{"location":"command-line-tools/commands/database/db-drop/#access-denied","title":"\"Access denied\" <p>The database user doesn't have permission to drop databases. Grant DROP privileges to the user.</p>","text":""},{"location":"command-line-tools/commands/database/db-drop/#database-in-use","title":"\"Database in use\" <p>Some databases prevent dropping while connections are active. The command attempts to close connections automatically.</p>","text":""},{"location":"command-line-tools/commands/database/db-drop/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels db create</code> - Create a new database</li> <li><code>wheels db reset</code> - Drop and recreate database</li> <li><code>wheels db dump</code> - Backup before dropping</li> </ul>"},{"location":"command-line-tools/commands/database/db-dump/","title":"wheels db dump","text":"<p>Export database schema and data to a file.</p>"},{"location":"command-line-tools/commands/database/db-dump/#synopsis","title":"Synopsis","text":"<pre><code>wheels db dump [--output=&lt;file&gt;] [--datasource=&lt;name&gt;] [--environment=&lt;env&gt;] \n              [--schema-only] [--data-only] [--tables=&lt;list&gt;] [--compress]\n</code></pre>"},{"location":"command-line-tools/commands/database/db-dump/#description","title":"Description","text":"<p>The <code>wheels db dump</code> command exports your database to a SQL file that can be used for backups, migrations, or setting up new environments. It supports various options for customizing what gets exported.</p>"},{"location":"command-line-tools/commands/database/db-dump/#options","title":"Options","text":""},{"location":"command-line-tools/commands/database/db-dump/#-output","title":"--output= <p>Output file path. Defaults to <code>dump_[datasource]_[timestamp].sql</code>.</p> <pre><code>wheels db dump --output=backup.sql\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-dump/#-datasource","title":"--datasource= <p>Specify which datasource to dump. If not provided, uses the default datasource.</p> <pre><code>wheels db dump --datasource=myapp_prod\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-dump/#-environment","title":"--environment= <p>Specify the environment to use. Defaults to the current environment.</p> <pre><code>wheels db dump --environment=production\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-dump/#-schema-only","title":"--schema-only <p>Export only the database structure (no data).</p> <pre><code>wheels db dump --schema-only\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-dump/#-data-only","title":"--data-only <p>Export only the data (no structure).</p> <pre><code>wheels db dump --data-only\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-dump/#-tables","title":"--tables= <p>Comma-separated list of specific tables to dump.</p> <pre><code>wheels db dump --tables=users,posts,comments\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-dump/#-compress","title":"--compress <p>Compress the output file using gzip.</p> <pre><code>wheels db dump --compress\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-dump/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/database/db-dump/#basic-backup","title":"Basic Backup <p>Create a timestamped backup: <pre><code>wheels db dump\n# Creates: dump_myapp_dev_20231204153045.sql\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-dump/#production-backup","title":"Production Backup <pre><code>wheels db dump --environment=production --output=prod-backup.sql --compress\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-dump/#schema-only-export","title":"Schema Only Export <p>For version control: <pre><code>wheels db dump --schema-only --output=schema.sql\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-dump/#specific-tables","title":"Specific Tables <p>Export user-related tables: <pre><code>wheels db dump --tables=users,user_roles,user_sessions --output=user-data.sql\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-dump/#compressed-backup","title":"Compressed Backup <p>Save space with compression: <pre><code>wheels db dump --output=backup.sql.gz --compress\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-dump/#database-specific-behavior","title":"Database-Specific Behavior","text":""},{"location":"command-line-tools/commands/database/db-dump/#mysqlmariadb","title":"MySQL/MariaDB <ul> <li>Uses <code>mysqldump</code> utility</li> <li>Includes stored procedures and triggers</li> <li>Preserves character sets and collations</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-dump/#postgresql","title":"PostgreSQL <ul> <li>Uses <code>pg_dump</code> utility</li> <li>Includes schemas, functions, and extensions</li> <li>Handles permissions and ownership</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-dump/#sql-server","title":"SQL Server <ul> <li>Basic export functionality</li> <li>For full backups, use SQL Server Management Studio</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-dump/#h2","title":"H2 <ul> <li>Uses built-in SCRIPT command</li> <li>Exports to SQL script format</li> <li>Supports compression natively</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-dump/#output-format","title":"Output Format","text":"<p>The dump file contains: 1. Database structure (CREATE TABLE statements) 2. Indexes and constraints 3. Data (INSERT statements) 4. Views, procedures (if supported)</p> <p>Example output structure: <pre><code>-- Database dump generated by Wheels\n-- Date: 2023-12-04 15:30:45\n\n-- Table structure for users\nCREATE TABLE users (\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    name VARCHAR(100),\n    email VARCHAR(255) UNIQUE\n);\n\n-- Data for users\nINSERT INTO users (id, name, email) VALUES\n(1, 'John Doe', 'john@example.com'),\n(2, 'Jane Smith', 'jane@example.com');\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-dump/#common-use-cases","title":"Common Use Cases","text":""},{"location":"command-line-tools/commands/database/db-dump/#daily-backups","title":"Daily Backups <p>Automated backup script: <pre><code>#!/bin/bash\nDATE=$(date +%Y%m%d)\nwheels db dump --output=backups/daily-$DATE.sql.gz --compress\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-dump/#before-major-changes","title":"Before Major Changes <pre><code># Before deployment\nwheels db dump --output=pre-deployment-backup.sql\n\n# Deploy changes\n# ...\n\n# If something goes wrong\nwheels db restore pre-deployment-backup.sql\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-dump/#environment-sync","title":"Environment Sync <pre><code># Export from production\nwheels db dump --environment=production --output=prod-data.sql\n\n# Import to staging\nwheels db restore prod-data.sql --environment=staging\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-dump/#data-migration","title":"Data Migration <pre><code># Export specific tables\nwheels db dump --tables=legacy_users,legacy_orders --output=migration-data.sql\n\n# Process with migration scripts\n# Import to new structure\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-dump/#performance-considerations","title":"Performance Considerations","text":"<ul> <li>Large databases may take time to dump</li> <li>Use <code>--compress</code> to reduce file size</li> <li>Consider <code>--tables</code> for partial backups</li> <li>Off-peak hours for production dumps</li> </ul>"},{"location":"command-line-tools/commands/database/db-dump/#security-notes","title":"Security Notes","text":"<ol> <li>Protect dump files - They contain sensitive data</li> <li>Encrypt backups - Use additional encryption for sensitive data</li> <li>Secure transfer - Use secure methods to transfer dumps</li> <li>Clean up - Don't leave dump files in public directories</li> </ol>"},{"location":"command-line-tools/commands/database/db-dump/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/database/db-dump/#mysqldump-not-found","title":"\"mysqldump not found\" <p>Install MySQL client tools: <pre><code># macOS\nbrew install mysql-client\n\n# Linux\nsudo apt-get install mysql-client\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-dump/#permission-denied","title":"\"Permission denied\" <ul> <li>Check database user has SELECT permissions</li> <li>Ensure write permissions for output directory</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-dump/#large-database-issues","title":"Large Database Issues <ul> <li>Use <code>--compress</code> to reduce size</li> <li>Consider table-by-table exports</li> <li>Increase timeout settings if needed</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-dump/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels db restore</code> - Restore from dump</li> <li><code>wheels db status</code> - Check before dump</li> <li><code>wheels db shell</code> - Manual export options</li> </ul>"},{"location":"command-line-tools/commands/database/db-reset/","title":"wheels db reset","text":"<p>Reset the database by dropping it and recreating it from scratch.</p>"},{"location":"command-line-tools/commands/database/db-reset/#synopsis","title":"Synopsis","text":"<pre><code>wheels db reset [--datasource=&lt;name&gt;] [--environment=&lt;env&gt;] [--force] [--skip-seed] [--seed-count=&lt;n&gt;]\n</code></pre>"},{"location":"command-line-tools/commands/database/db-reset/#description","title":"Description","text":"<p>The <code>wheels db reset</code> command completely rebuilds your database by executing four operations in sequence:</p> <ol> <li>Drops the existing database (<code>wheels db drop</code>)</li> <li>Creates a new database (<code>wheels db create</code>)</li> <li>Runs all migrations (<code>wheels dbmigrate latest</code>)</li> <li>Seeds the database with sample data (<code>wheels db seed</code>)</li> </ol> <p>This is a destructive operation that will delete all existing data.</p>"},{"location":"command-line-tools/commands/database/db-reset/#options","title":"Options","text":""},{"location":"command-line-tools/commands/database/db-reset/#-datasource","title":"--datasource= <p>Specify which datasource to use. If not provided, uses the default datasource from your Wheels configuration.</p> <pre><code>wheels db reset --datasource=myapp_dev\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-reset/#-environment","title":"--environment= <p>Specify the environment to use. Defaults to the current environment.</p> <pre><code>wheels db reset --environment=testing\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-reset/#-force","title":"--force <p>Skip the confirmation prompt. Use with caution!</p> <pre><code>wheels db reset --force\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-reset/#-skip-seed","title":"--skip-seed <p>Skip the database seeding step.</p> <pre><code>wheels db reset --skip-seed\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-reset/#-seed-count","title":"--seed-count= <p>Number of records to generate per model when seeding. Defaults to 5.</p> <pre><code>wheels db reset --seed-count=20\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-reset/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/database/db-reset/#basic-usage","title":"Basic Usage <p>Reset with confirmation: <pre><code>wheels db reset\n# Will prompt: Are you sure you want to reset the database? Type 'yes' to confirm:\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-reset/#force-reset","title":"Force Reset <p>Reset without confirmation: <pre><code>wheels db reset --force\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-reset/#reset-test-database","title":"Reset Test Database <pre><code>wheels db reset --datasource=myapp_test --environment=testing --force\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-reset/#reset-without-seeding","title":"Reset Without Seeding <pre><code>wheels db reset --skip-seed --force\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-reset/#safety-features","title":"Safety Features","text":"<ol> <li>Confirmation Required: Must type \"yes\" to confirm (unless --force)</li> <li>Production Warning: Extra warning for production environment</li> <li>Special Production Confirmation: Must type \"reset production database\" for production</li> </ol>"},{"location":"command-line-tools/commands/database/db-reset/#warning","title":"Warning","text":"<p>This operation is irreversible! All data will be permanently lost.</p>"},{"location":"command-line-tools/commands/database/db-reset/#common-use-cases","title":"Common Use Cases","text":""},{"location":"command-line-tools/commands/database/db-reset/#development-reset","title":"Development Reset <pre><code># When you need a fresh start\nwheels db reset --force --seed-count=50\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-reset/#before-major-changes","title":"Before Major Changes <pre><code># Backup first\nwheels db dump --output=backup-before-reset.sql\n\n# Then reset\nwheels db reset\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-reset/#automated-testing","title":"Automated Testing <pre><code># In test scripts\nwheels db reset --environment=testing --force --skip-seed\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-reset/#what-happens","title":"What Happens","text":"<ol> <li>Drop Database</li> <li>All tables and data are deleted</li> <li> <p>Database is completely removed</p> </li> <li> <p>Create Database</p> </li> <li>Fresh database is created</li> <li> <p>Character set and collation are set (MySQL)</p> </li> <li> <p>Run Migrations</p> </li> <li>All migrations run from scratch</li> <li> <p>Schema is recreated</p> </li> <li> <p>Seed Database (unless --skip-seed)</p> </li> <li>Sample data is generated</li> <li>Useful for development/testing</li> </ol>"},{"location":"command-line-tools/commands/database/db-reset/#error-recovery","title":"Error Recovery","text":"<p>If reset fails partway through:</p> <pre><code># Manual recovery steps\nwheels db drop --force        # Ensure old database is gone\nwheels db create             # Create new database\nwheels dbmigrate latest      # Run migrations\nwheels db seed              # Seed data (optional)\n</code></pre>"},{"location":"command-line-tools/commands/database/db-reset/#best-practices","title":"Best Practices","text":"<ol> <li>Always backup production data first</li> <li>Use --force only in automated scripts</li> <li>Avoid resetting production databases</li> <li>Use db setup for new databases instead</li> </ol>"},{"location":"command-line-tools/commands/database/db-reset/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels db setup</code> - Setup new database (non-destructive)</li> <li><code>wheels db drop</code> - Just drop database</li> <li><code>wheels db dump</code> - Backup before reset</li> <li><code>wheels dbmigrate reset</code> - Reset just migrations</li> </ul>"},{"location":"command-line-tools/commands/database/db-restore/","title":"wheels db restore","text":"<p>Restore a database from a dump file.</p>"},{"location":"command-line-tools/commands/database/db-restore/#synopsis","title":"Synopsis","text":"<pre><code>wheels db restore &lt;file&gt; [--datasource=&lt;name&gt;] [--environment=&lt;env&gt;] \n                        [--clean] [--force] [--compressed]\n</code></pre>"},{"location":"command-line-tools/commands/database/db-restore/#description","title":"Description","text":"<p>The <code>wheels db restore</code> command imports a database dump file created by <code>wheels db dump</code> or other database export tools. It can handle both plain SQL files and compressed dumps.</p>"},{"location":"command-line-tools/commands/database/db-restore/#arguments","title":"Arguments","text":""},{"location":"command-line-tools/commands/database/db-restore/#file","title":"file","text":"<p>Required. Path to the dump file to restore.</p> <pre><code>wheels db restore backup.sql\n</code></pre>"},{"location":"command-line-tools/commands/database/db-restore/#options","title":"Options","text":""},{"location":"command-line-tools/commands/database/db-restore/#-datasource","title":"--datasource= <p>Specify which datasource to restore to. If not provided, uses the default datasource.</p> <pre><code>wheels db restore backup.sql --datasource=myapp_dev\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-restore/#-environment","title":"--environment= <p>Specify the environment to use. Defaults to the current environment.</p> <pre><code>wheels db restore backup.sql --environment=staging\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-restore/#-clean","title":"--clean <p>Drop existing database objects before restore.</p> <pre><code>wheels db restore backup.sql --clean\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-restore/#-force","title":"--force <p>Skip confirmation prompts.</p> <pre><code>wheels db restore backup.sql --force\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-restore/#-compressed","title":"--compressed <p>Indicate the file is compressed. Auto-detected for .gz files.</p> <pre><code>wheels db restore backup.sql.gz --compressed\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-restore/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/database/db-restore/#basic-restore","title":"Basic Restore <pre><code>wheels db restore backup.sql\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-restore/#restore-compressed-backup","title":"Restore Compressed Backup <pre><code># Auto-detects compression from .gz extension\nwheels db restore backup.sql.gz\n\n# Or explicitly specify\nwheels db restore backup.sql --compressed\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-restore/#clean-restore","title":"Clean Restore <p>Drop existing objects first: <pre><code>wheels db restore backup.sql --clean\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-restore/#force-restore","title":"Force Restore <p>Skip confirmation in scripts: <pre><code>wheels db restore backup.sql --force\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-restore/#restore-to-different-environment","title":"Restore to Different Environment <pre><code>wheels db restore prod-backup.sql --environment=staging --force\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-restore/#safety-features","title":"Safety Features","text":"<ol> <li>Confirmation Required: Prompts before overwriting data</li> <li>Production Warning: Extra warning for production environments</li> <li>File Validation: Checks file exists before starting</li> </ol>"},{"location":"command-line-tools/commands/database/db-restore/#database-specific-behavior","title":"Database-Specific Behavior","text":""},{"location":"command-line-tools/commands/database/db-restore/#mysqlmariadb","title":"MySQL/MariaDB <ul> <li>Uses <code>mysql</code> client</li> <li>Handles large files efficiently</li> <li>Preserves character sets</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-restore/#postgresql","title":"PostgreSQL <ul> <li>Uses <code>psql</code> client</li> <li>Supports custom formats from pg_dump</li> <li>Handles permissions and ownership</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-restore/#sql-server","title":"SQL Server <ul> <li>Uses <code>sqlcmd</code> client</li> <li>Limited support for complex backups</li> <li>Best with SSMS for full restores</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-restore/#h2","title":"H2 <ul> <li>Uses RUNSCRIPT command</li> <li>Native support for compressed files</li> <li>Fast for embedded databases</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-restore/#common-workflows","title":"Common Workflows","text":""},{"location":"command-line-tools/commands/database/db-restore/#development-reset","title":"Development Reset <pre><code># Get fresh production data\nwheels db dump --environment=production --output=prod-latest.sql\nwheels db restore prod-latest.sql --environment=development --clean\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-restore/#disaster-recovery","title":"Disaster Recovery <pre><code># Restore from latest backup\nwheels db restore backups/daily-20231204.sql.gz --force\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-restore/#environment-cloning","title":"Environment Cloning <pre><code># Clone staging to test\nwheels db dump --environment=staging --output=staging-snapshot.sql\nwheels db restore staging-snapshot.sql --environment=test --clean\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-restore/#important-warnings","title":"Important Warnings","text":""},{"location":"command-line-tools/commands/database/db-restore/#data-loss","title":"Data Loss <ul> <li>Restoring overwrites existing data</li> <li>Always backup current database first</li> <li>Use <code>--clean</code> carefully</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-restore/#version-compatibility","title":"Version Compatibility <ul> <li>Ensure dump is from compatible database version</li> <li>Check character set compatibility</li> <li>Verify schema matches application version</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-restore/#large-files","title":"Large Files <ul> <li>Monitor disk space during restore</li> <li>Consider using <code>--compressed</code> dumps</li> <li>May need to adjust timeout settings</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-restore/#pre-restore-checklist","title":"Pre-Restore Checklist","text":"<ol> <li> <p>Backup current database <pre><code>wheels db dump --output=pre-restore-backup.sql\n</code></pre></p> </li> <li> <p>Verify dump file <pre><code>ls -lh backup.sql\nhead -n 20 backup.sql  # Check format\n</code></pre></p> </li> <li> <p>Check disk space <pre><code>df -h  # Ensure enough space\n</code></pre></p> </li> <li> <p>Stop application (if needed)    <pre><code>server stop\n</code></pre></p> </li> </ol>"},{"location":"command-line-tools/commands/database/db-restore/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/database/db-restore/#access-denied","title":"\"Access denied\" <ul> <li>Check database user has CREATE/DROP permissions</li> <li>Verify credentials in datasource</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-restore/#file-not-found","title":"\"File not found\" <ul> <li>Check file path is correct</li> <li>Use absolute paths for clarity</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-restore/#syntax-error","title":"\"Syntax error\" <ul> <li>Verify dump file isn't corrupted</li> <li>Check database version compatibility</li> <li>Ensure correct database type</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-restore/#restore-hangs","title":"Restore Hangs <ul> <li>Large databases take time</li> <li>Check database server resources</li> <li>Monitor with <code>wheels db shell</code> in another terminal</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-restore/#character-set-issues","title":"Character Set Issues <ul> <li>Ensure database charset matches dump</li> <li>Check connection encoding settings</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-restore/#best-practices","title":"Best Practices","text":"<ol> <li>Test restores regularly - Verify backups work</li> <li>Document source - Note where dumps came from</li> <li>Version control - Track schema version with dumps</li> <li>Automate testing - Script restore verification</li> <li>Secure dumps - Protect sensitive data in dumps</li> </ol>"},{"location":"command-line-tools/commands/database/db-restore/#recovery-scenarios","title":"Recovery Scenarios","text":""},{"location":"command-line-tools/commands/database/db-restore/#partial-restore","title":"Partial Restore <p>If full restore fails: <pre><code># Extract specific tables from dump\ngrep -E \"(CREATE TABLE|INSERT INTO) users\" backup.sql &gt; users-only.sql\nwheels db restore users-only.sql\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-restore/#manual-recovery","title":"Manual Recovery <p>Use database shell for control: <pre><code>wheels db shell\n# Then manually run SQL from dump file\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-restore/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels db dump</code> - Create database dumps</li> <li><code>wheels db reset</code> - Alternative fresh start</li> <li><code>wheels db shell</code> - Manual restore control</li> <li><code>wheels db status</code> - Verify after restore</li> </ul>"},{"location":"command-line-tools/commands/database/db-rollback/","title":"wheels db rollback","text":"<p>Rollback database migrations to a previous state.</p>"},{"location":"command-line-tools/commands/database/db-rollback/#synopsis","title":"Synopsis","text":"<pre><code>wheels db rollback [--steps=&lt;n&gt;] [--target=&lt;version&gt;] [--force]\n</code></pre>"},{"location":"command-line-tools/commands/database/db-rollback/#description","title":"Description","text":"<p>The <code>wheels db rollback</code> command reverses previously applied migrations by running their <code>down</code> methods. You can rollback a specific number of migrations or to a specific version.</p>"},{"location":"command-line-tools/commands/database/db-rollback/#options","title":"Options","text":""},{"location":"command-line-tools/commands/database/db-rollback/#-steps","title":"--steps= <p>Number of migrations to rollback. Defaults to 1.</p> <pre><code>wheels db rollback --steps=3\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-rollback/#-target","title":"--target= <p>Rollback to a specific migration version.</p> <pre><code>wheels db rollback --target=20231201120000\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-rollback/#-force","title":"--force <p>Skip the confirmation prompt.</p> <pre><code>wheels db rollback --force\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-rollback/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/database/db-rollback/#basic-usage","title":"Basic Usage <p>Rollback the last migration: <pre><code>wheels db rollback\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-rollback/#rollback-multiple-migrations","title":"Rollback Multiple Migrations <p>Rollback the last 3 migrations: <pre><code>wheels db rollback --steps=3\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-rollback/#rollback-to-specific-version","title":"Rollback to Specific Version <p>Rollback to a specific point in time: <pre><code>wheels db rollback --target=20231201120000\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-rollback/#force-rollback","title":"Force Rollback <p>Skip confirmation: <pre><code>wheels db rollback --steps=5 --force\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-rollback/#how-it-works","title":"How It Works","text":"<ol> <li>Identifies Migrations: Determines which migrations to rollback</li> <li>Confirmation: Asks for confirmation (unless --force)</li> <li>Executes Down Methods: Runs the <code>down()</code> method of each migration in reverse order</li> <li>Updates Version: Updates the database version tracking</li> </ol>"},{"location":"command-line-tools/commands/database/db-rollback/#important-considerations","title":"Important Considerations","text":""},{"location":"command-line-tools/commands/database/db-rollback/#data-loss-warning","title":"Data Loss Warning <p>Rollbacks can result in data loss if migrations: - Drop tables - Remove columns - Delete records</p> <p>Always backup before rolling back: <pre><code>wheels db dump --output=backup-before-rollback.sql\nwheels db rollback --steps=3\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-rollback/#migration-requirements","title":"Migration Requirements <p>For rollback to work, migrations must: - Have a properly implemented <code>down()</code> method - Be reversible (some operations can't be undone)</p> <p>Example migration with down method: <pre><code>component {\n    function up() {\n        addColumn(table=\"users\", columnName=\"age\", columnType=\"integer\");\n    }\n\n    function down() {\n        removeColumn(table=\"users\", columnName=\"age\");\n    }\n}\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-rollback/#common-scenarios","title":"Common Scenarios","text":""},{"location":"command-line-tools/commands/database/db-rollback/#development-corrections","title":"Development Corrections <p>Made a mistake in the last migration: <pre><code># Rollback\nwheels db rollback\n\n# Fix the migration file\n# Edit: db/migrate/20231204180000_AddAgeToUsers.cfc\n\n# Run it again\nwheels dbmigrate latest\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-rollback/#feature-rollback","title":"Feature Rollback <p>Remove a feature and its database changes: <pre><code># Rollback feature migrations\nwheels db rollback --target=20231201120000\n\n# Remove feature code\n# Deploy\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-rollback/#testing-migrations","title":"Testing Migrations <p>Test that migrations are reversible: <pre><code># Apply migration\nwheels dbmigrate latest\n\n# Test rollback\nwheels db rollback\n\n# Reapply\nwheels dbmigrate latest\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-rollback/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/database/db-rollback/#no-down-method","title":"\"No down method\" <p>If you see this error: - The migration doesn't have a <code>down()</code> method - Add the method to make it reversible - Or use <code>wheels db reset</code> if in development</p>","text":""},{"location":"command-line-tools/commands/database/db-rollback/#cannot-rollback","title":"\"Cannot rollback\" <p>Some operations can't be reversed: - Data deletions (unless backed up in migration) - Complex transformations - External system changes</p>","text":""},{"location":"command-line-tools/commands/database/db-rollback/#rollback-fails","title":"Rollback Fails <p>If rollback fails partway: 1. Check error message for specific issue 2. Fix the migration's down method 3. Manually correct database if needed 4. Update migration tracking table</p>","text":""},{"location":"command-line-tools/commands/database/db-rollback/#best-practices","title":"Best Practices","text":"<ol> <li>Always implement down methods in migrations</li> <li>Test rollbacks in development before production</li> <li>Backup before rollback in production</li> <li>Document irreversible changes in migrations</li> <li>Use transactions in complex rollbacks</li> </ol>"},{"location":"command-line-tools/commands/database/db-rollback/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels db status</code> - Check current migration state</li> <li><code>wheels dbmigrate down</code> - Similar single rollback</li> <li><code>wheels db reset</code> - Full database reset</li> <li><code>wheels db dump</code> - Backup before rollback</li> </ul>"},{"location":"command-line-tools/commands/database/db-schema/","title":"wheels db schema","text":"<p>Visualize the current database schema.</p>"},{"location":"command-line-tools/commands/database/db-schema/#synopsis","title":"Synopsis","text":"<pre><code>wheels db schema [options]\n</code></pre>"},{"location":"command-line-tools/commands/database/db-schema/#description","title":"Description","text":"<p>The <code>wheels db schema</code> command retrieves and displays the current database schema in various formats. This is useful for documentation, debugging, and understanding your database structure.</p>"},{"location":"command-line-tools/commands/database/db-schema/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>format</code> string No \"sql\" Output format (text, json, or sql) <code>--save</code> boolean No false Save output to file instead of console <code>file</code> string No - File path to write schema to (when using --save) <code>engine</code> string No \"default\" Database engine to use"},{"location":"command-line-tools/commands/database/db-schema/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/database/db-schema/#display-schema-in-console-default-sql-format","title":"Display schema in console (default SQL format)","text":"<pre><code>wheels db schema\n</code></pre>"},{"location":"command-line-tools/commands/database/db-schema/#display-schema-as-text","title":"Display schema as text","text":"<pre><code>wheels db schema format=text\n</code></pre>"},{"location":"command-line-tools/commands/database/db-schema/#export-schema-to-file","title":"Export schema to file","text":"<pre><code>wheels db schema --save file=schema.sql\n</code></pre>"},{"location":"command-line-tools/commands/database/db-schema/#export-as-json","title":"Export as JSON","text":"<pre><code>wheels db schema format=json --save file=schema.json\n</code></pre>"},{"location":"command-line-tools/commands/database/db-schema/#output-formats","title":"Output Formats","text":""},{"location":"command-line-tools/commands/database/db-schema/#text-format","title":"Text Format","text":"<p>Displays a human-readable table structure: <pre><code>TABLE: USERS\n--------------------------------------------------------------------------------\n  id INTEGER NOT NULL PRIMARY KEY\n  username VARCHAR(50) NOT NULL\n  email VARCHAR(150) NOT NULL\n  created_at TIMESTAMP\n  updated_at TIMESTAMP\n\n  INDEXES:\n  - UNIQUE INDEX idx_users_email (email)\n  - INDEX idx_users_username (username)\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-schema/#sql-format-default","title":"SQL Format (Default)","text":"<p>Generates CREATE TABLE statements: <pre><code>CREATE TABLE users (\n    id INTEGER NOT NULL PRIMARY KEY,\n    username VARCHAR(50) NOT NULL,\n    email VARCHAR(150) NOT NULL,\n    created_at TIMESTAMP,\n    updated_at TIMESTAMP\n);\n\nCREATE UNIQUE INDEX idx_users_email ON users(email);\nCREATE INDEX idx_users_username ON users(username);\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-schema/#json-format","title":"JSON Format","text":"<p>Provides structured schema information: <pre><code>{\n  \"tables\": {\n    \"users\": {\n      \"columns\": [\n        {\"name\": \"id\", \"type\": \"INTEGER\", \"nullable\": false, \"primaryKey\": true},\n        {\"name\": \"username\", \"type\": \"VARCHAR(50)\", \"nullable\": false},\n        {\"name\": \"email\", \"type\": \"VARCHAR(150)\", \"nullable\": false}\n      ],\n      \"indexes\": [\n        {\"name\": \"idx_users_email\", \"columns\": [\"email\"], \"unique\": true}\n      ]\n    }\n  }\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-schema/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/database/db-schema/#version-control","title":"Version Control","text":"<p>Track schema changes in git: <pre><code># Export schema after migrations\nwheels dbmigrate latest\nwheels db schema --save file=db/schema.sql\n\n# Commit schema file\ngit add db/schema.sql\ngit commit -m \"Update database schema\"\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-schema/#documentation","title":"Documentation","text":"<p>Generate schema documentation: <pre><code># Export human-readable schema\nwheels db schema format=text --save file=docs/database-schema.txt\n\n# Export as JSON for documentation tools\nwheels db schema format=json --save file=docs/database-schema.json\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-schema/#backup-before-changes","title":"Backup Before Changes","text":"<p>Create schema backups before major updates: <pre><code># Backup current schema\nwheels db schema format=sql --save file=backups/schema-$(date +%Y%m%d).sql\n\n# Make your changes\nwheels dbmigrate latest\n\n# Export new schema\nwheels db schema format=sql --save file=db/schema.sql\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-schema/#review-database-structure","title":"Review Database Structure","text":"<p>Quickly review your database structure: <pre><code># View all tables in text format\nwheels db schema format=text\n\n# Export for team review\nwheels db schema format=text --save file=database-review.txt\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-schema/#notes-on-table-filtering","title":"Notes on Table Filtering","text":"<p>Currently, the command exports all tables in the database. Future versions may support filtering specific tables.</p>"},{"location":"command-line-tools/commands/database/db-schema/#best-practices","title":"Best Practices","text":""},{"location":"command-line-tools/commands/database/db-schema/#1-regular-exports","title":"1. Regular Exports","text":"<p>Export schema after migrations: <pre><code># After running migrations\nwheels dbmigrate latest\nwheels db schema --save file=db/schema.sql\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-schema/#2-use-version-control","title":"2. Use Version Control","text":"<p>Track schema changes over time: <pre><code># Add to git\ngit add db/schema.sql\ngit commit -m \"Update schema after adding user table\"\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-schema/#3-document-changes","title":"3. Document Changes","text":"<p>Keep a record of schema state: <pre><code># Before major changes\nwheels db schema --save file=db/schema-before-refactor.sql\n\n# After changes\nwheels db schema --save file=db/schema-after-refactor.sql\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-schema/#integration-with-migrations","title":"Integration with Migrations","text":""},{"location":"command-line-tools/commands/database/db-schema/#schema-vs-migrations","title":"Schema vs Migrations","text":"<ul> <li>Migrations: Track incremental changes over time</li> <li>Schema: Shows current database state</li> </ul>"},{"location":"command-line-tools/commands/database/db-schema/#typical-workflow","title":"Typical Workflow","text":"<ol> <li>Create migration: <code>wheels dbmigrate create table name=users</code></li> <li>Edit and run migration: <code>wheels dbmigrate up</code></li> <li>Export current schema: <code>wheels db schema --save file=db/schema.sql</code></li> <li>Commit both: <code>git add app/migrator/migrations/* db/schema.sql</code></li> </ol>"},{"location":"command-line-tools/commands/database/db-schema/#notes","title":"Notes","text":"<ul> <li>Schema export captures current database state</li> <li>The command connects to your configured datasource</li> <li>Output varies based on your database type (MySQL, PostgreSQL, etc.)</li> <li>Some database-specific features may require manual adjustment</li> <li>Use migrations for incremental changes, schemas for documentation</li> </ul>"},{"location":"command-line-tools/commands/database/db-schema/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels dbmigrate latest</code> - Run all migrations</li> <li><code>wheels dbmigrate info</code> - View migration status</li> <li><code>wheels db seed</code> - Seed database with data</li> <li><code>wheels generate model</code> - Generate models from schema</li> </ul>"},{"location":"command-line-tools/commands/database/db-seed/","title":"db seed","text":"<p>Generate and populate test data.</p>"},{"location":"command-line-tools/commands/database/db-seed/#synopsis","title":"Synopsis","text":"<pre><code>wheels db seed [options]\n</code></pre>"},{"location":"command-line-tools/commands/database/db-seed/#description","title":"Description","text":"<p>The <code>db seed</code> command populates your database with test data. This is useful for development environments, testing scenarios, and demo installations. The command will generate sample data based on your models.</p>"},{"location":"command-line-tools/commands/database/db-seed/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>file</code> string No \"seed\" Path to seed file (without .cfm extension) <code>environment</code> string No current Environment to seed"},{"location":"command-line-tools/commands/database/db-seed/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/database/db-seed/#basic-seeding-uses-default-seed-file","title":"Basic seeding (uses default seed file)","text":"<pre><code>wheels db seed\n</code></pre>"},{"location":"command-line-tools/commands/database/db-seed/#use-custom-seed-file","title":"Use custom seed file","text":"<pre><code>wheels db seed file=demo\n</code></pre>"},{"location":"command-line-tools/commands/database/db-seed/#seed-specific-environment","title":"Seed specific environment","text":"<pre><code>wheels db seed environment=testing\n</code></pre>"},{"location":"command-line-tools/commands/database/db-seed/#use-seed-file-from-subdirectory","title":"Use seed file from subdirectory","text":"<pre><code>wheels db seed file=development/users\n</code></pre>"},{"location":"command-line-tools/commands/database/db-seed/#seed-file-location","title":"Seed File Location","text":"<p>Seed files should be placed in the <code>db/</code> directory of your application:</p> <pre><code>app/\n  db/\n    seed.cfm         # Default seed file\n    demo.cfm         # Custom seed file\n    development/     # Environment-specific seeds\n      users.cfm\n      products.cfm\n</code></pre>"},{"location":"command-line-tools/commands/database/db-seed/#seed-file-structure","title":"Seed File Structure","text":""},{"location":"command-line-tools/commands/database/db-seed/#basic-seed-file-dbseedcfm","title":"Basic Seed File (<code>db/seed.cfm</code>)","text":"<pre><code>&lt;cfscript&gt;\n// db/seed.cfm\n\n// Create admin user\nuser = model(\"user\").create(\n    username = \"admin\",\n    email = \"admin@example.com\",\n    password = \"password123\",\n    role = \"admin\"\n);\n\n// Create sample categories  \ncategories = [\n    {name: \"Electronics\", slug: \"electronics\"},\n    {name: \"Books\", slug: \"books\"},\n    {name: \"Clothing\", slug: \"clothing\"}\n];\n\nfor (category in categories) {\n    model(\"category\").create(category);\n}\n\n// Create sample products\nelectronicsCategory = model(\"category\").findOne(where=\"slug='electronics'\");\n\nproducts = [\n    {\n        name: \"Laptop\",\n        price: 999.99,\n        category_id: electronicsCategory.id,\n        in_stock: true\n    },\n    {\n        name: \"Smartphone\", \n        price: 699.99,\n        category_id: electronicsCategory.id,\n        in_stock: true\n    }\n];\n\nfor (product in products) {\n    model(\"product\").create(product);\n}\n\nwriteOutput(\"Seed data created successfully!\");\n&lt;/cfscript&gt;\n</code></pre>"},{"location":"command-line-tools/commands/database/db-seed/#function-based-seed-files","title":"Function-Based Seed Files","text":"<pre><code>// db/development/users.cfm\n&lt;cfscript&gt;\n// Admin users\nadmins = [\n    {username: \"admin\", email: \"admin@example.com\", role: \"admin\"},\n    {username: \"moderator\", email: \"mod@example.com\", role: \"moderator\"}\n];\n\nfor (admin in admins) {\n    admin.password = hash(\"password123\");\n    model(\"user\").create(admin);\n}\n\n// Regular users\nfor (i = 1; i &lt;= 50; i++) {\n    model(\"user\").create(\n        username = \"user#i#\",\n        email = \"user#i#@example.com\",\n        password = hash(\"password123\"),\n        created_at = dateAdd(\"d\", -randRange(1, 365), now())\n    );\n}\n\nwriteOutput(\"Created admin and sample users\");\n&lt;/cfscript&gt;\n</code></pre>"},{"location":"command-line-tools/commands/database/db-seed/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/database/db-seed/#development-environment-setup","title":"Development Environment Setup","text":"<p>Create consistent development data: <pre><code># Reset and seed development database\nwheels dbmigrate reset\nwheels dbmigrate latest\nwheels db seed\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-seed/#testing-data","title":"Testing Data","text":"<p>Prepare test database: <pre><code># Seed test environment\nwheels db seed environment=testing\n\n# Run tests\nwheels test run\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-seed/#demo-data","title":"Demo Data","text":"<p>Create demonstration data: <pre><code># Load demo dataset\nwheels db seed file=demo\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-seed/#multiple-seed-files","title":"Multiple Seed Files","text":"<p>Organize seeds by purpose: <pre><code># Seed users\nwheels db seed file=development/users\n\n# Seed products\nwheels db seed file=development/products\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-seed/#advanced-seeding-patterns","title":"Advanced Seeding Patterns","text":""},{"location":"command-line-tools/commands/database/db-seed/#using-random-data","title":"Using Random Data","text":"<pre><code>&lt;cfscript&gt;\n// Generate random users\nfirstNames = [\"John\", \"Jane\", \"Bob\", \"Alice\", \"Charlie\", \"Diana\"];\nlastNames = [\"Smith\", \"Johnson\", \"Williams\", \"Brown\", \"Jones\"];\ncities = [\"New York\", \"Los Angeles\", \"Chicago\", \"Houston\", \"Phoenix\"];\n\nfor (i = 1; i &lt;= 100; i++) {\n    model(\"customer\").create(\n        first_name = firstNames[randRange(1, arrayLen(firstNames))],\n        last_name = lastNames[randRange(1, arrayLen(lastNames))],\n        email = \"customer#i#@example.com\",\n        city = cities[randRange(1, arrayLen(cities))],\n        created_at = dateAdd(\"d\", -randRange(1, 365), now())\n    );\n}\n&lt;/cfscript&gt;\n</code></pre>"},{"location":"command-line-tools/commands/database/db-seed/#relationship-seeding","title":"Relationship Seeding","text":"<pre><code>&lt;cfscript&gt;\n// Create users\nusers = [];\nfor (i = 1; i &lt;= 10; i++) {\n    users.append(model(\"user\").create(\n        username = \"user#i#\",\n        email = \"user#i#@example.com\"\n    ));\n}\n\n// Create posts for each user\nfor (user in users) {\n    postCount = randRange(5, 15);\n    for (j = 1; j &lt;= postCount; j++) {\n        post = model(\"post\").create(\n            user_id = user.id,\n            title = \"Post #j# by #user.username#\",\n            content = \"This is sample content for the post.\",\n            published_at = dateAdd(\"d\", -randRange(1, 30), now())\n        );\n\n        // Add comments\n        commentCount = randRange(0, 10);\n        for (k = 1; k &lt;= commentCount; k++) {\n            randomUser = users[randRange(1, arrayLen(users))];\n            model(\"comment\").create(\n                post_id = post.id,\n                user_id = randomUser.id,\n                content = \"Comment #k# on post\",\n                created_at = dateAdd(\"h\", k, post.published_at)\n            );\n        }\n    }\n}\n&lt;/cfscript&gt;\n</code></pre>"},{"location":"command-line-tools/commands/database/db-seed/#conditional-seeding","title":"Conditional Seeding","text":"<pre><code>&lt;cfscript&gt;\n// Only seed if empty\nif (model(\"user\").count() == 0) {\n    // Create initial users\n    model(\"user\").create(\n        username = \"admin\",\n        email = \"admin@example.com\",\n        password = \"password123\"\n    );\n    writeOutput(\"Created initial users&lt;br&gt;\");\n} else {\n    writeOutput(\"Users already exist, skipping&lt;br&gt;\");\n}\n\n// Environment-specific seeding\nif (get(\"environment\") == \"development\") {\n    // Add development-specific data\n    for (i = 1; i &lt;= 10; i++) {\n        model(\"user\").create(\n            username = \"testuser#i#\",\n            email = \"test#i#@example.com\"\n        );\n    }\n    writeOutput(\"Added development test users&lt;br&gt;\");\n}\n&lt;/cfscript&gt;\n</code></pre>"},{"location":"command-line-tools/commands/database/db-seed/#best-practices","title":"Best Practices","text":""},{"location":"command-line-tools/commands/database/db-seed/#1-idempotent-seeds","title":"1. Idempotent Seeds","text":"<p>Make seeds safe to run multiple times: <pre><code>&lt;cfscript&gt;\n// Check before creating\nif (!model(\"user\").exists(where=\"username='admin'\")) {\n    model(\"user\").create(\n        username = \"admin\",\n        email = \"admin@example.com\",\n        password = \"password123\"\n    );\n    writeOutput(\"Created admin user&lt;br&gt;\");\n} else {\n    writeOutput(\"Admin user already exists&lt;br&gt;\");\n}\n&lt;/cfscript&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-seed/#2-use-transactions","title":"2. Use Transactions","text":"<p>Wrap seeds in transactions: <pre><code>&lt;cfscript&gt;\ntransaction {\n    try {\n        // Create users\n        for (i = 1; i &lt;= 10; i++) {\n            model(\"user\").create(\n                username = \"user#i#\",\n                email = \"user#i#@example.com\"\n            );\n        }\n\n        // Create related data\n        // ...\n\n        writeOutput(\"Seed completed successfully&lt;br&gt;\");\n    } catch (any e) {\n        transaction action=\"rollback\";\n        writeOutput(\"Error: #e.message#&lt;br&gt;\");\n        rethrow;\n    }\n}\n&lt;/cfscript&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-seed/#3-organize-by-domain","title":"3. Organize by Domain","text":"<p>Structure seeds logically: <pre><code>app/db/\n  \u251c\u2500\u2500 seed.cfm              # Default seed file\n  \u251c\u2500\u2500 demo.cfm              # Demo data\n  \u251c\u2500\u2500 development/          # Development seeds\n  \u2502   \u251c\u2500\u2500 users.cfm\n  \u2502   \u251c\u2500\u2500 products.cfm\n  \u2502   \u2514\u2500\u2500 orders.cfm\n  \u2514\u2500\u2500 testing/              # Test-specific seeds\n      \u2514\u2500\u2500 test_data.cfm\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-seed/#4-document-seeds","title":"4. Document Seeds","text":"<p>Add clear documentation: <pre><code>&lt;cfscript&gt;\n/**\n * Seed file: products.cfm\n * Creates: 5 categories, 50 products\n * Dependencies: None\n * Runtime: ~2 seconds\n */\n\n// Create categories first\ncategories = [...]; \n\n// Then create products\n// ...\n&lt;/cfscript&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-seed/#error-handling","title":"Error Handling","text":""},{"location":"command-line-tools/commands/database/db-seed/#validation-errors","title":"Validation Errors","text":"<pre><code>&lt;cfscript&gt;\ntry {\n    user = model(\"user\").create(\n        username = \"testuser\",\n        email = \"invalid-email\" // Will fail validation\n    );\n\n    if (user.hasErrors()) {\n        writeOutput(\"Failed to create user:&lt;br&gt;\");\n        for (error in user.allErrors()) {\n            writeOutput(\"- #error.message#&lt;br&gt;\");\n        }\n    }\n} catch (any e) {\n    writeOutput(\"Error: #e.message#&lt;br&gt;\");\n}\n&lt;/cfscript&gt;\n</code></pre>"},{"location":"command-line-tools/commands/database/db-seed/#dependency-handling","title":"Dependency Handling","text":"<pre><code>&lt;cfscript&gt;\n// Check dependencies\nif (model(\"category\").count() == 0) {\n    writeOutput(\"ERROR: Categories must be seeded first!&lt;br&gt;\");\n    abort;\n}\n\n// Continue with product seeding\n// ...\n&lt;/cfscript&gt;\n</code></pre>"},{"location":"command-line-tools/commands/database/db-seed/#notes","title":"Notes","text":"<ul> <li>Seed files must be placed in the <code>app/db/</code> directory</li> <li>The file parameter should not include the .cfm extension</li> <li>Seed files are executed in the application context with access to all models</li> <li>Output from seed files is displayed to the user</li> <li>Consider performance when seeding large amounts of data</li> </ul>"},{"location":"command-line-tools/commands/database/db-seed/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels dbmigrate latest</code> - Run migrations before seeding</li> <li><code>wheels db schema</code> - Export/import database structure</li> <li><code>wheels generate model</code> - Generate models for seeding</li> <li><code>wheels test run</code> - Test with seeded data</li> </ul>"},{"location":"command-line-tools/commands/database/db-setup/","title":"wheels db setup","text":"<p>Setup a complete database by creating it, running migrations, and seeding data.</p>"},{"location":"command-line-tools/commands/database/db-setup/#synopsis","title":"Synopsis","text":"<pre><code>wheels db setup [--datasource=&lt;name&gt;] [--environment=&lt;env&gt;] [--skip-seed] [--seed-count=&lt;n&gt;]\n</code></pre>"},{"location":"command-line-tools/commands/database/db-setup/#description","title":"Description","text":"<p>The <code>wheels db setup</code> command performs a complete database initialization in one command. It executes three operations in sequence:</p> <ol> <li>Creates the database (<code>wheels db create</code>)</li> <li>Runs all migrations (<code>wheels dbmigrate latest</code>)</li> <li>Seeds the database with sample data (<code>wheels db seed</code>)</li> </ol> <p>This is ideal for setting up a new development environment or initializing a test database.</p>"},{"location":"command-line-tools/commands/database/db-setup/#options","title":"Options","text":""},{"location":"command-line-tools/commands/database/db-setup/#-datasource","title":"--datasource= <p>Specify which datasource to use. If not provided, uses the default datasource from your Wheels configuration.</p> <pre><code>wheels db setup --datasource=myapp_dev\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-setup/#-environment","title":"--environment= <p>Specify the environment to use. Defaults to the current environment.</p> <pre><code>wheels db setup --environment=testing\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-setup/#-skip-seed","title":"--skip-seed <p>Skip the database seeding step.</p> <pre><code>wheels db setup --skip-seed\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-setup/#-seed-count","title":"--seed-count= <p>Number of records to generate per model when seeding. Defaults to 5.</p> <pre><code>wheels db setup --seed-count=20\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-setup/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/database/db-setup/#basic-usage","title":"Basic Usage <p>Full setup with default options: <pre><code>wheels db setup\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-setup/#setup-without-sample-data","title":"Setup Without Sample Data <p>Create and migrate only: <pre><code>wheels db setup --skip-seed\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-setup/#setup-test-database","title":"Setup Test Database <pre><code>wheels db setup --datasource=myapp_test --environment=testing --seed-count=10\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-setup/#production-setup","title":"Production Setup <pre><code>wheels db setup --environment=production --skip-seed\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-setup/#what-it-does","title":"What It Does","text":"<p>The command executes these steps in order:</p> <ol> <li>Create Database</li> <li>Creates new database if it doesn't exist</li> <li> <p>Uses datasource configuration for connection details</p> </li> <li> <p>Run Migrations</p> </li> <li>Executes all pending migrations</li> <li> <p>Creates schema from migration files</p> </li> <li> <p>Seed Database (unless --skip-seed)</p> </li> <li>Generates sample data for testing</li> <li>Creates specified number of records per model</li> </ol>"},{"location":"command-line-tools/commands/database/db-setup/#error-handling","title":"Error Handling","text":"<p>If any step fails: - The command stops execution - Shows which step failed - Provides instructions for manual recovery</p>"},{"location":"command-line-tools/commands/database/db-setup/#common-use-cases","title":"Common Use Cases","text":""},{"location":"command-line-tools/commands/database/db-setup/#new-developer-setup","title":"New Developer Setup <pre><code>git clone https://github.com/myproject/repo.git\ncd repo\nbox install\nwheels db setup\nserver start\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-setup/#reset-development-database","title":"Reset Development Database <pre><code>wheels db drop --force\nwheels db setup --seed-count=50\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-setup/#continuous-integration","title":"Continuous Integration <pre><code># In CI script\nwheels db setup --environment=testing --skip-seed\nwheels test run\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-setup/#best-practices","title":"Best Practices","text":"<ol> <li>Use for development: Perfect for getting started quickly</li> <li>Skip seeding in production: Use <code>--skip-seed</code> for production</li> <li>Customize seed count: More data for performance testing</li> <li>Check migrations first: Ensure migrations are up to date</li> </ol>"},{"location":"command-line-tools/commands/database/db-setup/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels db create</code> - Just create database</li> <li><code>wheels db reset</code> - Drop and recreate everything</li> <li><code>wheels dbmigrate latest</code> - Just run migrations</li> <li><code>wheels db seed</code> - Just seed data</li> </ul>"},{"location":"command-line-tools/commands/database/db-shell/","title":"wheels db shell","text":"<p>Launch an interactive database shell for direct SQL access to your database.</p>"},{"location":"command-line-tools/commands/database/db-shell/#synopsis","title":"Synopsis","text":"<pre><code>wheels db shell [--datasource=&lt;name&gt;] [--environment=&lt;env&gt;] [--web] [--command=&lt;sql&gt;]\n</code></pre>"},{"location":"command-line-tools/commands/database/db-shell/#description","title":"Description","text":"<p>The <code>wheels db shell</code> command provides direct access to your database through its native command-line interface. It automatically detects your database type and launches the appropriate shell client.</p> <p>For H2 databases (commonly used with Lucee), it can also launch a web-based console interface.</p>"},{"location":"command-line-tools/commands/database/db-shell/#options","title":"Options","text":""},{"location":"command-line-tools/commands/database/db-shell/#-datasource","title":"--datasource= <p>Specify which datasource to connect to. If not provided, uses the default datasource from your Wheels configuration.</p> <pre><code>wheels db shell --datasource=myapp_dev\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-shell/#-environment","title":"--environment= <p>Specify the environment to use. Defaults to the current environment.</p> <pre><code>wheels db shell --environment=production\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-shell/#-web","title":"--web <p>For H2 databases only, launches the web-based console interface instead of the CLI shell.</p> <pre><code>wheels db shell --web\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-shell/#-command","title":"--command= <p>Execute a single SQL command and exit, rather than entering interactive mode.</p> <pre><code>wheels db shell --command=\"SELECT COUNT(*) FROM users\"\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-shell/#database-specific-behavior","title":"Database-Specific Behavior","text":""},{"location":"command-line-tools/commands/database/db-shell/#h2-database","title":"H2 Database <p>For H2 databases (default with Lucee), you have two options:</p> <p>CLI Shell: <pre><code>wheels db shell\n</code></pre> - Provides a command-line SQL interface - Type SQL commands directly - Use <code>help</code> for available commands - Exit with <code>exit</code> or Ctrl+D</p> <p>Web Console: <pre><code>wheels db shell --web\n</code></pre> - Opens H2's web interface in your default browser - Provides a GUI for browsing tables and running queries - More user-friendly for complex operations - Press Ctrl+C in terminal to stop the console server</p>","text":""},{"location":"command-line-tools/commands/database/db-shell/#mysqlmariadb","title":"MySQL/MariaDB <p><pre><code>wheels db shell\n</code></pre> - Launches the <code>mysql</code> client - Connects using datasource credentials - Full MySQL command-line interface - Exit with <code>exit</code>, <code>quit</code>, or Ctrl+D</p>","text":""},{"location":"command-line-tools/commands/database/db-shell/#postgresql","title":"PostgreSQL <p><pre><code>wheels db shell\n</code></pre> - Launches the <code>psql</code> client - Connects using datasource credentials - Full PostgreSQL command-line interface - Type <code>\\h</code> for help, <code>\\q</code> to quit</p>","text":""},{"location":"command-line-tools/commands/database/db-shell/#sql-server","title":"SQL Server <p><pre><code>wheels db shell\n</code></pre> - Launches the <code>sqlcmd</code> client - Connects using datasource credentials - Full SQL Server command-line interface - Type <code>:help</code> for help, <code>:quit</code> to exit</p>","text":""},{"location":"command-line-tools/commands/database/db-shell/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/database/db-shell/#basic-usage","title":"Basic Usage <p>Launch shell for default datasource: <pre><code>wheels db shell\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-shell/#web-console-for-h2","title":"Web Console for H2 <p>Open H2's web interface: <pre><code>wheels db shell --web\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-shell/#execute-single-command","title":"Execute Single Command <p>Get row count without entering interactive mode: <pre><code>wheels db shell --command=\"SELECT COUNT(*) FROM users\"\n</code></pre></p> <p>Check database version: <pre><code>wheels db shell --command=\"SELECT VERSION()\"\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-shell/#different-datasources","title":"Different Datasources <p>Connect to test database: <pre><code>wheels db shell --datasource=myapp_test\n</code></pre></p> <p>Connect to production (with caution): <pre><code>wheels db shell --datasource=myapp_prod --environment=production\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-shell/#common-sql-commands","title":"Common SQL Commands","text":"<p>Once in the shell, here are some useful commands:</p>"},{"location":"command-line-tools/commands/database/db-shell/#show-tables","title":"Show Tables <pre><code>-- H2/MySQL\nSHOW TABLES;\n\n-- PostgreSQL\n\\dt\n\n-- SQL Server\nSELECT name FROM sys.tables;\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-shell/#describe-table-structure","title":"Describe Table Structure <pre><code>-- H2/MySQL\nDESCRIBE users;\n\n-- PostgreSQL\n\\d users\n\n-- SQL Server\nsp_help users;\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-shell/#basic-queries","title":"Basic Queries <pre><code>-- Count records\nSELECT COUNT(*) FROM users;\n\n-- View recent records\nSELECT * FROM users ORDER BY created_at DESC LIMIT 10;\n\n-- Check for specific data\nSELECT * FROM users WHERE email = 'admin@example.com';\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-shell/#requirements","title":"Requirements","text":""},{"location":"command-line-tools/commands/database/db-shell/#client-tools","title":"Client Tools <p>The shell command requires database-specific client tools:</p> <ul> <li>H2: No additional installation (included with Lucee)</li> <li>MySQL: Install <code>mysql</code> client   <pre><code># macOS\nbrew install mysql-client\n\n# Ubuntu/Debian\nsudo apt-get install mysql-client\n\n# RHEL/CentOS\nsudo yum install mysql\n</code></pre></li> <li>PostgreSQL: Install <code>psql</code> client   <pre><code># macOS\nbrew install postgresql\n\n# Ubuntu/Debian\nsudo apt-get install postgresql-client\n\n# RHEL/CentOS\nsudo yum install postgresql\n</code></pre></li> <li>SQL Server: Install <code>sqlcmd</code> <pre><code># macOS\nbrew install mssql-tools\n\n# Linux\n# Follow Microsoft's instructions for your distribution\n</code></pre></li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-shell/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/database/db-shell/#command-not-found-errors","title":"\"Command not found\" Errors <p>If you get errors about mysql/psql/sqlcmd not being found:</p> <ol> <li>Install the appropriate client tool (see Requirements above)</li> <li>Ensure the tool is in your PATH</li> <li>Restart your terminal/command prompt</li> </ol>","text":""},{"location":"command-line-tools/commands/database/db-shell/#h2-connection-issues","title":"H2 Connection Issues <p>If the H2 shell fails to connect:</p> <ol> <li>Check that your datasource is properly configured</li> <li>Ensure the database file exists (check <code>db/h2/</code> directory)</li> <li>Try the web console instead: <code>wheels db shell --web</code></li> </ol>","text":""},{"location":"command-line-tools/commands/database/db-shell/#authentication-failures","title":"Authentication Failures <p>If you get authentication errors:</p> <ol> <li>Verify datasource credentials in your CFML admin</li> <li>Check that the database user has appropriate permissions</li> <li>For PostgreSQL, you might need to set PGPASSWORD environment variable</li> </ol>","text":""},{"location":"command-line-tools/commands/database/db-shell/#h2-jar-not-found","title":"H2 JAR Not Found <p>If you get \"H2 JAR not found\" error:</p> <ol> <li>Ensure H2 is installed as a Lucee extension</li> <li>Check for <code>org.lucee.h2-*.jar</code> in Lucee's lib directory</li> <li>Try reinstalling the H2 extension through Lucee admin</li> </ol>","text":""},{"location":"command-line-tools/commands/database/db-shell/#security-considerations","title":"Security Considerations","text":"<ul> <li>Be careful in production: The shell provides full database access</li> <li>Avoid hardcoding credentials: Use datasource configuration</li> <li>Limit permissions: Database users should have appropriate restrictions</li> <li>Audit usage: Shell commands may not be logged by your application</li> </ul>"},{"location":"command-line-tools/commands/database/db-shell/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels db create</code> - Create a new database</li> <li><code>wheels db status</code> - Check migration status</li> <li><code>wheels db dump</code> - Export database</li> <li><code>wheels dbmigrate</code> - Run migrations</li> <li><code>wheels console</code> - CFML interactive console</li> </ul>"},{"location":"command-line-tools/commands/database/db-status/","title":"wheels db status","text":"<p>Show the status of database migrations.</p>"},{"location":"command-line-tools/commands/database/db-status/#synopsis","title":"Synopsis","text":"<pre><code>wheels db status [--format=&lt;format&gt;] [--pending]\n</code></pre>"},{"location":"command-line-tools/commands/database/db-status/#description","title":"Description","text":"<p>The <code>wheels db status</code> command displays information about the current state of database migrations, showing which migrations have been applied and which are pending.</p>"},{"location":"command-line-tools/commands/database/db-status/#options","title":"Options","text":""},{"location":"command-line-tools/commands/database/db-status/#-format","title":"--format= <p>Output format. Options are <code>table</code> (default) or <code>json</code>.</p> <pre><code>wheels db status --format=json\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-status/#-pending","title":"--pending <p>Show only pending migrations.</p> <pre><code>wheels db status --pending\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-status/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/database/db-status/#basic-usage","title":"Basic Usage <p>Show all migrations in table format: <pre><code>wheels db status\n</code></pre></p> <p>Output: <pre><code>Current database version: 20231203160000\n\n| Version              | Description                      | Status   | Applied At         |\n|--------------------|----------------------------------|----------|-------------------|\n| 20231201120000     | CreateUsersTable                 | applied  | 2023-12-01 12:30  |\n| 20231202140000     | AddEmailToUsers                  | applied  | 2023-12-02 14:15  |\n| 20231203160000     | CreatePostsTable                 | applied  | 2023-12-03 16:45  |\n| 20231204180000     | AddIndexToPostsUserId            | pending  | Not applied       |\n\nTotal migrations: 4\nApplied: 3\nPending: 1\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-status/#show-only-pending","title":"Show Only Pending <pre><code>wheels db status --pending\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-status/#json-output","title":"JSON Output <pre><code>wheels db status --format=json\n</code></pre> <p>Output: <pre><code>{\n  \"success\": true,\n  \"currentVersion\": \"20231203160000\",\n  \"migrations\": [\n    {\n      \"version\": \"20231201120000\",\n      \"description\": \"CreateUsersTable\",\n      \"status\": \"applied\",\n      \"appliedAt\": \"2023-12-01 12:30:00\"\n    },\n    {\n      \"version\": \"20231204180000\",\n      \"description\": \"AddIndexToPostsUserId\",\n      \"status\": \"pending\",\n      \"appliedAt\": null\n    }\n  ],\n  \"summary\": {\n    \"total\": 4,\n    \"applied\": 3,\n    \"pending\": 1\n  }\n}\n</code></pre></p>","text":""},{"location":"command-line-tools/commands/database/db-status/#understanding-the-output","title":"Understanding the Output","text":""},{"location":"command-line-tools/commands/database/db-status/#table-format","title":"Table Format <ul> <li>Version: Migration timestamp/version number</li> <li>Description: Human-readable migration name</li> <li>Status: Either \"applied\" or \"pending\"</li> <li>Applied At: When the migration was run</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-status/#status-colors","title":"Status Colors <ul> <li>Green: Applied migrations</li> <li>Yellow: Pending migrations</li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-status/#summary-section","title":"Summary Section <p>Shows counts of: - Total migrations in the migrations folder - Applied migrations in the database - Pending migrations to be run</p>","text":""},{"location":"command-line-tools/commands/database/db-status/#common-scenarios","title":"Common Scenarios","text":""},{"location":"command-line-tools/commands/database/db-status/#check-before-deployment","title":"Check Before Deployment <pre><code># See what migrations will run in production\nwheels db status --environment=production --pending\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-status/#verify-migration-applied","title":"Verify Migration Applied <pre><code># Check if specific migration was applied\nwheels db status | grep \"AddEmailToUsers\"\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-status/#cicd-integration","title":"CI/CD Integration <pre><code># Get pending count for automation\nwheels db status --format=json | jq '.summary.pending'\n</code></pre>","text":""},{"location":"command-line-tools/commands/database/db-status/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/database/db-status/#no-migrations-found","title":"\"No migrations found\" <ul> <li>Check that migration files exist in <code>/db/migrate/</code> directory</li> <li>Ensure file naming follows pattern: <code>YYYYMMDDHHMMSS_Description.cfc</code></li> </ul>","text":""},{"location":"command-line-tools/commands/database/db-status/#version-mismatch","title":"Version Mismatch <p>If the database version doesn't match expected: - Check migration history in database - Verify no migrations were manually deleted - Consider running <code>wheels dbmigrate latest</code></p>","text":""},{"location":"command-line-tools/commands/database/db-status/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels db version</code> - Show just the current version</li> <li><code>wheels dbmigrate latest</code> - Apply pending migrations</li> <li><code>wheels db rollback</code> - Rollback migrations</li> <li><code>wheels dbmigrate info</code> - Similar migration information</li> </ul>"},{"location":"command-line-tools/commands/database/db-version/","title":"wheels db version","text":"<p>Show the current database schema version.</p>"},{"location":"command-line-tools/commands/database/db-version/#synopsis","title":"Synopsis","text":"<pre><code>wheels db version [--detailed]\n</code></pre>"},{"location":"command-line-tools/commands/database/db-version/#description","title":"Description","text":"<p>The <code>wheels db version</code> command displays the current version of your database schema based on the last applied migration. This is useful for quickly checking which migration version your database is at.</p>"},{"location":"command-line-tools/commands/database/db-version/#options","title":"Options","text":""},{"location":"command-line-tools/commands/database/db-version/#-detailed","title":"--detailed","text":"<p>Show additional information about the database state.</p> <pre><code>wheels db version --detailed\n</code></pre>"},{"location":"command-line-tools/commands/database/db-version/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/database/db-version/#basic-usage","title":"Basic Usage","text":"<p>Show current version: <pre><code>wheels db version\n</code></pre></p> <p>Output: <pre><code>Current database version: 20231203160000\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-version/#detailed-information","title":"Detailed Information","text":"<pre><code>wheels db version --detailed\n</code></pre> <p>Output: <pre><code>Current database version: 20231203160000\n\nLast migration:\n  Version: 20231203160000\n  Description: CreatePostsTable\n  Applied at: 2023-12-03 16:45:32\n\nTotal migrations: 15\nPending migrations: 2\n\nNext migration to apply:\n  Version: 20231204180000\n  Description: AddIndexToPostsUserId\n\nEnvironment: development\nDatasource: myapp_dev\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-version/#understanding-versions","title":"Understanding Versions","text":""},{"location":"command-line-tools/commands/database/db-version/#version-format","title":"Version Format","text":"<p>Migrations use timestamp-based versions: - Format: <code>YYYYMMDDHHMMSS</code> - Example: <code>20231203160000</code> = December 3, 2023 at 4:00:00 PM</p>"},{"location":"command-line-tools/commands/database/db-version/#no-version","title":"No Version","text":"<p>If you see \"No migrations have been applied yet\": - Database is fresh with no migrations run - Run <code>wheels dbmigrate latest</code> to apply migrations</p>"},{"location":"command-line-tools/commands/database/db-version/#common-use-cases","title":"Common Use Cases","text":""},{"location":"command-line-tools/commands/database/db-version/#quick-check","title":"Quick Check","text":"<p>Before running migrations: <pre><code>wheels db version\nwheels dbmigrate latest\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-version/#deployment-verification","title":"Deployment Verification","text":"<pre><code># Check production is up to date\nwheels db version --environment=production --detailed\n</code></pre>"},{"location":"command-line-tools/commands/database/db-version/#troubleshooting","title":"Troubleshooting","text":"<p>Compare versions across environments: <pre><code># Development\nwheels db version --environment=development\n\n# Staging\nwheels db version --environment=staging\n\n# Production\nwheels db version --environment=production\n</code></pre></p>"},{"location":"command-line-tools/commands/database/db-version/#related-information","title":"Related Information","text":"<p>The version corresponds to: - The latest migration file that has been applied - An entry in the migration tracking table - The current schema state of your database</p>"},{"location":"command-line-tools/commands/database/db-version/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels db status</code> - Show all migrations and their status</li> <li><code>wheels dbmigrate latest</code> - Update to latest version</li> <li><code>wheels db rollback</code> - Rollback to previous version</li> <li><code>wheels dbmigrate info</code> - Detailed migration information</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/","title":"dbmigrate create blank","text":"<p>Create an empty database migration file with up and down methods.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#synopsis","title":"Synopsis","text":"<pre><code>wheels dbmigrate create blank --name=&lt;name&gt; [options]\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#description","title":"Description","text":"<p>The <code>dbmigrate create blank</code> command generates a new empty migration file with the basic structure including <code>up()</code> and <code>down()</code> methods. This provides a starting point for custom migrations where you need full control over the migration logic.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#options","title":"Options","text":""},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#-name","title":"<code>--name</code>","text":"<ul> <li>Type: String</li> <li>Required: Yes</li> <li>Description: The name of the migration (will be prefixed with timestamp)</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#-datasource","title":"<code>--datasource</code>","text":"<ul> <li>Type: String</li> <li>Default: Application default</li> <li>Description: Specify the datasource this migration targets</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#-description","title":"<code>--description</code>","text":"<ul> <li>Type: String</li> <li>Default: Empty</li> <li>Description: Add a description comment to the migration file</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#-template","title":"<code>--template</code>","text":"<ul> <li>Type: String</li> <li>Default: <code>blank</code></li> <li>Description: Use a custom template for the migration</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#create-a-basic-empty-migration","title":"Create a basic empty migration","text":"<pre><code>wheels dbmigrate create blank --name=add_custom_indexes\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#create-migration-with-description","title":"Create migration with description","text":"<pre><code>wheels dbmigrate create blank --name=update_user_permissions --description=\"Add role-based permissions to users\"\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#create-migration-for-specific-datasource","title":"Create migration for specific datasource","text":"<pre><code>wheels dbmigrate create blank --name=legacy_data_cleanup --datasource=legacyDB\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#generated-file-structure","title":"Generated File Structure","text":"<p>The command creates a file named <code>YYYYMMDDHHmmss_&lt;name&gt;.cfc</code> with the following structure:</p> <pre><code>component extends=\"wheels.migrator.Migration\" hint=\"&lt;description&gt;\" {\n\n    function up() {\n        transaction {\n            // Add your migration code here\n        }\n    }\n\n    function down() {\n        transaction {\n            // Add code to reverse the migration\n        }\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#custom-database-operations","title":"Custom Database Operations","text":"<p>For complex operations not covered by other generators: <pre><code># Create migration for custom stored procedure\nwheels dbmigrate create blank --name=create_reporting_procedures\n\n# Edit the file to add:\n# - CREATE PROCEDURE statements\n# - Complex SQL operations\n# - Multiple related changes\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#data-migrations","title":"Data Migrations","text":"<p>When you need to migrate data, not just schema: <pre><code># Create data migration\nwheels dbmigrate create blank --name=normalize_user_emails\n\n# Edit to add data transformation logic\n# Example: lowercase all email addresses\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#multi-step-operations","title":"Multi-Step Operations","text":"<p>For migrations requiring multiple coordinated changes: <pre><code># Create complex migration\nwheels dbmigrate create blank --name=refactor_order_system\n\n# Edit to include:\n# - Create new tables\n# - Migrate data\n# - Drop old tables\n# - Update foreign keys\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#database-specific-features","title":"Database-Specific Features","text":"<p>For database-specific features not abstracted by Wheels: <pre><code># Create migration for PostgreSQL-specific features\nwheels dbmigrate create blank --name=add_json_columns\n\n# Edit to use PostgreSQL JSON operations\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#best-practices","title":"Best Practices","text":""},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#1-descriptive-names","title":"1. Descriptive Names","text":"<p>Use clear, descriptive names that indicate the migration's purpose: <pre><code># Good\nwheels dbmigrate create blank --name=add_user_authentication_tokens\n\n# Bad\nwheels dbmigrate create blank --name=update1\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#2-implement-both-methods","title":"2. Implement Both Methods","text":"<p>Always implement both up() and down() methods: <pre><code>function up() {\n    transaction {\n        execute(\"CREATE INDEX idx_users_email ON users(email)\");\n    }\n}\n\nfunction down() {\n    transaction {\n        execute(\"DROP INDEX idx_users_email\");\n    }\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#3-use-transactions","title":"3. Use Transactions","text":"<p>Wrap operations in transactions for atomicity: <pre><code>function up() {\n    transaction {\n        // All operations succeed or all fail\n        createTable(\"new_table\");\n        execute(\"INSERT INTO new_table SELECT * FROM old_table\");\n        dropTable(\"old_table\");\n    }\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#4-add-comments","title":"4. Add Comments","text":"<p>Document complex operations: <pre><code>function up() {\n    transaction {\n        // Create composite index for query optimization\n        // This supports the findActiveUsersByRegion() query\n        execute(\"\n            CREATE INDEX idx_users_active_region \n            ON users(is_active, region_id) \n            WHERE is_active = 1\n        \");\n    }\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#available-migration-methods","title":"Available Migration Methods","text":"<p>Within your blank migration, you can use these helper methods:</p> <ul> <li><code>createTable(name, options)</code> - Create a new table</li> <li><code>dropTable(name)</code> - Drop a table</li> <li><code>addColumn(table, column, type, options)</code> - Add a column</li> <li><code>removeColumn(table, column)</code> - Remove a column</li> <li><code>changeColumn(table, column, type, options)</code> - Modify a column</li> <li><code>addIndex(table, column, options)</code> - Add an index</li> <li><code>removeIndex(table, column)</code> - Remove an index</li> <li><code>execute(sql)</code> - Execute raw SQL</li> <li><code>announce(message)</code> - Output a message during migration</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#notes","title":"Notes","text":"<ul> <li>Migration files are created in <code>/app/migrator/migrations/</code> or your configured migration path</li> <li>The timestamp ensures migrations run in the correct order</li> <li>Always test migrations in development before production</li> <li>Keep migrations focused on a single purpose</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-create-blank/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels dbmigrate create table</code> - Create a table migration</li> <li><code>wheels dbmigrate create column</code> - Create a column migration</li> <li><code>wheels dbmigrate up</code> - Run migrations</li> <li><code>wheels dbmigrate down</code> - Rollback migrations</li> <li><code>wheels dbmigrate info</code> - View migration status</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/","title":"dbmigrate create column","text":"<p>Generate a migration file for adding columns to an existing database table.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#synopsis","title":"Synopsis","text":"<pre><code>wheels dbmigrate create column name=&lt;table_name&gt; data-type=&lt;type&gt; column-name=&lt;column&gt; [options]\n</code></pre> <p>Alias: <code>wheels db create column</code></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#description","title":"Description","text":"<p>The <code>dbmigrate create column</code> command generates a migration file that adds a column to an existing database table. It supports standard column types and various options for column configuration.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>name</code> string Yes - The name of the database table to modify <code>data-type</code> string Yes - The column type to add <code>column-name</code> string No - The column name to add <code>default</code> any No - The default value to set for the column <code>--null</code> boolean No true Should the column allow nulls <code>limit</code> number No - The character limit of the column <code>precision</code> number No - The precision of the numeric column <code>scale</code> number No - The scale of the numeric column"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#column-types","title":"Column Types","text":"<ul> <li><code>string</code> - VARCHAR(255)</li> <li><code>text</code> - TEXT/CLOB</li> <li><code>integer</code> - INTEGER</li> <li><code>biginteger</code> - BIGINT</li> <li><code>float</code> - FLOAT</li> <li><code>decimal</code> - DECIMAL</li> <li><code>boolean</code> - BOOLEAN/BIT</li> <li><code>date</code> - DATE</li> <li><code>time</code> - TIME</li> <li><code>datetime</code> - DATETIME/TIMESTAMP</li> <li><code>timestamp</code> - TIMESTAMP</li> <li><code>binary</code> - BLOB/BINARY</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#migration-file-naming","title":"Migration File Naming","text":"<p>The generated migration file will be named with a timestamp and description: <pre><code>[timestamp]_create_column_[columnname]_in_[tablename]_table.cfc\n</code></pre></p> <p>Example: <pre><code>20240125160000_create_column_email_in_user_table.cfc\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#add-a-simple-column","title":"Add a simple column","text":"<pre><code>wheels dbmigrate create column name=user data-type=string column-name=email\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#add-column-with-default-value","title":"Add column with default value","text":"<pre><code>wheels dbmigrate create column name=user data-type=boolean column-name=is_active default=true\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#add-nullable-column-with-limit","title":"Add nullable column with limit","text":"<pre><code>wheels dbmigrate create column name=user data-type=string column-name=bio --null=true limit=500\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#add-decimal-column-with-precision","title":"Add decimal column with precision","text":"<pre><code>wheels dbmigrate create column name=product data-type=decimal column-name=price precision=10 scale=2\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#generated-migration-example","title":"Generated Migration Example","text":"<p>For the command: <pre><code>wheels dbmigrate create column name=user data-type=string column-name=phone --null=true\n</code></pre></p> <p>Generates: <pre><code>component extends=\"wheels.migrator.Migration\" hint=\"create column phone in user table\" {\n\n    function up() {\n        transaction {\n            addColumn(table=\"user\", columnType=\"string\", columnName=\"phone\", null=true);\n        }\n    }\n\n    function down() {\n        transaction {\n            removeColumn(table=\"user\", column=\"phone\");\n        }\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#adding-user-preferences","title":"Adding User Preferences","text":"<p>Add preference column to user table: <pre><code># Create separate migrations for each column\nwheels dbmigrate create column name=user data-type=boolean column-name=newsletter_subscribed default=true\nwheels dbmigrate create column name=user data-type=string column-name=theme_preference default=\"light\"\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#adding-audit-fields","title":"Adding Audit Fields","text":"<p>Add tracking column to any table: <pre><code>wheels dbmigrate create column name=product data-type=integer column-name=last_modified_by --null=true\nwheels dbmigrate create column name=product data-type=datetime column-name=last_modified_at --null=true\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#adding-price-fields","title":"Adding Price Fields","text":"<p>Add decimal columns for pricing: <pre><code>wheels dbmigrate create column name=product data-type=decimal column-name=price precision=10 scale=2 default=0\nwheels dbmigrate create column name=product data-type=decimal column-name=cost precision=10 scale=2\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#best-practices","title":"Best Practices","text":""},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#1-consider-null-values","title":"1. Consider NULL Values","text":"<p>For existing tables with data, make new columns nullable or provide defaults: <pre><code># Good - nullable\nwheels dbmigrate create column name=user data-type=text column-name=bio --null=true\n\n# Good - with default\nwheels dbmigrate create column name=user data-type=string column-name=status default=\"active\"\n\n# Bad - will fail if table has data (not nullable, no default)\nwheels dbmigrate create column name=user data-type=string column-name=required_field --null=false\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#2-use-appropriate-types","title":"2. Use Appropriate Types","text":"<p>Choose the right column type for your data: <pre><code># For short text\nwheels dbmigrate create column name=user data-type=string column-name=username limit=50\n\n# For long text\nwheels dbmigrate create column name=post data-type=text column-name=content\n\n# For money\nwheels dbmigrate create column name=invoice data-type=decimal column-name=amount precision=10 scale=2\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#3-one-column-per-migration","title":"3. One Column Per Migration","text":"<p>This command creates one column at a time: <pre><code># Create separate migrations for related columns\nwheels dbmigrate create column name=customer data-type=string column-name=address_line1\nwheels dbmigrate create column name=customer data-type=string column-name=city\nwheels dbmigrate create column name=customer data-type=string column-name=state limit=2\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#4-plan-your-schema","title":"4. Plan Your Schema","text":"<p>Think through column requirements before creating: - Data type and size - Null constraints - Default values - Index requirements</p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#advanced-scenarios","title":"Advanced Scenarios","text":""},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#adding-foreign-keys","title":"Adding Foreign Keys","text":"<p>Add foreign key columns with appropriate types: <pre><code># Add foreign key column\nwheels dbmigrate create column name=order data-type=integer column-name=customer_id\n\n# Then create index in separate migration\nwheels dbmigrate create blank name=add_order_customer_id_index\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#complex-column-types","title":"Complex Column Types","text":"<p>For special column types, use blank migrations: <pre><code># Create blank migration for custom column types\nwheels dbmigrate create blank name=add_user_preferences_json\n# Then manually add the column with custom SQL\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#common-pitfalls","title":"Common Pitfalls","text":""},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#1-non-nullable-without-default","title":"1. Non-Nullable Without Default","text":"<pre><code># This will fail if table has data\nwheels dbmigrate create column name=user data-type=string column-name=required_field --null=false\n\n# Do this instead\nwheels dbmigrate create column name=user data-type=string column-name=required_field default=\"pending\"\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#2-changing-column-types","title":"2. Changing Column Types","text":"<p>This command adds columns, not modifies them: <pre><code># Wrong - trying to change existing column type\nwheels dbmigrate create column name=user data-type=integer column-name=age\n\n# Right - use blank migration for modifications\nwheels dbmigrate create blank name=change_user_age_to_integer\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#notes","title":"Notes","text":"<ul> <li>The migration includes automatic rollback with removeColumn()</li> <li>Column order in down() is reversed for proper rollback</li> <li>Always test migrations with data in development</li> <li>Consider the impact on existing queries and code</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-create-column/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels dbmigrate create table</code> - Create new tables</li> <li><code>wheels dbmigrate create blank</code> - Create custom migrations</li> <li><code>wheels dbmigrate remove table</code> - Remove tables</li> <li><code>wheels dbmigrate up</code> - Run migrations</li> <li><code>wheels dbmigrate down</code> - Rollback migrations</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-create-table/","title":"dbmigrate create table","text":"<p>Generate a migration file for creating a new database table.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#synopsis","title":"Synopsis","text":"<pre><code>wheels dbmigrate create table name=&lt;table_name&gt; [--force] [--id] primary-key=&lt;key_name&gt;\n</code></pre> <p>Alias: <code>wheels db create table</code></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#description","title":"Description","text":"<p>The <code>dbmigrate create table</code> command generates a migration file that creates a new database table. The generated migration includes the table structure following Wheels conventions.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>name</code> string Yes - The name of the table to create <code>--force</code> boolean No false Force the creation of the table <code>--id</code> boolean No true Auto create ID column as autoincrement ID <code>primary-key</code> string No \"id\" Overrides the default primary key column name"},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#notes-about-column-definition","title":"Notes About Column Definition","text":"<p>The generated migration file will contain a basic table structure. You'll need to manually edit the migration file to add columns with their types and options. The migration template includes comments showing how to add columns.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#create-a-basic-table","title":"Create a basic table","text":"<pre><code>wheels dbmigrate create table name=user\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#create-table-without-id-column","title":"Create table without ID column","text":"<pre><code>wheels dbmigrate create table name=user_roles --id=false\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#create-table-with-custom-primary-key","title":"Create table with custom primary key","text":"<pre><code>wheels dbmigrate create table name=products primary-key=productCode\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#force-creation-overwrite-existing","title":"Force creation (overwrite existing)","text":"<pre><code>wheels dbmigrate create table name=users --force\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#generated-migration-example","title":"Generated Migration Example","text":"<p>For the command: <pre><code>wheels dbmigrate create table name=users\n</code></pre></p> <p>Generates a migration file that you can customize: <pre><code>component extends=\"wheels.migrator.Migration\" hint=\"create users table\" {\n\n    function up() {\n        transaction {\n            t = createTable(name=\"users\", force=false, id=true, primaryKey=\"id\");\n            // Add your columns here\n            // t.string(columnName=\"name\");\n            // t.integer(columnName=\"age\");\n            t.timestamps();\n            t.create();\n        }\n    }\n\n    function down() {\n        transaction {\n            dropTable(\"users\");\n        }\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#standard-entity-table","title":"Standard Entity Table","text":"<p>Create a typical entity table: <pre><code># Generate the migration\nwheels dbmigrate create table name=customer\n\n# Then edit the migration file to add columns\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#join-table-for-many-to-many","title":"Join Table for Many-to-Many","text":"<p>Create a join table without primary key: <pre><code>wheels dbmigrate create table name=products_categories --id=false\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#table-with-custom-primary-key","title":"Table with Custom Primary Key","text":"<p>Create a table with non-standard primary key: <pre><code>wheels dbmigrate create table name=legacy_customer primary-key=customer_code\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#best-practices","title":"Best Practices","text":""},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#1-use-singular-table-names","title":"1. Use Singular Table Names","text":"<p>Wheels conventions expect singular table names: <pre><code># Good\nwheels dbmigrate create table name=user\nwheels dbmigrate create table name=product\n\n# Avoid\nwheels dbmigrate create table name=users\nwheels dbmigrate create table name=products\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#2-edit-migration-files","title":"2. Edit Migration Files","text":"<p>After generating the migration, edit it to add columns: <pre><code>// In the generated migration file\nt = createTable(name=\"orders\", force=false, id=true, primaryKey=\"id\");\nt.integer(columnName=\"customer_id\");\nt.decimal(columnName=\"total\", precision=10, scale=2);\nt.string(columnName=\"status\", default=\"pending\");\nt.timestamps();\nt.create();\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#3-plan-your-schema","title":"3. Plan Your Schema","text":"<p>Think through your table structure before creating: - Primary key strategy - Required columns and their types - Foreign key relationships - Indexes needed for performance</p>"},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#working-with-the-generated-migration","title":"Working with the Generated Migration","text":"<p>The command generates a basic migration template. You'll need to edit it to add columns:</p> <pre><code>component extends=\"wheels.migrator.Migration\" {\n    function up() {\n        transaction {\n            t = createTable(name=\"tableName\", force=false, id=true, primaryKey=\"id\");\n            // Add your columns here:\n            t.string(columnName=\"name\");\n            t.integer(columnName=\"age\");\n            t.boolean(columnName=\"active\", default=true);\n            t.text(columnName=\"description\");\n            // MySQL only: use size parameter for larger text fields\n            t.text(columnName=\"content\", size=\"mediumtext\"); // 16MB\n            t.text(columnName=\"largeContent\", size=\"longtext\"); // 4GB\n            t.timestamps();\n            t.create();\n        }\n    }\n\n    function down() {\n        transaction {\n            dropTable(\"tableName\");\n        }\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#notes","title":"Notes","text":"<ul> <li>Table names should follow your database naming conventions</li> <li>The migration automatically handles rollback with dropTable()</li> <li>Column order in the command is preserved in the migration</li> <li>Use <code>wheels dbmigrate up</code> to run the generated migration</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-create-table/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels dbmigrate create column</code> - Add columns to existing table</li> <li><code>wheels dbmigrate create blank</code> - Create custom migration</li> <li><code>wheels dbmigrate remove table</code> - Create table removal migration</li> <li><code>wheels dbmigrate up</code> - Run migrations</li> <li><code>wheels dbmigrate info</code> - View migration status</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-down/","title":"dbmigrate down","text":"<p>Rollback the last executed database migration.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-down/#synopsis","title":"Synopsis","text":"<pre><code>wheels dbmigrate down\n</code></pre> <p>Alias: <code>wheels db down</code></p>"},{"location":"command-line-tools/commands/database/dbmigrate-down/#description","title":"Description","text":"<p>The <code>dbmigrate down</code> command reverses the last executed migration by running its <code>down()</code> method. This is useful for undoing database changes when issues are discovered or when you need to modify a migration. The command ensures safe rollback of schema changes while maintaining database integrity.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-down/#parameters","title":"Parameters","text":"<p>None.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-down/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/database/dbmigrate-down/#rollback-the-last-migration","title":"Rollback the last migration","text":"<pre><code>wheels dbmigrate down\n</code></pre> <p>This will execute the down() method of the most recently applied migration, reverting the database changes.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-down/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/database/dbmigrate-down/#fixing-migration-errors","title":"Fixing Migration Errors","text":"<p>When a migration contains errors or needs modification: <pre><code># Run the migration\nwheels dbmigrate up\n\n# Discover an issue\n# Rollback the migration\nwheels dbmigrate down\n\n# Edit the migration file\n# Re-run the migration\nwheels dbmigrate up\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-down/#development-iteration","title":"Development Iteration","text":"<p>During development when refining migrations: <pre><code># Apply migration\nwheels dbmigrate up\n\n# Test the changes\n# Need to modify? Rollback\nwheels dbmigrate down\n\n# Make changes to migration\n# Apply again\nwheels dbmigrate up\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-down/#emergency-rollback","title":"Emergency Rollback","text":"<p>When a migration causes issues: <pre><code># Check current migration status\nwheels dbmigrate info\n\n# Rollback the problematic migration\nwheels dbmigrate down\n\n# Verify rollback\nwheels dbmigrate info\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-down/#important-considerations","title":"Important Considerations","text":""},{"location":"command-line-tools/commands/database/dbmigrate-down/#data-loss-warning","title":"Data Loss Warning","text":"<p>Rolling back migrations that drop columns or tables will result in data loss. Always ensure you have backups before rolling back destructive migrations.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-down/#down-method-requirements","title":"Down Method Requirements","text":"<p>For a migration to be rolled back, it must have a properly implemented <code>down()</code> method that reverses the changes made in the <code>up()</code> method.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-down/#migration-dependencies","title":"Migration Dependencies","text":"<p>Be cautious when rolling back migrations that other migrations depend on. This can break the migration chain.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-down/#best-practices","title":"Best Practices","text":"<ol> <li>Always implement down() methods: Even if you think you'll never need to rollback</li> <li>Test rollbacks: In development, always test that your down() method works correctly</li> <li>Backup before rollback: Especially in production environments</li> <li>Document destructive operations: Clearly indicate when rollbacks will cause data loss</li> </ol>"},{"location":"command-line-tools/commands/database/dbmigrate-down/#notes","title":"Notes","text":"<ul> <li>Only the last executed migration can be rolled back with this command</li> <li>To rollback multiple migrations, run the command multiple times</li> <li>If already at version 0, displays: \"We're already on zero! No migrations to go to\"</li> <li>Automatically runs <code>dbmigrate info</code> after successful rollback</li> <li>The migration version is removed from the database tracking table upon successful rollback</li> <li>Some operations (like dropping columns with data) cannot be fully reversed</li> <li>When migrating to version 0, displays: \"Database should now be empty.\"</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-down/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels dbmigrate up</code> - Run the next migration</li> <li><code>wheels dbmigrate reset</code> - Reset all migrations</li> <li><code>wheels dbmigrate info</code> - View migration status</li> <li><code>wheels dbmigrate exec</code> - Run a specific migration</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-exec/","title":"dbmigrate exec","text":"<p>Execute a specific database migration by version number.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-exec/#synopsis","title":"Synopsis","text":"<pre><code>wheels dbmigrate exec version=&lt;version&gt;\n</code></pre> <p>Alias: <code>wheels db exec</code></p>"},{"location":"command-line-tools/commands/database/dbmigrate-exec/#description","title":"Description","text":"<p>The <code>dbmigrate exec</code> command allows you to migrate to a specific version identified by its version number, regardless of the current migration state. This is useful for moving to any specific point in your migration history.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-exec/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>version</code> string Yes Version to migrate to"},{"location":"command-line-tools/commands/database/dbmigrate-exec/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/database/dbmigrate-exec/#execute-a-specific-migration","title":"Execute a specific migration","text":"<pre><code>wheels dbmigrate exec version=20240115123456\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-exec/#migrate-to-version-0-revert-all-migrations","title":"Migrate to version 0 (revert all migrations)","text":"<pre><code>wheels dbmigrate exec version=0\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-exec/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/database/dbmigrate-exec/#migrating-to-a-specific-version","title":"Migrating to a Specific Version","text":"<p>Move to any point in migration history: <pre><code># Check current status\nwheels dbmigrate info\n\n# Migrate to specific version\nwheels dbmigrate exec version=20240115123456\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-exec/#rolling-back-to-previous-version","title":"Rolling Back to Previous Version","text":"<p>Move to an earlier migration state: <pre><code># Check migration history\nwheels dbmigrate info\n\n# Go back to specific version\nwheels dbmigrate exec version=20240101000000\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-exec/#reset-database","title":"Reset Database","text":"<p>Clear all migrations: <pre><code># Migrate to version 0\nwheels dbmigrate exec version=0\n\n# Verify empty state\nwheels dbmigrate info\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-exec/#important-considerations","title":"Important Considerations","text":""},{"location":"command-line-tools/commands/database/dbmigrate-exec/#migration-order","title":"Migration Order","text":"<p>Executing migrations out of order can cause issues if migrations have dependencies. Always ensure that any required preceding migrations have been run.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-exec/#version-tracking","title":"Version Tracking","text":"<p>The command updates the migration tracking table to reflect the execution status.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-exec/#best-practices","title":"Best Practices","text":"<ol> <li>Check Dependencies: Ensure required migrations are already applied</li> <li>Test First: Run in development/testing before production</li> <li>Use Sparingly: Prefer normal migration flow with up/latest</li> <li>Document Usage: Record when and why specific executions were done</li> <li>Verify State: Check migration status before and after execution</li> </ol>"},{"location":"command-line-tools/commands/database/dbmigrate-exec/#version-number-format","title":"Version Number Format","text":"<p>Migration versions are typically timestamps in the format: - <code>YYYYMMDDHHmmss</code> (e.g., 20240115123456) - Year: 2024 - Month: 01 - Day: 15 - Hour: 12 - Minute: 34 - Second: 56</p>"},{"location":"command-line-tools/commands/database/dbmigrate-exec/#notes","title":"Notes","text":"<ul> <li>The command will migrate UP or DOWN to reach the specified version</li> <li>Version must be a valid migration version or 0 to reset all</li> <li>The migration file must exist in the migrations directory</li> <li>The command displays the migration progress message</li> <li>Both up() and down() methods should be defined in the migration</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-exec/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels dbmigrate up</code> - Run the next migration</li> <li><code>wheels dbmigrate down</code> - Rollback last migration</li> <li><code>wheels dbmigrate latest</code> - Run all pending migrations</li> <li><code>wheels dbmigrate info</code> - View migration status</li> <li><code>wheels dbmigrate create blank</code> - Create a new migration</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-info/","title":"wheels dbmigrate info","text":"<p>Display database migration status and information.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-info/#synopsis","title":"Synopsis","text":"<pre><code>wheels dbmigrate info\n</code></pre> <p>Alias: <code>wheels db info</code></p>"},{"location":"command-line-tools/commands/database/dbmigrate-info/#description","title":"Description","text":"<p>The <code>wheels dbmigrate info</code> command shows the current state of database migrations, including which migrations have been run, which are pending, and the current database version.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-info/#parameters","title":"Parameters","text":"<p>None.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-info/#output","title":"Output","text":"<p>The command displays:</p> <ol> <li>Datasource: The database connection being used</li> <li>Database Type: The type of database (MySQL, PostgreSQL, etc.)</li> <li>Total Migrations: Count of all migration files found</li> <li>Available Migrations: Number of pending migrations</li> <li>Current Version: The latest migration that has been run</li> <li>Latest Version: The newest migration available</li> <li>Migration List: All migrations with their status (migrated or pending)</li> </ol>"},{"location":"command-line-tools/commands/database/dbmigrate-info/#example-output","title":"Example Output","text":"<pre><code>+-----------------------------------------+-----------------------------------------+\n| Datasource: myapp_development           | Total Migrations: 6                     |\n| Database Type: MySQL                    | Available Migrations: 2                 |\n|                                         | Current Version: 20240115120000         |\n|                                         | Latest Version: 20240125160000          |\n+-----------------------------------------+-----------------------------------------+\n+----------+------------------------------------------------------------------------+\n| migrated | 20240101100000_create_users_table.cfc                                 |\n| migrated | 20240105150000_create_products_table.cfc                              |\n| migrated | 20240110090000_add_email_to_users.cfc                                 |\n| migrated | 20240115120000_create_orders_table.cfc                                |\n|          | 20240120140000_add_status_to_orders.cfc                               |\n|          | 20240125160000_create_categories_table.cfc                            |\n+----------+------------------------------------------------------------------------+\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-info/#migration-files-location","title":"Migration Files Location","text":"<p>Migrations are stored in <code>/app/migrator/migrations/</code> and follow the naming convention: <pre><code>[timestamp]_[description].cfc\n</code></pre></p> <p>Example: <pre><code>20240125160000_create_users_table.cfc\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-info/#understanding-version-numbers","title":"Understanding Version Numbers","text":"<ul> <li>Version numbers are timestamps in format: <code>YYYYMMDDHHmmss</code></li> <li>Higher numbers are newer migrations</li> <li>Migrations run in chronological order</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-info/#database-schema-table","title":"Database Schema Table","text":"<p>Migration status is tracked in <code>schema_migrations</code> table:</p> <pre><code>SELECT * FROM schema_migrations;\n+----------------+\n| version        |\n+----------------+\n| 20240101100000 |\n| 20240105150000 |\n| 20240110090000 |\n| 20240115120000 |\n+----------------+\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-info/#use-cases","title":"Use Cases","text":"<ol> <li> <p>Check before deployment <pre><code>wheels dbmigrate info\n</code></pre></p> </li> <li> <p>Verify after migration <pre><code>wheels dbmigrate latest\nwheels dbmigrate info\n</code></pre></p> </li> <li> <p>Troubleshoot issues</p> </li> <li>See which migrations have run</li> <li>Identify pending migrations</li> <li>Confirm database version</li> </ol>"},{"location":"command-line-tools/commands/database/dbmigrate-info/#common-scenarios","title":"Common Scenarios","text":""},{"location":"command-line-tools/commands/database/dbmigrate-info/#all-migrations-complete","title":"All Migrations Complete","text":"<pre><code>Current Version: 20240125160000\nStatus: 6 completed, 0 pending\n\u2713 Database is up to date\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-info/#fresh-database","title":"Fresh Database","text":"<pre><code>Current Version: 0\nStatus: 0 completed, 6 pending\n\u26a0 No migrations have been run\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-info/#partial-migration","title":"Partial Migration","text":"<pre><code>Current Version: 20240110090000\nStatus: 3 completed, 3 pending\n\u26a0 Database needs migration\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-info/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/database/dbmigrate-info/#migration-not-showing","title":"Migration Not Showing","text":"<ul> <li>Check file is in <code>/app/migrator/migrations/</code></li> <li>Verify <code>.cfc</code> extension</li> <li>Ensure proper timestamp format</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-info/#version-mismatch","title":"Version Mismatch","text":"<ul> <li>Check <code>schema_migrations</code> table</li> <li>Verify migration files haven't been renamed</li> <li>Look for duplicate timestamps</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-info/#connection-issues","title":"Connection Issues","text":"<ul> <li>Verify datasource configuration</li> <li>Check database credentials</li> <li>Ensure database server is running</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-info/#integration-with-cicd","title":"Integration with CI/CD","text":"<p>Use in deployment scripts: <pre><code>#!/bin/bash\n# Check migration status\nwheels dbmigrate info\n\n# Run if needed\nif [[ $(wheels dbmigrate info | grep \"pending\") ]]; then\n    echo \"Running pending migrations...\"\n    wheels dbmigrate latest\nfi\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-info/#best-practices","title":"Best Practices","text":"<ol> <li>Always check info before running migrations</li> <li>Review pending migrations before deployment</li> <li>Keep migration files in version control</li> <li>Don't modify completed migration files</li> <li>Use info to verify production deployments</li> </ol>"},{"location":"command-line-tools/commands/database/dbmigrate-info/#see-also","title":"See Also","text":"<ul> <li>wheels dbmigrate latest - Run all pending migrations</li> <li>wheels dbmigrate up - Run next migration</li> <li>wheels dbmigrate down - Rollback migration</li> <li>wheels dbmigrate create blank - Create new migration</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/","title":"wheels dbmigrate latest","text":"<p>Run all pending database migrations to bring database to latest version.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#synopsis","title":"Synopsis","text":"<pre><code>wheels dbmigrate latest\n</code></pre> <p>Alias: <code>wheels db latest</code></p>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#description","title":"Description","text":"<p>The <code>wheels dbmigrate latest</code> command runs all pending migrations in chronological order, updating your database schema to the latest version. This is the most commonly used migration command.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#parameters","title":"Parameters","text":"<p>None.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#how-it-works","title":"How It Works","text":"<ol> <li>Retrieves current database version and latest version</li> <li>Executes <code>dbmigrate exec</code> with the latest version</li> <li>Automatically runs <code>dbmigrate info</code> after completion</li> <li>Updates version tracking after successful migration</li> </ol>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#example-output","title":"Example Output","text":"<pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551          Running Pending Migrations           \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n\nCurrent Version: 20240110090000\nTarget Version: 20240125160000\n\nMigrating...\n\n\u2192 Running 20240115120000_create_orders_table.cfc\n  Creating table: orders\n  Adding indexes...\n  \u2713 Success (0.125s)\n\n\u2192 Running 20240120140000_add_status_to_orders.cfc\n  Adding column: status to orders\n  \u2713 Success (0.089s)\n\n\u2192 Running 20240125160000_create_categories_table.cfc\n  Creating table: categories\n  Adding foreign keys...\n  \u2713 Success (0.143s)\n\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551            Migration Complete                 \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n\nPrevious Version: 20240110090000\nCurrent Version:  20240125160000\nMigrations Run:   3\nTotal Time:       0.357s\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#migration-execution","title":"Migration Execution","text":"<p>Each migration file must contain:</p> <pre><code>component extends=\"wheels.migrator.Migration\" {\n\n    function up() {\n        // Database changes go here\n        transaction {\n            // Use transaction for safety\n        }\n    }\n\n    function down() {\n        // Rollback logic (optional)\n        transaction {\n            // Reverse the up() changes\n        }\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#transaction-safety","title":"Transaction Safety","text":"<p>Migrations run within transactions: - All changes in a migration succeed or fail together - Database remains consistent - Failed migrations can be retried</p>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#common-migration-operations","title":"Common Migration Operations","text":""},{"location":"command-line-tools/commands/database/dbmigrate-latest/#create-table","title":"Create Table","text":"<pre><code>function up() {\n    transaction {\n        t = createTable(\"products\");\n        t.string(\"name\");\n        t.decimal(\"price\");\n        t.timestamps();\n        t.create();\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#add-column","title":"Add Column","text":"<pre><code>function up() {\n    transaction {\n        addColumn(table=\"users\", column=\"email\", type=\"string\");\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#add-index","title":"Add Index","text":"<pre><code>function up() {\n    transaction {\n        addIndex(table=\"users\", columns=\"email\", unique=true);\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#modify-column","title":"Modify Column","text":"<pre><code>function up() {\n    transaction {\n        changeColumn(table=\"products\", column=\"price\", type=\"decimal\", precision=10, scale=2);\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#error-handling","title":"Error Handling","text":"<p>If a migration fails:</p> <pre><code>\u2192 Running 20240120140000_add_status_to_orders.cfc\n  Adding column: status to orders\n  \u2717 ERROR: Column 'status' already exists\n\nMigration failed at version 20240115120000\nError: Column 'status' already exists in table 'orders'\n\nTo retry: Fix the migration file and run 'wheels dbmigrate latest' again\nTo skip: Run 'wheels dbmigrate up' to run one at a time\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#best-practices","title":"Best Practices","text":"<ol> <li> <p>Test migrations locally first <pre><code># Test on development database\nwheels dbmigrate latest\n\n# Verify\nwheels dbmigrate info\n</code></pre></p> </li> <li> <p>Backup before production migrations <pre><code># Backup database\nmysqldump myapp_production &gt; backup.sql\n\n# Run migrations\nwheels dbmigrate latest\n</code></pre></p> </li> <li> <p>Use transactions <pre><code>function up() {\n    transaction {\n        // All changes here\n    }\n}\n</code></pre></p> </li> <li> <p>Make migrations reversible <pre><code>function down() {\n    transaction {\n        dropTable(\"products\");\n    }\n}\n</code></pre></p> </li> </ol>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#environment-specific-migrations","title":"Environment-Specific Migrations","text":"<p>Migrations can check environment:</p> <pre><code>function up() {\n    transaction {\n        // Always run\n        addColumn(table=\"users\", column=\"lastLogin\", type=\"datetime\");\n\n        // Development only\n        if (get(\"environment\") == \"development\") {\n            // Add test data\n            sql(\"INSERT INTO users (email) VALUES ('test@example.com')\");\n        }\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#checking-migrations","title":"Checking Migrations","text":"<p>Preview migrations before running:</p> <pre><code># Check what would run\nwheels dbmigrate info\n\n# Review migration files\nls app/migrator/migrations/\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#performance-considerations","title":"Performance Considerations","text":"<p>For large tables:</p> <pre><code>function up() {\n    transaction {\n        // Add index concurrently (if supported)\n        if (get(\"databaseType\") == \"postgresql\") {\n            sql(\"CREATE INDEX CONCURRENTLY idx_users_email ON users(email)\");\n        } else {\n            addIndex(table=\"users\", columns=\"email\");\n        }\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#continuous-integration","title":"Continuous Integration","text":"<p>Add to CI/CD pipeline:</p> <pre><code># .github/workflows/deploy.yml\n- name: Run migrations\n  run: |\n    wheels dbmigrate latest\n    wheels test app\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#rollback-strategy","title":"Rollback Strategy","text":"<p>If issues occur after migration:</p> <ol> <li> <p>Use down migrations <pre><code>wheels dbmigrate down\nwheels dbmigrate down\n</code></pre></p> </li> <li> <p>Restore from backup <pre><code>mysql myapp_production &lt; backup.sql\n</code></pre></p> </li> <li> <p>Fix and retry</p> </li> <li>Fix migration file</li> <li>Run <code>wheels dbmigrate latest</code></li> </ol>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#common-issues","title":"Common Issues","text":""},{"location":"command-line-tools/commands/database/dbmigrate-latest/#timeout-on-large-tables","title":"Timeout on Large Tables","text":"<pre><code>function up() {\n    // Increase timeout for large operations\n    setting requestTimeout=\"300\";\n\n    transaction {\n        // Long running operation\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#foreign-key-constraints","title":"Foreign Key Constraints","text":"<pre><code>function up() {\n    transaction {\n        // Disable checks temporarily\n        sql(\"SET FOREIGN_KEY_CHECKS=0\");\n\n        // Make changes\n        dropTable(\"orders\");\n\n        // Re-enable\n        sql(\"SET FOREIGN_KEY_CHECKS=1\");\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-latest/#see-also","title":"See Also","text":"<ul> <li>wheels dbmigrate info - Check migration status</li> <li>wheels dbmigrate up - Run single migration</li> <li>wheels dbmigrate down - Rollback migration</li> <li>wheels dbmigrate create blank - Create migration</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/","title":"dbmigrate remove table","text":"<p>Generate a migration file for dropping a database table.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#synopsis","title":"Synopsis","text":"<pre><code>wheels dbmigrate remove table name=&lt;table_name&gt;\n</code></pre> <p>Alias: <code>wheels db remove table</code></p>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#description","title":"Description","text":"<p>The <code>dbmigrate remove table</code> command generates a migration file that drops an existing database table. The generated migration includes a dropTable() call in the up() method.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#parameters","title":"Parameters","text":"Parameter Type Required Description <code>name</code> string Yes The name of the table to remove"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#basic-table-removal","title":"Basic table removal","text":"<pre><code>wheels dbmigrate remove table name=temp_import_data\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#remove-user-table","title":"Remove user table","text":"<pre><code>wheels dbmigrate remove table name=user\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#remove-archive-table","title":"Remove archive table","text":"<pre><code>wheels dbmigrate remove table name=orders_archive_2023\n</code></pre>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#generated-migration-example","title":"Generated Migration Example","text":"<p>For the command: <pre><code>wheels dbmigrate remove table name=product_archive\n</code></pre></p> <p>Generates: <pre><code>component extends=\"wheels.migrator.Migration\" hint=\"remove product_archive table\" {\n\n    function up() {\n        transaction {\n            dropTable(\"product_archive\");\n        }\n    }\n\n    function down() {\n        transaction {\n            // Add code here to recreate the table if needed for rollback\n            // createTable(name=\"product_archive\") { ... }\n        }\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#removing-temporary-tables","title":"Removing Temporary Tables","text":"<p>Clean up temporary or staging tables: <pre><code># Remove import staging table\nwheels dbmigrate remove table name=temp_customer_import\n\n# Remove data migration table\nwheels dbmigrate remove table name=migration_backup_20240115\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#refactoring-database-schema","title":"Refactoring Database Schema","text":"<p>Remove tables during schema refactoring: <pre><code># Remove old table after data migration\nwheels dbmigrate remove table name=legacy_orders\n\n# Remove deprecated table\nwheels dbmigrate remove table name=user_preferences_old\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#cleaning-up-failed-features","title":"Cleaning Up Failed Features","text":"<p>Remove tables from cancelled features: <pre><code># Remove tables from abandoned feature\nwheels dbmigrate remove table name=beta_feature_data\nwheels dbmigrate remove table name=beta_feature_settings\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#archive-table-cleanup","title":"Archive Table Cleanup","text":"<p>Remove old archive tables: <pre><code># Remove yearly archive tables\nwheels dbmigrate remove table name=orders_archive_2020\nwheels dbmigrate remove table name=orders_archive_2021\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#safety-considerations","title":"Safety Considerations","text":""},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#data-loss-warning","title":"Data Loss Warning","text":"<p>CRITICAL: Dropping a table permanently deletes all data. Always: 1. Backup the table data before removal 2. Verify data has been migrated if needed 3. Test in development/staging first 4. Have a rollback plan</p>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#dependent-objects","title":"Dependent Objects","text":"<p>Consider objects that depend on the table: - Foreign key constraints - Views - Stored procedures - Triggers - Application code</p>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#handling-dependencies","title":"Handling Dependencies","text":"<p>Be aware of dependent objects when removing tables: - Foreign key constraints - Views that reference the table - Stored procedures using the table - Application code dependencies</p>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#best-practices","title":"Best Practices","text":""},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#1-document-removals","title":"1. Document Removals","text":"<p>Add clear documentation about why the table is being removed: <pre><code># Create descriptive migration\nwheels dbmigrate remove table name=obsolete_analytics_cache\n\n# Then edit the migration file to add detailed comments about why it's being removed\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#2-backup-data-first","title":"2. Backup Data First","text":"<p>Before removing tables, create data backups: <pre><code># First backup the data\nwheels db schema format=sql &gt; backup_before_removal.sql\n\n# Then create removal migration\nwheels dbmigrate remove table name=user_preferences\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#3-staged-removal","title":"3. Staged Removal","text":"<p>For production systems, consider staged removal: <pre><code># Stage 1: Rename table (keep for rollback)\nwheels dbmigrate create blank name=rename_orders_to_orders_deprecated\n\n# Stage 2: After verification period, remove\nwheels dbmigrate remove table name=orders_deprecated\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#4-check-dependencies","title":"4. Check Dependencies","text":"<p>Verify no active dependencies before removal: <pre><code>-- Check foreign keys\nSELECT * FROM information_schema.referential_constraints \nWHERE referenced_table_name = 'table_name';\n\n-- Check views\nSELECT * FROM information_schema.views \nWHERE table_schema = DATABASE() \nAND view_definition LIKE '%table_name%';\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#migration-structure","title":"Migration Structure","text":"<p>The generated migration contains: - An <code>up()</code> method with <code>dropTable()</code>  - An empty <code>down()</code> method for you to implement rollback logic if needed</p> <p>You should edit the <code>down()</code> method to add table recreation logic if you want the migration to be reversible.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#recovery-strategies","title":"Recovery Strategies","text":""},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#if-removal-was-mistake","title":"If Removal Was Mistake","text":"<ol> <li>Don't run the migration in production</li> <li>Use <code>wheels dbmigrate down</code> if already run</li> <li>Restore from backup if down() fails</li> </ol>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#preserving-table-structure","title":"Preserving Table Structure","text":"<p>Before removal, capture structure: <pre><code># Export entire database schema\nwheels db schema format=sql --save file=schema_backup.sql\n\n# Then remove table\nwheels dbmigrate remove table name=user_preferences\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#notes","title":"Notes","text":"<ul> <li>The command analyzes table structure before generating migration</li> <li>Foreign key constraints must be removed before table removal</li> <li>The migration is reversible if table structure is preserved</li> <li>Always review generated migration before running</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-remove-table/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels dbmigrate create table</code> - Create tables</li> <li><code>wheels dbmigrate create blank</code> - Create custom migrations</li> <li><code>wheels dbmigrate up</code> - Run migrations</li> <li><code>wheels dbmigrate down</code> - Rollback migrations</li> <li><code>wheels db schema</code> - Export table schemas</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-reset/","title":"dbmigrate reset","text":"<p>Reset all database migrations by migrating to version 0.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-reset/#synopsis","title":"Synopsis","text":"<pre><code>wheels dbmigrate reset\n</code></pre> <p>Alias: <code>wheels db reset</code></p>"},{"location":"command-line-tools/commands/database/dbmigrate-reset/#description","title":"Description","text":"<p>The <code>dbmigrate reset</code> command resets your database by migrating to version 0, effectively rolling back all executed migrations. This is useful during development when you need to start fresh.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-reset/#parameters","title":"Parameters","text":"<p>None.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-reset/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/database/dbmigrate-reset/#reset-all-migrations","title":"Reset all migrations","text":"<pre><code>wheels dbmigrate reset\n</code></pre> <p>This will migrate the database to version 0, rolling back all migrations.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-reset/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/database/dbmigrate-reset/#fresh-development-database","title":"Fresh Development Database","text":"<p>Start with a clean slate during development: <pre><code># Reset all migrations\nwheels dbmigrate reset\n\n# Re-run all migrations\nwheels dbmigrate latest\n\n# Seed with test data\nwheels db seed\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-reset/#testing-migration-sequence","title":"Testing Migration Sequence","text":"<p>Verify that all migrations run correctly from scratch: <pre><code># Reset all migrations\nwheels dbmigrate reset\n\n# Run migrations one by one to test\nwheels dbmigrate up\nwheels dbmigrate up\n# ... continue as needed\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-reset/#fixing-migration-order-issues","title":"Fixing Migration Order Issues","text":"<p>When migrations have dependency problems: <pre><code># Reset all migrations\nwheels dbmigrate reset\n\n# Manually fix migration files\n# Re-run all migrations\nwheels dbmigrate latest\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-reset/#continuous-integration-setup","title":"Continuous Integration Setup","text":"<p>Reset database for each test run: <pre><code># CI script\nwheels dbmigrate reset\nwheels dbmigrate latest\nwheels test run\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-reset/#important-warnings","title":"Important Warnings","text":""},{"location":"command-line-tools/commands/database/dbmigrate-reset/#data-loss","title":"Data Loss","text":"<p>WARNING: This command will result in complete data loss as it rolls back all migrations. Always ensure you have proper backups before running this command, especially in production environments.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-reset/#production-usage","title":"Production Usage","text":"<p>Using this command in production is strongly discouraged. If you must use it in production: 1. Take a complete database backup 2. Put the application in maintenance mode 3. Have a rollback plan ready</p>"},{"location":"command-line-tools/commands/database/dbmigrate-reset/#migration-dependencies","title":"Migration Dependencies","text":"<p>The reset process rolls back migrations in reverse chronological order. Ensure all your down() methods are properly implemented.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-reset/#best-practices","title":"Best Practices","text":"<ol> <li>Development Only: Primarily use this command in development environments</li> <li>Backup First: Always backup your database before resetting</li> <li>Test Down Methods: Ensure all migrations have working down() methods</li> <li>Document Usage: If used in production, document when and why</li> </ol>"},{"location":"command-line-tools/commands/database/dbmigrate-reset/#process-flow","title":"Process Flow","text":"<ol> <li>Displays \"Resetting Database Schema\"</li> <li>Executes <code>dbmigrate exec version=0</code></li> <li>Automatically runs <code>dbmigrate info</code> to show the reset status</li> </ol>"},{"location":"command-line-tools/commands/database/dbmigrate-reset/#notes","title":"Notes","text":"<ul> <li>The command will fail if any migration's down() method fails</li> <li>Migration files must still exist for rollback to work</li> <li>The migration tracking table itself is preserved</li> <li>Use <code>wheels dbmigrate info</code> after reset to verify status</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-reset/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels dbmigrate up</code> - Run the next migration</li> <li><code>wheels dbmigrate down</code> - Rollback last migration</li> <li><code>wheels dbmigrate latest</code> - Run all pending migrations</li> <li><code>wheels dbmigrate info</code> - View migration status</li> <li><code>wheels db seed</code> - Seed the database with data</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-up/","title":"dbmigrate up","text":"<p>Run the next pending database migration.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-up/#synopsis","title":"Synopsis","text":"<pre><code>wheels dbmigrate up\n</code></pre> <p>Alias: <code>wheels db up</code></p>"},{"location":"command-line-tools/commands/database/dbmigrate-up/#description","title":"Description","text":"<p>The <code>dbmigrate up</code> command executes the next pending migration in your database migration queue. This command is used to incrementally apply database changes one migration at a time, allowing for controlled and reversible database schema updates.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-up/#parameters","title":"Parameters","text":"<p>None.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-up/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/database/dbmigrate-up/#run-the-next-pending-migration","title":"Run the next pending migration","text":"<pre><code>wheels dbmigrate up\n</code></pre> <p>This will execute the next migration in the sequence and update the database schema version.</p>"},{"location":"command-line-tools/commands/database/dbmigrate-up/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/database/dbmigrate-up/#incremental-database-updates","title":"Incremental Database Updates","text":"<p>When you want to apply database changes one at a time rather than all at once: <pre><code># Check pending migrations\nwheels dbmigrate info\n\n# Apply next migration\nwheels dbmigrate up\n\n# Verify the change\nwheels dbmigrate info\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-up/#controlled-migration-application","title":"Controlled Migration Application","text":"<p>Apply migrations one at a time for better control: <pre><code># Check current status\nwheels dbmigrate info\n\n# Apply next migration\nwheels dbmigrate up\n\n# Verify the change was applied\nwheels dbmigrate info\n</code></pre></p>"},{"location":"command-line-tools/commands/database/dbmigrate-up/#notes","title":"Notes","text":"<ul> <li>Migrations are executed in chronological order based on their timestamps</li> <li>Each migration is tracked in the database to prevent duplicate execution</li> <li>If already at latest version, displays: \"We're all up to date already!\"</li> <li>If no more versions available, displays: \"No more versions to go to?\"</li> <li>Automatically runs <code>dbmigrate info</code> after successful migration</li> <li>Always backup your database before running migrations in production</li> </ul>"},{"location":"command-line-tools/commands/database/dbmigrate-up/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels dbmigrate down</code> - Rollback the last migration</li> <li><code>wheels dbmigrate latest</code> - Run all pending migrations</li> <li><code>wheels dbmigrate info</code> - View migration status</li> <li><code>wheels dbmigrate reset</code> - Reset all migrations</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-audit/","title":"deploy audit","text":"<p>Audit deployment configuration and security settings to ensure compliance and best practices.</p>"},{"location":"command-line-tools/commands/deploy/deploy-audit/#synopsis","title":"Synopsis","text":"<pre><code>wheels deploy audit [options]\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-audit/#description","title":"Description","text":"<p>The <code>wheels deploy audit</code> command performs a comprehensive security and configuration audit of your deployment setup. It checks for common misconfigurations, security vulnerabilities, and compliance issues in your deployment environment.</p>"},{"location":"command-line-tools/commands/deploy/deploy-audit/#options","title":"Options","text":"<ul> <li><code>--environment, -e</code> - Target environment to audit (default: production)</li> <li><code>--report-format</code> - Output format for audit report (json, html, text) (default: text)</li> <li><code>--output, -o</code> - Save audit report to file</li> <li><code>--severity</code> - Minimum severity level to report (low, medium, high, critical)</li> <li><code>--fix</code> - Attempt to automatically fix issues where possible</li> <li><code>--verbose, -v</code> - Show detailed audit information</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-audit/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/deploy/deploy-audit/#basic-audit","title":"Basic audit","text":"<pre><code>wheels deploy audit\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-audit/#audit-staging-environment","title":"Audit staging environment","text":"<pre><code>wheels deploy audit --environment staging\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-audit/#generate-html-report","title":"Generate HTML report","text":"<pre><code>wheels deploy audit --report-format html --output audit-report.html\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-audit/#show-only-high-severity-issues","title":"Show only high severity issues","text":"<pre><code>wheels deploy audit --severity high\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-audit/#auto-fix-issues","title":"Auto-fix issues","text":"<pre><code>wheels deploy audit --fix\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-audit/#audit-checks","title":"Audit Checks","text":"<p>The command performs the following audit checks:</p>"},{"location":"command-line-tools/commands/deploy/deploy-audit/#security","title":"Security","text":"<ul> <li>SSL/TLS configuration</li> <li>Exposed sensitive files</li> <li>Default credentials</li> <li>Authentication mechanisms</li> <li>Authorization settings</li> <li>Input validation</li> <li>Session management</li> <li>Error handling</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-audit/#configuration","title":"Configuration","text":"<ul> <li>Environment variables</li> <li>Database connections</li> <li>API endpoints</li> <li>File permissions</li> <li>Resource limits</li> <li>Logging configuration</li> <li>Backup settings</li> <li>Monitoring setup</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-audit/#compliance","title":"Compliance","text":"<ul> <li>Data protection requirements</li> <li>Access control policies</li> <li>Audit trail completeness</li> <li>Retention policies</li> <li>Encryption standards</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-audit/#output","title":"Output","text":"<p>The audit generates a detailed report including:</p> <ul> <li>Summary of findings</li> <li>Issue severity levels</li> <li>Affected components</li> <li>Remediation recommendations</li> <li>Compliance status</li> <li>Performance metrics</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-audit/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/deploy/deploy-audit/#pre-deployment-audit","title":"Pre-deployment audit","text":"<pre><code># Run comprehensive audit before deploying\nwheels deploy audit --severity low\nwheels deploy push --if-audit-passes\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-audit/#scheduled-audits","title":"Scheduled audits","text":"<pre><code># Run regular audits in CI/CD\nwheels deploy audit --output reports/audit-$(date +%Y%m%d).json\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-audit/#compliance-reporting","title":"Compliance reporting","text":"<pre><code># Generate compliance report\nwheels deploy audit --report-format html --output compliance.html\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-audit/#best-practices","title":"Best Practices","text":"<ol> <li>Regular audits: Run audits regularly, not just before deployments</li> <li>Fix critical issues: Always address critical and high severity issues</li> <li>Document exceptions: Keep records of accepted risks and exceptions</li> <li>Automate checks: Integrate audits into your CI/CD pipeline</li> <li>Review reports: Have security team review audit reports</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-audit/#integration","title":"Integration","text":"<p>The audit command integrates with:</p> <ul> <li>CI/CD pipelines for automated security checks</li> <li>Monitoring systems for continuous compliance</li> <li>Issue tracking systems for remediation workflow</li> <li>Reporting tools for compliance documentation</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-audit/#see-also","title":"See Also","text":"<ul> <li>deploy status - Check deployment status</li> <li>security scan - Run security scans</li> <li>deploy setup - Setup deployment environment</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-exec/","title":"wheels deploy exec","text":"<p>Execute commands in deployed containers.</p>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#synopsis","title":"Synopsis","text":"<pre><code>wheels deploy:exec &lt;command&gt; [options]\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#description","title":"Description","text":"<p>The <code>wheels deploy:exec</code> command allows you to execute commands inside deployed Docker containers on your servers. This is useful for running administrative tasks, debugging, or accessing services directly.</p>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#arguments","title":"Arguments","text":"<ul> <li><code>command</code> - Command to execute in container (required)</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#options","title":"Options","text":"<ul> <li><code>servers=&lt;string&gt;</code> - Execute on specific servers (comma-separated list)</li> <li><code>service=&lt;string&gt;</code> - Service to execute in: app or db (default: app)</li> <li><code>--interactive</code> - Run command interactively (default: false)</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/deploy/deploy-exec/#list-files-in-application-container","title":"List files in application container","text":"<pre><code>wheels deploy:exec \"ls -la\"\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#run-database-migrations","title":"Run database migrations","text":"<pre><code>wheels deploy:exec \"box run-script migrate\"\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#access-commandbox-repl-interactively","title":"Access CommandBox REPL interactively","text":"<pre><code>wheels deploy:exec \"box repl\" --interactive\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#execute-mysql-commands-in-database-container","title":"Execute MySQL commands in database container","text":"<pre><code>wheels deploy:exec \"mysql -u root -p\" service=db --interactive\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#check-application-logs","title":"Check application logs","text":"<pre><code>wheels deploy:exec \"tail -f logs/application.log\"\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#execute-on-specific-server","title":"Execute on specific server","text":"<pre><code>wheels deploy:exec \"df -h\" servers=web1.example.com\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#how-it-works","title":"How It Works","text":"<p>The command: 1. Connects to target servers via SSH 2. Determines the container name based on service 3. Executes the command using <code>docker exec</code> 4. Returns the output or provides interactive access</p>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#service-selection","title":"Service Selection","text":""},{"location":"command-line-tools/commands/deploy/deploy-exec/#application-container-default","title":"Application Container (default)","text":"<pre><code># Executes in the main application container\nwheels deploy:exec \"ls -la\"\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#database-container","title":"Database Container","text":"<pre><code># Executes in the database container\nwheels deploy:exec \"mysql -u root -p\" service=db --interactive\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#interactive-vs-non-interactive","title":"Interactive vs Non-Interactive","text":""},{"location":"command-line-tools/commands/deploy/deploy-exec/#non-interactive-default","title":"Non-Interactive (default)","text":"<ul> <li>Command runs and returns output</li> <li>Suitable for simple commands</li> <li>Output is captured and displayed</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#interactive-mode","title":"Interactive Mode","text":"<ul> <li>Provides terminal access</li> <li>Required for commands needing input</li> <li>Useful for REPL, database shells, etc.</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#output-example","title":"Output Example","text":""},{"location":"command-line-tools/commands/deploy/deploy-exec/#non-interactive-command","title":"Non-interactive command","text":"<pre><code>Wheels Deploy Remote Execution\n==================================================\nExecuting: ls -la\nContainer: myapp\n\ntotal 24\ndrwxr-xr-x 1 root root 4096 Jan 15 14:30 .\ndrwxr-xr-x 1 root root 4096 Jan 15 14:30 ..\ndrwxr-xr-x 1 root root 4096 Jan 15 14:30 app\ndrwxr-xr-x 1 root root 4096 Jan 15 14:30 config\n-rw-r--r-- 1 root root  512 Jan 15 14:30 box.json\n-rw-r--r-- 1 root root  256 Jan 15 14:30 server.json\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#multiple-servers","title":"Multiple servers","text":"<pre><code>Wheels Deploy Remote Execution\n==================================================\nExecuting: uptime\nContainer: myapp\n\nServer: web1.example.com\n------------------------------\n 14:35:22 up 45 days,  3:21,  0 users,  load average: 0.15, 0.12, 0.18\n\nServer: web2.example.com\n------------------------------\n 14:35:23 up 32 days,  7:45,  0 users,  load average: 0.23, 0.19, 0.21\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#common-use-cases","title":"Common Use Cases","text":""},{"location":"command-line-tools/commands/deploy/deploy-exec/#administrative-tasks","title":"Administrative Tasks","text":"<pre><code># Clear application cache\nwheels deploy:exec \"box run-script clearCache\"\n\n# Run scheduled tasks\nwheels deploy:exec \"box task run maintenance\"\n\n# Check disk usage\nwheels deploy:exec \"df -h /app\"\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#database-operations","title":"Database Operations","text":"<pre><code># MySQL backup\nwheels deploy:exec \"mysqldump -u root myapp &gt; /backup/myapp.sql\" service=db\n\n# PostgreSQL vacuum\nwheels deploy:exec \"psql -U postgres -c 'VACUUM ANALYZE;'\" service=db\n\n# Check database size\nwheels deploy:exec \"mysql -u root -e 'SELECT table_schema, SUM(data_length + index_length) / 1024 / 1024 AS size_mb FROM information_schema.tables GROUP BY table_schema;'\" service=db\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#debugging","title":"Debugging","text":"<pre><code># View application logs\nwheels deploy:exec \"tail -n 100 /app/logs/application.log\"\n\n# Check running processes\nwheels deploy:exec \"ps aux\"\n\n# Monitor resource usage\nwheels deploy:exec \"top -b -n 1\"\n\n# Check environment variables\nwheels deploy:exec \"env | grep WHEELS\"\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#file-management","title":"File Management","text":"<pre><code># Create backup\nwheels deploy:exec \"tar -czf /tmp/backup.tar.gz /app/uploads\"\n\n# Check file permissions\nwheels deploy:exec \"ls -la /config\"\n\n# Remove old logs\nwheels deploy:exec \"find /app/logs -name '*.log' -mtime +30 -delete\"\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#security-considerations","title":"Security Considerations","text":"<ol> <li>Command Injection: Commands are passed directly to the shell</li> <li>Permissions: Runs with container user permissions</li> <li>Sensitive Data: Be careful with commands that expose secrets</li> <li>Audit Trail: Commands are not logged by default</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#limitations","title":"Limitations","text":"<ul> <li>Cannot execute commands requiring GUI</li> <li>Interactive mode requires TTY support</li> <li>Output limited by SSH buffer size</li> <li>No automatic error handling</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#best-practices","title":"Best Practices","text":"<ol> <li>Quote Complex Commands: Use quotes for commands with special characters</li> <li>Test First: Test commands locally before running in production</li> <li>Use Service Parameter: Specify service explicitly for clarity</li> <li>Avoid Sensitive Output: Redirect sensitive data to files</li> <li>Check Exit Codes: Verify command success in scripts</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/deploy/deploy-exec/#container-not-found","title":"Container Not Found","text":"<ul> <li>Verify deployment is active</li> <li>Check container name matches service name</li> <li>Ensure Docker is running</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#permission-denied","title":"Permission Denied","text":"<ul> <li>Check SSH user has Docker access</li> <li>Verify container user permissions</li> <li>Use sudo if necessary (configure in deploy.json)</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#command-not-found","title":"Command Not Found","text":"<ul> <li>Ensure command exists in container</li> <li>Check PATH environment variable</li> <li>Use full path to executables</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#interactive-mode-issues","title":"Interactive Mode Issues","text":"<ul> <li>Ensure terminal supports TTY</li> <li>Use SSH directly for complex interactions</li> <li>Check SSH client configuration</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-exec/#see-also","title":"See Also","text":"<ul> <li>wheels deploy:status - Check deployment status</li> <li>wheels deploy:logs - View deployment logs</li> <li>wheels deploy:push - Deploy application</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/","title":"deploy hooks","text":"<p>Manage deployment hooks for custom actions during the deployment lifecycle.</p>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#synopsis","title":"Synopsis","text":"<pre><code>wheels deploy hooks &lt;action&gt; [hook-name] [options]\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#description","title":"Description","text":"<p>The <code>wheels deploy hooks</code> command allows you to manage custom hooks that execute at specific points during the deployment process. These hooks enable you to run custom scripts, notifications, or integrations at key deployment stages.</p>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#actions","title":"Actions","text":"<ul> <li><code>list</code> - List all configured deployment hooks</li> <li><code>add</code> - Add a new deployment hook</li> <li><code>remove</code> - Remove an existing hook</li> <li><code>enable</code> - Enable a disabled hook</li> <li><code>disable</code> - Disable a hook without removing it</li> <li><code>test</code> - Test a hook execution</li> <li><code>show</code> - Show details about a specific hook</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#options","title":"Options","text":"<ul> <li><code>--stage</code> - Deployment stage (pre-deploy, post-deploy, rollback, error)</li> <li><code>--script</code> - Path to hook script or command</li> <li><code>--timeout</code> - Hook execution timeout in seconds (default: 300)</li> <li><code>--retry</code> - Number of retry attempts on failure (default: 0)</li> <li><code>--async</code> - Run hook asynchronously</li> <li><code>--environment, -e</code> - Target environment (default: all)</li> <li><code>--priority</code> - Hook execution priority (1-100, lower runs first)</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#hook-stages","title":"Hook Stages","text":""},{"location":"command-line-tools/commands/deploy/deploy-hooks/#pre-deploy","title":"pre-deploy","text":"<p>Executed before deployment starts: - Backup creation - Service notifications - Resource validation - Custom checks</p>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#post-deploy","title":"post-deploy","text":"<p>Executed after successful deployment: - Cache warming - Health checks - Monitoring updates - Success notifications</p>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#rollback","title":"rollback","text":"<p>Executed during rollback operations: - Cleanup tasks - State restoration - Failure notifications - Recovery actions</p>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#error","title":"error","text":"<p>Executed when deployment fails: - Error logging - Alert notifications - Cleanup operations - Incident creation</p>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/deploy/deploy-hooks/#list-all-hooks","title":"List all hooks","text":"<pre><code>wheels deploy hooks list\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#add-a-pre-deploy-hook","title":"Add a pre-deploy hook","text":"<pre><code>wheels deploy hooks add backup-database \\\n  --stage pre-deploy \\\n  --script ./scripts/backup-db.sh \\\n  --timeout 600\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#add-notification-hook","title":"Add notification hook","text":"<pre><code>wheels deploy hooks add slack-notify \\\n  --stage post-deploy \\\n  --script \"curl -X POST https://hooks.slack.com/services/...\" \\\n  --async\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#test-a-hook","title":"Test a hook","text":"<pre><code>wheels deploy hooks test backup-database\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#disable-a-hook-temporarily","title":"Disable a hook temporarily","text":"<pre><code>wheels deploy hooks disable backup-database\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#show-hook-details","title":"Show hook details","text":"<pre><code>wheels deploy hooks show slack-notify\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#hook-script-requirements","title":"Hook Script Requirements","text":"<p>Hook scripts should: - Return exit code 0 for success - Return non-zero exit code for failure - Output status messages to stdout - Output errors to stderr - Handle timeouts gracefully</p>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#example-hook-script","title":"Example hook script","text":"<pre><code>#!/bin/bash\n# pre-deploy-backup.sh\n\necho \"Starting database backup...\"\npg_dump myapp &gt; backup-$(date +%Y%m%d-%H%M%S).sql\n\nif [ $? -eq 0 ]; then\n    echo \"Backup completed successfully\"\n    exit 0\nelse\n    echo \"Backup failed\" &gt;&amp;2\n    exit 1\nfi\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#environment-variables","title":"Environment Variables","text":"<p>Hooks receive these environment variables: - <code>DEPLOY_STAGE</code> - Current deployment stage - <code>DEPLOY_ENVIRONMENT</code> - Target environment - <code>DEPLOY_VERSION</code> - Version being deployed - <code>DEPLOY_USER</code> - User initiating deployment - <code>DEPLOY_TIMESTAMP</code> - Deployment start time</p>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/deploy/deploy-hooks/#database-backup-hook","title":"Database backup hook","text":"<pre><code>wheels deploy hooks add db-backup \\\n  --stage pre-deploy \\\n  --script ./hooks/backup-database.sh \\\n  --timeout 1800\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#notification-hooks","title":"Notification hooks","text":"<pre><code># Slack notification\nwheels deploy hooks add notify-slack \\\n  --stage post-deploy \\\n  --script ./hooks/notify-slack.sh \\\n  --async\n\n# Email notification\nwheels deploy hooks add notify-email \\\n  --stage error \\\n  --script ./hooks/send-error-email.sh\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#health-check-hook","title":"Health check hook","text":"<pre><code>wheels deploy hooks add health-check \\\n  --stage post-deploy \\\n  --script ./hooks/verify-health.sh \\\n  --retry 3\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#best-practices","title":"Best Practices","text":"<ol> <li>Keep hooks simple: Each hook should do one thing well</li> <li>Handle failures: Always include error handling in hook scripts</li> <li>Set timeouts: Prevent hooks from blocking deployments</li> <li>Test thoroughly: Test hooks in staging before production</li> <li>Log output: Ensure hooks provide clear logging</li> <li>Use priorities: Order hooks appropriately with priorities</li> <li>Document hooks: Maintain documentation for all hooks</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-hooks/#see-also","title":"See Also","text":"<ul> <li>deploy exec - Execute deployment</li> <li>deploy rollback - Rollback deployment</li> <li>deploy logs - View deployment logs</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-init/","title":"wheels deploy init","text":"<p>Initialize deployment configuration for your Wheels application.</p>"},{"location":"command-line-tools/commands/deploy/deploy-init/#synopsis","title":"Synopsis","text":"<pre><code>wheels deploy:init [options]\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-init/#description","title":"Description","text":"<p>The <code>wheels deploy:init</code> command creates a deployment configuration file (<code>deploy.json</code>), generates a Dockerfile, and sets up environment templates for deploying your Wheels application using Docker and container orchestration.</p>"},{"location":"command-line-tools/commands/deploy/deploy-init/#options","title":"Options","text":"<ul> <li><code>provider=&lt;string&gt;</code> - Cloud provider: digitalocean, aws, linode, custom (default: custom)</li> <li><code>servers=&lt;string&gt;</code> - Comma-separated list of server IPs for custom provider</li> <li><code>domain=&lt;string&gt;</code> - Primary domain for the application</li> <li><code>app-name=&lt;string&gt;</code> - Application name for deployment</li> <li><code>db=&lt;string&gt;</code> - Database type: mysql, postgres, mssql (default: mysql)</li> <li><code>cfengine=&lt;string&gt;</code> - CF engine: lucee, adobe (default: lucee)</li> <li><code>environment=&lt;string&gt;</code> - Environment name (creates deploy.{environment}.json)</li> <li><code>--force</code> - Overwrite existing deploy.json (default: false)</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-init/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/deploy/deploy-init/#interactive-initialization","title":"Interactive initialization","text":"<pre><code>wheels deploy:init\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-init/#initialize-with-custom-servers","title":"Initialize with custom servers","text":"<pre><code>wheels deploy:init provider=custom servers=192.168.1.100,192.168.1.101 domain=myapp.com\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-init/#initialize-for-digitalocean","title":"Initialize for DigitalOcean","text":"<pre><code>wheels deploy:init provider=digitalocean domain=myapp.com app-name=myapp\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-init/#initialize-with-postgresql-and-adobe-coldfusion","title":"Initialize with PostgreSQL and Adobe ColdFusion","text":"<pre><code>wheels deploy:init db=postgres cfengine=adobe domain=myapp.com\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-init/#initialize-for-staging-environment","title":"Initialize for staging environment","text":"<pre><code>wheels deploy:init environment=staging servers=staging.example.com\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-init/#force-overwrite-existing-configuration","title":"Force overwrite existing configuration","text":"<pre><code>wheels deploy:init --force domain=myapp.com\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-init/#what-it-does","title":"What It Does","text":"<p>The init command creates three key files:</p> <ol> <li>deploy.json (or deploy.{environment}.json):</li> <li>Docker registry configuration</li> <li>Server list and SSH settings</li> <li>Environment variables</li> <li>Health check configuration</li> <li> <p>Database and Traefik settings</p> </li> <li> <p>Dockerfile:</p> </li> <li>Base image for your CF engine (Lucee/Adobe)</li> <li>Application dependencies</li> <li>CommandBox installation</li> <li> <p>Port configuration</p> </li> <li> <p>.env.deploy:</p> </li> <li>Environment variable template</li> <li>Database credentials placeholder</li> <li>Generated secret key</li> <li>Production settings</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-init/#generated-deployjson-structure","title":"Generated deploy.json Structure","text":"<pre><code>{\n  \"service\": \"myapp\",\n  \"image\": \"myapp\",\n  \"servers\": {\n    \"web\": [\"192.168.1.100\", \"192.168.1.101\"]\n  },\n  \"registry\": {\n    \"server\": \"ghcr.io\",\n    \"username\": \"your-github-username\"\n  },\n  \"env\": {\n    \"clear\": {\n      \"CFENGINE\": \"lucee\",\n      \"DB_TYPE\": \"mysql\",\n      \"WHEELS_ENV\": \"production\"\n    },\n    \"secret\": [\n      \"DB_PASSWORD\",\n      \"WHEELS_RELOAD_PASSWORD\",\n      \"SECRET_KEY_BASE\"\n    ]\n  },\n  \"ssh\": {\n    \"user\": \"root\"\n  },\n  \"builder\": {\n    \"multiarch\": false\n  },\n  \"healthcheck\": {\n    \"path\": \"/\",\n    \"port\": 3000,\n    \"interval\": 30\n  },\n  \"accessories\": {\n    \"db\": {\n      \"image\": \"mysql:8\",\n      \"host\": \"db\",\n      \"port\": 3306,\n      \"env\": {\n        \"clear\": {},\n        \"secret\": []\n      },\n      \"volumes\": [\n        \"/var/lib/mysql:/var/lib/mysql\"\n      ]\n    }\n  },\n  \"traefik\": {\n    \"enabled\": true,\n    \"options\": {\n      \"publish\": [\"443:443\"],\n      \"volume\": []\n    },\n    \"args\": {\n      \"entryPoints.web.address\": \":80\",\n      \"entryPoints.websecure.address\": \":443\",\n      \"certificatesresolvers.letsencrypt.acme.email\": \"admin@myapp.com\"\n    },\n    \"labels\": {\n      \"traefik.http.routers.myapp.rule\": \"Host(`myapp.com`)\",\n      \"traefik.http.routers.myapp.entrypoints\": \"websecure\",\n      \"traefik.http.routers.myapp.tls.certresolver\": \"letsencrypt\"\n    }\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-init/#generated-dockerfile","title":"Generated Dockerfile","text":""},{"location":"command-line-tools/commands/deploy/deploy-init/#for-lucee","title":"For Lucee","text":"<pre><code>FROM lucee/lucee:5.4\n\n# Install additional dependencies\nRUN apt-get update &amp;&amp; apt-get install -y \\\n    curl \\\n    git \\\n    &amp;&amp; rm -rf /var/lib/apt/lists/*\n\n# Set working directory\nWORKDIR /var/www\n\n# Copy application files\nCOPY . /var/www/\n\n# Install CommandBox for dependency management\nRUN curl -fsSl https://downloads.ortussolutions.com/debs/gpg | apt-key add -\nRUN echo \"deb https://downloads.ortussolutions.com/debs/noarch /\" | tee -a /etc/apt/sources.list.d/commandbox.list\nRUN apt-get update &amp;&amp; apt-get install -y commandbox\n\n# Install dependencies\nRUN box install\n\n# Configure Lucee\nCOPY deploy/lucee-config.xml /opt/lucee/web/lucee-web.xml.cfm\n\n# Expose port\nEXPOSE 3000\n\n# Start command\nCMD [\"box\", \"server\", \"start\", \"--console\", \"--force\", \"port=3000\"]\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-init/#for-adobe-coldfusion","title":"For Adobe ColdFusion","text":"<pre><code>FROM adobecoldfusion/coldfusion:latest\n\n# Set working directory\nWORKDIR /app\n\n# Copy application files\nCOPY . /app/\n\n# Install CommandBox\nRUN curl -fsSl https://www.ortussolutions.com/parent/download/commandbox/type/bin -o /tmp/box &amp;&amp; \\\n    chmod +x /tmp/box &amp;&amp; \\\n    mv /tmp/box /usr/local/bin/box\n\n# Install dependencies\nRUN box install\n\n# Expose port\nEXPOSE 3000\n\n# Start command\nCMD [\"box\", \"server\", \"start\", \"--console\", \"--force\", \"cfengine=adobe2023\", \"port=3000\"]\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-init/#generated-envdeploy-template","title":"Generated .env.deploy Template","text":"<pre><code># Production Environment Variables\nDB_HOST=db\nDB_PORT=3306\nDB_NAME=myapp_production\nDB_USERNAME=myapp_user\nDB_PASSWORD=change_me_to_secure_password\n\nWHEELS_ENV=production\nWHEELS_RELOAD_PASSWORD=change_me_to_secure_password\nSECRET_KEY_BASE=&lt;64-character-generated-key&gt;\n\n# Additional configuration\nAPP_URL=https://myapp.com\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-init/#database-configuration","title":"Database Configuration","text":"<p>The command configures database accessories based on your selection:</p>"},{"location":"command-line-tools/commands/deploy/deploy-init/#mysql","title":"MySQL","text":"<ul> <li>Image: mysql:8</li> <li>Port: 3306</li> <li>Volume: /var/lib/mysql</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-init/#postgresql","title":"PostgreSQL","text":"<ul> <li>Image: postgres:15</li> <li>Port: 5432</li> <li>Volume: /var/lib/postgresql</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-init/#sql-server","title":"SQL Server","text":"<ul> <li>Image: mcr.microsoft.com/mssql/server:2022-latest</li> <li>Port: 1433</li> <li>Volume: /var/lib/mssql</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-init/#traefik-configuration","title":"Traefik Configuration","text":"<p>Automatic HTTPS with Let's Encrypt: - HTTP to HTTPS redirection - Automatic SSL certificate generation - Domain-based routing - WebSocket support</p>"},{"location":"command-line-tools/commands/deploy/deploy-init/#interactive-mode","title":"Interactive Mode","text":"<p>When parameters are not provided, the command prompts for: - Application name (reads from server.json if available) - Primary domain - Server IPs (for custom provider)</p>"},{"location":"command-line-tools/commands/deploy/deploy-init/#next-steps","title":"Next Steps","text":"<p>After running init: 1. Review and update <code>deploy.json</code> with your settings 2. Update <code>.env.deploy</code> with production credentials 3. Configure registry access (GitHub, Docker Hub, etc.) 4. Set up SSH access to your servers 5. Run <code>wheels deploy:setup</code> to provision servers 6. Run <code>wheels deploy:push</code> to deploy</p>"},{"location":"command-line-tools/commands/deploy/deploy-init/#best-practices","title":"Best Practices","text":"<ol> <li>Use environment-specific configs: Create separate configs for staging/production</li> <li>Secure credentials: Never commit <code>.env.deploy</code> to version control</li> <li>Test locally first: Build and run Docker image locally</li> <li>Use SSH keys: Configure passwordless SSH access</li> <li>Configure health checks: Ensure your app has a working health endpoint</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-init/#security-notes","title":"Security Notes","text":"<ul> <li>Generated secret keys are cryptographically random</li> <li>Passwords in <code>.env.deploy</code> must be changed before deployment</li> <li>Use secrets management for production credentials</li> <li>Configure firewall rules on target servers</li> <li>Use read-only filesystem where possible</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-init/#see-also","title":"See Also","text":"<ul> <li>wheels deploy:setup - Setup deployment environment</li> <li>wheels deploy:push - Deploy application</li> <li>wheels deploy:secrets - Manage deployment secrets</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-lock/","title":"deploy lock","text":"<p>Lock deployment state to prevent concurrent deployments and maintain deployment integrity.</p>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#synopsis","title":"Synopsis","text":"<pre><code>wheels deploy lock &lt;action&gt; [options]\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#description","title":"Description","text":"<p>The <code>wheels deploy lock</code> command manages deployment locks to prevent concurrent deployments, ensure deployment atomicity, and maintain system stability during critical operations. This is essential for coordinating deployments in team environments and automated systems.</p>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#actions","title":"Actions","text":"<ul> <li><code>acquire</code> - Acquire a deployment lock</li> <li><code>release</code> - Release an existing lock</li> <li><code>status</code> - Check current lock status</li> <li><code>force-release</code> - Force release a stuck lock (use with caution)</li> <li><code>list</code> - List all active locks</li> <li><code>wait</code> - Wait for lock to become available</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#options","title":"Options","text":"<ul> <li><code>--environment, -e</code> - Target environment to lock (default: production)</li> <li><code>--reason</code> - Reason for acquiring lock (required for acquire)</li> <li><code>--duration</code> - Lock duration in minutes (default: 30)</li> <li><code>--wait-timeout</code> - Maximum time to wait for lock in seconds</li> <li><code>--force</code> - Force acquire lock even if already locked</li> <li><code>--owner</code> - Lock owner identifier (default: current user)</li> <li><code>--metadata</code> - Additional lock metadata as JSON</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/deploy/deploy-lock/#acquire-deployment-lock","title":"Acquire deployment lock","text":"<pre><code>wheels deploy lock acquire --reason \"Deploying version 2.1.0\"\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#check-lock-status","title":"Check lock status","text":"<pre><code>wheels deploy lock status\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#release-lock","title":"Release lock","text":"<pre><code>wheels deploy lock release\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#wait-for-lock-availability","title":"Wait for lock availability","text":"<pre><code>wheels deploy lock wait --wait-timeout 300\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#force-release-stuck-lock","title":"Force release stuck lock","text":"<pre><code>wheels deploy lock force-release --reason \"Previous deployment crashed\"\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#list-all-locks","title":"List all locks","text":"<pre><code>wheels deploy lock list\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#lock-information","title":"Lock Information","text":"<p>Locks contain the following information: - Lock ID - Environment - Owner (user/system) - Acquisition time - Expiration time - Reason - Associated deployment ID - Metadata</p>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#lock-types","title":"Lock Types","text":""},{"location":"command-line-tools/commands/deploy/deploy-lock/#manual-locks","title":"Manual locks","text":"<p>User-initiated locks for maintenance or manual deployments: <pre><code>wheels deploy lock acquire --reason \"Database maintenance\" --duration 60\n</code></pre></p>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#automatic-locks","title":"Automatic locks","text":"<p>System-acquired locks during automated deployments: <pre><code># Automatically acquired during deployment\nwheels deploy exec\n</code></pre></p>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#emergency-locks","title":"Emergency locks","text":"<p>High-priority locks for critical operations: <pre><code>wheels deploy lock acquire --force --reason \"Emergency hotfix\"\n</code></pre></p>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/deploy/deploy-lock/#maintenance-window","title":"Maintenance window","text":"<pre><code># Lock environment for maintenance\nwheels deploy lock acquire \\\n  --reason \"Scheduled maintenance\" \\\n  --duration 120 \\\n  --metadata '{\"ticket\": \"MAINT-123\"}'\n\n# Perform maintenance...\n\n# Release when done\nwheels deploy lock release\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#coordinated-deployment","title":"Coordinated deployment","text":"<pre><code># Wait for lock and deploy\nwheels deploy lock wait --wait-timeout 600\nwheels deploy exec --auto-lock\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#cicd-integration","title":"CI/CD integration","text":"<pre><code># In CI/CD pipeline\nif wheels deploy lock acquire --reason \"CI/CD Deploy #${BUILD_ID}\"; then\n    wheels deploy exec\n    wheels deploy lock release\nelse\n    echo \"Could not acquire lock\"\n    exit 1\nfi\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#lock-states","title":"Lock States","text":""},{"location":"command-line-tools/commands/deploy/deploy-lock/#available","title":"Available","text":"<p>No active lock, deployments can proceed</p>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#locked","title":"Locked","text":"<p>Active lock in place, deployments blocked</p>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#expired","title":"Expired","text":"<p>Lock duration exceeded, can be cleaned up</p>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#force-locked","title":"Force-locked","text":"<p>Emergency lock overriding normal locks</p>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#best-practices","title":"Best Practices","text":"<ol> <li>Always provide reasons: Clear reasons help team coordination</li> <li>Set appropriate durations: Don't lock longer than necessary</li> <li>Release locks promptly: Release as soon as operation completes</li> <li>Handle lock failures: Plan for scenarios when locks can't be acquired</li> <li>Monitor stuck locks: Set up alerts for long-running locks</li> <li>Use force sparingly: Only force-release when absolutely necessary</li> <li>Document lock usage: Keep records of lock operations</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#error-handling","title":"Error Handling","text":"<p>Common lock errors and solutions:</p>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#lock-already-exists","title":"Lock already exists","text":"<pre><code># Check who owns the lock\nwheels deploy lock status\n\n# Wait for it to be released\nwheels deploy lock wait\n\n# Or coordinate with lock owner\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#lock-expired-during-operation","title":"Lock expired during operation","text":"<pre><code># Extend lock duration if still needed\nwheels deploy lock acquire --extend\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#cannot-release-lock","title":"Cannot release lock","text":"<pre><code># Verify you own the lock\nwheels deploy lock status --verbose\n\n# Force release if necessary\nwheels deploy lock force-release --reason \"Lock owner unavailable\"\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#integration","title":"Integration","text":"<p>The lock system integrates with: - CI/CD pipelines for automated deployments - Monitoring systems for lock alerts - Deployment tools for automatic locking - Team communication tools for notifications</p>"},{"location":"command-line-tools/commands/deploy/deploy-lock/#see-also","title":"See Also","text":"<ul> <li>deploy exec - Execute deployment</li> <li>deploy status - Check deployment status</li> <li>deploy rollback - Rollback deployment</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-logs/","title":"deploy logs","text":"<p>View deployment logs from servers.</p>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#synopsis","title":"Synopsis","text":"<pre><code>wheels deploy:logs [options]\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#description","title":"Description","text":"<p>The <code>wheels deploy:logs</code> command allows you to view Docker container logs from your deployed application and database containers. This is essential for troubleshooting issues, monitoring application behavior, and debugging production problems.</p>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#options","title":"Options","text":"<ul> <li><code>servers=&lt;string&gt;</code> - Specific servers to check (comma-separated list)</li> <li><code>tail=&lt;number&gt;</code> - Number of lines to show (default: 100)</li> <li><code>--follow</code> - Follow log output in real-time (default: false)</li> <li><code>service=&lt;string&gt;</code> - Service to show logs for: app or db (default: app)</li> <li><code>since=&lt;string&gt;</code> - Show logs since timestamp (e.g., \"2023-01-01\", \"1h\", \"5m\")</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/deploy/deploy-logs/#view-recent-application-logs","title":"View recent application logs","text":"<pre><code>wheels deploy:logs\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#follow-logs-in-real-time","title":"Follow logs in real-time","text":"<pre><code>wheels deploy:logs --follow\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#view-last-50-lines-from-specific-server","title":"View last 50 lines from specific server","text":"<pre><code>wheels deploy:logs tail=50 servers=web1.example.com\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#view-database-logs","title":"View database logs","text":"<pre><code>wheels deploy:logs service=db\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#view-logs-from-the-last-hour","title":"View logs from the last hour","text":"<pre><code>wheels deploy:logs since=1h\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#follow-database-logs-from-specific-server","title":"Follow database logs from specific server","text":"<pre><code>wheels deploy:logs service=db --follow servers=web2.example.com\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#view-logs-since-specific-date","title":"View logs since specific date","text":"<pre><code>wheels deploy:logs since=2024-01-15\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#how-it-works","title":"How It Works","text":"<p>The command: 1. Connects to target servers via SSH 2. Executes <code>docker logs</code> on the specified container 3. Streams or displays the output based on options 4. Supports multiple servers with clear separation</p>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#output-example","title":"Output Example","text":""},{"location":"command-line-tools/commands/deploy/deploy-logs/#single-server-logs","title":"Single server logs","text":"<pre><code>Wheels Deployment Logs\n==================================================\n\n[2024-01-15 14:30:00] INFO: Server started on port 3000\n[2024-01-15 14:30:01] INFO: Database connection established\n[2024-01-15 14:30:02] INFO: Wheels application initialized\n[2024-01-15 14:35:00] INFO: Request processed: GET /\n[2024-01-15 14:40:00] WARN: Slow query detected (1.2s)\n[2024-01-15 14:45:00] ERROR: Failed to send email: SMTP connection refused\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#multiple-servers","title":"Multiple servers","text":"<pre><code>Wheels Deployment Logs\n==================================================\n\n=== Server: web1.example.com ===\n\n[2024-01-15 14:30:00] INFO: Server started on port 3000\n[2024-01-15 14:35:00] INFO: Health check passed\n\n=== Server: web2.example.com ===\n\n[2024-01-15 14:30:05] INFO: Server started on port 3000\n[2024-01-15 14:35:05] INFO: Health check passed\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/deploy/deploy-logs/#real-time-monitoring","title":"Real-time monitoring","text":"<pre><code># Monitor application logs\nwheels deploy:logs --follow\n\n# Monitor database logs\nwheels deploy:logs service=db --follow\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#troubleshooting-errors","title":"Troubleshooting errors","text":"<pre><code># View recent errors (combine with grep)\nwheels deploy:logs tail=500 | grep ERROR\n\n# Check specific time period\nwheels deploy:logs since=30m | grep -i error\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#database-debugging","title":"Database debugging","text":"<pre><code># View database startup logs\nwheels deploy:logs service=db tail=200\n\n# Monitor database queries\nwheels deploy:logs service=db --follow | grep Query\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#performance-analysis","title":"Performance analysis","text":"<pre><code># Find slow queries\nwheels deploy:logs service=db since=1h | grep \"Slow query\"\n\n# Check request processing times\nwheels deploy:logs since=1h | grep \"Request processed\"\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#time-formats","title":"Time Formats","text":"<p>The <code>since</code> parameter accepts various formats: - Relative: <code>5m</code>, <code>2h</code>, <code>1d</code>, <code>1w</code> - ISO 8601: <code>2024-01-15T14:30:00</code> - Date only: <code>2024-01-15</code> - Docker format: <code>2024-01-15T14:30:00.000000000Z</code></p>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#service-selection","title":"Service Selection","text":""},{"location":"command-line-tools/commands/deploy/deploy-logs/#application-logs-default","title":"Application logs (default)","text":"<p>Shows logs from the main application container: <pre><code>wheels deploy:logs\n</code></pre></p>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#database-logs","title":"Database logs","text":"<p>Shows logs from the database container: <pre><code>wheels deploy:logs service=db\n</code></pre></p>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#best-practices","title":"Best Practices","text":"<ol> <li>Use tail wisely: Start with reasonable line counts to avoid overwhelming output</li> <li>Follow sparingly: Use --follow only when actively monitoring</li> <li>Filter at source: Use <code>since</code> to reduce data transfer</li> <li>Combine with tools: Pipe to grep, awk, or other tools for analysis</li> <li>Monitor both services: Check both app and database logs when troubleshooting</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/deploy/deploy-logs/#container-not-found","title":"Container not found","text":"<ul> <li>Verify deployment is active with <code>wheels deploy:status</code></li> <li>Check service name matches (app or db)</li> <li>Ensure container is running</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#no-logs-appearing","title":"No logs appearing","text":"<ul> <li>Container might be new with no logs yet</li> <li>Check if logging is configured correctly</li> <li>Verify Docker logging driver settings</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#ssh-timeout","title":"SSH timeout","text":"<ul> <li>Logs might be very large</li> <li>Use <code>tail</code> parameter to limit output</li> <li>Use <code>since</code> to reduce time range</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#permission-denied","title":"Permission denied","text":"<ul> <li>Ensure SSH user has Docker access</li> <li>Check if user is in docker group</li> <li>Verify sudo permissions if needed</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#advanced-usage","title":"Advanced Usage","text":""},{"location":"command-line-tools/commands/deploy/deploy-logs/#export-logs-to-file","title":"Export logs to file","text":"<pre><code># Save logs for analysis\nwheels deploy:logs tail=1000 &gt; app-logs.txt\n\n# Save database logs\nwheels deploy:logs service=db since=1d &gt; db-logs.txt\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#continuous-monitoring-with-timestamps","title":"Continuous monitoring with timestamps","text":"<pre><code># Add timestamps if not present\nwheels deploy:logs --follow | while read line; do\n  echo \"$(date '+%Y-%m-%d %H:%M:%S') $line\"\ndone\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#log-analysis-pipeline","title":"Log analysis pipeline","text":"<pre><code># Count errors by type\nwheels deploy:logs since=1h | grep ERROR | cut -d: -f3- | sort | uniq -c | sort -nr\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#notes","title":"Notes","text":"<ul> <li>Logs are retrieved directly from Docker containers</li> <li>No log rotation or management is performed by this command</li> <li>Large log files may take time to transfer</li> <li>Follow mode requires stable SSH connection</li> <li>Container must be running to view logs</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-logs/#see-also","title":"See Also","text":"<ul> <li>wheels deploy:status - Check deployment status</li> <li>wheels deploy:exec - Execute commands in containers</li> <li>wheels deploy:push - Deploy application</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/","title":"deploy proxy","text":"<p>Configure and manage deployment proxy settings for routing traffic during deployments.</p>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#synopsis","title":"Synopsis","text":"<pre><code>wheels deploy proxy &lt;action&gt; [options]\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#description","title":"Description","text":"<p>The <code>wheels deploy proxy</code> command manages proxy configurations for zero-downtime deployments, traffic routing, and load balancing during deployment operations. It handles blue-green deployments, canary releases, and traffic splitting strategies.</p>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#actions","title":"Actions","text":"<ul> <li><code>config</code> - View or update proxy configuration</li> <li><code>route</code> - Manage traffic routing rules</li> <li><code>health</code> - Check proxy and backend health</li> <li><code>switch</code> - Switch traffic between deployments</li> <li><code>rollback</code> - Revert proxy to previous configuration</li> <li><code>status</code> - Show current proxy status</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#options","title":"Options","text":"<ul> <li><code>--environment, -e</code> - Target environment (default: production)</li> <li><code>--strategy</code> - Deployment strategy (blue-green, canary, rolling)</li> <li><code>--weight</code> - Traffic weight percentage for canary deployments</li> <li><code>--backend</code> - Backend server or service identifier</li> <li><code>--health-check</code> - Health check endpoint</li> <li><code>--timeout</code> - Proxy timeout in seconds</li> <li><code>--sticky-sessions</code> - Enable session affinity</li> <li><code>--ssl-redirect</code> - Force SSL redirect</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#deployment-strategies","title":"Deployment Strategies","text":""},{"location":"command-line-tools/commands/deploy/deploy-proxy/#blue-green-deployment","title":"Blue-Green Deployment","text":"<pre><code># Configure blue-green proxy\nwheels deploy proxy config --strategy blue-green\n\n# Switch traffic to green\nwheels deploy proxy switch --to green\n\n# Rollback to blue if needed\nwheels deploy proxy rollback\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#canary-deployment","title":"Canary Deployment","text":"<pre><code># Start canary with 10% traffic\nwheels deploy proxy route --strategy canary --weight 10\n\n# Increase to 50%\nwheels deploy proxy route --weight 50\n\n# Full deployment\nwheels deploy proxy route --weight 100\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#rolling-deployment","title":"Rolling Deployment","text":"<pre><code># Configure rolling updates\nwheels deploy proxy config --strategy rolling --batch-size 25\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/deploy/deploy-proxy/#configure-proxy-settings","title":"Configure proxy settings","text":"<pre><code>wheels deploy proxy config \\\n  --health-check /health \\\n  --timeout 30 \\\n  --ssl-redirect\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#view-proxy-status","title":"View proxy status","text":"<pre><code>wheels deploy proxy status\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#set-up-canary-deployment","title":"Set up canary deployment","text":"<pre><code># Deploy new version to canary\nwheels deploy proxy route \\\n  --strategy canary \\\n  --backend app-v2 \\\n  --weight 5\n\n# Monitor metrics...\n\n# Gradually increase traffic\nwheels deploy proxy route --weight 25\nwheels deploy proxy route --weight 50\nwheels deploy proxy route --weight 100\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#health-check-configuration","title":"Health check configuration","text":"<pre><code>wheels deploy proxy health \\\n  --health-check /api/health \\\n  --interval 10 \\\n  --timeout 5 \\\n  --retries 3\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#traffic-routing-rules","title":"Traffic Routing Rules","text":""},{"location":"command-line-tools/commands/deploy/deploy-proxy/#weight-based-routing","title":"Weight-based routing","text":"<pre><code># Split traffic 80/20\nwheels deploy proxy route \\\n  --backend app-v1 --weight 80 \\\n  --backend app-v2 --weight 20\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#header-based-routing","title":"Header-based routing","text":"<pre><code># Route beta users to new version\nwheels deploy proxy route \\\n  --rule \"header:X-Beta-User=true\" \\\n  --backend app-v2\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#geographic-routing","title":"Geographic routing","text":"<pre><code># Route by region\nwheels deploy proxy route \\\n  --rule \"geo:region=us-west\" \\\n  --backend app-us-west\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#proxy-configuration","title":"Proxy Configuration","text":""},{"location":"command-line-tools/commands/deploy/deploy-proxy/#load-balancing","title":"Load balancing","text":"<pre><code># Configure load balancing algorithm\nwheels deploy proxy config \\\n  --load-balancer round-robin \\\n  --health-check /health\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#session-affinity","title":"Session affinity","text":"<pre><code># Enable sticky sessions\nwheels deploy proxy config \\\n  --sticky-sessions \\\n  --session-cookie \"app_session\"\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#ssltls-settings","title":"SSL/TLS settings","text":"<pre><code># Configure SSL\nwheels deploy proxy config \\\n  --ssl-redirect \\\n  --ssl-protocols \"TLSv1.2,TLSv1.3\" \\\n  --ssl-ciphers \"HIGH:!aNULL\"\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/deploy/deploy-proxy/#zero-downtime-deployment","title":"Zero-downtime deployment","text":"<pre><code># Deploy new version alongside current\nwheels deploy exec --target green\n\n# Verify new deployment\nwheels deploy proxy health --backend green\n\n# Switch traffic\nwheels deploy proxy switch --to green\n\n# Remove old version\nwheels deploy stop --target blue\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#ab-testing","title":"A/B testing","text":"<pre><code># Set up A/B test\nwheels deploy proxy route \\\n  --backend feature-a --weight 50 \\\n  --backend feature-b --weight 50 \\\n  --cookie \"ab_test\"\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#gradual-rollout","title":"Gradual rollout","text":"<pre><code># Start with internal users\nwheels deploy proxy route \\\n  --rule \"ip:10.0.0.0/8\" \\\n  --backend app-v2\n\n# Expand to beta users\nwheels deploy proxy route \\\n  --rule \"header:X-Beta=true\" \\\n  --backend app-v2\n\n# Full rollout\nwheels deploy proxy switch --to app-v2\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#monitoring","title":"Monitoring","text":"<p>The proxy provides metrics for: - Request count and latency - Error rates - Backend health status - Traffic distribution - Connection pool status</p>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#view-metrics","title":"View metrics","text":"<pre><code>wheels deploy proxy status --metrics\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#export-metrics","title":"Export metrics","text":"<pre><code>wheels deploy proxy status --format prometheus &gt; metrics.txt\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#best-practices","title":"Best Practices","text":"<ol> <li>Always health check: Configure health checks for all backends</li> <li>Gradual rollouts: Start with small traffic percentages</li> <li>Monitor metrics: Watch error rates during transitions</li> <li>Test rollback: Ensure rollback procedures work</li> <li>Document rules: Keep routing rules well-documented</li> <li>Use sticky sessions carefully: They can affect load distribution</li> <li>SSL everywhere: Always use SSL in production</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/deploy/deploy-proxy/#backend-not-receiving-traffic","title":"Backend not receiving traffic","text":"<pre><code># Check health status\nwheels deploy proxy health --backend app-v2\n\n# Verify routing rules\nwheels deploy proxy status --rules\n\n# Check proxy logs\nwheels deploy logs --component proxy\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#high-error-rates","title":"High error rates","text":"<pre><code># Check backend health\nwheels deploy proxy health --all\n\n# Reduce traffic to problematic backend\nwheels deploy proxy route --backend app-v2 --weight 0\n\n# Investigate logs\nwheels deploy logs --grep \"proxy error\"\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-proxy/#see-also","title":"See Also","text":"<ul> <li>deploy exec - Execute deployment</li> <li>deploy rollback - Rollback deployment</li> <li>deploy status - Check deployment status</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-push/","title":"deploy push","text":"<p>Deploy your Wheels application to configured servers.</p>"},{"location":"command-line-tools/commands/deploy/deploy-push/#synopsis","title":"Synopsis","text":"<pre><code>wheels deploy:push [options]\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-push/#description","title":"Description","text":"<p>The <code>wheels deploy:push</code> command builds and deploys your Wheels application to configured servers using Docker. It handles Docker image building, pushing to registry, and deploying to target servers with optional rolling deployments for zero-downtime updates.</p>"},{"location":"command-line-tools/commands/deploy/deploy-push/#options","title":"Options","text":"<ul> <li><code>tag=&lt;string&gt;</code> - Docker image tag (defaults to timestamp format: yyyymmddHHmmss)</li> <li><code>--build</code> - Build Docker image locally (default: true, use --no-build to skip)</li> <li><code>--push</code> - Push image to registry (default: true, use --no-push to skip)</li> <li><code>--rolling</code> - Use rolling deployment for zero-downtime updates (default: true, use --no-rolling to disable)</li> <li><code>servers=&lt;string&gt;</code> - Deploy to specific servers (comma-separated list)</li> <li><code>destination=&lt;string&gt;</code> - Deployment destination/environment</li> <li><code>timeout=&lt;number&gt;</code> - Deployment timeout in seconds (default: 600)</li> <li><code>health-timeout=&lt;number&gt;</code> - Health check timeout in seconds (default: 300)</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-push/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/deploy/deploy-push/#basic-deployment","title":"Basic deployment","text":"<pre><code>wheels deploy:push\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-push/#deploy-with-specific-tag","title":"Deploy with specific tag","text":"<pre><code>wheels deploy:push tag=v1.0.0\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-push/#skip-building-and-just-deploy-existing-image","title":"Skip building and just deploy existing image","text":"<pre><code>wheels deploy:push tag=v1.0.0 --no-build\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-push/#deploy-to-specific-servers","title":"Deploy to specific servers","text":"<pre><code>wheels deploy:push servers=web1.example.com,web2.example.com\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-push/#deploy-without-rolling-updates-with-downtime","title":"Deploy without rolling updates (with downtime)","text":"<pre><code>wheels deploy:push --no-rolling\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-push/#deploy-with-custom-timeouts","title":"Deploy with custom timeouts","text":"<pre><code>wheels deploy:push timeout=900 health-timeout=600\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-push/#deployment-process","title":"Deployment Process","text":"<p>The deployment follows these steps:</p> <ol> <li>Lock Acquisition: Acquire deployment lock to prevent concurrent deployments</li> <li>Pre-connect Hook: Execute pre-connect lifecycle hook</li> <li>Tag Generation: Generate timestamp-based tag if not provided</li> <li>Pre-build Hook: Execute pre-build lifecycle hook</li> <li>Docker Build: Build Docker image (if --build is enabled)</li> <li>Registry Push: Push image to configured registry (if --push is enabled)</li> <li>Pre-deploy Hook: Execute pre-deploy lifecycle hook</li> <li>Server Deployment: Deploy to each target server</li> <li>Copy environment configuration</li> <li>Generate docker-compose.yml</li> <li>Pull new image</li> <li>Perform rolling deployment or restart</li> <li>Clean up old images</li> <li>Post-deploy Hook: Execute post-deploy lifecycle hook</li> <li>Lock Release: Release deployment lock</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-push/#rolling-deployment","title":"Rolling Deployment","text":"<p>When <code>--rolling</code> is enabled (default), the deployment: - Scales up the service to run old and new containers simultaneously - Waits for health checks to pass on new containers - Removes old containers only after successful health checks - Rolls back automatically if health checks fail</p>"},{"location":"command-line-tools/commands/deploy/deploy-push/#health-checks","title":"Health Checks","text":"<p>The deployment uses health checks defined in your deploy.yml configuration: <pre><code>healthcheck:\n  path: /health\n  port: 3000\n  interval: 30\n  timeout: 10\n  retries: 3\n</code></pre></p>"},{"location":"command-line-tools/commands/deploy/deploy-push/#deployment-hooks","title":"Deployment Hooks","text":"<p>Lifecycle hooks are executed at various stages: - <code>pre-connect</code>: Before connecting to servers - <code>pre-build</code>: Before building Docker image - <code>pre-deploy</code>: Before deploying to servers - <code>post-deploy</code>: After successful deployment</p>"},{"location":"command-line-tools/commands/deploy/deploy-push/#configuration","title":"Configuration","text":"<p>The deployment uses configuration from <code>config/deploy.yml</code>: <pre><code>service: myapp\nimage: myapp\n\nregistry:\n  server: registry.example.com\n  username: myuser\n\nservers:\n  web:\n    - web1.example.com\n    - web2.example.com\n\nssh:\n  user: deploy\n\nenv:\n  clear:\n    WHEELS_ENV: production\n    PORT: 3000\n\nhealthcheck:\n  path: /health\n  port: 3000\n  interval: 30\n\ntraefik:\n  enabled: true\n  labels:\n    traefik.http.routers.myapp.rule: Host(`myapp.example.com`)\n</code></pre></p>"},{"location":"command-line-tools/commands/deploy/deploy-push/#environment-variables","title":"Environment Variables","text":"<p>Environment variables are loaded from <code>.env.deploy</code> file and copied to target servers.</p>"},{"location":"command-line-tools/commands/deploy/deploy-push/#docker-compose-generation","title":"Docker Compose Generation","text":"<p>The command generates a docker-compose.yml file on target servers with: - Service configuration - Environment variables - Port mappings - Volume mounts - Health checks - Traefik labels (if enabled) - Database services (if configured)</p>"},{"location":"command-line-tools/commands/deploy/deploy-push/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/deploy/deploy-push/#production-deployment-with-specific-version","title":"Production deployment with specific version","text":"<pre><code>wheels deploy:push tag=v2.0.0\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-push/#deploy-pre-built-image-from-cicd","title":"Deploy pre-built image from CI/CD","text":"<pre><code># Image already built and pushed by CI\nwheels deploy:push tag=build-123 --no-build --no-push\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-push/#deploy-to-staging-servers-only","title":"Deploy to staging servers only","text":"<pre><code>wheels deploy:push servers=staging1.example.com destination=staging\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-push/#emergency-deployment-without-health-checks","title":"Emergency deployment without health checks","text":"<pre><code>wheels deploy:push --no-rolling health-timeout=0\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-push/#best-practices","title":"Best Practices","text":"<ol> <li>Use semantic versioning: Tag releases with version numbers</li> <li>Test in staging first: Deploy to staging before production</li> <li>Monitor deployments: Check logs and health status</li> <li>Use rolling deployments: Minimize downtime with --rolling</li> <li>Configure health checks: Ensure proper health check endpoints</li> <li>Set appropriate timeouts: Adjust timeouts based on app startup time</li> <li>Use deployment locks: Prevent concurrent deployments</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-push/#see-also","title":"See Also","text":"<ul> <li>deploy exec - Execute deployment after push</li> <li>deploy status - Check push status</li> <li>deploy rollback - Rollback pushed artifacts</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-rollback/","title":"wheels deploy rollback","text":"<p>Rollback to a previous deployment.</p>"},{"location":"command-line-tools/commands/deploy/deploy-rollback/#synopsis","title":"Synopsis","text":"<pre><code>wheels deploy:rollback [options]\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-rollback/#description","title":"Description","text":"<p>The <code>wheels deploy:rollback</code> command reverts your application to a previous deployment by switching to an earlier Docker image version. It provides quick recovery from failed deployments or problematic releases by pulling and running a previous known-good image.</p>"},{"location":"command-line-tools/commands/deploy/deploy-rollback/#options","title":"Options","text":"<ul> <li><code>tag=&lt;string&gt;</code> - Specific tag to rollback to (if not provided, shows available versions)</li> <li><code>servers=&lt;string&gt;</code> - Rollback specific servers (comma-separated list)</li> <li><code>--force</code> - Skip confirmation prompt (default: false)</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-rollback/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/deploy/deploy-rollback/#interactive-rollback-shows-available-versions","title":"Interactive rollback (shows available versions)","text":"<pre><code>wheels deploy:rollback\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-rollback/#rollback-to-specific-version","title":"Rollback to specific version","text":"<pre><code>wheels deploy:rollback tag=v1.0.0\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-rollback/#rollback-specific-servers","title":"Rollback specific servers","text":"<pre><code>wheels deploy:rollback servers=web1.example.com,web2.example.com\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-rollback/#force-rollback-without-confirmation","title":"Force rollback without confirmation","text":"<pre><code>wheels deploy:rollback tag=v1.0.0 --force\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-rollback/#rollback-process","title":"Rollback Process","text":"<p>The rollback follows these steps:</p> <ol> <li>Image Discovery (if no tag specified):</li> <li>Connect to first server</li> <li>List available Docker images</li> <li>Display versions with creation dates</li> <li> <p>Allow user to select version</p> </li> <li> <p>Confirmation:</p> </li> <li>Display selected version</li> <li>Show target servers</li> <li> <p>Request confirmation (unless --force)</p> </li> <li> <p>Execution (for each server):</p> </li> <li>Check if image exists locally</li> <li>Pull image from registry if needed</li> <li>Update docker-compose.yml with selected image</li> <li>Stop current container</li> <li>Start container with rollback image</li> <li> <p>Wait for health check</p> </li> <li> <p>Verification:</p> </li> <li>Perform health checks</li> <li>Report success/failure for each server</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-rollback/#interactive-rollback-example","title":"Interactive Rollback Example","text":"<pre><code>Wheels Deployment Rollback\n==================================================\nFetching available images from servers...\n\nAvailable versions:\n--------------------------------------------------\n1. Tag: v2.1.0 (Created: 2024-01-15 12:00:00)\n2. Tag: v2.0.0 (Created: 2024-01-14 09:30:45)\n3. Tag: v1.9.5 (Created: 2024-01-13 15:45:22)\n4. Tag: v1.9.0 (Created: 2024-01-12 10:11:33)\n\nSelect version to rollback to (1-4): 2\n\nWARNING: This will rollback to version: v2.0.0\nTarget servers: web1.example.com, web2.example.com\n\nAre you sure you want to continue? (yes/no): yes\n\nRolling back to: registry.example.com/myuser/myapp:v2.0.0\n\nRolling back: web1.example.com\n------------------------------\nChecking for image...\nImage not found locally, pulling from registry...\nUpdating configuration...\nPerforming rollback...\nWaiting for health check...\n\u2713 Rollback successful on web1.example.com\n\nRolling back: web2.example.com\n------------------------------\nChecking for image...\nUpdating configuration...\nPerforming rollback...\nWaiting for health check...\n\u2713 Rollback successful on web2.example.com\n\nRollback completed!\nRolled back to: registry.example.com/myuser/myapp:v2.0.0\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-rollback/#configuration","title":"Configuration","text":"<p>The rollback uses the same configuration from <code>config/deploy.yml</code> as the deployment:</p> <pre><code>service: myapp\nimage: myapp\n\nregistry:\n  server: registry.example.com\n  username: myuser\n\nservers:\n  web:\n    - web1.example.com\n    - web2.example.com\n\nssh:\n  user: deploy\n\nhealthcheck:\n  path: /health\n  port: 3000\n  interval: 30\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-rollback/#health-checks","title":"Health Checks","text":"<p>The rollback performs health checks after switching images: - Uses the health check configuration from deploy.yml - Timeout is hardcoded to 60 seconds for rollbacks - If health check fails, the rollback is reported as failed</p>"},{"location":"command-line-tools/commands/deploy/deploy-rollback/#docker-image-management","title":"Docker Image Management","text":"<p>The rollback command: - Lists images matching the configured registry/username/image pattern - Shows creation timestamps to help identify versions - Pulls images from registry if not available locally - Uses the same docker-compose.yml generation as deployments</p>"},{"location":"command-line-tools/commands/deploy/deploy-rollback/#emergency-rollback","title":"Emergency Rollback","text":"<p>For critical situations where interactive selection isn't feasible:</p> <pre><code># Direct rollback to known version\nwheels deploy:rollback tag=v1.9.5 --force\n\n# Rollback specific problematic server\nwheels deploy:rollback tag=v1.9.5 servers=web2.example.com --force\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-rollback/#manual-rollback-last-resort","title":"Manual Rollback (Last Resort)","text":"<p>If the rollback command fails:</p> <pre><code># SSH to server and manually switch images\nssh deploy@web1.example.com\ncd /opt/myapp\ndocker-compose down\n# Edit docker-compose.yml to use previous image\ndocker-compose up -d\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-rollback/#best-practices","title":"Best Practices","text":"<ol> <li>Tag Releases Properly: Use semantic versioning for easy identification</li> <li>Keep Images Available: Don't prune old images too aggressively</li> <li>Test Rollbacks: Practice rollback procedures in staging</li> <li>Monitor After Rollback: Verify application functionality</li> <li>Document Issues: Record why rollback was needed</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-rollback/#limitations","title":"Limitations","text":"<ul> <li>Requires Docker images to be available (locally or in registry)</li> <li>Database changes are not rolled back automatically</li> <li>Environment file changes persist</li> <li>Shared volumes (storage, logs) are not affected</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-rollback/#see-also","title":"See Also","text":"<ul> <li>wheels deploy:push - Deploy application</li> <li>wheels deploy:status - Check deployment status</li> <li>wheels deploy:logs - View deployment logs</li> <li>wheels dbmigrate down - Rollback migrations</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/","title":"wheels deploy secrets","text":"<p>Manage deployment secrets and sensitive configuration.</p>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#synopsis","title":"Synopsis","text":"<pre><code>wheels deploy secrets [action] [name] [value] [options]\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#description","title":"Description","text":"<p>The <code>wheels deploy secrets</code> command provides secure management of sensitive data like API keys, database passwords, and other credentials used during deployment. Secrets are encrypted and stored separately from your codebase.</p>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#actions","title":"Actions","text":"Action Description <code>list</code> List all secrets for a target <code>set</code> Set or update a secret <code>get</code> Retrieve a secret value <code>delete</code> Remove a secret <code>sync</code> Synchronize secrets with target <code>rotate</code> Rotate secret values <code>export</code> Export secrets to file <code>import</code> Import secrets from file"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#arguments","title":"Arguments","text":"Argument Description Required <code>action</code> Action to perform Yes <code>name</code> Secret name For set/get/delete <code>value</code> Secret value For set action"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#options","title":"Options","text":"Option Description Default <code>--target</code> Deployment target <code>production</code> <code>--env-file</code> Environment file for bulk operations <code>--format</code> Output format (table, json, dotenv) <code>table</code> <code>--force</code> Skip confirmation prompts <code>false</code> <code>--encrypt</code> Encryption method (aes256, rsa) <code>aes256</code> <code>--key-file</code> Path to encryption key <code>.wheels-deploy-key</code> <code>--help</code> Show help information"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/deploy/deploy-secrets/#set-a-secret","title":"Set a secret","text":"<pre><code>wheels deploy secrets set DB_PASSWORD mySecretPass123 --target=production\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#set-secret-interactively-hidden-input","title":"Set secret interactively (hidden input)","text":"<pre><code>wheels deploy secrets set API_KEY --target=production\n# Prompts for value without displaying it\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#list-all-secrets","title":"List all secrets","text":"<pre><code>wheels deploy secrets list --target=production\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#get-a-specific-secret","title":"Get a specific secret","text":"<pre><code>wheels deploy secrets get DB_PASSWORD --target=production\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#delete-a-secret","title":"Delete a secret","text":"<pre><code>wheels deploy secrets delete OLD_API_KEY --target=production\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#import-from-env-file","title":"Import from .env file","text":"<pre><code>wheels deploy secrets import --env-file=.env.production --target=production\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#export-secrets","title":"Export secrets","text":"<pre><code>wheels deploy secrets export --target=production --format=dotenv &gt; .env.backup\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#rotate-database-password","title":"Rotate database password","text":"<pre><code>wheels deploy secrets rotate DB_PASSWORD --target=production\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#secret-storage","title":"Secret Storage","text":"<p>Secrets are stored encrypted in: - Local: <code>.wheels-deploy-secrets/[target].enc</code> - Remote: Deployment target's secure storage</p>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#encryption","title":"Encryption","text":"<p>Secrets are encrypted using: - AES-256 encryption by default - Unique key per environment - Optional RSA public key encryption</p>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#key-management","title":"Key Management","text":"<p>Encryption keys stored in: <pre><code>.wheels-deploy-key        # Default key file\n.wheels-deploy-key.pub    # Public key (RSA)\n.wheels-deploy-key.priv   # Private key (RSA)\n</code></pre></p>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#secret-types","title":"Secret Types","text":""},{"location":"command-line-tools/commands/deploy/deploy-secrets/#environment-variables","title":"Environment Variables","text":"<p>Standard key-value pairs: <pre><code>wheels deploy secrets set DATABASE_URL \"mysql://user:pass@host/db\"\nwheels deploy secrets set REDIS_URL \"redis://localhost:6379\"\n</code></pre></p>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#file-based-secrets","title":"File-based Secrets","text":"<p>Store file contents as secrets: <pre><code>wheels deploy secrets set SSL_CERT --file=/path/to/cert.pem\nwheels deploy secrets set SSH_KEY --file=~/.ssh/id_rsa\n</code></pre></p>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#multi-line-secrets","title":"Multi-line Secrets","text":"<pre><code>wheels deploy secrets set PRIVATE_KEY --multiline\n# Enter/paste content, end with Ctrl+D\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#bulk-operations","title":"Bulk Operations","text":""},{"location":"command-line-tools/commands/deploy/deploy-secrets/#import-from-env","title":"Import from .env","text":"<pre><code># Import all variables from .env file\nwheels deploy secrets import --env-file=.env.production\n\n# Import with prefix\nwheels deploy secrets import --env-file=.env --prefix=APP_\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#export-formats","title":"Export Formats","text":"<p>Table format: <pre><code>wheels deploy secrets list\n</code></pre></p> <p>JSON format: <pre><code>wheels deploy secrets list --format=json\n</code></pre></p> <p>DotEnv format: <pre><code>wheels deploy secrets export --format=dotenv\n</code></pre></p>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#secret-rotation","title":"Secret Rotation","text":"<p>Rotate secrets with automatic update:</p> <pre><code># Rotate with auto-generated value\nwheels deploy secrets rotate DB_PASSWORD\n\n# Rotate with custom value\nwheels deploy secrets rotate API_KEY --value=newKey123\n\n# Rotate multiple secrets\nwheels deploy secrets rotate DB_PASSWORD,REDIS_PASSWORD,API_KEY\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#synchronization","title":"Synchronization","text":"<p>Sync secrets to deployment target:</p> <pre><code># Sync all secrets\nwheels deploy secrets sync --target=production\n\n# Verify sync status\nwheels deploy secrets sync --target=production --dry-run\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#access-control","title":"Access Control","text":""},{"location":"command-line-tools/commands/deploy/deploy-secrets/#team-sharing","title":"Team Sharing","text":"<p>Share encrypted secrets with team: <pre><code># Export encrypted secrets\nwheels deploy secrets export --target=production --encrypted &gt; secrets.enc\n\n# Import on another machine\nwheels deploy secrets import --file=secrets.enc --key-file=team-key\n</code></pre></p>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#permission-levels","title":"Permission Levels","text":"<ul> <li>Read: View secret names only</li> <li>Write: Set/update secrets</li> <li>Admin: Delete/rotate secrets</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#integration","title":"Integration","text":""},{"location":"command-line-tools/commands/deploy/deploy-secrets/#during-deployment","title":"During Deployment","text":"<p>Secrets automatically injected: <pre><code>{\n  \"hooks\": {\n    \"pre-deploy\": [\n      \"wheels deploy secrets sync\"\n    ]\n  }\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#in-application","title":"In Application","text":"<p>Access secrets via environment: <pre><code>&lt;cfset dbPassword = env(\"DB_PASSWORD\", \"\")&gt;\n&lt;cfset apiKey = env(\"API_KEY\", \"\")&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#security-best-practices","title":"Security Best Practices","text":"<ol> <li>Never commit secrets to version control</li> <li>Use strong encryption keys</li> <li>Rotate secrets regularly</li> <li>Limit access to production secrets</li> <li>Audit secret usage via logs</li> <li>Use different secrets per environment</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#backup-and-recovery","title":"Backup and Recovery","text":""},{"location":"command-line-tools/commands/deploy/deploy-secrets/#backup-secrets","title":"Backup Secrets","text":"<pre><code># Encrypted backup\nwheels deploy secrets export --target=production --encrypted &gt; backup-$(date +%Y%m%d).enc\n\n# Secure offsite backup\nwheels deploy secrets export | gpg -c &gt; secrets.gpg\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#restore-secrets","title":"Restore Secrets","text":"<pre><code># From encrypted backup\nwheels deploy secrets import --file=backup-20240115.enc\n\n# From GPG encrypted file\ngpg -d secrets.gpg | wheels deploy secrets import\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/deploy/deploy-secrets/#common-issues","title":"Common Issues","text":"<ol> <li> <p>Encryption key not found:    <pre><code>wheels deploy secrets init --generate-key\n</code></pre></p> </li> <li> <p>Permission denied:</p> </li> <li>Check file permissions on key files</li> <li> <p>Verify user has deployment access</p> </li> <li> <p>Secret not available during deployment:</p> </li> <li>Ensure secrets are synced</li> <li>Check target configuration</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#use-cases","title":"Use Cases","text":"<ol> <li>Database Credentials: Secure database passwords</li> <li>API Keys: Third-party service credentials</li> <li>SSL Certificates: Secure certificate storage</li> <li>OAuth Secrets: Client secrets for OAuth</li> <li>Encryption Keys: Application encryption keys</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#notes","title":"Notes","text":"<ul> <li>Secrets are never logged or displayed in plain text</li> <li>Use environment-specific secrets</li> <li>Regular rotation improves security</li> <li>Keep encryption keys secure and backed up</li> <li>Monitor secret access in production</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-secrets/#see-also","title":"See Also","text":"<ul> <li>wheels deploy init - Initialize deployment</li> <li>wheels deploy exec - Execute deployment</li> <li>wheels config set - Set configuration values</li> <li>Security Best Practices</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-setup/","title":"deploy setup","text":"<p>Setup and configure deployment environment for your Wheels application.</p>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#synopsis","title":"Synopsis","text":"<pre><code>wheels deploy setup [environment] [options]\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#description","title":"Description","text":"<p>The <code>wheels deploy setup</code> command initializes and configures deployment environments for your Wheels application. It sets up necessary infrastructure, configurations, and dependencies required for successful deployments.</p>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#options","title":"Options","text":"<ul> <li><code>--provider</code> - Deployment provider (aws, azure, gcp, docker, traditional)</li> <li><code>--region</code> - Cloud region for deployment</li> <li><code>--instance-type</code> - Server instance type/size</li> <li><code>--database</code> - Database configuration (type, size, replicas)</li> <li><code>--ssl</code> - Enable SSL/TLS configuration</li> <li><code>--domain</code> - Domain name for the application</li> <li><code>--monitoring</code> - Enable monitoring and alerting</li> <li><code>--backup</code> - Configure automated backups</li> <li><code>--scaling</code> - Auto-scaling configuration</li> <li><code>--dry-run</code> - Preview setup without making changes</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/deploy/deploy-setup/#basic-setup","title":"Basic setup","text":"<pre><code>wheels deploy setup production\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#aws-setup-with-options","title":"AWS setup with options","text":"<pre><code>wheels deploy setup production \\\n  --provider aws \\\n  --region us-east-1 \\\n  --instance-type t3.medium \\\n  --ssl --monitoring\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#docker-setup","title":"Docker setup","text":"<pre><code>wheels deploy setup staging \\\n  --provider docker \\\n  --ssl --domain staging.example.com\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#preview-setup","title":"Preview setup","text":"<pre><code>wheels deploy setup production --dry-run\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#setup-process","title":"Setup Process","text":"<p>The setup command performs the following steps:</p> <ol> <li>Environment validation: Checks prerequisites and permissions</li> <li>Infrastructure provisioning: Creates servers, networks, storage</li> <li>Security configuration: Sets up firewalls, SSL, access controls</li> <li>Application setup: Installs dependencies, configures services</li> <li>Database setup: Creates and configures database</li> <li>Monitoring setup: Configures logging and monitoring</li> <li>Backup configuration: Sets up automated backups</li> <li>Validation: Runs health checks on setup</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#provider-specific-setup","title":"Provider-Specific Setup","text":""},{"location":"command-line-tools/commands/deploy/deploy-setup/#aws-setup","title":"AWS Setup","text":"<pre><code>wheels deploy setup production \\\n  --provider aws \\\n  --region us-west-2 \\\n  --instance-type t3.large \\\n  --database \"rds:postgres:db.t3.small\" \\\n  --ssl --monitoring\n</code></pre> <p>Creates: - EC2 instances - RDS database - Load balancer - Security groups - S3 buckets - CloudWatch monitoring</p>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#docker-setup_1","title":"Docker Setup","text":"<pre><code>wheels deploy setup production \\\n  --provider docker \\\n  --registry docker.io/myapp \\\n  --compose-file docker-compose.prod.yml\n</code></pre> <p>Creates: - Docker containers - Networks - Volumes - Container registry - Orchestration setup</p>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#traditional-server-setup","title":"Traditional Server Setup","text":"<pre><code>wheels deploy setup production \\\n  --provider traditional \\\n  --server prod-server-01.example.com \\\n  --ssh-key ~/.ssh/id_rsa\n</code></pre> <p>Configures: - Web server (Apache/Nginx) - Application server - Database connections - File permissions - Service management</p>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#configuration-files","title":"Configuration Files","text":""},{"location":"command-line-tools/commands/deploy/deploy-setup/#environment-configuration","title":"Environment configuration","text":"<p>The setup creates environment-specific configuration:</p> <pre><code># Generated: config/environments/production.yml\nenvironment:\n  name: production\n  provider: aws\n  region: us-east-1\n  instances:\n    web:\n      type: t3.medium\n      count: 2\n      auto_scaling: true\n  database:\n    type: postgres\n    instance: db.t3.small\n    backup: daily\n  ssl:\n    enabled: true\n    certificate: auto\n  monitoring:\n    enabled: true\n    alerts: true\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#database-configuration","title":"Database configuration","text":"<pre><code># Generated: config/database.production.yml\ndatabase:\n  adapter: postgresql\n  host: prod-db.region.rds.amazonaws.com\n  port: 5432\n  database: myapp_production\n  pool: 25\n  replica:\n    host: prod-db-read.region.rds.amazonaws.com\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/deploy/deploy-setup/#multi-environment-setup","title":"Multi-environment setup","text":"<pre><code># Setup all environments\nfor env in development staging production; do\n  wheels deploy setup $env --provider docker\ndone\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#high-availability-setup","title":"High-availability setup","text":"<pre><code>wheels deploy setup production \\\n  --provider aws \\\n  --instance-type t3.large \\\n  --scaling \"min:2,max:10,target-cpu:70\" \\\n  --database \"rds:postgres:db.t3.large:multi-az\" \\\n  --monitoring --backup\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#development-environment","title":"Development environment","text":"<pre><code>wheels deploy setup development \\\n  --provider docker \\\n  --minimal \\\n  --skip-monitoring \\\n  --skip-backup\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#post-setup-tasks","title":"Post-Setup Tasks","text":"<p>After setup completes, you should:</p> <ol> <li> <p>Verify configuration <pre><code>wheels deploy status --environment production\n</code></pre></p> </li> <li> <p>Test deployment <pre><code>wheels deploy push --dry-run\n</code></pre></p> </li> <li> <p>Configure secrets <pre><code>wheels deploy secrets set DATABASE_PASSWORD=your-secure-password\n</code></pre></p> </li> <li> <p>Run initial deployment <pre><code>wheels deploy exec\n</code></pre></p> </li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#security-considerations","title":"Security Considerations","text":"<p>The setup command implements security best practices:</p> <ul> <li>Encrypted connections (SSL/TLS)</li> <li>Firewall rules (minimal exposed ports)</li> <li>Access control (IAM/RBAC)</li> <li>Secrets management</li> <li>Network isolation</li> <li>Regular security updates</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#monitoring-setup","title":"Monitoring Setup","text":"<p>Monitoring configuration includes:</p> <ul> <li>Application metrics</li> <li>Server metrics</li> <li>Database metrics</li> <li>Error tracking</li> <li>Performance monitoring</li> <li>Alerting rules</li> <li>Log aggregation</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#best-practices","title":"Best Practices","text":"<ol> <li>Use version control: Commit generated configuration files</li> <li>Test in staging: Always setup staging before production</li> <li>Document customizations: Keep notes on manual changes</li> <li>Regular updates: Keep infrastructure updated</li> <li>Monitor costs: Track cloud spending</li> <li>Backup configuration: Store setup configuration securely</li> <li>Automate setup: Use infrastructure as code</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/deploy/deploy-setup/#setup-failures","title":"Setup failures","text":"<pre><code># Check detailed logs\nwheels deploy setup production --verbose\n\n# Retry with specific step\nwheels deploy setup production --step database\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#permission-issues","title":"Permission issues","text":"<pre><code># Verify credentials\nwheels deploy setup production --validate-credentials\n\n# Use specific profile\nwheels deploy setup production --aws-profile prod-deploy\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#network-issues","title":"Network issues","text":"<pre><code># Test connectivity\nwheels deploy setup production --test-connectivity\n\n# Use specific VPC\nwheels deploy setup production --vpc vpc-12345\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-setup/#see-also","title":"See Also","text":"<ul> <li>deploy init - Initialize deployment configuration</li> <li>deploy exec - Execute deployment</li> <li>deploy status - Check deployment status</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-status/","title":"deploy status","text":"<p>Check deployment status across all servers.</p>"},{"location":"command-line-tools/commands/deploy/deploy-status/#synopsis","title":"Synopsis","text":"<pre><code>wheels deploy:status [options]\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-status/#description","title":"Description","text":"<p>The <code>wheels deploy:status</code> command checks the deployment status across all configured servers, including SSH connectivity, Docker status, container health, and optional database status. It provides a comprehensive view of your deployed application's health.</p>"},{"location":"command-line-tools/commands/deploy/deploy-status/#options","title":"Options","text":"<ul> <li><code>servers=&lt;string&gt;</code> - Check specific servers (comma-separated list)</li> <li><code>--detailed</code> - Show detailed container information (default: false)</li> <li><code>--logs</code> - Show recent container logs (default: false)</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-status/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/deploy/deploy-status/#basic-status-check","title":"Basic status check","text":"<pre><code>wheels deploy:status\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-status/#check-specific-servers","title":"Check specific servers","text":"<pre><code>wheels deploy:status servers=web1.example.com,web2.example.com\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-status/#detailed-status-with-container-information","title":"Detailed status with container information","text":"<pre><code>wheels deploy:status --detailed\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-status/#status-with-recent-logs","title":"Status with recent logs","text":"<pre><code>wheels deploy:status --logs\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-status/#complete-status-check-with-all-details","title":"Complete status check with all details","text":"<pre><code>wheels deploy:status --detailed --logs\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-status/#status-information","title":"Status Information","text":"<p>The command checks the following components for each server:</p>"},{"location":"command-line-tools/commands/deploy/deploy-status/#connection-status","title":"Connection Status","text":"<ul> <li>SSH Connection: Verifies SSH connectivity to the server</li> <li>Docker Availability: Checks if Docker is installed and running</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-status/#container-status","title":"Container Status","text":"<ul> <li>Container Running: Checks if the application container is running</li> <li>Container Health: Shows container status (Up/Down time)</li> <li>Image Version: Displays the current Docker image in use</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-status/#health-checks","title":"Health Checks","text":"<ul> <li>HTTP Health Check: Tests the configured health endpoint</li> <li>Response Code: Verifies HTTP 200 response</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-status/#database-status-if-configured","title":"Database Status (if configured)","text":"<ul> <li>Database Container: Checks if database container is running</li> <li>Database Health: Shows database container status</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-status/#output-examples","title":"Output Examples","text":""},{"location":"command-line-tools/commands/deploy/deploy-status/#basic-status-output","title":"Basic status output","text":"<pre><code>Wheels Deployment Status\n==================================================\nChecking 2 server(s)...\n\nServer: web1.example.com\n----------------------------------------\n\u2713 SSH Connection OK\n\u2713 Docker Running\n\u2713 Container Running\n  Status: Up 2 hours\n  Image: registry.example.com/myuser/myapp:v2.1.0\n\u2713 Health Check Passed\n\nServer: web2.example.com\n----------------------------------------\n\u2713 SSH Connection OK\n\u2713 Docker Running\n\u2713 Container Running\n  Status: Up 2 hours\n  Image: registry.example.com/myuser/myapp:v2.1.0\n\u2713 Health Check Passed\n\n==================================================\nOverall Status: \u2713 All Systems Healthy\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-status/#detailed-status-output-with-detailed","title":"Detailed status output with --detailed","text":"<pre><code>Wheels Deployment Status\n==================================================\nChecking 2 server(s)...\n\nServer: web1.example.com\n----------------------------------------\n\u2713 SSH Connection OK\n\u2713 Docker Running\n\u2713 Container Running\n  Status: Up 2 hours\n  Image: registry.example.com/myuser/myapp:v2.1.0\n\u2713 Health Check Passed\n\nContainer Details:\nCreated: 2024-01-15T14:30:00Z\nState: running\nRestartCount: 0\nPorts: 3000-&gt;3000/tcp\nDisk Usage: 45% (120GB available)\n\nDatabase Status:\n\u2713 Database Running\n  Status: Up 2 hours\n\n==================================================\nOverall Status: \u2713 All Systems Healthy\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-status/#status-output-with-logs","title":"Status Output with Logs","text":"<p>When using the <code>--logs</code> flag: <pre><code>Server: web1.example.com\n----------------------------------------\n\u2713 SSH Connection OK\n\u2713 Docker Running\n\u2713 Container Running\n  Status: Up 2 hours\n  Image: registry.example.com/myuser/myapp:v2.1.0\n\u2713 Health Check Passed\n\nRecent Logs:\n----------------------------------------\n[2024-01-15 14:30:00] INFO: Server started on port 3000\n[2024-01-15 14:30:01] INFO: Database connection established\n[2024-01-15 14:30:02] INFO: Health check endpoint ready\n[2024-01-15 14:35:00] INFO: Request processed successfully\n----------------------------------------\n</code></pre></p>"},{"location":"command-line-tools/commands/deploy/deploy-status/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/deploy/deploy-status/#pre-deployment-check","title":"Pre-deployment check","text":"<pre><code># Verify all servers are healthy before deployment\nwheels deploy:status\nif [ $? -eq 0 ]; then\n  wheels deploy:push\nfi\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-status/#post-deployment-verification","title":"Post-deployment verification","text":"<pre><code># Check status after deployment\nwheels deploy:push tag=v2.1.0\nsleep 30\nwheels deploy:status --detailed\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-status/#health-monitoring-script","title":"Health monitoring script","text":"<pre><code>#!/bin/bash\n# Regular health check\nwhile true; do\n  wheels deploy:status\n  sleep 300  # Check every 5 minutes\ndone\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-status/#troubleshooting-specific-server","title":"Troubleshooting specific server","text":"<pre><code># Check single problematic server\nwheels deploy:status servers=web2.example.com --detailed --logs\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-status/#configuration","title":"Configuration","text":"<p>The status command uses configuration from <code>config/deploy.yml</code>:</p> <pre><code>service: myapp\n\nservers:\n  web:\n    - web1.example.com\n    - web2.example.com\n\nssh:\n  user: deploy\n\nhealthcheck:\n  path: /health\n  port: 3000\n  interval: 30\n\naccessories:\n  db:\n    image: mysql:8.0\n    volumes:\n      - db_data:/var/lib/mysql\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-status/#error-states","title":"Error States","text":""},{"location":"command-line-tools/commands/deploy/deploy-status/#ssh-connection-failed","title":"SSH Connection Failed","text":"<pre><code>Server: web1.example.com\n----------------------------------------\n\u2717 SSH Connection Failed\n  Error: Unable to connect to server\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-status/#container-not-running","title":"Container Not Running","text":"<pre><code>Server: web1.example.com\n----------------------------------------\n\u2713 SSH Connection OK\n\u2713 Docker Running\n\u2717 Container Not Running\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-status/#health-check-failed","title":"Health Check Failed","text":"<pre><code>Server: web1.example.com\n----------------------------------------\n\u2713 SSH Connection OK\n\u2713 Docker Running\n\u2713 Container Running\n  Status: Up 5 minutes\n  Image: registry.example.com/myuser/myapp:v2.1.0\n\u2717 Health Check Failed\n  HTTP Status: 503\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-status/#best-practices","title":"Best Practices","text":"<ol> <li>Regular monitoring: Run status checks after deployments</li> <li>Configure health endpoints: Ensure <code>/health</code> endpoint is properly implemented</li> <li>Monitor all servers: Don't assume all servers are in the same state</li> <li>Check before deployment: Verify environment health before deploying</li> <li>Use detailed mode: Use <code>--detailed</code> for troubleshooting</li> <li>Review logs: Use <code>--logs</code> when investigating issues</li> <li>Automate checks: Include status checks in deployment scripts</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-status/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/deploy/deploy-status/#ssh-connection-issues","title":"SSH Connection Issues","text":"<ul> <li>Verify SSH key is configured correctly</li> <li>Check network connectivity to servers</li> <li>Ensure user has proper permissions</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-status/#container-not-found","title":"Container Not Found","text":"<ul> <li>Verify deployment was successful</li> <li>Check if container name matches service name</li> <li>Ensure Docker is running on the server</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-status/#health-check-failures","title":"Health Check Failures","text":"<ul> <li>Verify health endpoint path is correct</li> <li>Check if application is fully started</li> <li>Review application logs for errors</li> <li>Ensure port is accessible</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-status/#database-issues","title":"Database Issues","text":"<ul> <li>Verify database container is running</li> <li>Check database connection settings</li> <li>Review database logs</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-status/#see-also","title":"See Also","text":"<ul> <li>wheels deploy:push - Deploy application</li> <li>wheels deploy:rollback - Rollback deployment</li> <li>wheels deploy:logs - View deployment logs</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-stop/","title":"deploy stop","text":"<p>Stop deployed containers on servers.</p>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#synopsis","title":"Synopsis","text":"<pre><code>wheels deploy:stop [options]\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#description","title":"Description","text":"<p>The <code>wheels deploy:stop</code> command stops Docker containers on your deployment servers. It can either stop containers (keeping them for later restart) or completely remove them. This is useful for maintenance, troubleshooting, or decommissioning deployments.</p>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#options","title":"Options","text":"<ul> <li><code>servers=&lt;string&gt;</code> - Stop on specific servers (comma-separated list)</li> <li><code>--remove</code> - Remove containers after stopping (default: false)</li> <li><code>--force</code> - Skip confirmation prompt (default: false)</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/deploy/deploy-stop/#stop-containers-on-all-servers","title":"Stop containers on all servers","text":"<pre><code>wheels deploy:stop\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#stop-containers-on-specific-servers","title":"Stop containers on specific servers","text":"<pre><code>wheels deploy:stop servers=web1.example.com,web2.example.com\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#stop-and-remove-containers","title":"Stop and remove containers","text":"<pre><code>wheels deploy:stop --remove\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#force-stop-without-confirmation","title":"Force stop without confirmation","text":"<pre><code>wheels deploy:stop --force\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#stop-and-remove-on-specific-server","title":"Stop and remove on specific server","text":"<pre><code>wheels deploy:stop servers=web1.example.com --remove --force\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#how-it-works","title":"How It Works","text":"<p>The stop command: 1. Connects to target servers via SSH 2. Navigates to the deployment directory (<code>/opt/{serviceName}</code>) 3. Executes <code>docker compose stop</code> (or <code>docker compose down</code> with --remove) 4. Optionally removes volumes with --remove flag</p>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#stop-vs-remove","title":"Stop vs Remove","text":""},{"location":"command-line-tools/commands/deploy/deploy-stop/#stop-default","title":"Stop (default)","text":"<ul> <li>Stops running containers</li> <li>Preserves container state and data</li> <li>Containers can be restarted later</li> <li>Uses <code>docker compose stop</code></li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#remove-remove-flag","title":"Remove (--remove flag)","text":"<ul> <li>Stops and removes containers</li> <li>Removes container volumes</li> <li>Complete cleanup of deployment</li> <li>Uses <code>docker compose down -v</code></li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#output-example","title":"Output Example","text":"<pre><code>Wheels Deploy Stop\n==================================================\nWARNING: This will stop your application on the following servers:\nweb1.example.com, web2.example.com\n\nAre you sure you want to continue? (yes/no): yes\n\nServer: web1.example.com\n------------------------------\nStopping containers...\n\u2713 Containers stopped successfully\n\nServer: web2.example.com\n------------------------------\nStopping containers...\n\u2713 Containers stopped successfully\n\nOperation completed.\n\nTo restart: wheels deploy:push --no-build\nTo remove completely: wheels deploy:stop --remove\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/deploy/deploy-stop/#temporary-maintenance","title":"Temporary maintenance","text":"<pre><code># Stop containers for maintenance\nwheels deploy:stop\n\n# Perform maintenance tasks...\n\n# Restart containers\nwheels deploy:push --no-build\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#troubleshooting","title":"Troubleshooting","text":"<pre><code># Stop problematic server\nwheels deploy:stop servers=web2.example.com\n\n# Debug issue...\n\n# Restart after fix\nwheels deploy:push servers=web2.example.com --no-build\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#complete-removal","title":"Complete removal","text":"<pre><code># Remove deployment completely\nwheels deploy:stop --remove --force\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#emergency-stop","title":"Emergency stop","text":"<pre><code># Quick stop without prompts\nwheels deploy:stop --force\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#best-practices","title":"Best Practices","text":"<ol> <li>Confirm before stopping: Always verify servers unless using --force</li> <li>Check status first: Run <code>wheels deploy:status</code> before stopping</li> <li>Use --remove carefully: This permanently removes containers and volumes</li> <li>Document stops: Keep track of why containers were stopped</li> <li>Plan restarts: Know how to restart containers quickly</li> <li>Test in staging: Practice stop/start procedures in non-production</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#container-management","title":"Container Management","text":""},{"location":"command-line-tools/commands/deploy/deploy-stop/#restart-stopped-containers","title":"Restart stopped containers","text":"<pre><code># Quick restart without rebuilding\nwheels deploy:push --no-build --no-push\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#check-container-status","title":"Check container status","text":"<pre><code># Verify containers are stopped\nwheels deploy:status\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#clean-up-old-images","title":"Clean up old images","text":"<pre><code># After stopping, clean up disk space\nwheels deploy:exec \"docker image prune -f\"\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#troubleshooting_1","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/deploy/deploy-stop/#containers-wont-stop","title":"Containers won't stop","text":"<ul> <li>Check for hung processes inside containers</li> <li>Use <code>docker ps</code> directly on the server</li> <li>May need to use <code>docker kill</code> as last resort</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#permission-errors","title":"Permission errors","text":"<ul> <li>Ensure SSH user has Docker permissions</li> <li>Check if user is in docker group</li> <li>Verify sudo access if needed</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#restart-issues","title":"Restart issues","text":"<ul> <li>Ensure <code>.env.deploy</code> file still exists</li> <li>Check if volumes were removed with --remove</li> <li>Verify Docker daemon is running</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#notes","title":"Notes","text":"<ul> <li>Stop command uses Docker Compose commands</li> <li>Confirmation prompt helps prevent accidental stops</li> <li>Remove flag permanently deletes container data</li> <li>Stopped containers retain their configuration</li> <li>Works with the deployment structure created by deploy:init</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy-stop/#see-also","title":"See Also","text":"<ul> <li>wheels deploy:push - Deploy/restart application</li> <li>wheels deploy:status - Check deployment status</li> <li>wheels deploy:logs - View container logs</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy/","title":"wheels deploy","text":"<p>Base command for deployment operations in Wheels applications.</p>"},{"location":"command-line-tools/commands/deploy/deploy/#synopsis","title":"Synopsis","text":"<pre><code>wheels deploy [subcommand] [options]\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy/#description","title":"Description","text":"<p>The <code>wheels deploy</code> command provides a comprehensive deployment system for Wheels applications. It manages the entire deployment lifecycle including initialization, execution, monitoring, and rollback capabilities.</p>"},{"location":"command-line-tools/commands/deploy/deploy/#subcommands","title":"Subcommands","text":"Command Description <code>audit</code> Audit deployment configuration and security <code>exec</code> Execute a deployment <code>hooks</code> Manage deployment hooks <code>init</code> Initialize deployment configuration <code>lock</code> Lock deployment state <code>logs</code> View deployment logs <code>proxy</code> Configure deployment proxy <code>push</code> Push deployment to target <code>rollback</code> Rollback to previous deployment <code>secrets</code> Manage deployment secrets <code>setup</code> Setup deployment environment <code>status</code> Check deployment status <code>stop</code> Stop active deployment"},{"location":"command-line-tools/commands/deploy/deploy/#options","title":"Options","text":"Option Description <code>--help</code> Show help information <code>--version</code> Show version information"},{"location":"command-line-tools/commands/deploy/deploy/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/deploy/deploy/#view-deployment-help","title":"View deployment help","text":"<pre><code>wheels deploy --help\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy/#initialize-deployment","title":"Initialize deployment","text":"<pre><code>wheels deploy init\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy/#execute-deployment","title":"Execute deployment","text":"<pre><code>wheels deploy exec production\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy/#check-deployment-status","title":"Check deployment status","text":"<pre><code>wheels deploy status\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy/#deployment-workflow","title":"Deployment Workflow","text":"<ol> <li> <p>Initialize: Set up deployment configuration    <pre><code>wheels deploy init\n</code></pre></p> </li> <li> <p>Setup: Prepare deployment environment    <pre><code>wheels deploy setup production\n</code></pre></p> </li> <li> <p>Configure: Set secrets and proxy settings    <pre><code>wheels deploy secrets set DB_PASSWORD\nwheels deploy proxy configure\n</code></pre></p> </li> <li> <p>Deploy: Push and execute deployment    <pre><code>wheels deploy push\nwheels deploy exec\n</code></pre></p> </li> <li> <p>Monitor: Check status and logs    <pre><code>wheels deploy status\nwheels deploy logs --follow\n</code></pre></p> </li> <li> <p>Rollback (if needed):    <pre><code>wheels deploy rollback\n</code></pre></p> </li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy/#configuration","title":"Configuration","text":"<p>Deployment configuration is stored in <code>.wheels-deploy.json</code>:</p> <pre><code>{\n  \"targets\": {\n    \"production\": {\n      \"host\": \"prod.example.com\",\n      \"path\": \"/var/www/app\",\n      \"branch\": \"main\",\n      \"hooks\": {\n        \"pre-deploy\": [\"npm run build\"],\n        \"post-deploy\": [\"wheels dbmigrate latest\"]\n      }\n    },\n    \"staging\": {\n      \"host\": \"staging.example.com\",\n      \"path\": \"/var/www/staging\",\n      \"branch\": \"develop\"\n    }\n  },\n  \"defaults\": {\n    \"strategy\": \"rolling\",\n    \"keepReleases\": 5\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/deploy/deploy/#deployment-strategies","title":"Deployment Strategies","text":""},{"location":"command-line-tools/commands/deploy/deploy/#rolling-deployment","title":"Rolling Deployment","text":"<ul> <li>Zero-downtime deployment</li> <li>Gradual rollout</li> <li>Automatic rollback on failure</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy/#blue-green-deployment","title":"Blue-Green Deployment","text":"<ul> <li>Two identical environments</li> <li>Instant switching</li> <li>Easy rollback</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy/#canary-deployment","title":"Canary Deployment","text":"<ul> <li>Gradual traffic shifting</li> <li>Risk mitigation</li> <li>Performance monitoring</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy/#environment-variables","title":"Environment Variables","text":"Variable Description <code>WHEELS_DEPLOY_TARGET</code> Default deployment target <code>WHEELS_DEPLOY_STRATEGY</code> Default deployment strategy <code>WHEELS_DEPLOY_TIMEOUT</code> Deployment timeout in seconds"},{"location":"command-line-tools/commands/deploy/deploy/#use-cases","title":"Use Cases","text":"<ol> <li>Continuous Deployment: Automated deployments from CI/CD</li> <li>Manual Releases: Controlled production deployments</li> <li>Multi-Environment: Deploy to staging, production, etc.</li> <li>Disaster Recovery: Quick rollback capabilities</li> <li>Scheduled Deployments: Deploy during maintenance windows</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy/#best-practices","title":"Best Practices","text":"<ol> <li>Always run <code>deploy audit</code> before production deployments</li> <li>Use <code>deploy lock</code> during critical operations</li> <li>Configure proper hooks for migrations and cache clearing</li> <li>Keep deployment logs for auditing</li> <li>Test deployments in staging first</li> <li>Use secrets management for sensitive data</li> </ol>"},{"location":"command-line-tools/commands/deploy/deploy/#notes","title":"Notes","text":"<ul> <li>Requires SSH access for remote deployments</li> <li>Git repository must be properly configured</li> <li>Database backups recommended before deployment</li> <li>Monitor application health after deployment</li> </ul>"},{"location":"command-line-tools/commands/deploy/deploy/#see-also","title":"See Also","text":"<ul> <li>wheels deploy init - Initialize deployment</li> <li>wheels deploy exec - Execute deployment</li> <li>wheels deploy rollback - Rollback deployment</li> <li>wheels docker deploy - Docker deployments</li> </ul>"},{"location":"command-line-tools/commands/docker/docker-deploy/","title":"wheels docker deploy","text":"<p>Deploy your Wheels application using Docker containers.</p>"},{"location":"command-line-tools/commands/docker/docker-deploy/#synopsis","title":"Synopsis","text":"<pre><code>wheels docker deploy [target] [options]\n</code></pre>"},{"location":"command-line-tools/commands/docker/docker-deploy/#description","title":"Description","text":"<p>The <code>wheels docker deploy</code> command deploys your containerized Wheels application to various Docker environments including Docker Swarm, Kubernetes, or cloud container services.</p>"},{"location":"command-line-tools/commands/docker/docker-deploy/#arguments","title":"Arguments","text":"Argument Description Default <code>target</code> Deployment target (local, swarm, kubernetes, ecs, gcp, azure) <code>local</code>"},{"location":"command-line-tools/commands/docker/docker-deploy/#options","title":"Options","text":"Option Description Default <code>--tag</code> Docker image tag <code>latest</code> <code>--registry</code> Docker registry URL Docker Hub <code>--namespace</code> Kubernetes namespace or project name <code>default</code> <code>--replicas</code> Number of replicas <code>1</code> <code>--cpu</code> CPU limit (e.g., \"0.5\", \"2\") Platform default <code>--memory</code> Memory limit (e.g., \"512Mi\", \"2Gi\") Platform default <code>--env-file</code> Environment file path <code>.env</code> <code>--config-file</code> Deployment configuration file Auto-detect <code>--dry-run</code> Preview deployment without applying <code>false</code> <code>--force</code> Force deployment even if up-to-date <code>false</code> <code>--help</code> Show help information"},{"location":"command-line-tools/commands/docker/docker-deploy/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/docker/docker-deploy/#deploy-locally","title":"Deploy locally","text":"<pre><code>wheels docker deploy local\n</code></pre>"},{"location":"command-line-tools/commands/docker/docker-deploy/#deploy-to-docker-swarm","title":"Deploy to Docker Swarm","text":"<pre><code>wheels docker deploy swarm --replicas=3\n</code></pre>"},{"location":"command-line-tools/commands/docker/docker-deploy/#deploy-to-kubernetes","title":"Deploy to Kubernetes","text":"<pre><code>wheels docker deploy kubernetes --namespace=production --tag=v1.2.3\n</code></pre>"},{"location":"command-line-tools/commands/docker/docker-deploy/#deploy-to-aws-ecs","title":"Deploy to AWS ECS","text":"<pre><code>wheels docker deploy ecs --registry=123456789.dkr.ecr.us-east-1.amazonaws.com\n</code></pre>"},{"location":"command-line-tools/commands/docker/docker-deploy/#dry-run-deployment","title":"Dry run deployment","text":"<pre><code>wheels docker deploy kubernetes --dry-run\n</code></pre>"},{"location":"command-line-tools/commands/docker/docker-deploy/#deploy-with-resource-limits","title":"Deploy with resource limits","text":"<pre><code>wheels docker deploy swarm --cpu=2 --memory=4Gi --replicas=5\n</code></pre>"},{"location":"command-line-tools/commands/docker/docker-deploy/#what-it-does","title":"What It Does","text":"<ol> <li>Build and Tag:</li> <li>Builds Docker image if needed</li> <li>Tags with specified version</li> <li> <p>Validates image integrity</p> </li> <li> <p>Push to Registry:</p> </li> <li>Authenticates with registry</li> <li>Pushes image to registry</li> <li> <p>Verifies push success</p> </li> <li> <p>Deploy to Target:</p> </li> <li>Generates deployment manifests</li> <li>Applies configuration</li> <li>Monitors deployment status</li> <li> <p>Performs health checks</p> </li> <li> <p>Post-Deployment:</p> </li> <li>Runs database migrations</li> <li>Clears caches</li> <li>Sends notifications</li> </ol>"},{"location":"command-line-tools/commands/docker/docker-deploy/#deployment-targets","title":"Deployment Targets","text":""},{"location":"command-line-tools/commands/docker/docker-deploy/#local","title":"Local","text":"<ul> <li>Uses docker-compose</li> <li>Development/testing</li> <li>No registry required</li> </ul>"},{"location":"command-line-tools/commands/docker/docker-deploy/#docker-swarm","title":"Docker Swarm","text":"<ul> <li>Creates/updates services</li> <li>Load balancing</li> <li>Rolling updates</li> <li>Secrets management</li> </ul>"},{"location":"command-line-tools/commands/docker/docker-deploy/#kubernetes","title":"Kubernetes","text":"<ul> <li>Creates deployments, services, ingress</li> <li>ConfigMaps and Secrets</li> <li>Horizontal pod autoscaling</li> <li>Rolling updates</li> </ul>"},{"location":"command-line-tools/commands/docker/docker-deploy/#aws-ecs","title":"AWS ECS","text":"<ul> <li>Task definitions</li> <li>Service updates</li> <li>Load balancer configuration</li> <li>Auto-scaling</li> </ul>"},{"location":"command-line-tools/commands/docker/docker-deploy/#google-cloud-run","title":"Google Cloud Run","text":"<ul> <li>Serverless containers</li> <li>Automatic scaling</li> <li>HTTPS endpoints</li> </ul>"},{"location":"command-line-tools/commands/docker/docker-deploy/#azure-container-instances","title":"Azure Container Instances","text":"<ul> <li>Container groups</li> <li>Managed instances</li> <li>Integration with Azure services</li> </ul>"},{"location":"command-line-tools/commands/docker/docker-deploy/#configuration-files","title":"Configuration Files","text":""},{"location":"command-line-tools/commands/docker/docker-deploy/#kubernetes-example-k8syml","title":"Kubernetes Example (k8s.yml)","text":"<pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: wheels-app\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: wheels\n  template:\n    metadata:\n      labels:\n        app: wheels\n    spec:\n      containers:\n      - name: app\n        image: myregistry/wheels-app:latest\n        ports:\n        - containerPort: 8080\n        env:\n        - name: WHEELS_ENV\n          value: production\n</code></pre>"},{"location":"command-line-tools/commands/docker/docker-deploy/#docker-swarm-example-swarmyml","title":"Docker Swarm Example (swarm.yml)","text":"<pre><code>version: '3.8'\nservices:\n  app:\n    image: myregistry/wheels-app:latest\n    deploy:\n      replicas: 3\n      update_config:\n        parallelism: 1\n        delay: 10s\n      restart_policy:\n        condition: on-failure\n    ports:\n      - \"80:8080\"\n    secrets:\n      - db_password\n</code></pre>"},{"location":"command-line-tools/commands/docker/docker-deploy/#environment-management","title":"Environment Management","text":"<p>Environment variables can be provided via: 1. <code>--env-file</code> option 2. Platform-specific secrets 3. Configuration files 4. Command line overrides</p>"},{"location":"command-line-tools/commands/docker/docker-deploy/#health-checks","title":"Health Checks","text":"<p>The deployment includes health checks: - Readiness probes - Liveness probes - Startup probes - Custom health endpoints</p>"},{"location":"command-line-tools/commands/docker/docker-deploy/#rollback","title":"Rollback","text":"<p>To rollback a deployment: <pre><code>wheels docker deploy [target] --rollback\n</code></pre></p> <p>Or manually: <pre><code># Kubernetes\nkubectl rollout undo deployment/wheels-app\n\n# Docker Swarm\ndocker service rollback wheels-app\n</code></pre></p>"},{"location":"command-line-tools/commands/docker/docker-deploy/#use-cases","title":"Use Cases","text":"<ol> <li>Staging Deployments: Test production configurations</li> <li>Production Releases: Deploy new versions with zero downtime</li> <li>Scaling: Adjust replicas based on load</li> <li>Multi-Region: Deploy to multiple regions/zones</li> <li>Blue-Green Deployments: Switch between environments</li> </ol>"},{"location":"command-line-tools/commands/docker/docker-deploy/#notes","title":"Notes","text":"<ul> <li>Ensure Docker images are built before deployment</li> <li>Registry authentication must be configured</li> <li>Database migrations should be handled separately or via init containers</li> <li>Monitor deployment logs for troubleshooting</li> <li>Use <code>--dry-run</code> to preview changes before applying</li> </ul>"},{"location":"command-line-tools/commands/docker/docker-deploy/#troubleshooting","title":"Troubleshooting","text":"<p>Common issues: - Image not found: Ensure image is pushed to registry - Auth failures: Check registry credentials - Resource limits: Adjust CPU/memory settings - Port conflicts: Check service port mappings</p>"},{"location":"command-line-tools/commands/docker/docker-deploy/#see-also","title":"See Also","text":"<ul> <li>wheels docker init - Initialize Docker configuration</li> <li>wheels deploy - General deployment commands</li> <li>wheels deploy push - Push deployments</li> </ul>"},{"location":"command-line-tools/commands/docker/docker-init/","title":"wheels docker init","text":"<p>Initialize Docker configuration for your Wheels application.</p>"},{"location":"command-line-tools/commands/docker/docker-init/#synopsis","title":"Synopsis","text":"<pre><code>wheels docker init [options]\n</code></pre>"},{"location":"command-line-tools/commands/docker/docker-init/#description","title":"Description","text":"<p>The <code>wheels docker init</code> command creates Docker configuration files for containerizing your Wheels application. It generates a <code>Dockerfile</code>, <code>docker-compose.yml</code>, and supporting configuration files optimized for Wheels applications.</p>"},{"location":"command-line-tools/commands/docker/docker-init/#options","title":"Options","text":"Option Description Default <code>--engine</code> CFML engine (lucee5, lucee6, adobe2018, adobe2021, adobe2023) <code>lucee6</code> <code>--database</code> Database system (mysql, postgresql, sqlserver, none) <code>mysql</code> <code>--port</code> Application port <code>8080</code> <code>--with-nginx</code> Include Nginx reverse proxy <code>false</code> <code>--with-redis</code> Include Redis for caching <code>false</code> <code>--production</code> Generate production-ready configuration <code>false</code> <code>--force</code> Overwrite existing Docker files <code>false</code> <code>--help</code> Show help information"},{"location":"command-line-tools/commands/docker/docker-init/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/docker/docker-init/#basic-initialization","title":"Basic initialization","text":"<pre><code>wheels docker init\n</code></pre>"},{"location":"command-line-tools/commands/docker/docker-init/#initialize-with-adobe-coldfusion","title":"Initialize with Adobe ColdFusion","text":"<pre><code>wheels docker init --engine=adobe2023\n</code></pre>"},{"location":"command-line-tools/commands/docker/docker-init/#production-setup-with-nginx","title":"Production setup with Nginx","text":"<pre><code>wheels docker init --production --with-nginx --port=80\n</code></pre>"},{"location":"command-line-tools/commands/docker/docker-init/#initialize-with-postgresql","title":"Initialize with PostgreSQL","text":"<pre><code>wheels docker init --database=postgresql\n</code></pre>"},{"location":"command-line-tools/commands/docker/docker-init/#full-stack-with-redis","title":"Full stack with Redis","text":"<pre><code>wheels docker init --with-nginx --with-redis --database=postgresql\n</code></pre>"},{"location":"command-line-tools/commands/docker/docker-init/#what-it-does","title":"What It Does","text":"<ol> <li>Creates Dockerfile optimized for CFML applications:</li> <li>Base image selection based on engine</li> <li>Dependency installation</li> <li>Application file copying</li> <li> <p>Environment configuration</p> </li> <li> <p>Generates docker-compose.yml with:</p> </li> <li>Application service</li> <li>Database service (if selected)</li> <li>Nginx service (if selected)</li> <li>Redis service (if selected)</li> <li>Network configuration</li> <li> <p>Volume mappings</p> </li> <li> <p>Additional files:</p> </li> <li><code>.dockerignore</code> - Excludes unnecessary files</li> <li><code>docker-entrypoint.sh</code> - Container startup script</li> <li>Configuration files for selected services</li> </ol>"},{"location":"command-line-tools/commands/docker/docker-init/#generated-files","title":"Generated Files","text":""},{"location":"command-line-tools/commands/docker/docker-init/#dockerfile-example","title":"Dockerfile Example","text":"<pre><code>FROM ortussolutions/commandbox:lucee5\n\n# Set working directory\nWORKDIR /app\n\n# Copy application files\nCOPY . /app\n\n# Install dependencies\nRUN box install\n\n# Expose port\nEXPOSE 8080\n\n# Start server\nCMD [\"box\", \"server\", \"start\", \"--console\"]\n</code></pre>"},{"location":"command-line-tools/commands/docker/docker-init/#docker-composeyml-example","title":"docker-compose.yml Example","text":"<pre><code>version: '3.8'\n\nservices:\n  app:\n    build: .\n    ports:\n      - \"8080:8080\"\n    environment:\n      - WHEELS_ENV=development\n      - DB_HOST=database\n    depends_on:\n      - database\n    volumes:\n      - ./:/app\n\n  database:\n    image: mysql:8.0\n    environment:\n      - MYSQL_ROOT_PASSWORD=wheels\n      - MYSQL_DATABASE=wheels_app\n    volumes:\n      - db_data:/var/lib/mysql\n\nvolumes:\n  db_data:\n</code></pre>"},{"location":"command-line-tools/commands/docker/docker-init/#configuration-options","title":"Configuration Options","text":""},{"location":"command-line-tools/commands/docker/docker-init/#development-mode","title":"Development Mode","text":"<ul> <li>Hot reload enabled</li> <li>Source code mounted as volume</li> <li>Debug ports exposed</li> <li>Development databases</li> </ul>"},{"location":"command-line-tools/commands/docker/docker-init/#production-mode","title":"Production Mode","text":"<ul> <li>Optimized image size</li> <li>Security hardening</li> <li>Health checks</li> <li>Restart policies</li> <li>Resource limits</li> </ul>"},{"location":"command-line-tools/commands/docker/docker-init/#use-cases","title":"Use Cases","text":"<ol> <li>Local Development: Consistent development environment across team</li> <li>Testing: Isolated test environments with different configurations</li> <li>CI/CD: Containerized testing in pipelines</li> <li>Deployment: Production-ready containers for cloud deployment</li> </ol>"},{"location":"command-line-tools/commands/docker/docker-init/#environment-variables","title":"Environment Variables","text":"<p>Common environment variables configured:</p> Variable Description <code>WHEELS_ENV</code> Application environment <code>WHEELS_DATASOURCE</code> Database connection name <code>DB_HOST</code> Database hostname <code>DB_PORT</code> Database port <code>DB_NAME</code> Database name <code>DB_USER</code> Database username <code>DB_PASSWORD</code> Database password"},{"location":"command-line-tools/commands/docker/docker-init/#notes","title":"Notes","text":"<ul> <li>Requires Docker and Docker Compose installed</li> <li>Database passwords are set to defaults in development</li> <li>Production configurations should use secrets management</li> <li>The command detects existing Docker files and prompts before overwriting</li> </ul>"},{"location":"command-line-tools/commands/docker/docker-init/#see-also","title":"See Also","text":"<ul> <li>wheels docker deploy - Deploy using Docker</li> <li>wheels deploy - General deployment commands</li> <li>wheels ci init - Initialize CI configuration</li> </ul>"},{"location":"command-line-tools/commands/documentation/docs-generate/","title":"docs generate","text":"<p>Generates documentation for your Wheels application from code comments and annotations.</p>"},{"location":"command-line-tools/commands/documentation/docs-generate/#usage","title":"Usage","text":"<pre><code>wheels docs generate [--output=&lt;dir&gt;] [--format=&lt;format&gt;] [--template=&lt;template&gt;] [--include=&lt;components&gt;] [--serve] [--verbose]\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-generate/#parameters","title":"Parameters","text":"<ul> <li><code>--output</code> - (Optional) Output directory for docs. Default: <code>docs/api</code></li> <li><code>--format</code> - (Optional) Documentation format: <code>html</code>, <code>json</code>, <code>markdown</code>. Default: <code>html</code></li> <li><code>--template</code> - (Optional) Documentation template to use: <code>default</code>, <code>bootstrap</code>, <code>minimal</code>. Default: <code>default</code></li> <li><code>--include</code> - (Optional) Components to include: <code>models</code>, <code>controllers</code>, <code>views</code>, <code>services</code>. Default: <code>models,controllers</code></li> <li><code>--serve</code> - (Optional) Start local server after generation</li> <li><code>--verbose</code> - (Optional) Verbose output</li> </ul>"},{"location":"command-line-tools/commands/documentation/docs-generate/#description","title":"Description","text":"<p>The <code>docs generate</code> command automatically creates comprehensive documentation from your Wheels application by parsing:</p> <ul> <li>JavaDoc-style comments in CFCs</li> <li>Model relationships and validations</li> <li>Controller actions and routes</li> <li>Configuration files</li> <li>Database schema</li> <li>API endpoints</li> </ul>"},{"location":"command-line-tools/commands/documentation/docs-generate/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/documentation/docs-generate/#generate-complete-documentation","title":"Generate complete documentation","text":"<pre><code>wheels docs generate\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-generate/#generate-markdown-docs","title":"Generate markdown docs","text":"<pre><code>wheels docs generate --format=markdown\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-generate/#generate-with-bootstrap-template","title":"Generate with Bootstrap template","text":"<pre><code>wheels docs generate --template=bootstrap\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-generate/#generate-and-serve-immediately","title":"Generate and serve immediately","text":"<pre><code>wheels docs generate --serve\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-generate/#generate-specific-components-with-verbose-output","title":"Generate specific components with verbose output","text":"<pre><code>wheels docs generate --include=models,controllers,services --verbose\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-generate/#custom-output-directory","title":"Custom output directory","text":"<pre><code>wheels docs generate --output=public/api-docs --format=html\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-generate/#documentation-sources","title":"Documentation Sources","text":""},{"location":"command-line-tools/commands/documentation/docs-generate/#model-documentation","title":"Model Documentation","text":"<pre><code>/**\n * User model for authentication and authorization\n * \n * @author John Doe\n * @since 1.0.0\n */\ncomponent extends=\"Model\" {\n\n    /**\n     * Initialize user relationships and validations\n     * @hint Sets up the user model configuration\n     */\n    function config() {\n        // Relationships\n        hasMany(\"orders\");\n        belongsTo(\"role\");\n\n        // Validations\n        validatesPresenceOf(\"email,firstName,lastName\");\n        validatesUniquenessOf(\"email\");\n    }\n\n    /**\n     * Find active users with recent activity\n     * \n     * @param days Number of days to look back\n     * @return query Active users\n     */\n    public query function findActive(numeric days=30) {\n        return findAll(\n            where=\"lastLoginAt &gt;= :date\",\n            params={date: dateAdd(\"d\", -arguments.days, now())}\n        );\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-generate/#controller-documentation","title":"Controller Documentation","text":"<pre><code>/**\n * Handles user management operations\n * \n * @displayname User Controller\n * @namespace /users\n */\ncomponent extends=\"Controller\" {\n\n    /**\n     * Display paginated list of users\n     * \n     * @hint GET /users\n     * @access public\n     * @return void\n     */\n    function index() {\n        param name=\"params.page\" default=\"1\";\n        users = model(\"user\").findAll(\n            page=params.page,\n            perPage=20,\n            order=\"createdAt DESC\"\n        );\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-generate/#generated-output","title":"Generated Output","text":""},{"location":"command-line-tools/commands/documentation/docs-generate/#html-format","title":"HTML Format","text":"<pre><code>/docs/generated/\n\u251c\u2500\u2500 index.html\n\u251c\u2500\u2500 assets/\n\u2502   \u251c\u2500\u2500 css/\n\u2502   \u2514\u2500\u2500 js/\n\u251c\u2500\u2500 models/\n\u2502   \u251c\u2500\u2500 index.html\n\u2502   \u2514\u2500\u2500 user.html\n\u251c\u2500\u2500 controllers/\n\u2502   \u251c\u2500\u2500 index.html\n\u2502   \u2514\u2500\u2500 users.html\n\u251c\u2500\u2500 api/\n\u2502   \u2514\u2500\u2500 endpoints.html\n\u2514\u2500\u2500 database/\n    \u2514\u2500\u2500 schema.html\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-generate/#documentation-includes","title":"Documentation includes:","text":"<ul> <li>Overview: Application structure and architecture</li> <li>Models: Properties, methods, relationships, validations</li> <li>Controllers: Actions, filters, routes</li> <li>API Reference: Endpoints, parameters, responses</li> <li>Database Schema: Tables, columns, indexes</li> <li>Configuration: Settings and environment variables</li> </ul>"},{"location":"command-line-tools/commands/documentation/docs-generate/#output-example","title":"Output Example","text":"<pre><code>Generating documentation...\n========================\n\nScanning source files... \u2713\n\u2713 Found 15 models\n\u2713 Found 12 controllers  \n\u2713 Found 45 routes\n\u2713 Found 8 API endpoints\n\nProcessing documentation...\n\u2713 Extracting comments\n\u2713 Building relationships\n\u2713 Generating diagrams\n\u2713 Creating index\n\nWriting documentation...\n\u2713 HTML files generated\n\u2713 Assets copied\n\u2713 Search index created\n\nDocumentation generated successfully!\n- Output: /docs/generated/\n- Files: 82\n- Size: 2.4 MB\n\nView documentation:\n- Local: file:///path/to/docs/generated/index.html\n- Serve: wheels docs serve\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-generate/#documentation-features","title":"Documentation Features","text":""},{"location":"command-line-tools/commands/documentation/docs-generate/#auto-generated-content","title":"Auto-generated Content","text":"<ul> <li>Class hierarchies and inheritance</li> <li>Method signatures and parameters</li> <li>Property types and defaults</li> <li>Relationship diagrams</li> <li>Route mappings</li> <li>Database ERD</li> </ul>"},{"location":"command-line-tools/commands/documentation/docs-generate/#search-functionality","title":"Search Functionality","text":"<pre><code>// Built-in search in HTML docs\n{\n  \"searchable\": true,\n  \"index\": \"lunr\",\n  \"fields\": [\"title\", \"content\", \"tags\"]\n}\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-generate/#custom-themes","title":"Custom Themes","text":"<p>Configure in <code>/config/docs-theme.json</code>: <pre><code>{\n  \"theme\": \"custom\",\n  \"colors\": {\n    \"primary\": \"#007bff\",\n    \"secondary\": \"#6c757d\"\n  },\n  \"logo\": \"/assets/logo.png\",\n  \"favicon\": \"/assets/favicon.ico\",\n  \"customCSS\": \"/assets/custom.css\"\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/documentation/docs-generate/#integration","title":"Integration","text":""},{"location":"command-line-tools/commands/documentation/docs-generate/#cicd-documentation","title":"CI/CD Documentation","text":"<pre><code># Generate docs on every commit\n- name: Generate Docs\n  run: |\n    wheels docs generate --format=html\n    wheels docs generate --format=markdown --output=wiki/\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-generate/#git-hooks","title":"Git Hooks","text":"<pre><code>#!/bin/bash\n# pre-commit hook\nwheels docs generate --include=api --format=json\ngit add docs/api/openapi.json\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-generate/#notes","title":"Notes","text":"<ul> <li>Documentation is generated from code comments</li> <li>Use consistent JavaDoc format for best results</li> <li>Private methods are excluded by default</li> <li>Images and diagrams are auto-generated</li> <li>Supports custom templates and themes</li> </ul>"},{"location":"command-line-tools/commands/documentation/docs-serve/","title":"docs serve","text":"<p>Serves generated documentation locally for development and review.</p>"},{"location":"command-line-tools/commands/documentation/docs-serve/#usage","title":"Usage","text":"<pre><code>wheels docs serve [--root=&lt;dir&gt;] [--port=&lt;port&gt;] [--open] [--watch]\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-serve/#parameters","title":"Parameters","text":"<ul> <li><code>--root</code> - (Optional) Root directory to serve. Default: <code>docs/api</code></li> <li><code>--port</code> - (Optional) Port to serve on. Default: <code>35729</code></li> <li><code>--open</code> - (Optional) Open browser automatically. Default: <code>true</code></li> <li><code>--watch</code> - (Optional) Watch for changes and regenerate. Default: <code>false</code></li> </ul>"},{"location":"command-line-tools/commands/documentation/docs-serve/#description","title":"Description","text":"<p>The <code>docs serve</code> command starts a local web server to preview your generated documentation. It includes:</p> <ul> <li>Live reload on documentation changes</li> <li>Search functionality</li> <li>Responsive design preview</li> <li>Print-friendly styling</li> <li>Offline access support</li> </ul>"},{"location":"command-line-tools/commands/documentation/docs-serve/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/documentation/docs-serve/#basic-documentation-server","title":"Basic documentation server","text":"<pre><code>wheels docs serve\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-serve/#serve-on-different-port","title":"Serve on different port","text":"<pre><code>wheels docs serve --port=8080\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-serve/#serve-from-custom-directory","title":"Serve from custom directory","text":"<pre><code>wheels docs serve --root=public/api-docs\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-serve/#serve-with-file-watching","title":"Serve with file watching","text":"<pre><code>wheels docs serve --watch\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-serve/#serve-without-opening-browser","title":"Serve without opening browser","text":"<pre><code>wheels docs serve --open=false\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-serve/#custom-configuration","title":"Custom configuration","text":"<pre><code>wheels docs serve --root=docs/generated --port=3000 --watch\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-serve/#server-output","title":"Server Output","text":"<pre><code>\ud83c\udf10 Starting documentation server...\n\nServer started successfully!\n- URL: http://localhost:35729\n- Root: /docs/api\n- Auto-open: enabled\n\nPress Ctrl+C to stop the server\n</code></pre> <p>If documentation is not found: <pre><code>Documentation directory not found: /docs/api\n\n\ud83d\udca1 Tip: Run 'wheels docs generate' first to create documentation\n</code></pre></p>"},{"location":"command-line-tools/commands/documentation/docs-serve/#features","title":"Features","text":""},{"location":"command-line-tools/commands/documentation/docs-serve/#file-watching","title":"File Watching","text":"<p>When <code>--watch</code> is enabled, the server monitors documentation files for changes and can trigger regeneration.</p>"},{"location":"command-line-tools/commands/documentation/docs-serve/#browser-integration","title":"Browser Integration","text":"<p>With <code>--open=true</code> (default), the server automatically opens your default browser to the documentation URL.</p>"},{"location":"command-line-tools/commands/documentation/docs-serve/#development-workflow","title":"Development Workflow","text":""},{"location":"command-line-tools/commands/documentation/docs-serve/#typical-usage","title":"Typical usage:","text":"<pre><code># Step 1: Generate documentation\nwheels docs generate\n\n# Step 2: Serve documentation\nwheels docs serve\n\n# Step 3: Make changes and regenerate\nwheels docs generate\n# Browser will show updated docs\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-serve/#custom-workflow","title":"Custom workflow:","text":"<pre><code># Generate and serve from custom location\nwheels docs generate --output=public/docs\nwheels docs serve --root=public/docs --port=8080\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-serve/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/documentation/docs-serve/#port-already-in-use","title":"Port already in use","text":"<pre><code># Use a different port\nwheels docs serve --port=8081\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-serve/#documentation-not-found","title":"Documentation not found","text":"<pre><code># Make sure to generate docs first\nwheels docs generate\nwheels docs serve\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-serve/#browser-doesnt-open","title":"Browser doesn't open","text":"<pre><code># Manually navigate to the URL shown\n# Or check your default browser settings\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs-serve/#notes","title":"Notes","text":"<ul> <li>Server is intended for development/review only</li> <li>For production, deploy static files to web server</li> <li>Large documentation sets may take time to generate</li> <li>Browser must support JavaScript for search</li> <li>Offline mode caches documentation locally</li> </ul>"},{"location":"command-line-tools/commands/documentation/docs/","title":"wheels docs","text":"<p>Base command for documentation generation and management.</p> <p>Note: This command is currently broken. Use subcommands directly.</p>"},{"location":"command-line-tools/commands/documentation/docs/#synopsis","title":"Synopsis","text":"<pre><code>wheels docs [subcommand] [options]\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs/#description","title":"Description","text":"<p>The <code>wheels docs</code> command provides documentation tools for Wheels applications. It generates API documentation, manages inline documentation, and serves documentation locally. While the base command is currently broken, the subcommands <code>generate</code> and <code>serve</code> work correctly.</p>"},{"location":"command-line-tools/commands/documentation/docs/#subcommands","title":"Subcommands","text":"Command Description Status <code>generate</code> Generate documentation \u2713 Working <code>serve</code> Serve documentation locally \u2713 Working"},{"location":"command-line-tools/commands/documentation/docs/#options","title":"Options","text":"Option Description <code>--help</code> Show help information <code>--version</code> Show version information"},{"location":"command-line-tools/commands/documentation/docs/#current-status","title":"Current Status","text":"<p>The base <code>wheels docs</code> command is temporarily unavailable due to a known issue. Please use the subcommands directly:</p> <ul> <li><code>wheels docs generate</code> - Generate documentation</li> <li><code>wheels docs serve</code> - Serve documentation</li> </ul>"},{"location":"command-line-tools/commands/documentation/docs/#expected-behavior-when-fixed","title":"Expected Behavior (When Fixed)","text":"<p>When operational, running <code>wheels docs</code> without subcommands would:</p> <ol> <li>Check for existing documentation</li> <li>Generate if missing or outdated</li> <li>Provide quick access links</li> <li>Show documentation statistics</li> </ol> <p>Expected output: <pre><code>Wheels Documentation Status\n==========================\n\nGenerated: 2024-01-15 10:30:45\nFiles: 156 documented (89%)\nCoverage: 1,234 of 1,456 functions\n\nRecent Changes:\n- UserModel.cfc: 5 new methods\n- OrderController.cfc: Updated examples\n- config/routes.cfm: New route docs\n\nQuick Actions:\n- View docs: http://localhost:4000\n- Regenerate: wheels docs generate\n- Check coverage: wheels docs coverage\n</code></pre></p>"},{"location":"command-line-tools/commands/documentation/docs/#workaround","title":"Workaround","text":"<p>Until the base command is fixed, use this workflow:</p> <pre><code># Generate documentation\nwheels docs generate\n\n# Serve documentation\nwheels docs serve\n\n# Or combine in one line\nwheels docs generate &amp;&amp; wheels docs serve\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs/#documentation-system","title":"Documentation System","text":""},{"location":"command-line-tools/commands/documentation/docs/#supported-formats","title":"Supported Formats","text":"<ul> <li>JavaDoc-style comments</li> <li>Markdown files</li> <li>Inline documentation</li> <li>README files</li> </ul>"},{"location":"command-line-tools/commands/documentation/docs/#documentation-sources","title":"Documentation Sources","text":"<pre><code>/app/\n\u251c\u2500\u2500 models/          # Model documentation\n\u251c\u2500\u2500 controllers/     # Controller documentation\n\u251c\u2500\u2500 views/          # View helpers documentation\n\u251c\u2500\u2500 config/         # Configuration docs\n\u251c\u2500\u2500 docs/           # Additional documentation\n\u2514\u2500\u2500 README.md       # Project overview\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs/#configuration","title":"Configuration","text":"<p>Configure in <code>.wheels-docs.json</code>:</p> <pre><code>{\n  \"docs\": {\n    \"output\": \"./documentation\",\n    \"format\": \"html\",\n    \"theme\": \"wheels-default\",\n    \"include\": [\n      \"app/**/*.cfc\",\n      \"app/**/*.cfm\",\n      \"docs/**/*.md\"\n    ],\n    \"exclude\": [\n      \"vendor/**\",\n      \"tests/**\"\n    ],\n    \"options\": {\n      \"private\": false,\n      \"inherited\": true,\n      \"examples\": true\n    }\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs/#documentation-comments","title":"Documentation Comments","text":""},{"location":"command-line-tools/commands/documentation/docs/#component-documentation","title":"Component Documentation","text":"<pre><code>/**\n * User model for authentication and profile management\n * \n * @author John Doe\n * @since 1.0.0\n */\ncomponent extends=\"Model\" {\n\n    /**\n     * Authenticate user with credentials\n     * \n     * @username The user's username or email\n     * @password The user's password\n     * @return User object if authenticated, false otherwise\n     * \n     * @example\n     * user = model(\"User\").authenticate(\"john@example.com\", \"secret\");\n     * if (isObject(user)) {\n     *     // Login successful\n     * }\n     */\n    public any function authenticate(required string username, required string password) {\n        // Implementation\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs/#inline-documentation","title":"Inline Documentation","text":"<pre><code>&lt;!--- \n    @doc\n    This view displays the user profile page\n\n    @requires User object in 'user' variable\n    @layout layouts/main\n---&gt;\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs/#integration","title":"Integration","text":""},{"location":"command-line-tools/commands/documentation/docs/#auto-generation","title":"Auto-generation","text":"<p>Set up automatic documentation generation:</p> <pre><code>// package.json\n{\n  \"scripts\": {\n    \"docs:build\": \"wheels docs generate\",\n    \"docs:watch\": \"wheels docs generate --watch\",\n    \"docs:serve\": \"wheels docs serve\"\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs/#cicd","title":"CI/CD","text":"<pre><code>- name: Generate documentation\n  run: |\n    wheels docs generate\n    wheels docs coverage --min=80\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs/#when-to-use-subcommands","title":"When to Use Subcommands","text":""},{"location":"command-line-tools/commands/documentation/docs/#generate-documentation","title":"Generate Documentation","text":"<p>Use when: - Adding new components - Updating documentation comments - Before releases - Setting up documentation site</p> <pre><code>wheels docs generate\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs/#serve-documentation","title":"Serve Documentation","text":"<p>Use when: - Reviewing documentation - Local development - Team documentation access - API exploration</p> <pre><code>wheels docs serve\n</code></pre>"},{"location":"command-line-tools/commands/documentation/docs/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/documentation/docs/#base-command-not-working","title":"Base Command Not Working","text":"<p>Error: \"wheels docs command is broken\"</p> <p>Solution: Use subcommands directly: <pre><code>wheels docs generate\nwheels docs serve\n</code></pre></p>"},{"location":"command-line-tools/commands/documentation/docs/#missing-documentation","title":"Missing Documentation","text":"<p>If documentation is not generated: 1. Check file patterns in config 2. Verify comment format 3. Look for syntax errors 4. Check exclude patterns</p>"},{"location":"command-line-tools/commands/documentation/docs/#future-plans","title":"Future Plans","text":"<p>The base command will be restored to provide: - Documentation dashboard - Coverage reports - Quick statistics - Change detection - Auto-serve option</p>"},{"location":"command-line-tools/commands/documentation/docs/#notes","title":"Notes","text":"<ul> <li>Subcommands work independently</li> <li>Documentation is generated incrementally</li> <li>Large projects may take time to document</li> <li>Keep documentation comments updated</li> </ul>"},{"location":"command-line-tools/commands/documentation/docs/#see-also","title":"See Also","text":"<ul> <li>wheels docs generate - Generate documentation</li> <li>wheels docs serve - Serve documentation</li> <li>Documentation Best Practices</li> <li>API Documentation Guide</li> </ul>"},{"location":"command-line-tools/commands/environment/console/","title":"wheels console","text":"<p>Start an interactive REPL console with Wheels application context loaded.</p>"},{"location":"command-line-tools/commands/environment/console/#synopsis","title":"Synopsis","text":"<pre><code>wheels console [options]\n</code></pre>"},{"location":"command-line-tools/commands/environment/console/#description","title":"Description","text":"<p>The <code>wheels console</code> command starts an interactive Read-Eval-Print Loop (REPL) with your Wheels application context fully loaded. This allows you to interact with your models, run queries, test helper functions, and debug your application in real-time.</p> <p>The console requires your Wheels server to be running as it connects via HTTP to maintain the proper application context.</p>"},{"location":"command-line-tools/commands/environment/console/#options","title":"Options","text":""},{"location":"command-line-tools/commands/environment/console/#environment","title":"<code>environment</code>","text":"<ul> <li>Type: String</li> <li>Default: <code>development</code></li> <li>Description: Environment to load (development, testing, production)</li> <li>Example: <code>wheels console environment=testing</code></li> </ul>"},{"location":"command-line-tools/commands/environment/console/#execute","title":"<code>execute</code>","text":"<ul> <li>Type: String</li> <li>Description: Execute a single command and exit</li> <li>Example: <code>wheels console execute=\"model('User').count()\"</code></li> </ul>"},{"location":"command-line-tools/commands/environment/console/#script","title":"<code>script</code>","text":"<ul> <li>Type: Boolean</li> <li>Default: <code>true</code></li> <li>Description: Use CFScript mode (false for tag mode)</li> <li>Example: <code>wheels console script=false</code></li> </ul>"},{"location":"command-line-tools/commands/environment/console/#directory","title":"<code>directory</code>","text":"<ul> <li>Type: String</li> <li>Default: Current working directory</li> <li>Description: Application directory</li> <li>Example: <code>wheels console directory=/path/to/app</code></li> </ul>"},{"location":"command-line-tools/commands/environment/console/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/environment/console/#basic-usage","title":"Basic Usage","text":"<pre><code># Start interactive console\nwheels console\n\n# Start in testing environment\nwheels console environment=testing\n\n# Execute single command\nwheels console execute=\"model('User').findAll().recordCount\"\n\n# Start in tag mode\nwheels console script=false\n</code></pre>"},{"location":"command-line-tools/commands/environment/console/#console-commands","title":"Console Commands","text":"<p>Once in the console, you can use these special commands:</p> <ul> <li><code>help</code> or <code>?</code> - Show help information</li> <li><code>examples</code> - Show usage examples</li> <li><code>script</code> - Switch to CFScript mode</li> <li><code>tag</code> - Switch to tag mode</li> <li><code>clear</code> or <code>cls</code> - Clear screen</li> <li><code>history</code> - Show command history</li> <li><code>exit</code>, <code>quit</code>, or <code>q</code> - Exit console</li> </ul>"},{"location":"command-line-tools/commands/environment/console/#working-with-models","title":"Working with Models","text":"<pre><code>// Find a user by ID\nuser = model(\"User\").findByKey(1)\n\n// Update user properties\nuser.name = \"John Doe\"\nuser.email = \"john@example.com\"\nuser.save()\n\n// Create new user\nnewUser = model(\"User\").create(\n    name=\"Jane Smith\",\n    email=\"jane@example.com\",\n    password=\"secure123\"\n)\n\n// Find users with conditions\nactiveUsers = model(\"User\").findAll(\n    where=\"active=1 AND createdAt &gt;= '#dateAdd('d', -7, now())#'\",\n    order=\"createdAt DESC\"\n)\n\n// Delete a user\nmodel(\"User\").deleteByKey(5)\n</code></pre>"},{"location":"command-line-tools/commands/environment/console/#using-helper-functions","title":"Using Helper Functions","text":"<pre><code>// Text helpers\npluralize(\"person\")  // Returns: \"people\"\nsingularize(\"users\") // Returns: \"user\"\ncapitalize(\"hello world\") // Returns: \"Hello World\"\n\n// Date helpers\ntimeAgoInWords(dateAdd('h', -2, now())) // Returns: \"2 hours ago\"\ndistanceOfTimeInWords(now(), dateAdd('d', 7, now())) // Returns: \"7 days\"\n\n// URL helpers\nurlFor(route=\"user\", key=1) // Generate URL for user route\nlinkTo(text=\"Home\", route=\"root\") // Generate link HTML\n</code></pre>"},{"location":"command-line-tools/commands/environment/console/#direct-database-queries","title":"Direct Database Queries","text":"<pre><code>// Run custom SQL query\nresults = query(\"\n    SELECT u.*, COUNT(p.id) as post_count \n    FROM users u \n    LEFT JOIN posts p ON u.id = p.userId \n    GROUP BY u.id\n\")\n\n// Simple count query\nuserCount = query(\"SELECT COUNT(*) as total FROM users\").total\n</code></pre>"},{"location":"command-line-tools/commands/environment/console/#inspecting-application-state","title":"Inspecting Application State","text":"<pre><code>// View application settings\napplication.wheels.environment\napplication.wheels.dataSourceName\napplication.wheels.version\n\n// Check loaded models\nstructKeyArray(application.wheels.models)\n\n// View routes (if available)\napplication.wheels.routes\n</code></pre>"},{"location":"command-line-tools/commands/environment/console/#how-it-works","title":"How It Works","text":"<ol> <li>The console connects to your running Wheels server via HTTP</li> <li>Code is sent to a special console endpoint for execution</li> <li>The code runs in the full application context with access to all models and helpers</li> <li>Results are returned and displayed in the console</li> <li>Variables persist between commands during the session</li> </ol>"},{"location":"command-line-tools/commands/environment/console/#requirements","title":"Requirements","text":"<ul> <li>Wheels server must be running (<code>wheels server start</code>)</li> <li>Server must be accessible at the configured URL</li> <li>Application must be in development, testing, or maintenance mode</li> </ul>"},{"location":"command-line-tools/commands/environment/console/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/environment/console/#server-must-be-running-to-use-console","title":"\"Server must be running to use console\"","text":"<p>Start your server first: <pre><code>wheels server start\nwheels console\n</code></pre></p>"},{"location":"command-line-tools/commands/environment/console/#failed-to-initialize-wheels-context","title":"\"Failed to initialize Wheels context\"","text":"<ol> <li>Check that your server is running: <code>wheels server status</code></li> <li>Verify the server URL is correct</li> <li>Ensure your application is not in production mode</li> </ol>"},{"location":"command-line-tools/commands/environment/console/#code-execution-errors","title":"Code execution errors","text":"<ul> <li>Check syntax - console shows line numbers for errors</li> <li>Remember you're in CFScript mode by default</li> <li>Use <code>tag</code> command to switch to tag mode if needed</li> </ul>"},{"location":"command-line-tools/commands/environment/console/#best-practices","title":"Best Practices","text":"<ol> <li>Use for debugging: Test model methods and queries before implementing</li> <li>Data exploration: Quickly inspect and modify data during development</li> <li>Testing helpers: Verify helper function outputs</li> <li>Learning tool: Explore Wheels functionality interactively</li> <li>Avoid in production: Console should not be accessible in production mode</li> </ol>"},{"location":"command-line-tools/commands/environment/console/#security-notes","title":"Security Notes","text":"<ul> <li>Console is only available in development, testing, and maintenance modes</li> <li>Never expose console access in production environments</li> <li>Be cautious when manipulating production data</li> </ul>"},{"location":"command-line-tools/commands/environment/console/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels runner</code> - Execute script files</li> <li><code>wheels environment</code> - Manage environment settings</li> <li><code>wheels server start</code> - Start the server</li> </ul>"},{"location":"command-line-tools/commands/environment/console/#see-also","title":"See Also","text":"<ul> <li>Wheels Model Documentation</li> <li>Wheels Helper Functions</li> </ul>"},{"location":"command-line-tools/commands/environment/env-list/","title":"wheels env list","text":"<p>List all available environments for your Wheels application.</p>"},{"location":"command-line-tools/commands/environment/env-list/#synopsis","title":"Synopsis","text":"<pre><code>wheels env list [options]\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-list/#description","title":"Description","text":"<p>The <code>wheels env list</code> command displays all configured environments in your Wheels application. It shows environment details, current active environment, and configuration status.</p>"},{"location":"command-line-tools/commands/environment/env-list/#options","title":"Options","text":"Option Description Default <code>--format</code> Output format (table, json, yaml) <code>table</code> <code>--verbose</code> Show detailed configuration <code>false</code> <code>--check</code> Validate environment configurations <code>false</code> <code>--filter</code> Filter by environment type All <code>--sort</code> Sort by (name, type, modified) <code>name</code> <code>--help</code> Show help information"},{"location":"command-line-tools/commands/environment/env-list/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/environment/env-list/#list-all-environments","title":"List all environments","text":"<pre><code>wheels env list\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-list/#show-detailed-information","title":"Show detailed information","text":"<pre><code>wheels env list --verbose\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-list/#output-as-json","title":"Output as JSON","text":"<pre><code>wheels env list --format=json\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-list/#check-environment-validity","title":"Check environment validity","text":"<pre><code>wheels env list --check\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-list/#filter-production-environments","title":"Filter production environments","text":"<pre><code>wheels env list --filter=production\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-list/#output-example","title":"Output Example","text":""},{"location":"command-line-tools/commands/environment/env-list/#basic-output","title":"Basic Output","text":"<pre><code>Available Environments\n=====================\n\n  NAME          TYPE         DATABASE           STATUS\n  development * Development  wheels_dev         \u2713 Active\n  testing       Testing      wheels_test        \u2713 Valid\n  staging       Staging      wheels_staging     \u2713 Valid\n  production    Production   wheels_prod        \u2713 Valid\n  qa            Custom       wheels_qa          \u26a0 Issues\n\n* = Current environment\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-list/#verbose-output","title":"Verbose Output","text":"<pre><code>Available Environments\n=====================\n\ndevelopment * [Active]\n  Type:        Development\n  Database:    wheels_dev\n  Datasource:  wheels_development\n  Debug:       Enabled\n  Cache:       Disabled\n  Config:      /config/development/settings.cfm\n  Modified:    2024-01-10 14:23:45\n\ntesting\n  Type:        Testing\n  Database:    wheels_test\n  Datasource:  wheels_testing\n  Debug:       Enabled\n  Cache:       Disabled\n  Config:      /config/testing/settings.cfm\n  Modified:    2024-01-08 09:15:22\n\nstaging\n  Type:        Staging\n  Database:    wheels_staging\n  Datasource:  wheels_staging\n  Debug:       Partial\n  Cache:       Enabled\n  Config:      /config/staging/settings.cfm\n  Modified:    2024-01-12 16:45:00\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-list/#json-output-format","title":"JSON Output Format","text":"<pre><code>{\n  \"environments\": [\n    {\n      \"name\": \"development\",\n      \"type\": \"Development\",\n      \"active\": true,\n      \"database\": \"wheels_dev\",\n      \"datasource\": \"wheels_development\",\n      \"debug\": true,\n      \"cache\": false,\n      \"configPath\": \"/config/development/settings.cfm\",\n      \"lastModified\": \"2024-01-10T14:23:45Z\",\n      \"status\": \"valid\"\n    },\n    {\n      \"name\": \"production\",\n      \"type\": \"Production\",\n      \"active\": false,\n      \"database\": \"wheels_prod\",\n      \"datasource\": \"wheels_production\",\n      \"debug\": false,\n      \"cache\": true,\n      \"configPath\": \"/config/production/settings.cfm\",\n      \"lastModified\": \"2024-01-12T16:45:00Z\",\n      \"status\": \"valid\"\n    }\n  ],\n  \"current\": \"development\",\n  \"total\": 5\n}\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-list/#environment-status","title":"Environment Status","text":""},{"location":"command-line-tools/commands/environment/env-list/#status-indicators","title":"Status Indicators","text":"<ul> <li><code>\u2713 Valid</code> - Configuration is valid and working</li> <li><code>\u2713 Active</code> - Currently active environment</li> <li><code>\u26a0 Issues</code> - Configuration issues detected</li> <li><code>\u2717 Invalid</code> - Configuration errors</li> </ul>"},{"location":"command-line-tools/commands/environment/env-list/#validation-checks","title":"Validation Checks","text":"<p>When using <code>--check</code>: 1. Configuration file exists 2. Syntax is valid 3. Database connection works 4. Required settings present</p>"},{"location":"command-line-tools/commands/environment/env-list/#environment-types","title":"Environment Types","text":""},{"location":"command-line-tools/commands/environment/env-list/#standard-types","title":"Standard Types","text":"<ul> <li>Development: Local development</li> <li>Testing: Automated testing</li> <li>Staging: Pre-production</li> <li>Production: Live environment</li> </ul>"},{"location":"command-line-tools/commands/environment/env-list/#custom-types","title":"Custom Types","text":"<ul> <li>User-defined environments</li> <li>Special purpose configs</li> <li>Client-specific setups</li> </ul>"},{"location":"command-line-tools/commands/environment/env-list/#filtering-options","title":"Filtering Options","text":""},{"location":"command-line-tools/commands/environment/env-list/#by-type","title":"By Type","text":"<pre><code># Production environments only\nwheels env list --filter=production\n\n# Development environments\nwheels env list --filter=development\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-list/#by-status","title":"By Status","text":"<pre><code># Valid environments only\nwheels env list --filter=valid\n\n# Environments with issues\nwheels env list --filter=issues\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-list/#by-pattern","title":"By Pattern","text":"<pre><code># Environments containing \"prod\"\nwheels env list --filter=\"*prod*\"\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-list/#sorting-options","title":"Sorting Options","text":""},{"location":"command-line-tools/commands/environment/env-list/#by-name","title":"By Name","text":"<pre><code>wheels env list --sort=name\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-list/#by-type_1","title":"By Type","text":"<pre><code>wheels env list --sort=type\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-list/#by-last-modified","title":"By Last Modified","text":"<pre><code>wheels env list --sort=modified\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-list/#integration","title":"Integration","text":""},{"location":"command-line-tools/commands/environment/env-list/#script-usage","title":"Script Usage","text":"<pre><code># Get current environment\ncurrent=$(wheels env list --format=json | jq -r '.current')\n\n# List all environment names\nwheels env list --format=json | jq -r '.environments[].name'\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-list/#cicd-usage","title":"CI/CD Usage","text":"<pre><code># Verify environment exists\nif wheels env list | grep -q \"staging\"; then\n    wheels env switch staging\nfi\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-list/#environment-details","title":"Environment Details","text":"<p>When using <code>--verbose</code>, shows:</p> <ol> <li>Configuration:</li> <li>Config file path</li> <li>Last modified date</li> <li> <p>File size</p> </li> <li> <p>Database:</p> </li> <li>Database name</li> <li>Datasource name</li> <li> <p>Connection status</p> </li> <li> <p>Settings:</p> </li> <li>Debug mode</li> <li>Cache settings</li> <li> <p>Custom configurations</p> </li> <li> <p>Validation:</p> </li> <li>Syntax check</li> <li>Connection test</li> <li>Dependencies</li> </ol>"},{"location":"command-line-tools/commands/environment/env-list/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/environment/env-list/#no-environments-listed","title":"No Environments Listed","text":"<ul> <li>Check <code>/config/</code> directory</li> <li>Verify environment.cfm exists</li> <li>Run <code>wheels env setup</code> to create</li> </ul>"},{"location":"command-line-tools/commands/environment/env-list/#invalid-environment","title":"Invalid Environment","text":"<ul> <li>Check configuration syntax</li> <li>Verify database credentials</li> <li>Test database connection</li> </ul>"},{"location":"command-line-tools/commands/environment/env-list/#missing-current-environment","title":"Missing Current Environment","text":"<ul> <li>Check WHEELS_ENV variable</li> <li>Verify environment.cfm logic</li> <li>Set environment explicitly</li> </ul>"},{"location":"command-line-tools/commands/environment/env-list/#export-capabilities","title":"Export Capabilities","text":""},{"location":"command-line-tools/commands/environment/env-list/#export-configuration","title":"Export Configuration","text":"<pre><code># Export all environments\nwheels env list --format=json &gt; environments.json\n\n# Export for documentation\nwheels env list --format=markdown &gt; ENVIRONMENTS.md\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-list/#environment-comparison","title":"Environment Comparison","text":"<pre><code># Compare environments\nwheels env list --compare=development,production\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-list/#best-practices","title":"Best Practices","text":"<ol> <li>Regular Checks: Validate environments periodically</li> <li>Documentation: Keep environment purposes clear</li> <li>Consistency: Use consistent naming</li> <li>Cleanup: Remove unused environments</li> <li>Security: Don't expose production details</li> </ol>"},{"location":"command-line-tools/commands/environment/env-list/#notes","title":"Notes","text":"<ul> <li>Current environment marked with asterisk (*)</li> <li>Invalid environments shown but marked</li> <li>Verbose mode may expose sensitive data</li> <li>JSON format useful for automation</li> </ul>"},{"location":"command-line-tools/commands/environment/env-list/#see-also","title":"See Also","text":"<ul> <li>wheels env - Environment management overview</li> <li>wheels env setup - Setup new environment</li> <li>wheels env switch - Switch environments</li> <li>wheels config list - List configuration</li> </ul>"},{"location":"command-line-tools/commands/environment/env-setup/","title":"wheels env setup","text":"<p>Setup a new environment configuration for your Wheels application.</p>"},{"location":"command-line-tools/commands/environment/env-setup/#synopsis","title":"Synopsis","text":"<pre><code>wheels env setup [name] [options]\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-setup/#description","title":"Description","text":"<p>The <code>wheels env setup</code> command creates and configures new environments for your Wheels application. It generates environment-specific configuration files, database settings, and initializes the environment structure.</p>"},{"location":"command-line-tools/commands/environment/env-setup/#arguments","title":"Arguments","text":"Argument Description Default <code>name</code> Environment name (e.g., staging, qa, production) Required"},{"location":"command-line-tools/commands/environment/env-setup/#options","title":"Options","text":"Option Description Default <code>--base</code> Base environment to copy from <code>development</code> <code>--database</code> Database name <code>wheels_[name]</code> <code>--datasource</code> CF datasource name <code>wheels_[name]</code> <code>--debug</code> Enable debug mode <code>false</code> <code>--cache</code> Enable caching Based on name <code>--reload-password</code> Password for reload Random <code>--skip-database</code> Skip database creation <code>false</code> <code>--force</code> Overwrite existing environment <code>false</code> <code>--help</code> Show help information"},{"location":"command-line-tools/commands/environment/env-setup/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/environment/env-setup/#setup-basic-environment","title":"Setup basic environment","text":"<pre><code>wheels env setup staging\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-setup/#setup-with-custom-database","title":"Setup with custom database","text":"<pre><code>wheels env setup qa --database=wheels_qa_db --datasource=qa_datasource\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-setup/#copy-from-production-settings","title":"Copy from production settings","text":"<pre><code>wheels env setup staging --base=production\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-setup/#setup-with-specific-options","title":"Setup with specific options","text":"<pre><code>wheels env setup production --debug=false --cache=true --reload-password=secret123\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-setup/#skip-database-setup","title":"Skip database setup","text":"<pre><code>wheels env setup testing --skip-database\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-setup/#what-it-does","title":"What It Does","text":"<ol> <li> <p>Creates Configuration Directory:    <pre><code>/config/[environment]/\n\u2514\u2500\u2500 settings.cfm\n</code></pre></p> </li> <li> <p>Generates Settings File:</p> </li> <li>Database configuration</li> <li>Environment-specific settings</li> <li>Debug and cache options</li> <li> <p>Security settings</p> </li> <li> <p>Sets Up Database (unless skipped):</p> </li> <li>Creates database</li> <li>Configures datasource</li> <li> <p>Tests connection</p> </li> <li> <p>Updates Environment Registry:</p> </li> <li>Adds to available environments</li> <li>Sets up environment detection</li> </ol>"},{"location":"command-line-tools/commands/environment/env-setup/#generated-configuration","title":"Generated Configuration","text":"<p>Example <code>config/staging/settings.cfm</code>:</p> <pre><code>&lt;cfscript&gt;\n// Environment: staging\n// Generated: 2024-01-15 10:30:45\n\n// Database settings\nset(dataSourceName=\"wheels_staging\");\n\n// Environment settings\nset(environment=\"staging\");\nset(showDebugInformation=true);\nset(showErrorInformation=true);\n\n// Caching\nset(cacheFileChecking=false);\nset(cacheImages=false);\nset(cacheModelInitialization=false);\nset(cacheControllerInitialization=false);\nset(cacheRoutes=false);\nset(cacheActions=false);\nset(cachePages=false);\nset(cachePartials=false);\nset(cacheQueries=false);\n\n// Security\nset(reloadPassword=\"generated_secure_password\");\n\n// URLs\nset(urlRewriting=\"partial\");\n\n// Custom settings for staging\nset(sendEmailOnError=true);\nset(errorEmailAddress=\"dev-team@example.com\");\n&lt;/cfscript&gt;\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-setup/#environment-types","title":"Environment Types","text":""},{"location":"command-line-tools/commands/environment/env-setup/#development","title":"Development","text":"<ul> <li>Full debugging</li> <li>No caching</li> <li>Detailed errors</li> <li>Hot reload</li> </ul>"},{"location":"command-line-tools/commands/environment/env-setup/#testing","title":"Testing","text":"<ul> <li>Test database</li> <li>Debug enabled</li> <li>Isolated data</li> <li>Fast cleanup</li> </ul>"},{"location":"command-line-tools/commands/environment/env-setup/#staging","title":"Staging","text":"<ul> <li>Production-like</li> <li>Some debugging</li> <li>Performance testing</li> <li>Pre-production validation</li> </ul>"},{"location":"command-line-tools/commands/environment/env-setup/#production","title":"Production","text":"<ul> <li>No debugging</li> <li>Full caching</li> <li>Error handling</li> <li>Optimized performance</li> </ul>"},{"location":"command-line-tools/commands/environment/env-setup/#custom","title":"Custom","text":"<p>Create specialized environments: <pre><code>wheels env setup performance-testing --base=production --cache=false\n</code></pre></p>"},{"location":"command-line-tools/commands/environment/env-setup/#database-configuration","title":"Database Configuration","text":""},{"location":"command-line-tools/commands/environment/env-setup/#automatic-setup","title":"Automatic Setup","text":"<pre><code>wheels env setup staging\n# Creates: wheels_staging database\n# Datasource: wheels_staging\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-setup/#custom-database","title":"Custom Database","text":"<pre><code>wheels env setup staging \\\n  --database=staging_db \\\n  --datasource=myapp_staging\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-setup/#database-url","title":"Database URL","text":"<pre><code>wheels env setup production \\\n  --database-url=\"mysql://user:pass@host:3306/db\"\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-setup/#environment-variables","title":"Environment Variables","text":"<p>The command sets up support for:</p> <pre><code># .env.staging\nWHEELS_ENV=staging\nWHEELS_DATASOURCE=wheels_staging\nWHEELS_DEBUG=true\nWHEELS_CACHE=false\nDATABASE_URL=mysql://localhost/wheels_staging\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-setup/#configuration-inheritance","title":"Configuration Inheritance","text":"<p>Environments can inherit settings:</p> <pre><code>// config/staging/settings.cfm\n&lt;cfinclude template=\"../production/settings.cfm\"&gt;\n\n// Override specific settings\nset(showDebugInformation=true);\nset(cacheQueries=false);\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-setup/#validation","title":"Validation","text":"<p>After setup, the command validates:</p> <ol> <li>Configuration file syntax</li> <li>Database connectivity</li> <li>Directory permissions</li> <li>Environment detection</li> </ol>"},{"location":"command-line-tools/commands/environment/env-setup/#environment-detection","title":"Environment Detection","text":"<p>Configure how environment is detected:</p> <pre><code>// config/environment.cfm\nif (cgi.server_name contains \"staging\") {\n    set(environment=\"staging\");\n} else if (cgi.server_name contains \"qa\") {\n    set(environment=\"qa\");\n} else {\n    set(environment=\"production\");\n}\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-setup/#best-practices","title":"Best Practices","text":"<ol> <li>Naming Convention: Use clear, consistent names</li> <li>Base Selection: Choose appropriate base environment</li> <li>Security: Use strong reload passwords</li> <li>Documentation: Document environment purposes</li> <li>Testing: Test configuration before use</li> </ol>"},{"location":"command-line-tools/commands/environment/env-setup/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"command-line-tools/commands/environment/env-setup/#multiple-databases","title":"Multiple Databases","text":"<pre><code>wheels env setup reporting \\\n  --database=wheels_reporting \\\n  --read-database=wheels_replica\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-setup/#load-balancing","title":"Load Balancing","text":"<pre><code>wheels env setup production \\\n  --servers=web1,web2,web3 \\\n  --load-balancer=nginx\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-setup/#feature-flags","title":"Feature Flags","text":"<pre><code>// In settings.cfm\nset(features={\n    newCheckout: true,\n    betaAPI: false,\n    debugToolbar: true\n});\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-setup/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/environment/env-setup/#database-creation-failed","title":"Database Creation Failed","text":"<ul> <li>Check database permissions</li> <li>Verify connection settings</li> <li>Use <code>--skip-database</code> and create manually</li> </ul>"},{"location":"command-line-tools/commands/environment/env-setup/#configuration-errors","title":"Configuration Errors","text":"<ul> <li>Check syntax in settings.cfm</li> <li>Verify file permissions</li> <li>Review error logs</li> </ul>"},{"location":"command-line-tools/commands/environment/env-setup/#environment-not-detected","title":"Environment Not Detected","text":"<ul> <li>Check environment.cfm logic</li> <li>Verify server variables</li> <li>Test detection rules</li> </ul>"},{"location":"command-line-tools/commands/environment/env-setup/#migration","title":"Migration","text":""},{"location":"command-line-tools/commands/environment/env-setup/#from-existing-environment","title":"From Existing Environment","text":"<pre><code># Export existing config\nwheels env export production &gt; prod-config.json\n\n# Import to new environment\nwheels env setup staging --from-config=prod-config.json\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-setup/#use-cases","title":"Use Cases","text":"<ol> <li>Multi-Stage Pipeline: dev \u2192 staging \u2192 production</li> <li>Feature Testing: Isolated feature environments</li> <li>Performance Testing: Dedicated performance environment</li> <li>Client Demos: Separate demo environments</li> <li>A/B Testing: Multiple production variants</li> </ol>"},{"location":"command-line-tools/commands/environment/env-setup/#notes","title":"Notes","text":"<ul> <li>Environment names should be lowercase</li> <li>Avoid spaces in environment names</li> <li>Each environment needs unique database</li> <li>Restart application after setup</li> <li>Test thoroughly before using</li> </ul>"},{"location":"command-line-tools/commands/environment/env-setup/#see-also","title":"See Also","text":"<ul> <li>wheels env - Environment management overview</li> <li>wheels env list - List environments</li> <li>wheels env switch - Switch environments</li> <li>wheels config - Configuration management</li> </ul>"},{"location":"command-line-tools/commands/environment/env-switch/","title":"wheels env switch","text":"<p>Switch to a different environment in your Wheels application.</p>"},{"location":"command-line-tools/commands/environment/env-switch/#synopsis","title":"Synopsis","text":"<pre><code>wheels env switch [name] [options]\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-switch/#description","title":"Description","text":"<p>The <code>wheels env switch</code> command changes the active environment for your Wheels application. It updates configuration files, environment variables, and optionally restarts services to apply the new environment settings.</p>"},{"location":"command-line-tools/commands/environment/env-switch/#arguments","title":"Arguments","text":"Argument Description Default <code>name</code> Target environment name Required"},{"location":"command-line-tools/commands/environment/env-switch/#options","title":"Options","text":"Option Description Default <code>--check</code> Validate before switching <code>true</code> <code>--restart</code> Restart application after switch <code>false</code> <code>--backup</code> Backup current environment <code>false</code> <code>--force</code> Force switch even with issues <code>false</code> <code>--quiet</code> Suppress output <code>false</code> <code>--help</code> Show help information"},{"location":"command-line-tools/commands/environment/env-switch/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/environment/env-switch/#switch-to-staging","title":"Switch to staging","text":"<pre><code>wheels env switch staging\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-switch/#switch-with-application-restart","title":"Switch with application restart","text":"<pre><code>wheels env switch production --restart\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-switch/#force-switch-without-validation","title":"Force switch without validation","text":"<pre><code>wheels env switch testing --force\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-switch/#switch-with-backup","title":"Switch with backup","text":"<pre><code>wheels env switch production --backup\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-switch/#quiet-switch-for-scripts","title":"Quiet switch for scripts","text":"<pre><code>wheels env switch development --quiet\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-switch/#what-it-does","title":"What It Does","text":"<ol> <li>Validates Target Environment:</li> <li>Checks if environment exists</li> <li>Verifies configuration</li> <li> <p>Tests database connection</p> </li> <li> <p>Updates Configuration:</p> </li> <li>Sets WHEELS_ENV variable</li> <li>Updates .wheels-env file</li> <li> <p>Modifies environment.cfm if needed</p> </li> <li> <p>Applies Changes:</p> </li> <li>Clears caches</li> <li>Reloads configuration</li> <li> <p>Restarts services (if requested)</p> </li> <li> <p>Verifies Switch:</p> </li> <li>Confirms environment active</li> <li>Checks application health</li> <li>Reports status</li> </ol>"},{"location":"command-line-tools/commands/environment/env-switch/#output-example","title":"Output Example","text":"<pre><code>Switching environment...\n\nCurrent: development\nTarget:  staging\n\n\u2713 Validating staging environment\n\u2713 Configuration valid\n\u2713 Database connection successful\n\u2713 Updating environment settings\n\u2713 Clearing caches\n\u2713 Environment switched successfully\n\nNew Environment: staging\nDatabase: wheels_staging\nDebug: Enabled\nCache: Partial\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-switch/#environment-file-updates","title":"Environment File Updates","text":""},{"location":"command-line-tools/commands/environment/env-switch/#wheels-env","title":".wheels-env","text":"<p>Before: <pre><code>development\n</code></pre></p> <p>After: <pre><code>staging\n</code></pre></p>"},{"location":"command-line-tools/commands/environment/env-switch/#environment-variables","title":"Environment Variables","text":"<p>Updates system environment: <pre><code>export WHEELS_ENV=staging\nexport WHEELS_DATASOURCE=wheels_staging\n</code></pre></p>"},{"location":"command-line-tools/commands/environment/env-switch/#validation-process","title":"Validation Process","text":"<p>Before switching, validates:</p> <ol> <li>Configuration:</li> <li>File exists</li> <li>Syntax valid</li> <li> <p>Required settings present</p> </li> <li> <p>Database:</p> </li> <li>Connection works</li> <li>Tables accessible</li> <li> <p>Migrations current</p> </li> <li> <p>Dependencies:</p> </li> <li>Required services available</li> <li>File permissions correct</li> <li>Resources accessible</li> </ol>"},{"location":"command-line-tools/commands/environment/env-switch/#switch-strategies","title":"Switch Strategies","text":""},{"location":"command-line-tools/commands/environment/env-switch/#safe-switch-default","title":"Safe Switch (Default)","text":"<p><pre><code>wheels env switch production\n</code></pre> - Full validation - Graceful transition - Rollback on error</p>"},{"location":"command-line-tools/commands/environment/env-switch/#fast-switch","title":"Fast Switch","text":"<p><pre><code>wheels env switch staging --force --no-check\n</code></pre> - Skip validation - Immediate switch - Use with caution</p>"},{"location":"command-line-tools/commands/environment/env-switch/#zero-downtime-switch","title":"Zero-Downtime Switch","text":"<p><pre><code>wheels env switch production --strategy=blue-green\n</code></pre> - Prepare new environment - Switch load balancer - No service interruption</p>"},{"location":"command-line-tools/commands/environment/env-switch/#backup-and-restore","title":"Backup and Restore","text":""},{"location":"command-line-tools/commands/environment/env-switch/#create-backup","title":"Create Backup","text":"<pre><code>wheels env switch production --backup\n# Creates: .wheels-env-backup-20240115-103045\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-switch/#restore-from-backup","title":"Restore from Backup","text":"<pre><code>wheels env restore --from=.wheels-env-backup-20240115-103045\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-switch/#manual-restore","title":"Manual Restore","text":"<pre><code># If switch fails\ncp .wheels-env-backup-20240115-103045 .wheels-env\nwheels reload\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-switch/#service-management","title":"Service Management","text":""},{"location":"command-line-tools/commands/environment/env-switch/#with-restart","title":"With Restart","text":"<pre><code>wheels env switch production --restart\n</code></pre> <p>Restarts: - Application server - Cache services - Background workers</p>"},{"location":"command-line-tools/commands/environment/env-switch/#service-specific","title":"Service-Specific","text":"<pre><code>wheels env switch staging --restart-services=app,cache\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-switch/#prepost-hooks","title":"Pre/Post Hooks","text":"<p>Configure in <code>.wheels-cli.json</code>:</p> <pre><code>{\n  \"env\": {\n    \"switch\": {\n      \"pre\": [\n        \"wheels test run --quick\",\n        \"git stash\"\n      ],\n      \"post\": [\n        \"wheels dbmigrate latest\",\n        \"wheels cache clear\",\n        \"npm run build\"\n      ]\n    }\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-switch/#environment-specific-actions","title":"Environment-Specific Actions","text":""},{"location":"command-line-tools/commands/environment/env-switch/#development-production","title":"Development \u2192 Production","text":"<pre><code>wheels env switch production\n# Warning: Switching from development to production\n# - Debug will be disabled\n# - Caching will be enabled\n# - Error details will be hidden\n# Continue? (y/N)\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-switch/#production-development","title":"Production \u2192 Development","text":"<pre><code>wheels env switch development\n# Warning: Switching from production to development\n# - Debug will be enabled\n# - Caching will be disabled\n# - Sensitive data may be exposed\n# Continue? (y/N)\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-switch/#integration","title":"Integration","text":""},{"location":"command-line-tools/commands/environment/env-switch/#cicd-pipeline","title":"CI/CD Pipeline","text":"<pre><code>- name: Switch to staging\n  run: |\n    wheels env switch staging --check\n    wheels test run\n    wheels deploy exec staging\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-switch/#deployment-scripts","title":"Deployment Scripts","text":"<pre><code>#!/bin/bash\n# deploy.sh\n\n# Switch environment\nwheels env switch $1 --backup\n\n# Run migrations\nwheels dbmigrate latest\n\n# Clear caches\nwheels cache clear\n\n# Verify\nwheels env | grep $1\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-switch/#rollback","title":"Rollback","text":"<p>If switch fails or causes issues:</p> <pre><code># Automatic rollback\nwheels env switch production --auto-rollback\n\n# Manual rollback\nwheels env switch:rollback\n\n# Force previous environment\nwheels env switch development --force\n</code></pre>"},{"location":"command-line-tools/commands/environment/env-switch/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/environment/env-switch/#switch-failed","title":"Switch Failed","text":"<ul> <li>Check validation errors</li> <li>Verify target environment exists</li> <li>Use <code>--force</code> if necessary</li> </ul>"},{"location":"command-line-tools/commands/environment/env-switch/#application-not-responding","title":"Application Not Responding","text":"<ul> <li>Check service status</li> <li>Review error logs</li> <li>Manually restart services</li> </ul>"},{"location":"command-line-tools/commands/environment/env-switch/#database-connection-issues","title":"Database Connection Issues","text":"<ul> <li>Verify credentials</li> <li>Check network access</li> <li>Test connection manually</li> </ul>"},{"location":"command-line-tools/commands/environment/env-switch/#best-practices","title":"Best Practices","text":"<ol> <li>Always Validate: Don't skip checks in production</li> <li>Use Backups: Enable backup for critical switches</li> <li>Test First: Switch in staging before production</li> <li>Monitor After: Check application health post-switch</li> <li>Document Changes: Log environment switches</li> </ol>"},{"location":"command-line-tools/commands/environment/env-switch/#security-considerations","title":"Security Considerations","text":"<ul> <li>Production switches require confirmation</li> <li>Sensitive configs protected</li> <li>Audit trail maintained</li> <li>Access controls enforced</li> </ul>"},{"location":"command-line-tools/commands/environment/env-switch/#notes","title":"Notes","text":"<ul> <li>Some changes require application restart</li> <li>Database connections may need reset</li> <li>Cached data cleared on switch</li> <li>Background jobs may need restart</li> </ul>"},{"location":"command-line-tools/commands/environment/env-switch/#see-also","title":"See Also","text":"<ul> <li>wheels env - Environment management overview</li> <li>wheels env list - List environments</li> <li>wheels env setup - Setup environments</li> <li>wheels reload - Reload application</li> </ul>"},{"location":"command-line-tools/commands/environment/env/","title":"wheels env","text":"<p>Base command for environment management in Wheels applications.</p>"},{"location":"command-line-tools/commands/environment/env/#usage","title":"Usage","text":"<pre><code>wheels env [subcommand]\n</code></pre>"},{"location":"command-line-tools/commands/environment/env/#description","title":"Description","text":"<p>The <code>wheels env</code> command provides environment management for Wheels applications. It handles environment configuration, switching between environments, and managing environment-specific settings.</p>"},{"location":"command-line-tools/commands/environment/env/#subcommands","title":"Subcommands","text":"Command Description <code>list</code> List all configured environments <code>setup</code> Setup a new environment <code>switch</code> Switch to a different environment"},{"location":"command-line-tools/commands/environment/env/#direct-usage","title":"Direct Usage","text":"<p>When called without subcommands, displays help information:</p> <pre><code>wheels env\n</code></pre> <p>Output: <pre><code>\ud83c\udf0d Wheels Environment Management\n\nAvailable commands:\n\n  wheels env list\n    List all configured environments\n\n  wheels env setup &lt;environment&gt;\n    Setup a new environment (development, staging, production)\n    Options: --template=docker --database=postgres\n\n  wheels env switch &lt;environment&gt;\n    Switch to a different environment\n\nExamples:\n  wheels env setup development\n  wheels env setup production --template=docker --database=postgres\n  wheels env switch staging\n</code></pre></p>"},{"location":"command-line-tools/commands/environment/env/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/environment/env/#list-all-environments","title":"List all environments","text":"<pre><code>wheels env list\n</code></pre>"},{"location":"command-line-tools/commands/environment/env/#setup-new-environment","title":"Setup new environment","text":"<pre><code>wheels env setup development\nwheels env setup production --template=docker --database=postgres\n</code></pre>"},{"location":"command-line-tools/commands/environment/env/#switch-environment","title":"Switch environment","text":"<pre><code>wheels env switch production\n</code></pre>"},{"location":"command-line-tools/commands/environment/env/#environment-configuration","title":"Environment Configuration","text":"<p>Each environment has its own configuration:</p> <pre><code>/config/\n  \u251c\u2500\u2500 development/\n  \u2502   \u2514\u2500\u2500 settings.cfm\n  \u251c\u2500\u2500 testing/\n  \u2502   \u2514\u2500\u2500 settings.cfm\n  \u251c\u2500\u2500 production/\n  \u2502   \u2514\u2500\u2500 settings.cfm\n  \u2514\u2500\u2500 environment.cfm\n</code></pre>"},{"location":"command-line-tools/commands/environment/env/#environment-variables","title":"Environment Variables","text":"<p>The command respects these environment variables:</p> Variable Description Default <code>WHEELS_ENV</code> Current environment <code>development</code> <code>WHEELS_DATASOURCE</code> Database name Per environment <code>WHEELS_DEBUG</code> Debug mode Per environment"},{"location":"command-line-tools/commands/environment/env/#environment-detection","title":"Environment Detection","text":"<p>Order of precedence: 1. Command line argument 2. <code>WHEELS_ENV</code> environment variable 3. <code>.wheels-env</code> file 4. Default (<code>development</code>)</p>"},{"location":"command-line-tools/commands/environment/env/#common-environments","title":"Common Environments","text":""},{"location":"command-line-tools/commands/environment/env/#development","title":"Development","text":"<ul> <li>Debug enabled</li> <li>Detailed error messages</li> <li>Hot reload active</li> <li>Development database</li> </ul>"},{"location":"command-line-tools/commands/environment/env/#testing","title":"Testing","text":"<ul> <li>Test database</li> <li>Fixtures loaded</li> <li>Debug enabled</li> <li>Isolated from production</li> </ul>"},{"location":"command-line-tools/commands/environment/env/#production","title":"Production","text":"<ul> <li>Debug disabled</li> <li>Optimized performance</li> <li>Production database</li> <li>Error handling active</li> </ul>"},{"location":"command-line-tools/commands/environment/env/#staging","title":"Staging","text":"<ul> <li>Production-like</li> <li>Separate database</li> <li>Debug configurable</li> <li>Pre-production testing</li> </ul>"},{"location":"command-line-tools/commands/environment/env/#environment-files","title":"Environment Files","text":""},{"location":"command-line-tools/commands/environment/env/#wheels-env_1","title":".wheels-env","text":"<p>Local environment override: <pre><code>production\n</code></pre></p>"},{"location":"command-line-tools/commands/environment/env/#envenvironment","title":".env.[environment]","text":"<p>Environment-specific variables: <pre><code># .env.production\nDATABASE_URL=mysql://prod@host/db\nCACHE_ENABLED=true\nDEBUG_MODE=false\n</code></pre></p>"},{"location":"command-line-tools/commands/environment/env/#integration","title":"Integration","text":""},{"location":"command-line-tools/commands/environment/env/#with-other-commands","title":"With Other Commands","text":"<p>Many commands respect current environment: <pre><code># Uses current environment's database\nwheels dbmigrate latest\n\n# Reloads in current environment\nwheels reload\n\n# Tests run in test environment\nwheels test run\n</code></pre></p>"},{"location":"command-line-tools/commands/environment/env/#in-application-code","title":"In Application Code","text":"<p>Access current environment: <pre><code>&lt;cfset currentEnv = get(\"environment\")&gt;\n&lt;cfif currentEnv eq \"production\"&gt;\n    &lt;!--- Production-specific code ---&gt;\n&lt;/cfif&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/environment/env/#best-practices","title":"Best Practices","text":"<ol> <li>Never commit <code>.wheels-env</code> file</li> <li>Use testing environment for tests</li> <li>Match staging to production closely</li> <li>Separate databases per environment</li> <li>Environment-specific configuration files</li> </ol>"},{"location":"command-line-tools/commands/environment/env/#use-cases","title":"Use Cases","text":"<ol> <li>Local Development: Switch between feature environments</li> <li>Testing: Isolated test environment</li> <li>Deployment: Environment-specific configurations</li> <li>Debugging: Quick environment switching</li> <li>Team Development: Consistent environments</li> </ol>"},{"location":"command-line-tools/commands/environment/env/#notes","title":"Notes","text":"<ul> <li>Environment changes may require application restart</li> <li>Database connections are environment-specific</li> <li>Some settings only take effect after reload</li> <li>Use version control for environment configs</li> </ul>"},{"location":"command-line-tools/commands/environment/env/#see-also","title":"See Also","text":"<ul> <li>wheels env setup - Setup new environment</li> <li>wheels env list - List environments</li> <li>wheels env switch - Switch environments</li> <li>wheels config - Configuration management</li> </ul>"},{"location":"command-line-tools/commands/environment/environment/","title":"wheels environment","text":"<p>Display or switch the current Wheels environment.</p>"},{"location":"command-line-tools/commands/environment/environment/#synopsis","title":"Synopsis","text":"<pre><code>wheels environment [action] [value] [options]\n</code></pre>"},{"location":"command-line-tools/commands/environment/environment/#description","title":"Description","text":"<p>The <code>wheels environment</code> command manages your Wheels application environment settings. It can display the current environment, switch between environments, and list all available environments. Environment changes can trigger automatic application reloads to ensure your settings take effect immediately.</p>"},{"location":"command-line-tools/commands/environment/environment/#arguments","title":"Arguments","text":""},{"location":"command-line-tools/commands/environment/environment/#action","title":"<code>action</code>","text":"<ul> <li>Type: String</li> <li>Default: <code>show</code></li> <li>Options: <code>show</code>, <code>set</code>, <code>list</code></li> <li>Description: Action to perform</li> <li>Example: <code>wheels environment set production</code></li> </ul>"},{"location":"command-line-tools/commands/environment/environment/#value","title":"<code>value</code>","text":"<ul> <li>Type: String</li> <li>Description: Environment value when using set action</li> <li>Options: <code>development</code>, <code>testing</code>, <code>production</code>, <code>maintenance</code></li> <li>Example: <code>wheels environment set development</code></li> </ul>"},{"location":"command-line-tools/commands/environment/environment/#options","title":"Options","text":""},{"location":"command-line-tools/commands/environment/environment/#-reload","title":"<code>--reload</code>","text":"<ul> <li>Type: Boolean</li> <li>Default: <code>true</code></li> <li>Description: Reload application after changing environment</li> <li>Example: <code>wheels environment set production --reload=false</code></li> </ul>"},{"location":"command-line-tools/commands/environment/environment/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/environment/environment/#basic-usage","title":"Basic Usage","text":"<pre><code># Show current environment\nwheels environment\n\n# Set environment to production\nwheels environment set production\n\n# Set environment without reload\nwheels environment set development --reload=false\n\n# List all available environments\nwheels environment list\n</code></pre>"},{"location":"command-line-tools/commands/environment/environment/#quick-switching","title":"Quick Switching","text":"<pre><code># Shortcut syntax - if action matches an environment name\nwheels environment development   # Same as: wheels environment set development\nwheels environment production    # Same as: wheels environment set production\nwheels environment testing       # Same as: wheels environment set testing\n</code></pre>"},{"location":"command-line-tools/commands/environment/environment/#environment-details","title":"Environment Details","text":""},{"location":"command-line-tools/commands/environment/environment/#development","title":"development","text":"<ul> <li>Description: Development mode with debugging enabled, no caching</li> <li>Use for: Local development and debugging</li> <li>Features:</li> <li>Debug information displayed</li> <li>Error details shown</li> <li>No query caching</li> <li>No view caching</li> <li>Hot reloading enabled</li> </ul>"},{"location":"command-line-tools/commands/environment/environment/#testing","title":"testing","text":"<ul> <li>Description: Testing mode for running automated tests</li> <li>Use for: Running test suites and CI/CD pipelines</li> <li>Features:</li> <li>Consistent test environment</li> <li>Test database connections</li> <li>Predictable caching behavior</li> <li>Error details available</li> </ul>"},{"location":"command-line-tools/commands/environment/environment/#production","title":"production","text":"<ul> <li>Description: Production mode with caching enabled, debugging disabled</li> <li>Use for: Live production servers</li> <li>Features:</li> <li>Query caching enabled</li> <li>View caching enabled</li> <li>Debug information hidden</li> <li>Optimized performance</li> <li>Error pages for users</li> </ul>"},{"location":"command-line-tools/commands/environment/environment/#maintenance","title":"maintenance","text":"<ul> <li>Description: Maintenance mode to show maintenance page</li> <li>Use for: During deployments or maintenance windows</li> <li>Features:</li> <li>Maintenance page displayed</li> <li>Admin access still available</li> <li>Database migrations possible</li> <li>Public access restricted</li> </ul>"},{"location":"command-line-tools/commands/environment/environment/#how-it-works","title":"How It Works","text":"<ol> <li>Configuration Storage: Environment settings are stored in:</li> <li><code>.env</code> file (WHEELS_ENV variable)</li> <li>Environment variables</li> <li> <p>Application configuration</p> </li> <li> <p>Runtime Detection: The environment is determined by:</p> </li> <li>Checking server environment variables</li> <li>Reading <code>.env</code> file</li> <li> <p>Defaulting to development</p> </li> <li> <p>Change Process:</p> </li> <li>Updates <code>.env</code> file</li> <li>Optionally reloads application</li> <li>Changes take effect immediately (if reloaded)</li> </ol>"},{"location":"command-line-tools/commands/environment/environment/#output-examples","title":"Output Examples","text":""},{"location":"command-line-tools/commands/environment/environment/#current-environment-display","title":"Current Environment Display","text":"<pre><code>Current Wheels Environment\n=========================\n\nEnvironment: development\nWheels Version: 2.5.0\nData Source: myapp_dev\nServer: Lucee 5.3.10.120\n\nEnvironment Settings:\n  cacheQueries: false\n  cachePartials: false\n  cachePages: false\n  cacheActions: false\n  showDebugInformation: true\n  showErrorInformation: true\n</code></pre>"},{"location":"command-line-tools/commands/environment/environment/#environment-list","title":"Environment List","text":"<pre><code>Available Wheels Environments\n============================\n\ndevelopment (current)\n  Description: Development mode with debugging enabled, no caching\n  Use for: Local development and debugging\n\ntesting\n  Description: Testing mode for running automated tests\n  Use for: Running test suites and CI/CD pipelines\n\nproduction\n  Description: Production mode with caching enabled, debugging disabled\n  Use for: Live production servers\n\nmaintenance\n  Description: Maintenance mode to show maintenance page\n  Use for: During deployments or maintenance windows\n</code></pre>"},{"location":"command-line-tools/commands/environment/environment/#configuration","title":"Configuration","text":""},{"location":"command-line-tools/commands/environment/environment/#using-env-file","title":"Using .env File","text":"<p>Create or modify <code>.env</code> in your project root: <pre><code>WHEELS_ENV=production\n</code></pre></p>"},{"location":"command-line-tools/commands/environment/environment/#using-environment-variables","title":"Using Environment Variables","text":"<p>Set system environment variable: <pre><code>export WHEELS_ENV=production\n</code></pre></p>"},{"location":"command-line-tools/commands/environment/environment/#precedence-order","title":"Precedence Order","text":"<ol> <li>System environment variables (highest priority)</li> <li><code>.env</code> file</li> <li>Default (development)</li> </ol>"},{"location":"command-line-tools/commands/environment/environment/#best-practices","title":"Best Practices","text":"<ol> <li>Development Workflow</li> <li>Use <code>development</code> for local work</li> <li>Switch to <code>testing</code> before running tests</li> <li> <p>Never use <code>development</code> in production</p> </li> <li> <p>Production Deployment</p> </li> <li>Always use <code>production</code> environment</li> <li>Set via environment variables for security</li> <li> <p>Disable reload after deployment</p> </li> <li> <p>Testing Strategy</p> </li> <li>Use <code>testing</code> for automated tests</li> <li>Ensure consistent test environment</li> <li> <p>Reset between test runs</p> </li> <li> <p>Maintenance Windows</p> </li> <li>Switch to <code>maintenance</code> during deployments</li> <li>Provide clear maintenance messages</li> <li>Switch back to <code>production</code> when complete</li> </ol>"},{"location":"command-line-tools/commands/environment/environment/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/environment/environment/#environment-not-changing","title":"Environment not changing","text":"<ol> <li>Check if server needs restart: <code>wheels server restart</code></li> <li>Verify <code>.env</code> file permissions</li> <li>Check for system environment variable conflicts</li> </ol>"},{"location":"command-line-tools/commands/environment/environment/#server-required-for-some-operations","title":"Server required for some operations","text":"<ul> <li>Some environment checks require running server</li> <li>Start server first: <code>wheels server start</code></li> <li>File-based changes work without server</li> </ul>"},{"location":"command-line-tools/commands/environment/environment/#permission-issues","title":"Permission issues","text":"<ul> <li>Ensure write access to <code>.env</code> file</li> <li>Check directory permissions</li> <li>Run with appropriate user privileges</li> </ul>"},{"location":"command-line-tools/commands/environment/environment/#security-notes","title":"Security Notes","text":"<ul> <li>Don't commit <code>.env</code> files with production settings</li> <li>Use environment variables in production</li> <li>Restrict access to environment commands in production</li> <li>Log environment changes for audit trails</li> </ul>"},{"location":"command-line-tools/commands/environment/environment/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels reload</code> - Reload application</li> <li><code>wheels server restart</code> - Restart server</li> <li><code>wheels console</code> - Test in different environments</li> </ul>"},{"location":"command-line-tools/commands/environment/environment/#see-also","title":"See Also","text":"<ul> <li>Wheels Configuration Guide</li> <li>Environment Variables Documentation</li> </ul>"},{"location":"command-line-tools/commands/environment/runner/","title":"wheels runner","text":"<p>Execute a script file in the Wheels application context.</p>"},{"location":"command-line-tools/commands/environment/runner/#synopsis","title":"Synopsis","text":"<pre><code>wheels runner &lt;file&gt; [options]\n</code></pre>"},{"location":"command-line-tools/commands/environment/runner/#description","title":"Description","text":"<p>The <code>wheels runner</code> command executes CFML script files with full access to your Wheels application context. This is useful for running data migrations, maintenance tasks, batch processing, and other scripts that need access to your models and application functionality.</p> <p>Scripts are executed on the server via HTTP, ensuring they run with the proper application context, database connections, and Wheels framework features.</p>"},{"location":"command-line-tools/commands/environment/runner/#arguments","title":"Arguments","text":""},{"location":"command-line-tools/commands/environment/runner/#file","title":"<code>file</code>","text":"<ul> <li>Type: String</li> <li>Required: Yes</li> <li>Description: Path to the script file to execute (.cfm, .cfc, or .cfs)</li> <li>Example: <code>wheels runner scripts/migrate-data.cfm</code></li> </ul>"},{"location":"command-line-tools/commands/environment/runner/#options","title":"Options","text":""},{"location":"command-line-tools/commands/environment/runner/#environment","title":"<code>environment</code>","text":"<ul> <li>Type: String</li> <li>Default: <code>development</code></li> <li>Description: Environment to run in (development, testing, production)</li> <li>Example: <code>wheels runner script.cfm environment=production</code></li> </ul>"},{"location":"command-line-tools/commands/environment/runner/#-verbose","title":"<code>--verbose</code>","text":"<ul> <li>Type: Boolean flag</li> <li>Default: <code>false</code></li> <li>Description: Show detailed output including execution time</li> <li>Example: <code>wheels runner script.cfm --verbose</code></li> </ul>"},{"location":"command-line-tools/commands/environment/runner/#params","title":"<code>params</code>","text":"<ul> <li>Type: String (JSON format)</li> <li>Description: Additional parameters to pass to the script</li> <li>Example: <code>wheels runner import.cfm params='{\"source\":\"data.csv\",\"limit\":100}'</code></li> </ul>"},{"location":"command-line-tools/commands/environment/runner/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/environment/runner/#basic-usage","title":"Basic Usage","text":"<pre><code># Run a migration script\nwheels runner scripts/migrate-users.cfm\n\n# Run in production environment\nwheels runner scripts/cleanup.cfm environment=production\n\n# Run with parameters\nwheels runner scripts/import.cfm params='{\"file\":\"products.csv\",\"dryRun\":true}'\n\n# Run with verbose output\nwheels runner scripts/process-orders.cfm --verbose\n</code></pre>"},{"location":"command-line-tools/commands/environment/runner/#script-examples","title":"Script Examples","text":""},{"location":"command-line-tools/commands/environment/runner/#data-migration-script","title":"Data Migration Script","text":"<pre><code>&lt;!--- scripts/migrate-legacy-users.cfm ---&gt;\n&lt;cfscript&gt;\n// Access passed parameters\nvar dryRun = structKeyExists(request.scriptParams, \"dryRun\") ? request.scriptParams.dryRun : false;\nvar batchSize = structKeyExists(request.scriptParams, \"batchSize\") ? request.scriptParams.batchSize : 100;\n\nwriteOutput(\"&lt;h3&gt;Legacy User Migration&lt;/h3&gt;\");\nwriteOutput(\"Dry run: #dryRun#&lt;br&gt;\");\nwriteOutput(\"Batch size: #batchSize#&lt;br&gt;&lt;br&gt;\");\n\n// Query legacy database\nvar legacyUsers = request.query(\"\n    SELECT * FROM legacy_users \n    WHERE migrated = 0 \n    LIMIT #batchSize#\n\");\n\nwriteOutput(\"Found #legacyUsers.recordCount# users to migrate&lt;br&gt;&lt;br&gt;\");\n\nvar migrated = 0;\nfor (var legacyUser in legacyUsers) {\n    try {\n        if (!dryRun) {\n            // Create user in new system\n            var newUser = request.model(\"User\").create(\n                email: legacyUser.email_address,\n                firstName: legacyUser.fname,\n                lastName: legacyUser.lname,\n                createdAt: legacyUser.created_date\n            );\n\n            // Mark as migrated\n            request.query(\"\n                UPDATE legacy_users \n                SET migrated = 1, new_id = #newUser.id# \n                WHERE id = #legacyUser.id#\n            \");\n        }\n\n        migrated++;\n        writeOutput(\"\u2713 Migrated: #legacyUser.email_address#&lt;br&gt;\");\n\n    } catch (any e) {\n        writeOutput(\"\u2717 Failed: #legacyUser.email_address# - #e.message#&lt;br&gt;\");\n    }\n}\n\nwriteOutput(\"&lt;br&gt;&lt;strong&gt;Migration complete: #migrated# users processed&lt;/strong&gt;\");\n&lt;/cfscript&gt;\n</code></pre>"},{"location":"command-line-tools/commands/environment/runner/#maintenance-script","title":"Maintenance Script","text":"<pre><code>&lt;!--- scripts/cleanup-temp-files.cfm ---&gt;\n&lt;cfscript&gt;\nvar daysOld = structKeyExists(request.scriptParams, \"days\") ? request.scriptParams.days : 7;\nvar verbose = request.scriptVerbose;\n\nwriteOutput(\"Cleaning temporary files older than #daysOld# days...&lt;br&gt;&lt;br&gt;\");\n\n// Clean up old session files\nvar cutoffDate = dateAdd('d', -daysOld, now());\nvar deletedCount = 0;\n\n// Find and delete old upload records\nvar oldUploads = request.model(\"TempUpload\").findAll(\n    where=\"createdAt &lt; '#cutoffDate#'\"\n);\n\nfor (var upload in oldUploads) {\n    // Delete physical file\n    if (fileExists(upload.filePath)) {\n        fileDelete(upload.filePath);\n        if (verbose) {\n            writeOutput(\"Deleted file: #upload.filePath#&lt;br&gt;\");\n        }\n    }\n\n    // Delete database record\n    request.model(\"TempUpload\").deleteByKey(upload.id);\n    deletedCount++;\n}\n\nwriteOutput(\"&lt;br&gt;Deleted #deletedCount# temporary files&lt;br&gt;\");\n\n// Clean up orphaned cart items\nvar orphanedItems = request.query(\"\n    SELECT COUNT(*) as total \n    FROM cart_items \n    WHERE updatedAt &lt; '#cutoffDate#' \n    AND orderId IS NULL\n\").total;\n\nif (orphanedItems &gt; 0) {\n    request.query(\"\n        DELETE FROM cart_items \n        WHERE updatedAt &lt; '#cutoffDate#' \n        AND orderId IS NULL\n    \");\n    writeOutput(\"Removed #orphanedItems# orphaned cart items&lt;br&gt;\");\n}\n\nwriteOutput(\"&lt;br&gt;&lt;strong&gt;Cleanup complete!&lt;/strong&gt;\");\n&lt;/cfscript&gt;\n</code></pre>"},{"location":"command-line-tools/commands/environment/runner/#report-generation-script","title":"Report Generation Script","text":"<pre><code>&lt;!--- scripts/generate-monthly-report.cfm ---&gt;\n&lt;cfscript&gt;\n// Get report parameters\nvar month = structKeyExists(request.scriptParams, \"month\") ? request.scriptParams.month : month(now());\nvar year = structKeyExists(request.scriptParams, \"year\") ? request.scriptParams.year : year(now());\nvar emailTo = structKeyExists(request.scriptParams, \"emailTo\") ? request.scriptParams.emailTo : \"\";\n\nwriteOutput(\"&lt;h2&gt;Monthly Report - #monthAsString(month)# #year#&lt;/h2&gt;\");\n\n// Calculate date range\nvar startDate = createDate(year, month, 1);\nvar endDate = dateAdd('m', 1, startDate);\n\n// Get statistics\nvar stats = {};\n\n// New users\nstats.newUsers = request.model(\"User\").count(\n    where=\"createdAt &gt;= '#startDate#' AND createdAt &lt; '#endDate#'\"\n);\n\n// Orders\nvar orderData = request.query(\"\n    SELECT \n        COUNT(*) as totalOrders,\n        SUM(total) as revenue,\n        AVG(total) as avgOrderValue\n    FROM orders\n    WHERE createdAt &gt;= '#startDate#' \n    AND createdAt &lt; '#endDate#'\n    AND status = 'completed'\n\");\n\nstats.orders = orderData.totalOrders;\nstats.revenue = orderData.revenue ?: 0;\nstats.avgOrderValue = orderData.avgOrderValue ?: 0;\n\n// Display report\nwriteOutput(\"&lt;h3&gt;Summary&lt;/h3&gt;\");\nwriteOutput(\"&lt;ul&gt;\");\nwriteOutput(\"&lt;li&gt;New Users: #stats.newUsers#&lt;/li&gt;\");\nwriteOutput(\"&lt;li&gt;Total Orders: #stats.orders#&lt;/li&gt;\");\nwriteOutput(\"&lt;li&gt;Revenue: #dollarFormat(stats.revenue)#&lt;/li&gt;\");\nwriteOutput(\"&lt;li&gt;Average Order Value: #dollarFormat(stats.avgOrderValue)#&lt;/li&gt;\");\nwriteOutput(\"&lt;/ul&gt;\");\n\n// Send email if requested\nif (len(emailTo)) {\n    // Use Wheels email functionality\n    writeOutput(\"&lt;br&gt;Sending report to: #emailTo#...&lt;br&gt;\");\n    // Email sending logic here\n}\n\nwriteOutput(\"&lt;br&gt;&lt;em&gt;Report generated on #dateTimeFormat(now())#&lt;/em&gt;\");\n&lt;/cfscript&gt;\n</code></pre>"},{"location":"command-line-tools/commands/environment/runner/#script-context","title":"Script Context","text":"<p>Scripts executed by the runner have access to:</p>"},{"location":"command-line-tools/commands/environment/runner/#available-functions","title":"Available Functions","text":"<ul> <li><code>request.model(name)</code> - Access Wheels models</li> <li><code>request.query(sql)</code> - Execute SQL queries</li> <li><code>request.scriptParams</code> - Access passed parameters</li> <li><code>request.scriptVerbose</code> - Check if verbose mode is enabled</li> </ul>"},{"location":"command-line-tools/commands/environment/runner/#available-variables","title":"Available Variables","text":"<ul> <li>All Wheels helper functions</li> <li>Application scope</li> <li>Standard CFML functions</li> </ul>"},{"location":"command-line-tools/commands/environment/runner/#example-accessing-script-context","title":"Example Accessing Script Context","text":"<pre><code>&lt;cfscript&gt;\n// Access parameters\nvar limit = structKeyExists(request.scriptParams, \"limit\") ? request.scriptParams.limit : 10;\n\n// Use models\nvar users = request.model(\"User\").findAll(maxRows=limit);\n\n// Direct queries\nvar stats = request.query(\"SELECT COUNT(*) as total FROM posts\");\n\n// Use helpers\nwriteOutput(\"Found #pluralize(users.recordCount, 'user')#&lt;br&gt;\");\n&lt;/cfscript&gt;\n</code></pre>"},{"location":"command-line-tools/commands/environment/runner/#best-practices","title":"Best Practices","text":"<ol> <li>Error Handling: Always include try/catch blocks for critical operations</li> <li>Dry Run Mode: Implement a dryRun parameter for destructive operations</li> <li>Progress Output: Use writeOutput() to show progress for long-running scripts</li> <li>Transactions: Use database transactions for data consistency</li> <li>Logging: Log important operations for audit trails</li> <li>Idempotency: Make scripts safe to run multiple times</li> </ol>"},{"location":"command-line-tools/commands/environment/runner/#security-considerations","title":"Security Considerations","text":"<ul> <li>Scripts run with full application permissions</li> <li>Validate and sanitize any external input</li> <li>Be cautious with production environment scripts</li> <li>Consider implementing confirmation prompts for destructive operations</li> </ul>"},{"location":"command-line-tools/commands/environment/runner/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/environment/runner/#script-file-not-found","title":"\"Script file not found\"","text":"<ul> <li>Check the file path is correct</li> <li>Use relative paths from the application root</li> <li>Ensure file extension is .cfm, .cfc, or .cfs</li> </ul>"},{"location":"command-line-tools/commands/environment/runner/#server-must-be-running","title":"\"Server must be running\"","text":"<ul> <li>Start the server: <code>wheels server start</code></li> <li>Check server status: <code>wheels server status</code></li> </ul>"},{"location":"command-line-tools/commands/environment/runner/#script-errors","title":"Script errors","text":"<ul> <li>Check syntax in your script file</li> <li>Verify model and table names</li> <li>Test queries separately in console first</li> </ul>"},{"location":"command-line-tools/commands/environment/runner/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels console</code> - Interactive REPL for testing code</li> <li><code>wheels environment</code> - Manage environment settings</li> <li><code>wheels generate migration</code> - Create database migrations</li> </ul>"},{"location":"command-line-tools/commands/environment/runner/#see-also","title":"See Also","text":"<ul> <li>Wheels Model Documentation</li> <li>CommandBox Task Runners</li> </ul>"},{"location":"command-line-tools/commands/generate/api-resource/","title":"wheels generate api-resource","text":"<p>Generate a complete API resource with model, API controller, and routes.</p> <p>\u26a0\ufe0f Note: This command is currently marked as broken/disabled in the codebase. The documentation below represents the intended functionality when the command is restored.</p>"},{"location":"command-line-tools/commands/generate/api-resource/#synopsis","title":"Synopsis","text":"<pre><code>wheels generate api-resource [name] [properties] [options]\nwheels g api-resource [name] [properties] [options]\n</code></pre>"},{"location":"command-line-tools/commands/generate/api-resource/#description","title":"Description","text":"<p>The <code>wheels generate api-resource</code> command creates a complete RESTful API resource including model, API-specific controller (no views), routes, and optionally database migrations and tests. It's optimized for building JSON APIs following REST conventions.</p>"},{"location":"command-line-tools/commands/generate/api-resource/#current-status","title":"Current Status","text":"<p>This command is temporarily disabled. Use alternative approaches:</p> <pre><code># Option 1: Use regular resource with --api flag\nwheels generate resource product name:string price:float --api\n\n# Option 2: Generate components separately\nwheels generate model product name:string price:float\nwheels generate controller api/products --api\nwheels generate route products --api --namespace=api\n</code></pre>"},{"location":"command-line-tools/commands/generate/api-resource/#arguments-when-enabled","title":"Arguments (When Enabled)","text":"Argument Description Default <code>name</code> Resource name (typically singular) Required <code>properties</code> Property definitions (name:type)"},{"location":"command-line-tools/commands/generate/api-resource/#options-when-enabled","title":"Options (When Enabled)","text":"Option Description Default <code>--version</code> API version (v1, v2, etc.) <code>v1</code> <code>--format</code> Response format (json, xml) <code>json</code> <code>--auth</code> Include authentication <code>false</code> <code>--pagination</code> Include pagination <code>true</code> <code>--filtering</code> Include filtering <code>true</code> <code>--sorting</code> Include sorting <code>true</code> <code>--skip-model</code> Skip model generation <code>false</code> <code>--skip-migration</code> Skip migration generation <code>false</code> <code>--skip-tests</code> Skip test generation <code>false</code> <code>--namespace</code> API namespace <code>api</code> <code>--force</code> Overwrite existing files <code>false</code> <code>--help</code> Show help information"},{"location":"command-line-tools/commands/generate/api-resource/#intended-functionality","title":"Intended Functionality","text":""},{"location":"command-line-tools/commands/generate/api-resource/#basic-api-resource","title":"Basic API Resource","text":"<pre><code>wheels generate api-resource product name:string price:float description:text\n</code></pre> <p>Would generate: - Model: <code>/models/Product.cfc</code> - Controller: <code>/controllers/api/v1/Products.cfc</code> - Route: API namespace with versioning - Migration: Database migration file - Tests: API integration tests</p>"},{"location":"command-line-tools/commands/generate/api-resource/#generated-api-controller","title":"Generated API Controller","text":"<p><code>/controllers/api/v1/Products.cfc</code>: <pre><code>component extends=\"Controller\" {\n\n    function init() {\n        provides(\"json\");\n\n        // Filters\n        filters(through=\"authenticate\", except=\"index,show\");\n        filters(through=\"findProduct\", only=\"show,update,delete\");\n        filters(through=\"parseApiParams\", only=\"index\");\n    }\n\n    function index() {\n        // Pagination\n        page = params.page ?: 1;\n        perPage = Min(params.perPage ?: 25, 100);\n\n        // Filtering\n        where = [];\n        if (StructKeyExists(params, \"filter\")) {\n            if (StructKeyExists(params.filter, \"name\")) {\n                ArrayAppend(where, \"name LIKE :name\");\n                params.name = \"%#params.filter.name#%\";\n            }\n            if (StructKeyExists(params.filter, \"minPrice\")) {\n                ArrayAppend(where, \"price &gt;= :minPrice\");\n                params.minPrice = params.filter.minPrice;\n            }\n        }\n\n        // Sorting\n        order = \"createdAt DESC\";\n        if (StructKeyExists(params, \"sort\")) {\n            order = parseSort(params.sort);\n        }\n\n        // Query\n        products = model(\"Product\").findAll(\n            where=ArrayToList(where, \" AND \"),\n            order=order,\n            page=page,\n            perPage=perPage,\n            returnAs=\"objects\"\n        );\n\n        // Response\n        renderWith({\n            data: serializeProducts(products),\n            meta: {\n                pagination: {\n                    page: products.currentPage,\n                    perPage: products.perPage,\n                    total: products.totalRecords,\n                    pages: products.totalPages\n                }\n            },\n            links: {\n                self: urlFor(route=\"apiV1Products\", params=params),\n                first: urlFor(route=\"apiV1Products\", params=params, page=1),\n                last: urlFor(route=\"apiV1Products\", params=params, page=products.totalPages),\n                prev: products.currentPage &gt; 1 ? urlFor(route=\"apiV1Products\", params=params, page=products.currentPage-1) : \"\",\n                next: products.currentPage &lt; products.totalPages ? urlFor(route=\"apiV1Products\", params=params, page=products.currentPage+1) : \"\"\n            }\n        });\n    }\n\n    function show() {\n        renderWith({\n            data: serializeProduct(product),\n            links: {\n                self: urlFor(route=\"apiV1Product\", key=product.id)\n            }\n        });\n    }\n\n    function create() {\n        product = model(\"Product\").new(deserializeProduct(params));\n\n        if (product.save()) {\n            renderWith(\n                data={\n                    data: serializeProduct(product),\n                    links: {\n                        self: urlFor(route=\"apiV1Product\", key=product.id)\n                    }\n                },\n                status=201,\n                headers={\"Location\": urlFor(route=\"apiV1Product\", key=product.id)}\n            );\n        } else {\n            renderWith(\n                data={\n                    errors: formatErrors(product.allErrors())\n                },\n                status=422\n            );\n        }\n    }\n\n    function update() {\n        if (product.update(deserializeProduct(params))) {\n            renderWith({\n                data: serializeProduct(product),\n                links: {\n                    self: urlFor(route=\"apiV1Product\", key=product.id)\n                }\n            });\n        } else {\n            renderWith(\n                data={\n                    errors: formatErrors(product.allErrors())\n                },\n                status=422\n            );\n        }\n    }\n\n    function delete() {\n        if (product.delete()) {\n            renderWith(data={}, status=204);\n        } else {\n            renderWith(\n                data={\n                    errors: [{\n                        status: \"400\",\n                        title: \"Bad Request\",\n                        detail: \"Could not delete product\"\n                    }]\n                },\n                status=400\n            );\n        }\n    }\n\n    // Private methods\n\n    private function findProduct() {\n        product = model(\"Product\").findByKey(params.key);\n        if (!IsObject(product)) {\n            renderWith(\n                data={\n                    errors: [{\n                        status: \"404\",\n                        title: \"Not Found\",\n                        detail: \"Product not found\"\n                    }]\n                },\n                status=404\n            );\n        }\n    }\n\n    private function authenticate() {\n        if (!StructKeyExists(headers, \"Authorization\")) {\n            renderWith(\n                data={\n                    errors: [{\n                        status: \"401\",\n                        title: \"Unauthorized\",\n                        detail: \"Missing authentication\"\n                    }]\n                },\n                status=401\n            );\n        }\n        // Implement authentication logic\n    }\n\n    private function parseApiParams() {\n        // Parse JSON API params\n        if (StructKeyExists(params, \"_json\")) {\n            StructAppend(params, params._json, true);\n        }\n    }\n\n    private function parseSort(required string sort) {\n        local.allowedFields = [\"name\", \"price\", \"createdAt\"];\n        local.parts = ListToArray(arguments.sort);\n        local.order = [];\n\n        for (local.part in local.parts) {\n            local.desc = Left(local.part, 1) == \"-\";\n            local.field = local.desc ? Right(local.part, Len(local.part)-1) : local.part;\n\n            if (ArrayFindNoCase(local.allowedFields, local.field)) {\n                ArrayAppend(local.order, local.field &amp; (local.desc ? \" DESC\" : \" ASC\"));\n            }\n        }\n\n        return ArrayToList(local.order);\n    }\n\n    private function serializeProducts(required array products) {\n        local.result = [];\n        for (local.product in arguments.products) {\n            ArrayAppend(local.result, serializeProduct(local.product));\n        }\n        return local.result;\n    }\n\n    private function serializeProduct(required any product) {\n        return {\n            type: \"products\",\n            id: arguments.product.id,\n            attributes: {\n                name: arguments.product.name,\n                price: arguments.product.price,\n                description: arguments.product.description,\n                createdAt: DateTimeFormat(arguments.product.createdAt, \"iso\"),\n                updatedAt: DateTimeFormat(arguments.product.updatedAt, \"iso\")\n            },\n            links: {\n                self: urlFor(route=\"apiV1Product\", key=arguments.product.id)\n            }\n        };\n    }\n\n    private function deserializeProduct(required struct data) {\n        if (StructKeyExists(arguments.data, \"data\")) {\n            return arguments.data.data.attributes;\n        }\n        return arguments.data;\n    }\n\n    private function formatErrors(required array errors) {\n        local.result = [];\n        for (local.error in arguments.errors) {\n            ArrayAppend(local.result, {\n                status: \"422\",\n                source: {pointer: \"/data/attributes/#local.error.property#\"},\n                title: \"Validation Error\",\n                detail: local.error.message\n            });\n        }\n        return local.result;\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/api-resource/#api-routes","title":"API Routes","text":"<p>Generated in <code>/config/routes.cfm</code>: <pre><code>&lt;cfset namespace(\"api\")&gt;\n    &lt;cfset namespace(\"v1\")&gt;\n        &lt;cfset resources(name=\"products\", except=\"new,edit\")&gt;\n\n        &lt;!--- Additional API routes ---&gt;\n        &lt;cfset post(pattern=\"products/[key]/activate\", to=\"products##activate\", on=\"member\")&gt;\n        &lt;cfset get(pattern=\"products/search\", to=\"products##search\", on=\"collection\")&gt;\n    &lt;/cfset&gt;\n&lt;/cfset&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/api-resource/#api-documentation","title":"API Documentation","text":"<p>Would generate OpenAPI/Swagger documentation:</p> <pre><code>openapi: 3.0.0\ninfo:\n  title: Products API\n  version: 1.0.0\n\npaths:\n  /api/v1/products:\n    get:\n      summary: List products\n      parameters:\n        - name: page\n          in: query\n          schema:\n            type: integer\n        - name: perPage\n          in: query\n          schema:\n            type: integer\n        - name: filter[name]\n          in: query\n          schema:\n            type: string\n        - name: sort\n          in: query\n          schema:\n            type: string\n      responses:\n        200:\n          description: Success\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ProductList'\n\n    post:\n      summary: Create product\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/ProductInput'\n      responses:\n        201:\n          description: Created\n        422:\n          description: Validation error\n</code></pre>"},{"location":"command-line-tools/commands/generate/api-resource/#workaround-implementation","title":"Workaround Implementation","text":"<p>Until the command is fixed, implement API resources manually:</p>"},{"location":"command-line-tools/commands/generate/api-resource/#1-generate-model","title":"1. Generate Model","text":"<pre><code>wheels generate model product name:string price:float description:text\n</code></pre>"},{"location":"command-line-tools/commands/generate/api-resource/#2-create-api-controller","title":"2. Create API Controller","text":"<p>Create <code>/controllers/api/v1/Products.cfc</code> manually with the code above.</p>"},{"location":"command-line-tools/commands/generate/api-resource/#3-add-routes","title":"3. Add Routes","text":"<pre><code>&lt;!--- In /config/routes.cfm ---&gt;\n&lt;cfset namespace(\"api\")&gt;\n    &lt;cfset namespace(\"v1\")&gt;\n        &lt;cfset resources(name=\"products\", except=\"new,edit\")&gt;\n    &lt;/cfset&gt;\n&lt;/cfset&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/api-resource/#4-create-tests","title":"4. Create Tests","text":"<pre><code>wheels generate test controller api/v1/products\n</code></pre>"},{"location":"command-line-tools/commands/generate/api-resource/#api-features","title":"API Features","text":""},{"location":"command-line-tools/commands/generate/api-resource/#authentication","title":"Authentication","text":"<pre><code>// Bearer token authentication\nprivate function authenticate() {\n    local.token = GetHttpRequestData().headers[\"Authorization\"] ?: \"\";\n    local.token = ReReplace(local.token, \"^Bearer\\s+\", \"\");\n\n    if (!Len(local.token) || !isValidToken(local.token)) {\n        renderWith(\n            data={error: \"Unauthorized\"},\n            status=401\n        );\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/api-resource/#rate-limiting","title":"Rate Limiting","text":"<pre><code>// In controller init()\nfilters(through=\"rateLimit\");\n\nprivate function rateLimit() {\n    local.key = \"api_rate_limit_\" &amp; request.remoteAddress;\n    local.limit = 100; // requests per hour\n\n    if (!StructKeyExists(application, local.key)) {\n        application[local.key] = {\n            count: 0,\n            reset: DateAdd(\"h\", 1, Now())\n        };\n    }\n\n    if (application[local.key].reset &lt; Now()) {\n        application[local.key] = {\n            count: 0,\n            reset: DateAdd(\"h\", 1, Now())\n        };\n    }\n\n    application[local.key].count++;\n\n    if (application[local.key].count &gt; local.limit) {\n        renderWith(\n            data={error: \"Rate limit exceeded\"},\n            status=429,\n            headers={\n                \"X-RateLimit-Limit\": local.limit,\n                \"X-RateLimit-Remaining\": 0,\n                \"X-RateLimit-Reset\": DateTimeFormat(application[local.key].reset, \"iso\")\n            }\n        );\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/api-resource/#cors-headers","title":"CORS Headers","text":"<pre><code>// In controller init()\nfilters(through=\"setCorsHeaders\");\n\nprivate function setCorsHeaders() {\n    header name=\"Access-Control-Allow-Origin\" value=\"*\";\n    header name=\"Access-Control-Allow-Methods\" value=\"GET, POST, PUT, DELETE, OPTIONS\";\n    header name=\"Access-Control-Allow-Headers\" value=\"Content-Type, Authorization\";\n\n    if (request.method == \"OPTIONS\") {\n        renderWith(data={}, status=200);\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/api-resource/#testing-api-resources","title":"Testing API Resources","text":""},{"location":"command-line-tools/commands/generate/api-resource/#integration-tests","title":"Integration Tests","text":"<pre><code>component extends=\"wheels.Test\" {\n\n    function setup() {\n        super.setup();\n        model(\"Product\").deleteAll();\n    }\n\n    function test_get_products_returns_json() {\n        products = createProducts(3);\n\n        result = $request(\n            route=\"apiV1Products\",\n            method=\"GET\",\n            headers={\"Accept\": \"application/json\"}\n        );\n\n        assert(result.status == 200);\n        data = DeserializeJSON(result.body);\n        assert(ArrayLen(data.data) == 3);\n        assert(data.meta.pagination.total == 3);\n    }\n\n    function test_create_product_with_valid_data() {\n        params = {\n            data: {\n                type: \"products\",\n                attributes: {\n                    name: \"Test Product\",\n                    price: 29.99,\n                    description: \"Test description\"\n                }\n            }\n        };\n\n        result = $request(\n            route=\"apiV1Products\",\n            method=\"POST\",\n            params=params,\n            headers={\n                \"Content-Type\": \"application/json\",\n                \"Accept\": \"application/json\"\n            }\n        );\n\n        assert(result.status == 201);\n        assert(StructKeyExists(result.headers, \"Location\"));\n        data = DeserializeJSON(result.body);\n        assert(data.data.attributes.name == \"Test Product\");\n    }\n\n    function test_authentication_required() {\n        result = $request(\n            route=\"apiV1Products\",\n            method=\"POST\",\n            params={},\n            headers={\"Accept\": \"application/json\"}\n        );\n\n        assert(result.status == 401);\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/api-resource/#best-practices","title":"Best Practices","text":"<ol> <li>Version your API: Use URL versioning (/api/v1/)</li> <li>Use consistent formats: JSON API or custom format</li> <li>Include pagination: Limit response sizes</li> <li>Add filtering: Allow query parameters</li> <li>Implement sorting: Support field sorting</li> <li>Handle errors consistently: Standard error format</li> <li>Document thoroughly: OpenAPI/Swagger specs</li> <li>Add authentication: Secure endpoints</li> <li>Rate limit: Prevent abuse</li> <li>Test extensively: Integration tests</li> </ol>"},{"location":"command-line-tools/commands/generate/api-resource/#see-also","title":"See Also","text":"<ul> <li>wheels generate resource - Generate full resources</li> <li>wheels generate controller - Generate controllers</li> <li>wheels generate model - Generate models</li> <li>wheels generate route - Generate routes</li> </ul>"},{"location":"command-line-tools/commands/generate/app-wizard/","title":"wheels generate app-wizard","text":"<p>Interactive wizard for creating a new Wheels application.</p>"},{"location":"command-line-tools/commands/generate/app-wizard/#synopsis","title":"Synopsis","text":"<pre><code>wheels generate app-wizard [options]\nwheels g app-wizard [options]\n</code></pre>"},{"location":"command-line-tools/commands/generate/app-wizard/#description","title":"Description","text":"<p>The <code>wheels generate app-wizard</code> command provides an interactive, step-by-step wizard for creating a new Wheels application. It guides you through all configuration options with helpful prompts and explanations, making it ideal for beginners or when you want to explore all available options.</p>"},{"location":"command-line-tools/commands/generate/app-wizard/#options","title":"Options","text":"Option Description Default <code>--expert</code> Show advanced options <code>false</code> <code>--skip-install</code> Skip dependency installation <code>false</code> <code>--help</code> Show help information"},{"location":"command-line-tools/commands/generate/app-wizard/#interactive-process","title":"Interactive Process","text":""},{"location":"command-line-tools/commands/generate/app-wizard/#step-1-application-name","title":"Step 1: Application Name","text":"<p><pre><code>? What is the name of your application? \u203a myapp\n</code></pre> - Must be alphanumeric with hyphens/underscores - Used for directory and configuration names</p>"},{"location":"command-line-tools/commands/generate/app-wizard/#step-2-template-selection","title":"Step 2: Template Selection","text":"<pre><code>? Which template would you like to use? \u203a \n  \u276f Base - Minimal Wheels application\n    Base@BE - Backend-only (no views)\n    HelloWorld - Simple example application\n    HelloDynamic - Database-driven example\n    HelloPages - Static pages example\n</code></pre>"},{"location":"command-line-tools/commands/generate/app-wizard/#step-3-target-directory","title":"Step 3: Target Directory","text":"<p><pre><code>? Where should the application be created? \u203a ./myapp\n</code></pre> - Defaults to <code>./{app-name}</code> - Can specify absolute or relative path</p>"},{"location":"command-line-tools/commands/generate/app-wizard/#step-4-database-configuration","title":"Step 4: Database Configuration","text":"<pre><code>? Would you like to configure a database? (Y/n) \u203a Y\n? Database type? \u203a \n  \u276f H2 (Embedded)\n    MySQL\n    PostgreSQL\n    SQL Server\n    Custom\n</code></pre>"},{"location":"command-line-tools/commands/generate/app-wizard/#step-5-additional-features","title":"Step 5: Additional Features","text":"<pre><code>? Select additional features: \u203a \n  \u25ef Bootstrap CSS framework\n  \u25ef jQuery library\n  \u25ef Sample authentication\n  \u25ef API documentation\n  \u25ef Docker configuration\n</code></pre>"},{"location":"command-line-tools/commands/generate/app-wizard/#step-6-cfml-engine","title":"Step 6: CFML Engine","text":"<pre><code>? Which CFML engine will you use? \u203a \n  \u276f Lucee 5\n    Lucee 6\n    Adobe ColdFusion 2018\n    Adobe ColdFusion 2021\n    Adobe ColdFusion 2023\n</code></pre>"},{"location":"command-line-tools/commands/generate/app-wizard/#step-7-security-settings","title":"Step 7: Security Settings","text":"<pre><code>? Set reload password (leave blank for 'wheels'): \u203a ****\n? Enable CSRF protection? (Y/n) \u203a Y\n? Enable secure cookies? (y/N) \u203a N\n</code></pre>"},{"location":"command-line-tools/commands/generate/app-wizard/#step-8-review-confirm","title":"Step 8: Review &amp; Confirm","text":"<pre><code>Application Configuration:\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nName:       myapp\nTemplate:   Base\nDirectory:  ./myapp\nDatabase:   H2 (Embedded)\nFeatures:   Bootstrap, jQuery\nEngine:     Lucee 5\nReload PWD: ****\n\n? Create application with these settings? (Y/n) \u203a Y\n</code></pre>"},{"location":"command-line-tools/commands/generate/app-wizard/#wizard-flow","title":"Wizard Flow","text":"<pre><code>graph TD\n    A[Start Wizard] --&gt; B[Enter App Name]\n    B --&gt; C[Select Template]\n    C --&gt; D[Choose Directory]\n    D --&gt; E[Configure Database]\n    E --&gt; F[Select Features]\n    F --&gt; G[Choose CFML Engine]\n    G --&gt; H[Security Settings]\n    H --&gt; I[Review Configuration]\n    I --&gt; J{Confirm?}\n    J --&gt;|Yes| K[Create Application]\n    J --&gt;|No| B\n    K --&gt; L[Install Dependencies]\n    L --&gt; M[Show Next Steps]\n</code></pre>"},{"location":"command-line-tools/commands/generate/app-wizard/#expert-mode","title":"Expert Mode","text":"<p>Enable expert mode for additional options:</p> <pre><code>wheels generate app-wizard --expert\n</code></pre> <p>Additional prompts in expert mode: - Custom server ports - JVM settings - Environment-specific configurations - Advanced routing options - Custom plugin repositories - Build tool integration</p>"},{"location":"command-line-tools/commands/generate/app-wizard/#configuration-profiles","title":"Configuration Profiles","text":"<p>Save and reuse configurations:</p>"},{"location":"command-line-tools/commands/generate/app-wizard/#save-profile","title":"Save Profile","text":"<pre><code>? Save this configuration as a profile? (y/N) \u203a Y\n? Profile name: \u203a enterprise-api\n</code></pre>"},{"location":"command-line-tools/commands/generate/app-wizard/#use-profile","title":"Use Profile","text":"<pre><code>wheels generate app-wizard profile=enterprise-api\n</code></pre>"},{"location":"command-line-tools/commands/generate/app-wizard/#list-profiles","title":"List Profiles","text":"<pre><code>wheels generate app-wizard --list-profiles\n</code></pre>"},{"location":"command-line-tools/commands/generate/app-wizard/#feature-descriptions","title":"Feature Descriptions","text":""},{"location":"command-line-tools/commands/generate/app-wizard/#bootstrap-css","title":"Bootstrap CSS","text":"<ul> <li>Includes Bootstrap 5.x</li> <li>Responsive grid system</li> <li>Pre-styled components</li> <li>Example layouts</li> </ul>"},{"location":"command-line-tools/commands/generate/app-wizard/#jquery-library","title":"jQuery Library","text":"<ul> <li>Latest jQuery version</li> <li>AJAX helpers configured</li> <li>Example usage in views</li> </ul>"},{"location":"command-line-tools/commands/generate/app-wizard/#sample-authentication","title":"Sample Authentication","text":"<ul> <li>User model with secure passwords</li> <li>Login/logout controllers</li> <li>Session management</li> <li>Protected routes example</li> </ul>"},{"location":"command-line-tools/commands/generate/app-wizard/#api-documentation","title":"API Documentation","text":"<ul> <li>OpenAPI/Swagger setup</li> <li>Auto-generated documentation</li> <li>Interactive API explorer</li> </ul>"},{"location":"command-line-tools/commands/generate/app-wizard/#docker-configuration","title":"Docker Configuration","text":"<ul> <li>Multi-stage Dockerfile</li> <li>docker-compose.yml</li> <li>Development &amp; production configs</li> <li>Database containers</li> </ul>"},{"location":"command-line-tools/commands/generate/app-wizard/#post-creation-steps","title":"Post-Creation Steps","text":"<p>After successful creation, the wizard displays:</p> <pre><code>\u2713 Application created successfully!\n\nNext steps:\n1. cd myapp\n2. box install (or run manually if skipped)\n3. box server start\n4. Visit http://localhost:3000\n\nAdditional commands:\n- wheels test          Run tests\n- wheels dbmigrate up  Run migrations\n- wheels generate      Generate code\n- wheels help          Show all commands\n</code></pre>"},{"location":"command-line-tools/commands/generate/app-wizard/#error-handling","title":"Error Handling","text":"<p>The wizard handles common issues:</p> <ul> <li>Invalid names: Suggests valid alternatives</li> <li>Existing directories: Offers to overwrite or choose new location</li> <li>Missing dependencies: Provides installation instructions</li> <li>Configuration errors: Allows editing before creation</li> </ul>"},{"location":"command-line-tools/commands/generate/app-wizard/#validation-rules","title":"Validation Rules","text":""},{"location":"command-line-tools/commands/generate/app-wizard/#application-name","title":"Application Name","text":"<ul> <li>Start with letter</li> <li>Alphanumeric plus <code>-</code> and <code>_</code></li> <li>No spaces or special characters</li> <li>Not a reserved word</li> </ul>"},{"location":"command-line-tools/commands/generate/app-wizard/#directory-path","title":"Directory Path","text":"<ul> <li>Must be writable</li> <li>Cannot be system directory</li> <li>Warns if not empty</li> </ul>"},{"location":"command-line-tools/commands/generate/app-wizard/#passwords","title":"Passwords","text":"<ul> <li>Minimum 6 characters</li> <li>Strength indicator</li> <li>Confirmation required</li> </ul>"},{"location":"command-line-tools/commands/generate/app-wizard/#customization","title":"Customization","text":""},{"location":"command-line-tools/commands/generate/app-wizard/#custom-templates","title":"Custom Templates","text":"<p>Add templates to <code>~/.wheels/templates/</code>:</p> <pre><code>~/.wheels/templates/\n\u251c\u2500\u2500 my-template/\n\u2502   \u251c\u2500\u2500 template.json\n\u2502   \u251c\u2500\u2500 config/\n\u2502   \u251c\u2500\u2500 controllers/\n\u2502   \u2514\u2500\u2500 views/\n</code></pre>"},{"location":"command-line-tools/commands/generate/app-wizard/#template-configuration","title":"Template Configuration","text":"<p><code>template.json</code>: <pre><code>{\n  \"name\": \"My Custom Template\",\n  \"description\": \"Custom template for specific use case\",\n  \"author\": \"Your Name\",\n  \"version\": \"1.0.0\",\n  \"prompts\": [\n    {\n      \"name\": \"apiVersion\",\n      \"message\": \"API version?\",\n      \"default\": \"v1\"\n    }\n  ]\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/app-wizard/#integration","title":"Integration","text":""},{"location":"command-line-tools/commands/generate/app-wizard/#cicd-pipeline","title":"CI/CD Pipeline","text":"<p>Generate with CI configuration: <pre><code>wheels generate app-wizard ci=github\n</code></pre></p> <p>Includes: - <code>.github/workflows/test.yml</code> - Build configuration - Deployment scripts</p>"},{"location":"command-line-tools/commands/generate/app-wizard/#ide-configuration","title":"IDE Configuration","text":"<p>Generate with IDE files: <pre><code>wheels generate app-wizard ide=vscode\n</code></pre></p> <p>Includes: - <code>.vscode/settings.json</code> - <code>.vscode/launch.json</code> - <code>.editorconfig</code></p>"},{"location":"command-line-tools/commands/generate/app-wizard/#best-practices","title":"Best Practices","text":"<ol> <li>Run wizard in empty directory</li> <li>Choose descriptive application names</li> <li>Configure database early</li> <li>Enable security features for production</li> <li>Save profiles for team consistency</li> <li>Review all settings before confirming</li> </ol>"},{"location":"command-line-tools/commands/generate/app-wizard/#common-use-cases","title":"Common Use Cases","text":""},{"location":"command-line-tools/commands/generate/app-wizard/#api-only-application","title":"API-Only Application","text":"<ul> <li>Choose Base@BE template</li> <li>Skip Bootstrap/jQuery</li> <li>Enable API documentation</li> <li>Configure CORS settings</li> </ul>"},{"location":"command-line-tools/commands/generate/app-wizard/#traditional-web-application","title":"Traditional Web Application","text":"<ul> <li>Choose Base template</li> <li>Include Bootstrap/jQuery</li> <li>Add sample authentication</li> <li>Configure session management</li> </ul>"},{"location":"command-line-tools/commands/generate/app-wizard/#microservice","title":"Microservice","text":"<ul> <li>Choose Base@BE template</li> <li>Configure Docker</li> <li>Set specific ports</li> <li>Minimal dependencies</li> </ul>"},{"location":"command-line-tools/commands/generate/app-wizard/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/generate/app-wizard/#wizard-freezes","title":"Wizard Freezes","text":"<ul> <li>Check terminal compatibility</li> <li>Try <code>--no-interactive</code> mode</li> <li>Check system resources</li> </ul>"},{"location":"command-line-tools/commands/generate/app-wizard/#installation-fails","title":"Installation Fails","text":"<ul> <li>Verify internet connection</li> <li>Check CommandBox version</li> <li>Try <code>--skip-install</code> and install manually</li> </ul>"},{"location":"command-line-tools/commands/generate/app-wizard/#configuration-issues","title":"Configuration Issues","text":"<ul> <li>Review generated <code>.wheels-cli.json</code></li> <li>Check <code>server.json</code> settings</li> <li>Verify file permissions</li> </ul>"},{"location":"command-line-tools/commands/generate/app-wizard/#see-also","title":"See Also","text":"<ul> <li>wheels generate app - Non-interactive app generation</li> <li>wheels init - Initialize existing directory</li> <li>wheels scaffold - Generate CRUD scaffolding</li> </ul>"},{"location":"command-line-tools/commands/generate/app/","title":"wheels generate app","text":"<p>Create a new Wheels application from templates.</p>"},{"location":"command-line-tools/commands/generate/app/#synopsis","title":"Synopsis","text":"<pre><code>wheels generate app [name] [template] [directory] [options]\nwheels g app [name] [template] [directory] [options]\nwheels new [name] [template] [directory] [options]\n</code></pre>"},{"location":"command-line-tools/commands/generate/app/#description","title":"Description","text":"<p>The <code>wheels generate app</code> command creates a new Wheels application with a complete directory structure, configuration files, and optionally sample code. It supports multiple templates for different starting points.</p>"},{"location":"command-line-tools/commands/generate/app/#arguments","title":"Arguments","text":"Argument Description Default <code>name</code> Application name <code>MyApp</code> <code>template</code> Template to use <code>wheels-base-template@BE</code> <code>directory</code> Target directory <code>./{name}</code>"},{"location":"command-line-tools/commands/generate/app/#options","title":"Options","text":"Option Description Default <code>reloadPassword</code> Set reload password <code>''</code> (empty) <code>datasourceName</code> Database datasource name App name <code>cfmlEngine</code> CFML engine (lucee/adobe) <code>lucee</code> <code>--useBootstrap</code> Include Bootstrap CSS <code>false</code> <code>--setupH2</code> Setup H2 embedded database <code>true</code> <code>--init</code> Initialize as CommandBox package <code>false</code> <code>--force</code> Overwrite existing directory <code>false</code> <code>--help</code> Show help information"},{"location":"command-line-tools/commands/generate/app/#available-templates","title":"Available Templates","text":""},{"location":"command-line-tools/commands/generate/app/#wheels-base-templatebe-default","title":"wheels-base-template@BE (Default)","text":"<p><pre><code>wheels generate app myapp\n</code></pre> - Backend Edition template - Complete MVC structure - Sample code and configuration - H2 database setup by default</p>"},{"location":"command-line-tools/commands/generate/app/#helloworld","title":"HelloWorld","text":"<p><pre><code>wheels generate app myapp HelloWorld\n</code></pre> - Simple \"Hello World\" example - One controller and view - Great for learning</p>"},{"location":"command-line-tools/commands/generate/app/#hellodynamic","title":"HelloDynamic","text":"<p><pre><code>wheels generate app myapp HelloDynamic\n</code></pre> - Dynamic content example - Database interaction - Form handling</p>"},{"location":"command-line-tools/commands/generate/app/#hellopages","title":"HelloPages","text":"<p><pre><code>wheels generate app myapp HelloPages\n</code></pre> - Static pages example - Layout system - Navigation structure</p>"},{"location":"command-line-tools/commands/generate/app/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/generate/app/#create-basic-application","title":"Create basic application","text":"<pre><code>wheels generate app blog\n</code></pre>"},{"location":"command-line-tools/commands/generate/app/#create-with-custom-template","title":"Create with custom template","text":"<pre><code>wheels generate app api Base@BE\n</code></pre>"},{"location":"command-line-tools/commands/generate/app/#create-in-specific-directory","title":"Create in specific directory","text":"<pre><code>wheels generate app name=myapp directory=./projects/\n</code></pre>"},{"location":"command-line-tools/commands/generate/app/#create-with-bootstrap","title":"Create with Bootstrap","text":"<pre><code>wheels generate app portfolio --useBootstrap\n</code></pre>"},{"location":"command-line-tools/commands/generate/app/#create-with-h2-database-default-is-true","title":"Create with H2 database (default is true)","text":"<pre><code>wheels generate app demo --setupH2\n</code></pre>"},{"location":"command-line-tools/commands/generate/app/#create-with-all-options","title":"Create with all options","text":"<pre><code>wheels generate app name=enterprise template=HelloDynamic directory=./apps/ \\\n  reloadPassword=secret \\\n  datasourceName=enterprise_db \\\n  cfmlEngine=adobe \\\n  --useBootstrap \\\n  --setupH2\n</code></pre>"},{"location":"command-line-tools/commands/generate/app/#generated-structure","title":"Generated Structure","text":"<pre><code>myapp/\n\u251c\u2500\u2500 .wheels-cli.json      # CLI configuration\n\u251c\u2500\u2500 box.json              # Dependencies\n\u251c\u2500\u2500 server.json           # Server configuration\n\u251c\u2500\u2500 Application.cfc       # Application settings\n\u251c\u2500\u2500 config/\n\u2502   \u251c\u2500\u2500 app.cfm          # App configuration\n\u2502   \u251c\u2500\u2500 routes.cfm       # URL routes\n\u2502   \u2514\u2500\u2500 settings.cfm     # Framework settings\n\u251c\u2500\u2500 controllers/\n\u2502   \u2514\u2500\u2500 Main.cfc         # Default controller\n\u251c\u2500\u2500 models/\n\u251c\u2500\u2500 views/\n\u2502   \u251c\u2500\u2500 layout.cfm       # Default layout\n\u2502   \u2514\u2500\u2500 main/\n\u2502       \u2514\u2500\u2500 index.cfm    # Home page\n\u251c\u2500\u2500 public/\n\u2502   \u251c\u2500\u2500 stylesheets/\n\u2502   \u251c\u2500\u2500 javascripts/\n\u2502   \u2514\u2500\u2500 images/\n\u251c\u2500\u2500 tests/\n\u2514\u2500\u2500 wheels/              # Framework files\n</code></pre>"},{"location":"command-line-tools/commands/generate/app/#configuration-files","title":"Configuration Files","text":""},{"location":"command-line-tools/commands/generate/app/#boxjson","title":"box.json","text":"<pre><code>{\n  \"name\": \"myapp\",\n  \"version\": \"1.0.0\",\n  \"dependencies\": {\n    \"wheels\": \"^2.5.0\"\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/app/#serverjson","title":"server.json","text":"<pre><code>{\n  \"web\": {\n    \"http\": {\n      \"port\": 3000\n    }\n  },\n  \"app\": {\n    \"cfengine\": \"lucee5\"\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/app/#wheels-clijson","title":".wheels-cli.json","text":"<pre><code>{\n  \"name\": \"myapp\",\n  \"version\": \"1.0.0\",\n  \"framework\": \"wheels\",\n  \"reload\": \"wheels\"\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/app/#database-setup","title":"Database Setup","text":""},{"location":"command-line-tools/commands/generate/app/#with-h2-embedded","title":"With H2 (Embedded)","text":"<p><pre><code>wheels generate app myapp\n</code></pre> - H2 is setup by default (--setupH2=true) - No external database needed - Perfect for development - Auto-configured datasource - To disable: <code>--setupH2=false</code></p>"},{"location":"command-line-tools/commands/generate/app/#with-external-database","title":"With External Database","text":"<ol> <li> <p>Create application:    <pre><code>wheels generate app myapp datasourceName=myapp_db --setupH2=false\n</code></pre></p> </li> <li> <p>Configure in CommandBox:    <pre><code>server set app.datasources.myapp_db={...}\n</code></pre></p> </li> </ol>"},{"location":"command-line-tools/commands/generate/app/#post-generation-steps","title":"Post-Generation Steps","text":"<ol> <li> <p>Navigate to directory <pre><code>cd myapp\n</code></pre></p> </li> <li> <p>Install dependencies <pre><code>box install\n</code></pre></p> </li> <li> <p>Start server <pre><code>box server start\n</code></pre></p> </li> <li> <p>Open browser <pre><code>http://localhost:3000\n</code></pre></p> </li> </ol>"},{"location":"command-line-tools/commands/generate/app/#template-development","title":"Template Development","text":"<p>Create custom templates in <code>~/.commandbox/cfml/modules/wheels-cli/templates/apps/</code>:</p> <pre><code>mytemplate/\n\u251c\u2500\u2500 config/\n\u251c\u2500\u2500 controllers/\n\u251c\u2500\u2500 models/\n\u251c\u2500\u2500 views/\n\u2514\u2500\u2500 template.json\n</code></pre>"},{"location":"command-line-tools/commands/generate/app/#best-practices","title":"Best Practices","text":"<ol> <li>Use descriptive application names</li> <li>Choose appropriate template for project type</li> <li>Set secure reload password for production</li> <li>Configure datasource before starting</li> <li>Run tests after generation</li> </ol>"},{"location":"command-line-tools/commands/generate/app/#common-issues","title":"Common Issues","text":"<ul> <li>Directory exists: Use <code>--force</code> or choose different name</li> <li>Template not found: Check available templates with <code>wheels info</code></li> <li>Datasource errors: Configure database connection</li> <li>Port conflicts: Change port in <code>server.json</code></li> </ul>"},{"location":"command-line-tools/commands/generate/app/#see-also","title":"See Also","text":"<ul> <li>wheels init - Initialize existing application</li> <li>wheels generate app-wizard - Interactive app creation</li> <li>wheels scaffold - Generate CRUD scaffolding</li> </ul>"},{"location":"command-line-tools/commands/generate/controller/","title":"wheels generate controller","text":"<p>Generate a controller with actions and optional views.</p>"},{"location":"command-line-tools/commands/generate/controller/#synopsis","title":"Synopsis","text":"<pre><code>wheels generate controller [name] [actions] [options]\nwheels g controller [name] [actions] [options]\n</code></pre>"},{"location":"command-line-tools/commands/generate/controller/#description","title":"Description","text":"<p>The <code>wheels generate controller</code> command creates a new controller CFC file with specified actions and optionally generates corresponding view files. It supports both traditional and RESTful controller patterns.</p>"},{"location":"command-line-tools/commands/generate/controller/#arguments","title":"Arguments","text":"Argument Description Default <code>name</code> Name of the controller to create (usually plural) Required"},{"location":"command-line-tools/commands/generate/controller/#options","title":"Options","text":"Option Description Default <code>actions</code> Actions to generate (comma-delimited, default: CRUD for REST) <code>--rest</code> Generate RESTful controller with CRUD actions <code>false</code> <code>--api</code> Generate API controller (no view-related actions) <code>false</code> <code>description</code> Controller description <code>--force</code> Overwrite existing files <code>false</code>"},{"location":"command-line-tools/commands/generate/controller/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/generate/controller/#basic-controller","title":"Basic controller","text":"<p><pre><code>wheels generate controller products\n</code></pre> Creates: - <code>/controllers/Products.cfc</code> with <code>index</code> action - <code>/views/products/index.cfm</code></p>"},{"location":"command-line-tools/commands/generate/controller/#controller-with-multiple-actions","title":"Controller with multiple actions","text":"<p><pre><code>wheels generate controller products actions=\"index,show,new,create,edit,update,delete\"\n</code></pre> Creates controller with all CRUD actions and corresponding views.</p>"},{"location":"command-line-tools/commands/generate/controller/#restful-controller","title":"RESTful controller","text":"<p><pre><code>wheels generate controller products --rest\n</code></pre> Automatically generates all RESTful actions: - <code>index</code> - List all products - <code>show</code> - Show single product - <code>new</code> - New product form - <code>create</code> - Create product - <code>edit</code> - Edit product form - <code>update</code> - Update product - <code>delete</code> - Delete product</p>"},{"location":"command-line-tools/commands/generate/controller/#api-controller","title":"API controller","text":"<p><pre><code>wheels generate controller api/products --api\n</code></pre> Creates: - <code>/controllers/api/Products.cfc</code> with JSON responses - No view files</p>"},{"location":"command-line-tools/commands/generate/controller/#custom-actions","title":"Custom actions","text":"<pre><code>wheels generate controller reports actions=\"dashboard,monthly,yearly,export\"\n</code></pre>"},{"location":"command-line-tools/commands/generate/controller/#generated-code","title":"Generated Code","text":""},{"location":"command-line-tools/commands/generate/controller/#basic-controller_1","title":"Basic Controller","text":"<pre><code>component extends=\"Controller\" {\n\n    function init() {\n        // Constructor\n    }\n\n    function index() {\n        products = model(\"Product\").findAll();\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/controller/#restful-controller_1","title":"RESTful Controller","text":"<pre><code>component extends=\"Controller\" {\n\n    function init() {\n        // Constructor\n    }\n\n    function index() {\n        products = model(\"Product\").findAll();\n    }\n\n    function show() {\n        product = model(\"Product\").findByKey(params.key);\n        if (!IsObject(product)) {\n            flashInsert(error=\"Product not found\");\n            redirectTo(action=\"index\");\n        }\n    }\n\n    function new() {\n        product = model(\"Product\").new();\n    }\n\n    function create() {\n        product = model(\"Product\").new(params.product);\n        if (product.save()) {\n            flashInsert(success=\"Product created successfully\");\n            redirectTo(action=\"index\");\n        } else {\n            renderView(action=\"new\");\n        }\n    }\n\n    function edit() {\n        product = model(\"Product\").findByKey(params.key);\n        if (!IsObject(product)) {\n            flashInsert(error=\"Product not found\");\n            redirectTo(action=\"index\");\n        }\n    }\n\n    function update() {\n        product = model(\"Product\").findByKey(params.key);\n        if (IsObject(product) &amp;&amp; product.update(params.product)) {\n            flashInsert(success=\"Product updated successfully\");\n            redirectTo(action=\"index\");\n        } else {\n            renderView(action=\"edit\");\n        }\n    }\n\n    function delete() {\n        product = model(\"Product\").findByKey(params.key);\n        if (IsObject(product) &amp;&amp; product.delete()) {\n            flashInsert(success=\"Product deleted successfully\");\n        } else {\n            flashInsert(error=\"Could not delete product\");\n        }\n        redirectTo(action=\"index\");\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/controller/#api-controller_1","title":"API Controller","text":"<pre><code>component extends=\"Controller\" {\n\n    function init() {\n        provides(\"json\");\n    }\n\n    function index() {\n        products = model(\"Product\").findAll();\n        renderWith(products);\n    }\n\n    function show() {\n        product = model(\"Product\").findByKey(params.key);\n        if (IsObject(product)) {\n            renderWith(product);\n        } else {\n            renderWith({error: \"Product not found\"}, status=404);\n        }\n    }\n\n    function create() {\n        product = model(\"Product\").new(params.product);\n        if (product.save()) {\n            renderWith(product, status=201);\n        } else {\n            renderWith({errors: product.allErrors()}, status=422);\n        }\n    }\n\n    function update() {\n        product = model(\"Product\").findByKey(params.key);\n        if (IsObject(product) &amp;&amp; product.update(params.product)) {\n            renderWith(product);\n        } else {\n            renderWith({errors: product.allErrors()}, status=422);\n        }\n    }\n\n    function delete() {\n        product = model(\"Product\").findByKey(params.key);\n        if (IsObject(product) &amp;&amp; product.delete()) {\n            renderWith({message: \"Product deleted\"});\n        } else {\n            renderWith({error: \"Could not delete\"}, status=400);\n        }\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/controller/#view-generation","title":"View Generation","text":"<p>Views are automatically generated for non-API controllers:</p>"},{"location":"command-line-tools/commands/generate/controller/#indexcfm","title":"index.cfm","text":"<pre><code>&lt;h1&gt;Products&lt;/h1&gt;\n\n&lt;p&gt;#linkTo(text=\"New Product\", action=\"new\")#&lt;/p&gt;\n\n&lt;table&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt;Name&lt;/th&gt;\n            &lt;th&gt;Actions&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        &lt;cfloop query=\"products\"&gt;\n            &lt;tr&gt;\n                &lt;td&gt;#products.name#&lt;/td&gt;\n                &lt;td&gt;\n                    #linkTo(text=\"Show\", action=\"show\", key=products.id)#\n                    #linkTo(text=\"Edit\", action=\"edit\", key=products.id)#\n                    #linkTo(text=\"Delete\", action=\"delete\", key=products.id, method=\"delete\", confirm=\"Are you sure?\")#\n                &lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/cfloop&gt;\n    &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/controller/#naming-conventions","title":"Naming Conventions","text":"<ul> <li>Controller names: PascalCase, typically plural (Products, Users)</li> <li>Action names: camelCase (index, show, createProduct)</li> <li>File locations: </li> <li>Controllers: <code>/controllers/</code></li> <li>Nested: <code>/controllers/admin/Products.cfc</code></li> <li>Views: <code>/views/{controller}/</code></li> </ul>"},{"location":"command-line-tools/commands/generate/controller/#routes-configuration","title":"Routes Configuration","text":"<p>Add routes in <code>/config/routes.cfm</code>:</p>"},{"location":"command-line-tools/commands/generate/controller/#traditional-routes","title":"Traditional Routes","text":"<pre><code>&lt;cfset get(name=\"products\", to=\"products##index\")&gt;\n&lt;cfset get(name=\"product\", to=\"products##show\")&gt;\n&lt;cfset post(name=\"products\", to=\"products##create\")&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/controller/#restful-resources","title":"RESTful Resources","text":"<pre><code>&lt;cfset resources(\"products\")&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/controller/#nested-resources","title":"Nested Resources","text":"<pre><code>&lt;cfset namespace(\"api\")&gt;\n    &lt;cfset resources(\"products\")&gt;\n&lt;/cfset&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/controller/#testing","title":"Testing","text":"<p>Generate tests alongside controllers: <pre><code>wheels generate controller products --rest\nwheels generate test controller products\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/controller/#best-practices","title":"Best Practices","text":"<ol> <li>Use plural names for resource controllers</li> <li>Keep controllers focused on single resources</li> <li>Use <code>--rest</code> for standard CRUD operations</li> <li>Implement proper error handling</li> <li>Add authentication in <code>init()</code> method</li> <li>Use filters for common functionality</li> </ol>"},{"location":"command-line-tools/commands/generate/controller/#common-patterns","title":"Common Patterns","text":""},{"location":"command-line-tools/commands/generate/controller/#authentication-filter","title":"Authentication Filter","text":"<pre><code>function init() {\n    filters(through=\"authenticate\", except=\"index,show\");\n}\n\nprivate function authenticate() {\n    if (!session.isLoggedIn) {\n        redirectTo(controller=\"sessions\", action=\"new\");\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/controller/#pagination","title":"Pagination","text":"<pre><code>function index() {\n    products = model(\"Product\").findAll(\n        page=params.page ?: 1,\n        perPage=25,\n        order=\"createdAt DESC\"\n    );\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/controller/#search","title":"Search","text":"<pre><code>function index() {\n    if (StructKeyExists(params, \"q\")) {\n        products = model(\"Product\").findAll(\n            where=\"name LIKE :search OR description LIKE :search\",\n            params={search: \"%#params.q#%\"}\n        );\n    } else {\n        products = model(\"Product\").findAll();\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/controller/#see-also","title":"See Also","text":"<ul> <li>wheels generate model - Generate models</li> <li>wheels generate view - Generate views</li> <li>wheels scaffold - Generate complete CRUD</li> <li>wheels generate test - Generate controller tests</li> </ul>"},{"location":"command-line-tools/commands/generate/frontend/","title":"wheels generate frontend","text":"<p>Generate frontend code including JavaScript, CSS, and interactive components.</p> <p>\u26a0\ufe0f Note: This command is currently marked as disabled in the codebase. The documentation below represents the intended functionality when the command is restored.</p>"},{"location":"command-line-tools/commands/generate/frontend/#synopsis","title":"Synopsis","text":"<pre><code>wheels generate frontend [type] [name] [options]\nwheels g frontend [type] [name] [options]\n</code></pre>"},{"location":"command-line-tools/commands/generate/frontend/#description","title":"Description","text":"<p>The <code>wheels generate frontend</code> command creates frontend assets including JavaScript modules, CSS stylesheets, and interactive components. It supports various frontend frameworks and patterns while integrating seamlessly with Wheels views.</p>"},{"location":"command-line-tools/commands/generate/frontend/#current-status","title":"Current Status","text":"<p>This command is temporarily disabled. Use manual approaches:</p> <pre><code># Create frontend files manually in:\n# /public/javascripts/\n# /public/stylesheets/\n# /views/components/\n</code></pre>"},{"location":"command-line-tools/commands/generate/frontend/#arguments-when-enabled","title":"Arguments (When Enabled)","text":"Argument Description Default <code>type</code> Type of frontend asset (component, module, style) Required <code>name</code> Name of the asset Required"},{"location":"command-line-tools/commands/generate/frontend/#options-when-enabled","title":"Options (When Enabled)","text":"Option Description Default <code>--framework</code> Frontend framework (vanilla, alpine, vue, htmx) <code>vanilla</code> <code>--style</code> CSS framework (none, bootstrap, tailwind) <code>none</code> <code>--bundler</code> Use bundler (webpack, vite, none) <code>none</code> <code>--typescript</code> Generate TypeScript files <code>false</code> <code>--test</code> Generate test files <code>true</code> <code>--force</code> Overwrite existing files <code>false</code> <code>--help</code> Show help information"},{"location":"command-line-tools/commands/generate/frontend/#intended-functionality","title":"Intended Functionality","text":""},{"location":"command-line-tools/commands/generate/frontend/#generate-component","title":"Generate Component","text":"<pre><code>wheels generate frontend component productCard --framework=alpine\n</code></pre> <p>Would generate:</p> <p><code>/public/javascripts/components/productCard.js</code>: <pre><code>// Product Card Component\ndocument.addEventListener('alpine:init', () =&gt; {\n    Alpine.data('productCard', (initialData = {}) =&gt; ({\n        // State\n        product: initialData.product || {},\n        isLoading: false,\n        isFavorite: false,\n\n        // Computed\n        get formattedPrice() {\n            return new Intl.NumberFormat('en-US', {\n                style: 'currency',\n                currency: 'USD'\n            }).format(this.product.price || 0);\n        },\n\n        // Methods\n        async toggleFavorite() {\n            this.isLoading = true;\n            try {\n                const response = await fetch(`/api/products/${this.product.id}/favorite`, {\n                    method: this.isFavorite ? 'DELETE' : 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'X-CSRF-Token': this.getCsrfToken()\n                    }\n                });\n\n                if (response.ok) {\n                    this.isFavorite = !this.isFavorite;\n                    this.$dispatch('favorite-changed', {\n                        productId: this.product.id,\n                        isFavorite: this.isFavorite\n                    });\n                }\n            } catch (error) {\n                console.error('Failed to toggle favorite:', error);\n                this.$dispatch('notification', {\n                    type: 'error',\n                    message: 'Failed to update favorite status'\n                });\n            } finally {\n                this.isLoading = false;\n            }\n        },\n\n        async addToCart() {\n            this.isLoading = true;\n            try {\n                const response = await fetch('/api/cart/items', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'X-CSRF-Token': this.getCsrfToken()\n                    },\n                    body: JSON.stringify({\n                        productId: this.product.id,\n                        quantity: 1\n                    })\n                });\n\n                if (response.ok) {\n                    this.$dispatch('cart-updated');\n                    this.$dispatch('notification', {\n                        type: 'success',\n                        message: 'Added to cart'\n                    });\n                }\n            } catch (error) {\n                console.error('Failed to add to cart:', error);\n            } finally {\n                this.isLoading = false;\n            }\n        },\n\n        getCsrfToken() {\n            return document.querySelector('meta[name=\"csrf-token\"]')?.content || '';\n        }\n    }));\n});\n</code></pre></p> <p><code>/public/stylesheets/components/productCard.css</code>: <pre><code>/* Product Card Styles */\n.product-card {\n    @apply bg-white rounded-lg shadow-md overflow-hidden transition-transform hover:scale-105;\n}\n\n.product-card__image {\n    @apply w-full h-48 object-cover;\n}\n\n.product-card__content {\n    @apply p-4;\n}\n\n.product-card__title {\n    @apply text-lg font-semibold text-gray-800 mb-2;\n}\n\n.product-card__price {\n    @apply text-xl font-bold text-blue-600 mb-3;\n}\n\n.product-card__actions {\n    @apply flex justify-between items-center;\n}\n\n.product-card__button {\n    @apply px-4 py-2 rounded font-medium transition-colors;\n}\n\n.product-card__button--primary {\n    @apply bg-blue-500 text-white hover:bg-blue-600;\n}\n\n.product-card__button--secondary {\n    @apply bg-gray-200 text-gray-700 hover:bg-gray-300;\n}\n\n.product-card__button:disabled {\n    @apply opacity-50 cursor-not-allowed;\n}\n</code></pre></p> <p><code>/views/components/_productCard.cfm</code>: <pre><code>&lt;div class=\"product-card\" \n     x-data=\"productCard({\n         product: #SerializeJSON({\n             id: arguments.product.id,\n             name: arguments.product.name,\n             price: arguments.product.price,\n             image: arguments.product.imageUrl\n         })#\n     })\"&gt;\n\n    &lt;img :src=\"product.image\" \n         :alt=\"product.name\" \n         class=\"product-card__image\"&gt;\n\n    &lt;div class=\"product-card__content\"&gt;\n        &lt;h3 class=\"product-card__title\" x-text=\"product.name\"&gt;&lt;/h3&gt;\n        &lt;p class=\"product-card__price\" x-text=\"formattedPrice\"&gt;&lt;/p&gt;\n\n        &lt;div class=\"product-card__actions\"&gt;\n            &lt;button @click=\"addToCart\" \n                    :disabled=\"isLoading\"\n                    class=\"product-card__button product-card__button--primary\"&gt;\n                &lt;span x-show=\"!isLoading\"&gt;Add to Cart&lt;/span&gt;\n                &lt;span x-show=\"isLoading\"&gt;Adding...&lt;/span&gt;\n            &lt;/button&gt;\n\n            &lt;button @click=\"toggleFavorite\" \n                    :disabled=\"isLoading\"\n                    class=\"product-card__button product-card__button--secondary\"&gt;\n                &lt;span x-show=\"!isFavorite\"&gt;\u2661&lt;/span&gt;\n                &lt;span x-show=\"isFavorite\"&gt;\u2665&lt;/span&gt;\n            &lt;/button&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/frontend/#generate-javascript-module","title":"Generate JavaScript Module","text":"<pre><code>wheels generate frontend module api --typescript\n</code></pre> <p>Would generate <code>/public/javascripts/modules/api.ts</code>: <pre><code>// API Module\ninterface RequestOptions extends RequestInit {\n    params?: Record&lt;string, any&gt;;\n}\n\ninterface ApiResponse&lt;T = any&gt; {\n    data: T;\n    meta?: Record&lt;string, any&gt;;\n    errors?: Array&lt;{\n        field: string;\n        message: string;\n    }&gt;;\n}\n\nclass ApiClient {\n    private baseUrl: string;\n    private defaultHeaders: Record&lt;string, string&gt;;\n\n    constructor(baseUrl: string = '/api') {\n        this.baseUrl = baseUrl;\n        this.defaultHeaders = {\n            'Content-Type': 'application/json',\n            'X-Requested-With': 'XMLHttpRequest'\n        };\n\n        // Add CSRF token if available\n        const csrfToken = document.querySelector&lt;HTMLMetaElement&gt;('meta[name=\"csrf-token\"]')?.content;\n        if (csrfToken) {\n            this.defaultHeaders['X-CSRF-Token'] = csrfToken;\n        }\n    }\n\n    async request&lt;T = any&gt;(\n        endpoint: string,\n        options: RequestOptions = {}\n    ): Promise&lt;ApiResponse&lt;T&gt;&gt; {\n        const { params, ...fetchOptions } = options;\n\n        // Build URL with params\n        const url = new URL(this.baseUrl + endpoint, window.location.origin);\n        if (params) {\n            Object.entries(params).forEach(([key, value]) =&gt; {\n                if (value !== undefined &amp;&amp; value !== null) {\n                    url.searchParams.append(key, String(value));\n                }\n            });\n        }\n\n        // Merge headers\n        const headers = {\n            ...this.defaultHeaders,\n            ...fetchOptions.headers\n        };\n\n        try {\n            const response = await fetch(url.toString(), {\n                ...fetchOptions,\n                headers\n            });\n\n            if (!response.ok) {\n                throw new ApiError(response.status, await response.text());\n            }\n\n            const data = await response.json();\n            return data;\n\n        } catch (error) {\n            if (error instanceof ApiError) {\n                throw error;\n            }\n            throw new ApiError(0, 'Network error');\n        }\n    }\n\n    get&lt;T = any&gt;(endpoint: string, params?: Record&lt;string, any&gt;): Promise&lt;ApiResponse&lt;T&gt;&gt; {\n        return this.request&lt;T&gt;(endpoint, { method: 'GET', params });\n    }\n\n    post&lt;T = any&gt;(endpoint: string, data?: any): Promise&lt;ApiResponse&lt;T&gt;&gt; {\n        return this.request&lt;T&gt;(endpoint, {\n            method: 'POST',\n            body: JSON.stringify(data)\n        });\n    }\n\n    put&lt;T = any&gt;(endpoint: string, data?: any): Promise&lt;ApiResponse&lt;T&gt;&gt; {\n        return this.request&lt;T&gt;(endpoint, {\n            method: 'PUT',\n            body: JSON.stringify(data)\n        });\n    }\n\n    delete&lt;T = any&gt;(endpoint: string): Promise&lt;ApiResponse&lt;T&gt;&gt; {\n        return this.request&lt;T&gt;(endpoint, { method: 'DELETE' });\n    }\n}\n\nclass ApiError extends Error {\n    constructor(public status: number, message: string) {\n        super(message);\n        this.name = 'ApiError';\n    }\n}\n\n// Export singleton instance\nexport const api = new ApiClient();\n\n// Export types\nexport type { ApiResponse, RequestOptions };\nexport { ApiClient, ApiError };\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/frontend/#generate-htmx-component","title":"Generate HTMX Component","text":"<pre><code>wheels generate frontend component searchForm --framework=htmx\n</code></pre> <p>Would generate:</p> <p><code>/views/components/_searchForm.cfm</code>: <pre><code>&lt;form hx-get=\"/products/search\" \n      hx-trigger=\"submit, keyup changed delay:500ms from:input[name='q']\"\n      hx-target=\"##search-results\"\n      hx-indicator=\"##search-spinner\"\n      class=\"search-form\"&gt;\n\n    &lt;div class=\"search-form__input-group\"&gt;\n        &lt;input type=\"search\" \n               name=\"q\" \n               value=\"#params.q ?: ''#\"\n               placeholder=\"Search products...\"\n               class=\"search-form__input\"&gt;\n\n        &lt;button type=\"submit\" class=\"search-form__button\"&gt;\n            Search\n        &lt;/button&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"search-form__filters\"&gt;\n        &lt;select name=\"category\" \n                hx-get=\"/products/search\"\n                hx-trigger=\"change\"\n                hx-target=\"##search-results\"\n                hx-include=\"[name='q']\"\n                class=\"search-form__select\"&gt;\n            &lt;option value=\"\"&gt;All Categories&lt;/option&gt;\n            &lt;cfloop query=\"categories\"&gt;\n                &lt;option value=\"#categories.id#\" \n                        &lt;cfif params.category == categories.id&gt;selected&lt;/cfif&gt;&gt;\n                    #categories.name#\n                &lt;/option&gt;\n            &lt;/cfloop&gt;\n        &lt;/select&gt;\n\n        &lt;select name=\"sort\" \n                hx-get=\"/products/search\"\n                hx-trigger=\"change\"\n                hx-target=\"##search-results\"\n                hx-include=\"[name='q'],[name='category']\"\n                class=\"search-form__select\"&gt;\n            &lt;option value=\"relevance\"&gt;Relevance&lt;/option&gt;\n            &lt;option value=\"price-asc\"&gt;Price: Low to High&lt;/option&gt;\n            &lt;option value=\"price-desc\"&gt;Price: High to Low&lt;/option&gt;\n            &lt;option value=\"name\"&gt;Name&lt;/option&gt;\n        &lt;/select&gt;\n    &lt;/div&gt;\n&lt;/form&gt;\n\n&lt;div id=\"search-spinner\" class=\"htmx-indicator\"&gt;\n    &lt;div class=\"spinner\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div id=\"search-results\"&gt;\n    &lt;!--- Results will be loaded here ---&gt;\n&lt;/div&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/frontend/#generate-vue-component","title":"Generate Vue Component","text":"<pre><code>wheels generate frontend component todoList --framework=vue\n</code></pre> <p>Would generate <code>/public/javascripts/components/TodoList.vue</code>: <pre><code>&lt;template&gt;\n  &lt;div class=\"todo-list\"&gt;\n    &lt;h2&gt;{{ title }}&lt;/h2&gt;\n\n    &lt;form @submit.prevent=\"addTodo\" class=\"todo-form\"&gt;\n      &lt;input\n        v-model=\"newTodo\"\n        type=\"text\"\n        placeholder=\"Add a new todo...\"\n        class=\"todo-form__input\"\n      &gt;\n      &lt;button type=\"submit\" class=\"todo-form__button\"&gt;\n        Add\n      &lt;/button&gt;\n    &lt;/form&gt;\n\n    &lt;ul class=\"todo-items\"&gt;\n      &lt;li\n        v-for=\"todo in filteredTodos\"\n        :key=\"todo.id\"\n        class=\"todo-item\"\n        :class=\"{ 'todo-item--completed': todo.completed }\"\n      &gt;\n        &lt;input\n          type=\"checkbox\"\n          v-model=\"todo.completed\"\n          @change=\"updateTodo(todo)\"\n        &gt;\n        &lt;span class=\"todo-item__text\"&gt;{{ todo.text }}&lt;/span&gt;\n        &lt;button\n          @click=\"deleteTodo(todo.id)\"\n          class=\"todo-item__delete\"\n        &gt;\n          \u00d7\n        &lt;/button&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n\n    &lt;div class=\"todo-filters\"&gt;\n      &lt;button\n        v-for=\"filter in filters\"\n        :key=\"filter\"\n        @click=\"currentFilter = filter\"\n        :class=\"{ active: currentFilter === filter }\"\n        class=\"todo-filter\"\n      &gt;\n        {{ filter }}\n      &lt;/button&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport { ref, computed, onMounted } from 'vue';\nimport { api } from '../modules/api';\n\nexport default {\n  name: 'TodoList',\n  props: {\n    title: {\n      type: String,\n      default: 'Todo List'\n    }\n  },\n  setup() {\n    const todos = ref([]);\n    const newTodo = ref('');\n    const currentFilter = ref('all');\n    const filters = ['all', 'active', 'completed'];\n\n    const filteredTodos = computed(() =&gt; {\n      switch (currentFilter.value) {\n        case 'active':\n          return todos.value.filter(todo =&gt; !todo.completed);\n        case 'completed':\n          return todos.value.filter(todo =&gt; todo.completed);\n        default:\n          return todos.value;\n      }\n    });\n\n    const loadTodos = async () =&gt; {\n      try {\n        const response = await api.get('/todos');\n        todos.value = response.data;\n      } catch (error) {\n        console.error('Failed to load todos:', error);\n      }\n    };\n\n    const addTodo = async () =&gt; {\n      if (!newTodo.value.trim()) return;\n\n      try {\n        const response = await api.post('/todos', {\n          text: newTodo.value,\n          completed: false\n        });\n        todos.value.push(response.data);\n        newTodo.value = '';\n      } catch (error) {\n        console.error('Failed to add todo:', error);\n      }\n    };\n\n    const updateTodo = async (todo) =&gt; {\n      try {\n        await api.put(`/todos/${todo.id}`, {\n          completed: todo.completed\n        });\n      } catch (error) {\n        console.error('Failed to update todo:', error);\n        todo.completed = !todo.completed;\n      }\n    };\n\n    const deleteTodo = async (id) =&gt; {\n      try {\n        await api.delete(`/todos/${id}`);\n        todos.value = todos.value.filter(todo =&gt; todo.id !== id);\n      } catch (error) {\n        console.error('Failed to delete todo:', error);\n      }\n    };\n\n    onMounted(loadTodos);\n\n    return {\n      todos,\n      newTodo,\n      currentFilter,\n      filters,\n      filteredTodos,\n      addTodo,\n      updateTodo,\n      deleteTodo\n    };\n  }\n};\n&lt;/script&gt;\n\n&lt;style scoped&gt;\n.todo-list {\n  max-width: 500px;\n  margin: 0 auto;\n}\n\n.todo-form {\n  display: flex;\n  margin-bottom: 1rem;\n}\n\n.todo-form__input {\n  flex: 1;\n  padding: 0.5rem;\n  border: 1px solid #ddd;\n  border-radius: 4px 0 0 4px;\n}\n\n.todo-form__button {\n  padding: 0.5rem 1rem;\n  background: #007bff;\n  color: white;\n  border: none;\n  border-radius: 0 4px 4px 0;\n  cursor: pointer;\n}\n\n.todo-items {\n  list-style: none;\n  padding: 0;\n}\n\n.todo-item {\n  display: flex;\n  align-items: center;\n  padding: 0.5rem;\n  border-bottom: 1px solid #eee;\n}\n\n.todo-item--completed .todo-item__text {\n  text-decoration: line-through;\n  opacity: 0.6;\n}\n\n.todo-item__delete {\n  margin-left: auto;\n  background: none;\n  border: none;\n  color: #dc3545;\n  font-size: 1.5rem;\n  cursor: pointer;\n}\n\n.todo-filters {\n  display: flex;\n  gap: 0.5rem;\n  margin-top: 1rem;\n}\n\n.todo-filter {\n  padding: 0.25rem 0.75rem;\n  border: 1px solid #ddd;\n  background: white;\n  cursor: pointer;\n  border-radius: 4px;\n}\n\n.todo-filter.active {\n  background: #007bff;\n  color: white;\n  border-color: #007bff;\n}\n&lt;/style&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/frontend/#workaround-implementation","title":"Workaround Implementation","text":"<p>Until the command is fixed, create frontend assets manually:</p>"},{"location":"command-line-tools/commands/generate/frontend/#1-directory-structure","title":"1. Directory Structure","text":"<pre><code>/public/\n\u251c\u2500\u2500 javascripts/\n\u2502   \u251c\u2500\u2500 app.js\n\u2502   \u251c\u2500\u2500 components/\n\u2502   \u251c\u2500\u2500 modules/\n\u2502   \u2514\u2500\u2500 vendor/\n\u251c\u2500\u2500 stylesheets/\n\u2502   \u251c\u2500\u2500 app.css\n\u2502   \u251c\u2500\u2500 components/\n\u2502   \u2514\u2500\u2500 vendor/\n\u2514\u2500\u2500 images/\n</code></pre>"},{"location":"command-line-tools/commands/generate/frontend/#2-basic-app-structure","title":"2. Basic App Structure","text":"<p><code>/public/javascripts/app.js</code>: <pre><code>// Main application JavaScript\n(function() {\n    'use strict';\n\n    // Initialize on DOM ready\n    document.addEventListener('DOMContentLoaded', function() {\n        initializeComponents();\n        setupEventListeners();\n        loadDynamicContent();\n    });\n\n    function initializeComponents() {\n        // Initialize all components\n        document.querySelectorAll('[data-component]').forEach(element =&gt; {\n            const componentName = element.dataset.component;\n            if (window.components &amp;&amp; window.components[componentName]) {\n                new window.components[componentName](element);\n            }\n        });\n    }\n\n    function setupEventListeners() {\n        // Global event delegation\n        document.addEventListener('click', handleClick);\n        document.addEventListener('submit', handleSubmit);\n    }\n\n    function handleClick(event) {\n        // Handle data-action clicks\n        const action = event.target.closest('[data-action]');\n        if (action) {\n            event.preventDefault();\n            const actionName = action.dataset.action;\n            // Handle action\n        }\n    }\n\n    function handleSubmit(event) {\n        // Handle AJAX forms\n        const form = event.target;\n        if (form.dataset.remote === 'true') {\n            event.preventDefault();\n            submitFormAjax(form);\n        }\n    }\n\n    function submitFormAjax(form) {\n        const formData = new FormData(form);\n\n        fetch(form.action, {\n            method: form.method,\n            body: formData,\n            headers: {\n                'X-Requested-With': 'XMLHttpRequest'\n            }\n        })\n        .then(response =&gt; response.json())\n        .then(data =&gt; {\n            // Handle response\n        })\n        .catch(error =&gt; {\n            console.error('Form submission error:', error);\n        });\n    }\n\n    function loadDynamicContent() {\n        // Load content marked for lazy loading\n        const lazyElements = document.querySelectorAll('[data-lazy-load]');\n\n        const observer = new IntersectionObserver((entries) =&gt; {\n            entries.forEach(entry =&gt; {\n                if (entry.isIntersecting) {\n                    loadContent(entry.target);\n                    observer.unobserve(entry.target);\n                }\n            });\n        });\n\n        lazyElements.forEach(el =&gt; observer.observe(el));\n    }\n\n    function loadContent(element) {\n        const url = element.dataset.lazyLoad;\n        fetch(url)\n            .then(response =&gt; response.text())\n            .then(html =&gt; {\n                element.innerHTML = html;\n                initializeComponents();\n            });\n    }\n\n})();\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/frontend/#3-css-structure","title":"3. CSS Structure","text":"<p><code>/public/stylesheets/app.css</code>: <pre><code>/* Base styles */\n:root {\n    --primary-color: #007bff;\n    --secondary-color: #6c757d;\n    --success-color: #28a745;\n    --danger-color: #dc3545;\n    --warning-color: #ffc107;\n    --info-color: #17a2b8;\n    --light-color: #f8f9fa;\n    --dark-color: #343a40;\n}\n\n/* Layout */\n.container {\n    max-width: 1200px;\n    margin: 0 auto;\n    padding: 0 1rem;\n}\n\n/* Components */\n@import 'components/buttons.css';\n@import 'components/forms.css';\n@import 'components/cards.css';\n@import 'components/modals.css';\n\n/* Utilities */\n.hidden {\n    display: none !important;\n}\n\n.loading {\n    opacity: 0.6;\n    pointer-events: none;\n}\n\n/* Animations */\n@keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n}\n\n.fade-in {\n    animation: fadeIn 0.3s ease-in;\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/frontend/#best-practices","title":"Best Practices","text":"<ol> <li>Organize by feature: Group related files together</li> <li>Use modules: Keep code modular and reusable</li> <li>Follow conventions: Consistent naming and structure</li> <li>Progressive enhancement: Work without JavaScript</li> <li>Optimize performance: Minimize and bundle assets</li> <li>Test components: Unit and integration tests</li> <li>Document APIs: Clear component documentation</li> <li>Handle errors: Graceful error handling</li> <li>Accessibility: ARIA labels and keyboard support</li> <li>Security: Validate inputs, use CSRF tokens</li> </ol>"},{"location":"command-line-tools/commands/generate/frontend/#see-also","title":"See Also","text":"<ul> <li>wheels generate view - Generate view files</li> <li>wheels generate controller - Generate controllers</li> <li>wheels scaffold - Generate complete CRUD</li> </ul>"},{"location":"command-line-tools/commands/generate/model/","title":"wheels generate model","text":"<p>Generate a model with properties, validations, and associations.</p>"},{"location":"command-line-tools/commands/generate/model/#synopsis","title":"Synopsis","text":"<pre><code>wheels generate model [name] [options]\nwheels g model [name] [options]\n</code></pre>"},{"location":"command-line-tools/commands/generate/model/#description","title":"Description","text":"<p>The <code>wheels generate model</code> command creates a new model CFC file with optional properties, associations, and database migrations. Models represent database tables and contain business logic, validations, and relationships.</p>"},{"location":"command-line-tools/commands/generate/model/#arguments","title":"Arguments","text":"Argument Description Default <code>name</code> Model name (singular) Required"},{"location":"command-line-tools/commands/generate/model/#options","title":"Options","text":"Option Description Default <code>--migration</code> Generate database migration <code>true</code> <code>properties</code> Model properties (format: name:type,name2:type2) <code>belongs-to</code> Parent model relationships (comma-separated) <code>has-many</code> Child model relationships (comma-separated) <code>has-one</code> One-to-one relationships (comma-separated) <code>primary-key</code> Primary key column name(s) <code>id</code> <code>table-name</code> Custom database table name <code>description</code> Model description <code>--force</code> Overwrite existing files <code>false</code>"},{"location":"command-line-tools/commands/generate/model/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/generate/model/#basic-model","title":"Basic model","text":"<p><pre><code>wheels generate model user\n</code></pre> Creates: - <code>/models/User.cfc</code> - Migration file (if enabled)</p>"},{"location":"command-line-tools/commands/generate/model/#model-with-properties","title":"Model with properties","text":"<pre><code>wheels generate model user properties=\"firstName:string,lastName:string,email:string,age:integer\"\n</code></pre>"},{"location":"command-line-tools/commands/generate/model/#model-with-associations","title":"Model with associations","text":"<pre><code>wheels generate model post belongs-to=\"user\" has-many=\"comments\"\n</code></pre>"},{"location":"command-line-tools/commands/generate/model/#model-without-migration","title":"Model without migration","text":"<pre><code>wheels generate model setting --migration=false\n</code></pre>"},{"location":"command-line-tools/commands/generate/model/#complex-model","title":"Complex model","text":"<pre><code>wheels generate model product \\\n  properties=\"name:string,price:decimal,stock:integer,active:boolean\" \\\n  belongs-to=\"category,brand\" \\\n  has-many=\"reviews,orderItems\"\n</code></pre>"},{"location":"command-line-tools/commands/generate/model/#property-types","title":"Property Types","text":"Type Database Type CFML Type <code>string</code> VARCHAR(255) string <code>text</code> TEXT string <code>integer</code> INTEGER numeric <code>biginteger</code> BIGINT numeric <code>float</code> FLOAT numeric <code>decimal</code> DECIMAL(10,2) numeric <code>boolean</code> BOOLEAN boolean <code>date</code> DATE date <code>datetime</code> DATETIME date <code>timestamp</code> TIMESTAMP date <code>binary</code> BLOB binary <code>uuid</code> VARCHAR(35) string"},{"location":"command-line-tools/commands/generate/model/#generated-code","title":"Generated Code","text":""},{"location":"command-line-tools/commands/generate/model/#basic-model_1","title":"Basic Model","text":"<pre><code>component extends=\"Model\" {\n\n    function init() {\n        // Table name (optional if following conventions)\n        table(\"users\");\n\n        // Validations\n        validatesPresenceOf(\"email\");\n        validatesUniquenessOf(\"email\");\n        validatesFormatOf(\"email\", regex=\"^[^@]+@[^@]+\\.[^@]+$\");\n\n        // Callbacks\n        beforeCreate(\"setDefaultValues\");\n    }\n\n    private function setDefaultValues() {\n        if (!StructKeyExists(this, \"createdAt\")) {\n            this.createdAt = Now();\n        }\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/model/#model-with-properties_1","title":"Model with Properties","text":"<pre><code>component extends=\"Model\" {\n\n    function init() {\n        // Properties\n        property(name=\"firstName\", label=\"First Name\");\n        property(name=\"lastName\", label=\"Last Name\");\n        property(name=\"email\", label=\"Email Address\");\n        property(name=\"age\", label=\"Age\");\n\n        // Validations\n        validatesPresenceOf(\"firstName,lastName,email\");\n        validatesUniquenessOf(\"email\");\n        validatesFormatOf(\"email\", regex=\"^[^@]+@[^@]+\\.[^@]+$\");\n        validatesNumericalityOf(\"age\", onlyInteger=true, greaterThan=0, lessThan=150);\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/model/#model-with-associations_1","title":"Model with Associations","text":"<pre><code>component extends=\"Model\" {\n\n    function init() {\n        // Associations\n        belongsTo(\"user\");\n        hasMany(\"comments\", dependent=\"deleteAll\");\n\n        // Nested properties\n        nestedProperties(associations=\"comments\", allowDelete=true);\n\n        // Validations\n        validatesPresenceOf(\"title,content,userId\");\n        validatesLengthOf(\"title\", maximum=255);\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/model/#validations","title":"Validations","text":"<p>Common validation methods:</p> <pre><code>// Presence\nvalidatesPresenceOf(\"name,email\");\n\n// Uniqueness\nvalidatesUniquenessOf(\"email,username\");\n\n// Format\nvalidatesFormatOf(\"email\", regex=\"^[^@]+@[^@]+\\.[^@]+$\");\nvalidatesFormatOf(\"phone\", regex=\"^\\d{3}-\\d{3}-\\d{4}$\");\n\n// Length\nvalidatesLengthOf(\"username\", minimum=3, maximum=20);\nvalidatesLengthOf(\"bio\", maximum=500);\n\n// Numerical\nvalidatesNumericalityOf(\"age\", onlyInteger=true, greaterThan=0);\nvalidatesNumericalityOf(\"price\", greaterThan=0);\n\n// Inclusion/Exclusion\nvalidatesInclusionOf(\"status\", list=\"active,inactive,pending\");\nvalidatesExclusionOf(\"username\", list=\"admin,root,system\");\n\n// Confirmation\nvalidatesConfirmationOf(\"password\");\n\n// Custom\nvalidate(\"customValidation\");\n</code></pre>"},{"location":"command-line-tools/commands/generate/model/#associations","title":"Associations","text":""},{"location":"command-line-tools/commands/generate/model/#belongs-to","title":"Belongs To","text":"<pre><code>belongsTo(\"user\");\nbelongsTo(name=\"author\", modelName=\"user\", foreignKey=\"authorId\");\n</code></pre>"},{"location":"command-line-tools/commands/generate/model/#has-many","title":"Has Many","text":"<pre><code>hasMany(\"comments\");\nhasMany(name=\"posts\", dependent=\"deleteAll\", orderBy=\"createdAt DESC\");\n</code></pre>"},{"location":"command-line-tools/commands/generate/model/#has-one","title":"Has One","text":"<pre><code>hasOne(\"profile\");\nhasOne(name=\"address\", dependent=\"delete\");\n</code></pre>"},{"location":"command-line-tools/commands/generate/model/#many-to-many","title":"Many to Many","text":"<pre><code>hasMany(\"categorizations\");\nhasMany(name=\"categories\", through=\"categorizations\");\n</code></pre>"},{"location":"command-line-tools/commands/generate/model/#callbacks","title":"Callbacks","text":"<p>Lifecycle callbacks:</p> <pre><code>// Before callbacks\nbeforeCreate(\"method1,method2\");\nbeforeUpdate(\"method3\");\nbeforeSave(\"method4\");\nbeforeDelete(\"method5\");\nbeforeValidation(\"method6\");\n\n// After callbacks\nafterCreate(\"method7\");\nafterUpdate(\"method8\");\nafterSave(\"method9\");\nafterDelete(\"method10\");\nafterValidation(\"method11\");\nafterFind(\"method12\");\nafterInitialization(\"method13\");\n</code></pre>"},{"location":"command-line-tools/commands/generate/model/#generated-migration","title":"Generated Migration","text":"<p>When <code>--migration</code> is enabled:</p> <pre><code>component extends=\"wheels.migrator.Migration\" {\n\n    function up() {\n        transaction {\n            t = createTable(\"users\");\n            t.string(\"firstName\");\n            t.string(\"lastName\");\n            t.string(\"email\");\n            t.integer(\"age\");\n            t.timestamps();\n            t.create();\n\n            addIndex(table=\"users\", columns=\"email\", unique=true);\n        }\n    }\n\n    function down() {\n        transaction {\n            dropTable(\"users\");\n        }\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/model/#best-practices","title":"Best Practices","text":"<ol> <li>Naming: Use singular names (User, not Users)</li> <li>Properties: Define all database columns</li> <li>Validations: Add comprehensive validations</li> <li>Associations: Define all relationships</li> <li>Callbacks: Use for automatic behaviors</li> <li>Indexes: Add to migration for performance</li> </ol>"},{"location":"command-line-tools/commands/generate/model/#common-patterns","title":"Common Patterns","text":""},{"location":"command-line-tools/commands/generate/model/#soft-deletes","title":"Soft Deletes","text":"<pre><code>function init() {\n    softDeletes();\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/model/#calculated-properties","title":"Calculated Properties","text":"<pre><code>function init() {\n    property(name=\"fullName\", sql=\"firstName + ' ' + lastName\");\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/model/#scopes","title":"Scopes","text":"<pre><code>function scopeActive() {\n    return where(\"active = ?\", [true]);\n}\n\nfunction scopeRecent(required numeric days=7) {\n    return where(\"createdAt &gt;= ?\", [DateAdd(\"d\", -arguments.days, Now())]);\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/model/#default-values","title":"Default Values","text":"<pre><code>function init() {\n    beforeCreate(\"setDefaults\");\n}\n\nprivate function setDefaults() {\n    if (!StructKeyExists(this, \"status\")) {\n        this.status = \"pending\";\n    }\n    if (!StructKeyExists(this, \"priority\")) {\n        this.priority = 5;\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/model/#testing","title":"Testing","text":"<p>Generate model tests: <pre><code>wheels generate model user properties=\"email:string,name:string\"\nwheels generate test model user\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/model/#see-also","title":"See Also","text":"<ul> <li>wheels dbmigrate create table - Create migrations</li> <li>wheels generate property - Add properties to existing models</li> <li>wheels generate controller - Generate controllers</li> <li>wheels scaffold - Generate complete CRUD</li> </ul>"},{"location":"command-line-tools/commands/generate/property/","title":"wheels generate property","text":"<p>Add properties to existing model files.</p>"},{"location":"command-line-tools/commands/generate/property/#synopsis","title":"Synopsis","text":"<pre><code>wheels generate property [name] [options]\nwheels g property [name] [options]\n</code></pre>"},{"location":"command-line-tools/commands/generate/property/#description","title":"Description","text":"<p>The <code>wheels generate property</code> command generates a database migration to add a property to an existing model and scaffolds it into <code>_form.cfm</code> and <code>show.cfm</code> views.</p>"},{"location":"command-line-tools/commands/generate/property/#arguments","title":"Arguments","text":"Argument Description Default <code>name</code> Table name Required"},{"location":"command-line-tools/commands/generate/property/#options","title":"Options","text":"Option Description Default <code>column-name</code> Name of column Required <code>data-type</code> Type of column <code>string</code> <code>default</code> Default value for column <code>--null</code> Whether to allow null values <code>limit</code> Character or integer size limit for column <code>precision</code> Precision value for decimal columns <code>scale</code> Scale value for decimal columns"},{"location":"command-line-tools/commands/generate/property/#property-syntax","title":"Property Syntax","text":""},{"location":"command-line-tools/commands/generate/property/#basic-format","title":"Basic Format","text":"<pre><code>propertyName:type:option1:option2\n</code></pre>"},{"location":"command-line-tools/commands/generate/property/#data-type-options","title":"Data Type Options","text":"<ul> <li><code>biginteger</code> - Large integer</li> <li><code>binary</code> - Binary data</li> <li><code>boolean</code> - Boolean (true/false)</li> <li><code>date</code> - Date only</li> <li><code>datetime</code> - Date and time</li> <li><code>decimal</code> - Decimal numbers</li> <li><code>float</code> - Floating point</li> <li><code>integer</code> - Integer</li> <li><code>string</code> - Variable character (VARCHAR)</li> <li><code>text</code> - Long text</li> <li><code>time</code> - Time only</li> <li><code>timestamp</code> - Timestamp</li> <li><code>uuid</code> - UUID/GUID</li> </ul>"},{"location":"command-line-tools/commands/generate/property/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/generate/property/#string-property","title":"String property","text":"<p><pre><code>wheels generate property user column-name=firstname\n</code></pre> Creates a string/textField property called <code>firstname</code> on the User model.</p>"},{"location":"command-line-tools/commands/generate/property/#boolean-property-with-default","title":"Boolean property with default","text":"<p><pre><code>wheels generate property user column-name=isActive data-type=boolean default=0\n</code></pre> Creates a boolean/checkbox property with default value of 0 (false).</p>"},{"location":"command-line-tools/commands/generate/property/#datetime-property","title":"Datetime property","text":"<p><pre><code>wheels generate property user column-name=lastloggedin data-type=datetime\n</code></pre> Creates a datetime property on the User model.</p>"},{"location":"command-line-tools/commands/generate/property/#decimal-property-with-precision","title":"Decimal property with precision","text":"<pre><code>wheels generate property product column-name=price data-type=decimal precision=10 scale=2\n</code></pre>"},{"location":"command-line-tools/commands/generate/property/#add-calculated-property","title":"Add calculated property","text":"<pre><code>wheels generate property user \"fullName:calculated\"\n</code></pre>"},{"location":"command-line-tools/commands/generate/property/#generated-code-examples","title":"Generated Code Examples","text":""},{"location":"command-line-tools/commands/generate/property/#basic-property-addition","title":"Basic Property Addition","text":"<p>Before: <pre><code>component extends=\"Model\" {\n\n    function init() {\n        // Existing code\n    }\n\n}\n</code></pre></p> <p>After: <pre><code>component extends=\"Model\" {\n\n    function init() {\n        // Existing code\n\n        // Properties\n        property(name=\"email\", sql=\"email\");\n\n        // Validations\n        validatesPresenceOf(properties=\"email\");\n        validatesUniquenessOf(properties=\"email\");\n        validatesFormatOf(property=\"email\", regEx=\"^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$\");\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/property/#multiple-properties","title":"Multiple Properties","text":"<p>Command: <pre><code>wheels generate property product \"name:string:required description:text price:float:required:default=0.00 inStock:boolean:default=true\"\n</code></pre></p> <p>Generated: <pre><code>component extends=\"Model\" {\n\n    function init() {\n        // Properties\n        property(name=\"name\", sql=\"name\");\n        property(name=\"description\", sql=\"description\");\n        property(name=\"price\", sql=\"price\", default=0.00);\n        property(name=\"inStock\", sql=\"in_stock\", default=true);\n\n        // Validations\n        validatesPresenceOf(properties=\"name,price\");\n        validatesNumericalityOf(property=\"price\", allowBlank=false, greaterThanOrEqualTo=0);\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/property/#association-property","title":"Association Property","text":"<p>Command: <pre><code>wheels generate property comment \"userId:integer:required:belongsTo=user postId:integer:required:belongsTo=post\"\n</code></pre></p> <p>Generated: <pre><code>component extends=\"Model\" {\n\n    function init() {\n        // Associations\n        belongsTo(name=\"user\", foreignKey=\"userId\");\n        belongsTo(name=\"post\", foreignKey=\"postId\");\n\n        // Properties\n        property(name=\"userId\", sql=\"user_id\");\n        property(name=\"postId\", sql=\"post_id\");\n\n        // Validations\n        validatesPresenceOf(properties=\"userId,postId\");\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/property/#calculated-property","title":"Calculated Property","text":"<p>Command: <pre><code>wheels generate property user fullName:calculated --callbacks\n</code></pre></p> <p>Generated: <pre><code>component extends=\"Model\" {\n\n    function init() {\n        // Properties\n        property(name=\"fullName\", sql=\"\", calculated=true);\n    }\n\n    // Calculated property getter\n    function getFullName() {\n        return this.firstName &amp; \" \" &amp; this.lastName;\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/property/#migration-generation","title":"Migration Generation","text":"<p>When <code>--migrate=true</code> (default), generates migration:</p>"},{"location":"command-line-tools/commands/generate/property/#migration-file","title":"Migration File","text":"<p><code>app/migrator/migrations/[timestamp]_add_properties_to_[model].cfc</code>:</p> <pre><code>component extends=\"wheels.migrator.Migration\" hint=\"Add properties to product\" {\n\n    function up() {\n        transaction {\n            addColumn(table=\"products\", columnName=\"sku\", columnType=\"string\", limit=50, null=false);\n            addColumn(table=\"products\", columnName=\"price\", columnType=\"decimal\", precision=10, scale=2, null=false, default=0.00);\n            addColumn(table=\"products\", columnName=\"stock\", columnType=\"integer\", null=true, default=0);\n\n            addIndex(table=\"products\", columnNames=\"sku\", unique=true);\n        }\n    }\n\n    function down() {\n        transaction {\n            removeIndex(table=\"products\", columnNames=\"sku\");\n            removeColumn(table=\"products\", columnName=\"stock\");\n            removeColumn(table=\"products\", columnName=\"price\");\n            removeColumn(table=\"products\", columnName=\"sku\");\n        }\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/property/#validation-rules","title":"Validation Rules","text":""},{"location":"command-line-tools/commands/generate/property/#automatic-validations","title":"Automatic Validations","text":"<p>Based on property type and options:</p> Type Validations Applied <code>string:required</code> validatesPresenceOf, validatesLengthOf <code>string:unique</code> validatesUniquenessOf <code>email</code> validatesFormatOf with email regex <code>integer</code> validatesNumericalityOf(onlyInteger=true) <code>float</code> validatesNumericalityOf <code>boolean</code> validatesInclusionOf(list=\"true,false,0,1\") <code>date</code> validatesFormatOf with date pattern"},{"location":"command-line-tools/commands/generate/property/#custom-validations","title":"Custom Validations","text":"<p>Add custom validation rules: <pre><code>wheels generate property user \"age:integer:min=18:max=120\"\n</code></pre></p> <p>Generated: <pre><code>validatesNumericalityOf(property=\"age\", greaterThanOrEqualTo=18, lessThanOrEqualTo=120);\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/property/#property-callbacks","title":"Property Callbacks","text":"<p>Generate with callbacks: <pre><code>wheels generate property user lastLoginAt:datetime --callbacks\n</code></pre></p> <p>Generated: <pre><code>function init() {\n    // Properties\n    property(name=\"lastLoginAt\", sql=\"last_login_at\");\n\n    // Callbacks\n    beforeUpdate(\"updateLastLoginAt\");\n}\n\nprivate function updateLastLoginAt() {\n    if (hasChanged(\"lastLoginAt\")) {\n        // Custom logic here\n    }\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/property/#complex-properties","title":"Complex Properties","text":""},{"location":"command-line-tools/commands/generate/property/#enum-like-property","title":"Enum-like Property","text":"<pre><code>wheels generate property order \"status:string:default=pending:inclusion=pending,processing,shipped,delivered\"\n</code></pre> <p>Generated: <pre><code>property(name=\"status\", sql=\"status\", default=\"pending\");\nvalidatesInclusionOf(property=\"status\", list=\"pending,processing,shipped,delivered\");\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/property/#file-upload-property","title":"File Upload Property","text":"<pre><code>wheels generate property user \"avatar:string:fileField\"\n</code></pre> <p>Generated: <pre><code>property(name=\"avatar\", sql=\"avatar\");\n\n// In the init() method\nafterSave(\"processAvatarUpload\");\nbeforeDelete(\"deleteAvatarFile\");\n\nprivate function processAvatarUpload() {\n    if (hasChanged(\"avatar\") &amp;&amp; isUploadedFile(\"avatar\")) {\n        // Handle file upload\n    }\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/property/#json-property","title":"JSON Property","text":"<pre><code>wheels generate property user \"preferences:text:json\"\n</code></pre> <p>Generated: <pre><code>property(name=\"preferences\", sql=\"preferences\");\n\nfunction getPreferences() {\n    if (isJSON(this.preferences)) {\n        return deserializeJSON(this.preferences);\n    }\n    return {};\n}\n\nfunction setPreferences(required struct value) {\n    this.preferences = serializeJSON(arguments.value);\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/property/#property-modifiers","title":"Property Modifiers","text":""},{"location":"command-line-tools/commands/generate/property/#encrypted-property","title":"Encrypted Property","text":"<pre><code>wheels generate property user \"ssn:string:encrypted\"\n</code></pre> <p>Generated: <pre><code>property(name=\"ssn\", sql=\"ssn\");\n\nbeforeSave(\"encryptSSN\");\nafterFind(\"decryptSSN\");\n\nprivate function encryptSSN() {\n    if (hasChanged(\"ssn\") &amp;&amp; Len(this.ssn)) {\n        this.ssn = encrypt(this.ssn, application.encryptionKey);\n    }\n}\n\nprivate function decryptSSN() {\n    if (Len(this.ssn)) {\n        this.ssn = decrypt(this.ssn, application.encryptionKey);\n    }\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/property/#slugged-property","title":"Slugged Property","text":"<pre><code>wheels generate property post \"slug:string:unique:fromProperty=title\"\n</code></pre> <p>Generated: <pre><code>property(name=\"slug\", sql=\"slug\");\nvalidatesUniquenessOf(property=\"slug\");\n\nbeforeValidation(\"generateSlug\");\n\nprivate function generateSlug() {\n    if (!Len(this.slug) &amp;&amp; Len(this.title)) {\n        this.slug = createSlug(this.title);\n    }\n}\n\nprivate function createSlug(required string text) {\n    return reReplace(\n        lCase(trim(arguments.text)),\n        \"[^a-z0-9]+\",\n        \"-\",\n        \"all\"\n    );\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/property/#batch-operations","title":"Batch Operations","text":""},{"location":"command-line-tools/commands/generate/property/#add-multiple-related-properties","title":"Add Multiple Related Properties","text":"<pre><code>wheels generate property user \"\n    profile.bio:text\n    profile.website:string\n    profile.twitter:string\n    profile.github:string\n\" --nested\n</code></pre>"},{"location":"command-line-tools/commands/generate/property/#add-timestamped-properties","title":"Add Timestamped Properties","text":"<pre><code>wheels generate property post \"publishedAt:timestamp deletedAt:timestamp:nullable\"\n</code></pre>"},{"location":"command-line-tools/commands/generate/property/#integration-with-existing-code","title":"Integration with Existing Code","text":""},{"location":"command-line-tools/commands/generate/property/#preserve-existing-structure","title":"Preserve Existing Structure","text":"<p>The command intelligently adds properties without disrupting: - Existing properties - Current validations - Defined associations - Custom methods - Comments and formatting</p>"},{"location":"command-line-tools/commands/generate/property/#conflict-resolution","title":"Conflict Resolution","text":"<pre><code>wheels generate property user email:string\n&gt; Property 'email' already exists. Options:\n&gt; 1. Skip this property\n&gt; 2. Update existing property\n&gt; 3. Add with different name\n&gt; Choice:\n</code></pre>"},{"location":"command-line-tools/commands/generate/property/#best-practices","title":"Best Practices","text":"<ol> <li>Add properties incrementally</li> <li>Always generate migrations</li> <li>Include appropriate validations</li> <li>Use semantic property names</li> <li>Add indexes for query performance</li> <li>Consider default values carefully</li> <li>Document complex properties</li> </ol>"},{"location":"command-line-tools/commands/generate/property/#common-patterns","title":"Common Patterns","text":""},{"location":"command-line-tools/commands/generate/property/#soft-delete","title":"Soft Delete","text":"<pre><code>wheels generate property model deletedAt:timestamp:nullable\n</code></pre>"},{"location":"command-line-tools/commands/generate/property/#versioning","title":"Versioning","text":"<pre><code>wheels generate property document \"version:integer:default=1 versionedAt:timestamp\"\n</code></pre>"},{"location":"command-line-tools/commands/generate/property/#status-tracking","title":"Status Tracking","text":"<pre><code>wheels generate property order \"status:string:default=pending statusChangedAt:timestamp\"\n</code></pre>"},{"location":"command-line-tools/commands/generate/property/#audit-fields","title":"Audit Fields","text":"<pre><code>wheels generate property model \"createdBy:integer:belongsTo=user updatedBy:integer:belongsTo=user\"\n</code></pre>"},{"location":"command-line-tools/commands/generate/property/#testing","title":"Testing","text":"<p>After adding properties: <pre><code># Run migration\nwheels dbmigrate latest\n\n# Generate property tests\nwheels generate test model user\n\n# Run tests\nwheels test\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/property/#see-also","title":"See Also","text":"<ul> <li>wheels generate model - Generate models</li> <li>wheels dbmigrate create column - Create columns</li> <li>wheels generate test - Generate tests</li> </ul>"},{"location":"command-line-tools/commands/generate/resource/","title":"wheels generate resource","text":"<p>Generate a complete RESTful resource with model, controller, views, and routes.</p>"},{"location":"command-line-tools/commands/generate/resource/#synopsis","title":"Synopsis","text":"<pre><code>wheels generate resource [name] [properties] [options]\nwheels g resource [name] [properties] [options]\n</code></pre>"},{"location":"command-line-tools/commands/generate/resource/#description","title":"Description","text":"<p>The <code>wheels generate resource</code> command creates a complete RESTful resource including model, controller with all CRUD actions, views, routes, and optionally database migrations and tests. It's a comprehensive generator that sets up everything needed for a functioning resource.</p>"},{"location":"command-line-tools/commands/generate/resource/#arguments","title":"Arguments","text":"Argument Description Default <code>name</code> Resource name (singular) Required"},{"location":"command-line-tools/commands/generate/resource/#options","title":"Options","text":"Option Description Default <code>--api</code> Generate API-only resource (no views) <code>false</code> <code>--tests</code> Generate associated tests <code>true</code> <code>--migration</code> Generate database migration <code>true</code> <code>belongs-to</code> Parent model relationships (comma-separated) <code>has-many</code> Child model relationships (comma-separated) <code>attributes</code> Model attributes (name:type,email:string) <code>--open</code> Open generated files <code>false</code> <code>--scaffold</code> Generate with full CRUD operations <code>true</code>"},{"location":"command-line-tools/commands/generate/resource/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/generate/resource/#basic-resource","title":"Basic Resource","text":"<pre><code>wheels generate resource product attributes=\"name:string,price:float,description:text\"\n</code></pre> <p>Generates: - Model: <code>/models/Product.cfc</code> - Controller: <code>/controllers/Products.cfc</code> - Views: <code>/views/products/</code> (index, show, new, edit, _form) - Route: <code>resources(\"products\")</code> in <code>/config/routes.cfm</code> - Migration: <code>/app/migrator/migrations/[timestamp]_create_products.cfc</code> - Tests: <code>/tests/models/ProductTest.cfc</code>, <code>/tests/controllers/ProductsTest.cfc</code></p>"},{"location":"command-line-tools/commands/generate/resource/#api-resource","title":"API Resource","text":"<pre><code>wheels generate resource product attributes=\"name:string,price:float\" --api\n</code></pre> <p>Generates: - Model: <code>/models/Product.cfc</code> - Controller: <code>/controllers/api/Products.cfc</code> (JSON responses only) - Route: <code>resources(name=\"products\", except=\"new,edit\")</code> in API namespace - Migration: <code>/app/migrator/migrations/[timestamp]_create_products.cfc</code> - Tests: API-focused test files</p>"},{"location":"command-line-tools/commands/generate/resource/#resource-with-associations","title":"Resource with Associations","text":"<pre><code>wheels generate resource comment attributes=\"content:text,approved:boolean\" belongs-to=\"post,user\"\n</code></pre> <p>Generates nested structure with proper associations and routing.</p>"},{"location":"command-line-tools/commands/generate/resource/#generated-files","title":"Generated Files","text":""},{"location":"command-line-tools/commands/generate/resource/#model","title":"Model","text":"<p><code>/models/Product.cfc</code>: <pre><code>component extends=\"Model\" {\n\n    function init() {\n        // Properties\n        property(name=\"name\", sql=\"name\");\n        property(name=\"price\", sql=\"price\");\n        property(name=\"description\", sql=\"description\");\n\n        // Validations\n        validatesPresenceOf(properties=\"name,price\");\n        validatesNumericalityOf(property=\"price\", greaterThan=0);\n        validatesLengthOf(property=\"name\", maximum=255);\n\n        // Callbacks\n        beforeSave(\"sanitizeInput\");\n    }\n\n    private function sanitizeInput() {\n        this.name = Trim(this.name);\n        if (StructKeyExists(this, \"description\")) {\n            this.description = Trim(this.description);\n        }\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/resource/#controller","title":"Controller","text":"<p><code>/controllers/Products.cfc</code>: <pre><code>component extends=\"Controller\" {\n\n    function init() {\n        // Filters\n        filters(through=\"findProduct\", only=\"show,edit,update,delete\");\n    }\n\n    function index() {\n        products = model(\"Product\").findAll(order=\"createdAt DESC\");\n    }\n\n    function show() {\n        // Product loaded by filter\n    }\n\n    function new() {\n        product = model(\"Product\").new();\n    }\n\n    function create() {\n        product = model(\"Product\").new(params.product);\n\n        if (product.save()) {\n            flashInsert(success=\"Product was created successfully.\");\n            redirectTo(route=\"product\", key=product.id);\n        } else {\n            renderView(action=\"new\");\n        }\n    }\n\n    function edit() {\n        // Product loaded by filter\n    }\n\n    function update() {\n        if (product.update(params.product)) {\n            flashInsert(success=\"Product was updated successfully.\");\n            redirectTo(route=\"product\", key=product.id);\n        } else {\n            renderView(action=\"edit\");\n        }\n    }\n\n    function delete() {\n        if (product.delete()) {\n            flashInsert(success=\"Product was deleted successfully.\");\n        } else {\n            flashInsert(error=\"Product could not be deleted.\");\n        }\n        redirectTo(route=\"products\");\n    }\n\n    // Filters\n    private function findProduct() {\n        product = model(\"Product\").findByKey(params.key);\n        if (!IsObject(product)) {\n            flashInsert(error=\"Product not found.\");\n            redirectTo(route=\"products\");\n        }\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/resource/#views","title":"Views","text":"<p><code>/views/products/index.cfm</code>: <pre><code>&lt;h1&gt;Products&lt;/h1&gt;\n\n&lt;p&gt;\n    #linkTo(route=\"newProduct\", text=\"New Product\", class=\"btn btn-primary\")#\n&lt;/p&gt;\n\n&lt;cfif products.recordCount&gt;\n    &lt;table class=\"table table-striped\"&gt;\n        &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;th&gt;Name&lt;/th&gt;\n                &lt;th&gt;Price&lt;/th&gt;\n                &lt;th&gt;Created&lt;/th&gt;\n                &lt;th&gt;Actions&lt;/th&gt;\n            &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n            &lt;cfoutput query=\"products\"&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;#linkTo(route=\"product\", key=products.id, text=products.name)#&lt;/td&gt;\n                    &lt;td&gt;#dollarFormat(products.price)#&lt;/td&gt;\n                    &lt;td&gt;#dateFormat(products.createdAt, \"mmm dd, yyyy\")#&lt;/td&gt;\n                    &lt;td&gt;\n                        #linkTo(route=\"editProduct\", key=products.id, text=\"Edit\", class=\"btn btn-sm btn-secondary\")#\n                        #linkTo(route=\"product\", key=products.id, text=\"Delete\", method=\"delete\", confirm=\"Are you sure?\", class=\"btn btn-sm btn-danger\")#\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/cfoutput&gt;\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n&lt;cfelse&gt;\n    &lt;p class=\"alert alert-info\"&gt;No products found. #linkTo(route=\"newProduct\", text=\"Create one now\")#!&lt;/p&gt;\n&lt;/cfif&gt;\n</code></pre></p> <p><code>/views/products/_form.cfm</code>: <pre><code>#errorMessagesFor(\"product\")#\n\n#startFormTag(route=formRoute, key=formKey, class=\"needs-validation\")#\n\n    &lt;div class=\"mb-3\"&gt;\n        #textField(objectName=\"product\", property=\"name\", label=\"Product Name\", class=\"form-control\", required=true)#\n    &lt;/div&gt;\n\n    &lt;div class=\"mb-3\"&gt;\n        #numberField(objectName=\"product\", property=\"price\", label=\"Price\", class=\"form-control\", step=\"0.01\", min=\"0\", required=true)#\n    &lt;/div&gt;\n\n    &lt;div class=\"mb-3\"&gt;\n        #textArea(objectName=\"product\", property=\"description\", label=\"Description\", class=\"form-control\", rows=5)#\n    &lt;/div&gt;\n\n    &lt;div class=\"mb-3\"&gt;\n        #submitTag(value=submitValue, class=\"btn btn-primary\")#\n        #linkTo(route=\"products\", text=\"Cancel\", class=\"btn btn-secondary\")#\n    &lt;/div&gt;\n\n#endFormTag()#\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/resource/#migration","title":"Migration","text":"<p><code>/app/migrator/migrations/[timestamp]_create_products.cfc</code>: <pre><code>component extends=\"wheels.migrator.Migration\" hint=\"Create products table\" {\n\n    function up() {\n        transaction {\n            createTable(name=\"products\", force=true) {\n                t.increments(\"id\");\n                t.string(\"name\", limit=255, null=false);\n                t.decimal(\"price\", precision=10, scale=2, null=false);\n                t.text(\"description\");\n                t.timestamps();\n                t.index(\"name\");\n            };\n        }\n    }\n\n    function down() {\n        transaction {\n            dropTable(\"products\");\n        }\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/resource/#routes","title":"Routes","text":"<p>Added to <code>/config/routes.cfm</code>: <pre><code>&lt;cfset resources(\"products\")&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/resource/#api-resource-generation","title":"API Resource Generation","text":""},{"location":"command-line-tools/commands/generate/resource/#api-controller","title":"API Controller","text":"<p><code>/controllers/api/Products.cfc</code>: <pre><code>component extends=\"Controller\" {\n\n    function init() {\n        provides(\"json\");\n        filters(through=\"findProduct\", only=\"show,update,delete\");\n    }\n\n    function index() {\n        products = model(\"Product\").findAll(\n            order=\"createdAt DESC\",\n            page=params.page ?: 1,\n            perPage=params.perPage ?: 25\n        );\n\n        renderWith({\n            data: products,\n            meta: {\n                page: products.currentPage,\n                totalPages: products.totalPages,\n                totalRecords: products.totalRecords\n            }\n        });\n    }\n\n    function show() {\n        renderWith(product);\n    }\n\n    function create() {\n        product = model(\"Product\").new(params.product);\n\n        if (product.save()) {\n            renderWith(data=product, status=201);\n        } else {\n            renderWith(\n                data={errors: product.allErrors()},\n                status=422\n            );\n        }\n    }\n\n    function update() {\n        if (product.update(params.product)) {\n            renderWith(product);\n        } else {\n            renderWith(\n                data={errors: product.allErrors()},\n                status=422\n            );\n        }\n    }\n\n    function delete() {\n        if (product.delete()) {\n            renderWith(data={message: \"Product deleted successfully\"});\n        } else {\n            renderWith(\n                data={error: \"Could not delete product\"},\n                status=400\n            );\n        }\n    }\n\n    private function findProduct() {\n        product = model(\"Product\").findByKey(params.key);\n        if (!IsObject(product)) {\n            renderWith(\n                data={error: \"Product not found\"},\n                status=404\n            );\n        }\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/resource/#nested-resources","title":"Nested Resources","text":""},{"location":"command-line-tools/commands/generate/resource/#generate-nested-resource","title":"Generate Nested Resource","text":"<pre><code>wheels generate resource review rating:integer comment:text parent=product\n</code></pre>"},{"location":"command-line-tools/commands/generate/resource/#nested-model","title":"Nested Model","text":"<p>Includes association: <pre><code>component extends=\"Model\" {\n\n    function init() {\n        belongsTo(\"product\");\n\n        property(name=\"rating\", sql=\"rating\");\n        property(name=\"comment\", sql=\"comment\");\n        property(name=\"productId\", sql=\"product_id\");\n\n        validatesPresenceOf(properties=\"rating,comment,productId\");\n        validatesNumericalityOf(property=\"rating\", greaterThanOrEqualTo=1, lessThanOrEqualTo=5);\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/resource/#nested-routes","title":"Nested Routes","text":"<pre><code>&lt;cfset resources(\"products\")&gt;\n    &lt;cfset resources(\"reviews\")&gt;\n&lt;/cfset&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/resource/#property-types","title":"Property Types","text":""},{"location":"command-line-tools/commands/generate/resource/#supported-types","title":"Supported Types","text":"Type Database Type Validation <code>string</code> VARCHAR(255) Length validation <code>text</code> TEXT None by default <code>integer</code> INT Numerical validation <code>float</code> DECIMAL Numerical validation <code>decimal</code> DECIMAL Numerical validation <code>boolean</code> BOOLEAN Boolean validation <code>date</code> DATE Date format validation <code>datetime</code> DATETIME DateTime validation <code>time</code> TIME Time validation <code>binary</code> BLOB None"},{"location":"command-line-tools/commands/generate/resource/#property-options","title":"Property Options","text":"<pre><code>wheels generate resource user \\\n  email:string:required:unique \\\n  age:integer:min=18:max=120 \\\n  bio:text:limit=1000 \\\n  isActive:boolean:default=true\n</code></pre>"},{"location":"command-line-tools/commands/generate/resource/#advanced-options","title":"Advanced Options","text":""},{"location":"command-line-tools/commands/generate/resource/#skip-components","title":"Skip Components","text":"<pre><code># Generate only model and migration\nwheels generate resource product name:string --skip-controller --skip-views --skip-route\n\n# Generate only controller and views\nwheels generate resource product --skip-model --skip-migration\n</code></pre>"},{"location":"command-line-tools/commands/generate/resource/#namespace-resources","title":"Namespace Resources","text":"<pre><code>wheels generate resource admin/product name:string namespace=admin\n</code></pre> <p>Creates: - <code>/controllers/admin/Products.cfc</code> - <code>/views/admin/products/</code> - Namespaced routes</p>"},{"location":"command-line-tools/commands/generate/resource/#custom-templates","title":"Custom Templates","text":"<pre><code>wheels generate resource product name:string template=custom\n</code></pre>"},{"location":"command-line-tools/commands/generate/resource/#testing","title":"Testing","text":""},{"location":"command-line-tools/commands/generate/resource/#generated-tests","title":"Generated Tests","text":"<p>Model Test (<code>/tests/models/ProductTest.cfc</code>): <pre><code>component extends=\"wheels.Test\" {\n\n    function setup() {\n        super.setup();\n        model(\"Product\").deleteAll();\n    }\n\n    function test_valid_product_saves() {\n        product = model(\"Product\").new(\n            name=\"Test Product\",\n            price=19.99,\n            description=\"Test description\"\n        );\n\n        assert(product.save());\n        assert(product.id &gt; 0);\n    }\n\n    function test_requires_name() {\n        product = model(\"Product\").new(price=19.99);\n\n        assert(!product.save());\n        assert(ArrayLen(product.errorsOn(\"name\")) &gt; 0);\n    }\n\n    function test_requires_positive_price() {\n        product = model(\"Product\").new(name=\"Test\", price=-10);\n\n        assert(!product.save());\n        assert(ArrayLen(product.errorsOn(\"price\")) &gt; 0);\n    }\n\n}\n</code></pre></p> <p>Controller Test (<code>/tests/controllers/ProductsTest.cfc</code>): <pre><code>component extends=\"wheels.Test\" {\n\n    function test_index_returns_products() {\n        products = createProducts(3);\n\n        result = processRequest(route=\"products\", method=\"GET\");\n\n        assert(result.status == 200);\n        assert(Find(\"Products\", result.body));\n        assert(FindNoCase(products[1].name, result.body));\n    }\n\n    function test_create_valid_product() {\n        params = {\n            product: {\n                name: \"New Product\",\n                price: 29.99,\n                description: \"New product description\"\n            }\n        };\n\n        result = processRequest(route=\"products\", method=\"POST\", params=params);\n\n        assert(result.status == 302);\n        assert(model(\"Product\").count() == 1);\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/resource/#best-practices","title":"Best Practices","text":"<ol> <li>Use singular names: <code>product</code> not <code>products</code></li> <li>Define all properties: Include types and validations</li> <li>Add indexes: For frequently queried fields</li> <li>Include tests: Don't skip test generation</li> <li>Use namespaces: For admin or API resources</li> <li>Follow conventions: Stick to RESTful patterns</li> </ol>"},{"location":"command-line-tools/commands/generate/resource/#common-patterns","title":"Common Patterns","text":""},{"location":"command-line-tools/commands/generate/resource/#soft-delete-resource","title":"Soft Delete Resource","text":"<pre><code>wheels generate resource product name:string deletedAt:datetime:nullable\n</code></pre>"},{"location":"command-line-tools/commands/generate/resource/#publishable-resource","title":"Publishable Resource","text":"<pre><code>wheels generate resource post title:string content:text publishedAt:datetime:nullable status:string:default=draft\n</code></pre>"},{"location":"command-line-tools/commands/generate/resource/#user-owned-resource","title":"User-Owned Resource","text":"<pre><code>wheels generate resource task title:string userId:integer:belongsTo=user completed:boolean:default=false\n</code></pre>"},{"location":"command-line-tools/commands/generate/resource/#hierarchical-resource","title":"Hierarchical Resource","text":"<pre><code>wheels generate resource category name:string parentId:integer:nullable:belongsTo=category\n</code></pre>"},{"location":"command-line-tools/commands/generate/resource/#customization","title":"Customization","text":""},{"location":"command-line-tools/commands/generate/resource/#custom-resource-templates","title":"Custom Resource Templates","text":"<p>Create in <code>~/.wheels/templates/resources/</code>: <pre><code>custom-resource/\n\u251c\u2500\u2500 model.cfc\n\u251c\u2500\u2500 controller.cfc\n\u251c\u2500\u2500 views/\n\u2502   \u251c\u2500\u2500 index.cfm\n\u2502   \u251c\u2500\u2500 show.cfm\n\u2502   \u251c\u2500\u2500 new.cfm\n\u2502   \u251c\u2500\u2500 edit.cfm\n\u2502   \u2514\u2500\u2500 _form.cfm\n\u2514\u2500\u2500 migration.cfc\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/resource/#template-variables","title":"Template Variables","text":"<p>Available in templates: - <code>${resourceName}</code> - Singular name - <code>${resourceNamePlural}</code> - Plural name - <code>${modelName}</code> - Model class name - <code>${controllerName}</code> - Controller class name - <code>${tableName}</code> - Database table name - <code>${properties}</code> - Array of property definitions</p>"},{"location":"command-line-tools/commands/generate/resource/#see-also","title":"See Also","text":"<ul> <li>wheels scaffold - Interactive CRUD generation</li> <li>wheels generate model - Generate models only</li> <li>wheels generate controller - Generate controllers only</li> <li>wheels generate api-resource - Generate API resources</li> <li>wheels generate route - Generate routes only</li> </ul>"},{"location":"command-line-tools/commands/generate/route/","title":"wheels generate route","text":"<p>Generate route definitions for your application.</p>"},{"location":"command-line-tools/commands/generate/route/#synopsis","title":"Synopsis","text":"<pre><code>wheels generate route [objectname] [options]\nwheels g route [objectname] [options]\n</code></pre>"},{"location":"command-line-tools/commands/generate/route/#description","title":"Description","text":"<p>The <code>wheels generate route</code> command helps you create route definitions in your Wheels application's <code>/config/routes.cfm</code> file. It can generate individual routes with different HTTP methods, RESTful resources, or root routes.</p>"},{"location":"command-line-tools/commands/generate/route/#arguments","title":"Arguments","text":"Argument Description Default <code>objectname</code> The name of the resource/route to add Optional"},{"location":"command-line-tools/commands/generate/route/#options","title":"Options","text":"Option Description Default <code>get</code> Create a GET route (pattern,handler format) <code>post</code> Create a POST route (pattern,handler format) <code>put</code> Create a PUT route (pattern,handler format) <code>patch</code> Create a PATCH route (pattern,handler format) <code>delete</code> Create a DELETE route (pattern,handler format) <code>--resources</code> Create a resources route <code>false</code> <code>root</code> Create a root route with handler"},{"location":"command-line-tools/commands/generate/route/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/generate/route/#resources-route-default","title":"Resources Route (default)","text":"<pre><code>wheels generate route products\n</code></pre> <p>Generates in <code>/config/routes.cfm</code>: <pre><code>.resources(\"products\")\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/route/#get-route","title":"GET Route","text":"<pre><code>wheels generate route get=\"/about,pages#about\"\n</code></pre> <p>Generates: <pre><code>.get(pattern=\"/about\", to=\"pages#about\")\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/route/#post-route","title":"POST Route","text":"<pre><code>wheels generate route post=\"/contact,contact#send\"\n</code></pre> <p>Generates: <pre><code>.post(pattern=\"/contact\", to=\"contact#send\")\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/route/#root-route","title":"Root Route","text":"<pre><code>wheels generate route root=\"pages#home\"\n</code></pre> <p>Generates: <pre><code>.root(to=\"pages#home\")\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/route/#restful-resource","title":"RESTful Resource","text":"<pre><code>wheels generate route products --resource\n</code></pre> <p>Generates: <pre><code>&lt;cfset resources(\"products\")&gt;\n</code></pre></p> <p>This creates all standard routes: - GET /products (index) - GET /products/new (new) - POST /products (create) - GET /products/:key (show) - GET /products/:key/edit (edit) - PUT/PATCH /products/:key (update) - DELETE /products/:key (delete)</p>"},{"location":"command-line-tools/commands/generate/route/#api-resource","title":"API Resource","text":"<pre><code>wheels generate route products --api\n</code></pre> <p>Generates: <pre><code>&lt;cfset resources(name=\"products\", nested=false, except=\"new,edit\")&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/route/#nested-resources","title":"Nested Resources","text":"<pre><code>wheels generate route comments --resource nested=\"posts\"\n</code></pre> <p>Generates: <pre><code>&lt;cfset resources(\"posts\")&gt;\n    &lt;cfset resources(\"comments\")&gt;\n&lt;/cfset&gt;\n</code></pre></p> <p>Creates routes like: - /posts/:postKey/comments - /posts/:postKey/comments/:key</p>"},{"location":"command-line-tools/commands/generate/route/#route-patterns","title":"Route Patterns","text":""},{"location":"command-line-tools/commands/generate/route/#dynamic-segments","title":"Dynamic Segments","text":"<pre><code>wheels generate route \"/users/[key]/profile\" to=\"users#profile\" name=\"userProfile\"\n</code></pre> <p>Generates: <pre><code>&lt;cfset get(name=\"userProfile\", pattern=\"/users/[key]/profile\", to=\"users##profile\")&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/route/#optional-segments","title":"Optional Segments","text":"<pre><code>wheels generate route \"/blog/[year]/[month?]/[day?]\" to=\"blog#archive\" name=\"blogArchive\"\n</code></pre> <p>Generates: <pre><code>&lt;cfset get(name=\"blogArchive\", pattern=\"/blog/[year]/[month?]/[day?]\", to=\"blog##archive\")&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/route/#wildcards","title":"Wildcards","text":"<pre><code>wheels generate route \"/docs/*\" to=\"documentation#show\" name=\"docs\"\n</code></pre> <p>Generates: <pre><code>&lt;cfset get(name=\"docs\", pattern=\"/docs/*\", to=\"documentation##show\")&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/route/#advanced-routing","title":"Advanced Routing","text":""},{"location":"command-line-tools/commands/generate/route/#with-constraints","title":"With Constraints","text":"<pre><code>wheels generate route \"/users/[id]\" to=\"users#show\" constraints=\"id=[0-9]+\"\n</code></pre> <p>Generates: <pre><code>&lt;cfset get(pattern=\"/users/[id]\", to=\"users##show\", constraints={id=\"[0-9]+\"})&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/route/#namespace-routes","title":"Namespace Routes","text":"<pre><code>wheels generate route users --resource namespace=\"admin\"\n</code></pre> <p>Generates: <pre><code>&lt;cfset namespace(\"admin\")&gt;\n    &lt;cfset resources(\"users\")&gt;\n&lt;/cfset&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/route/#module-routes","title":"Module Routes","text":"<pre><code>wheels generate route dashboard --resource namespace=\"admin\" module=\"backend\"\n</code></pre> <p>Generates: <pre><code>&lt;cfset module(\"backend\")&gt;\n    &lt;cfset namespace(\"admin\")&gt;\n        &lt;cfset resources(\"dashboard\")&gt;\n    &lt;/cfset&gt;\n&lt;/cfset&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/route/#shallow-nesting","title":"Shallow Nesting","text":"<pre><code>wheels generate route comments --resource nested=\"posts\" --shallow\n</code></pre> <p>Generates: <pre><code>&lt;cfset resources(\"posts\")&gt;\n    &lt;cfset resources(name=\"comments\", shallow=true)&gt;\n&lt;/cfset&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/route/#custom-actions","title":"Custom Actions","text":""},{"location":"command-line-tools/commands/generate/route/#member-routes","title":"Member Routes","text":"<pre><code>wheels generate route \"products/[key]/activate\" to=\"products#activate\" method=\"PUT\" --member\n</code></pre> <p>Generates: <pre><code>&lt;cfset resources(\"products\")&gt;\n    &lt;cfset put(pattern=\"[key]/activate\", to=\"products##activate\", on=\"member\")&gt;\n&lt;/cfset&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/route/#collection-routes","title":"Collection Routes","text":"<pre><code>wheels generate route \"products/search\" to=\"products#search\" --collection\n</code></pre> <p>Generates: <pre><code>&lt;cfset resources(\"products\")&gt;\n    &lt;cfset get(pattern=\"search\", to=\"products##search\", on=\"collection\")&gt;\n&lt;/cfset&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/route/#route-files-organization","title":"Route Files Organization","text":""},{"location":"command-line-tools/commands/generate/route/#main-routes-file","title":"Main Routes File","text":"<p><code>/config/routes.cfm</code>: <pre><code>&lt;!--- \n    Routes Configuration\n    Define your application routes below\n---&gt;\n\n&lt;!--- Public routes ---&gt;\n&lt;cfset get(name=\"home\", pattern=\"/\", to=\"main##index\")&gt;\n&lt;cfset get(name=\"about\", pattern=\"/about\", to=\"pages##about\")&gt;\n&lt;cfset get(name=\"contact\", pattern=\"/contact\", to=\"pages##contact\")&gt;\n&lt;cfset post(name=\"sendContact\", pattern=\"/contact\", to=\"pages##sendContact\")&gt;\n\n&lt;!--- Authentication ---&gt;\n&lt;cfset get(name=\"login\", pattern=\"/login\", to=\"sessions##new\")&gt;\n&lt;cfset post(name=\"createSession\", pattern=\"/login\", to=\"sessions##create\")&gt;\n&lt;cfset delete(name=\"logout\", pattern=\"/logout\", to=\"sessions##delete\")&gt;\n\n&lt;!--- Resources ---&gt;\n&lt;cfset resources(\"products\")&gt;\n&lt;cfset resources(\"categories\")&gt;\n\n&lt;!--- API routes ---&gt;\n&lt;cfset namespace(\"api\")&gt;\n    &lt;cfset namespace(\"v1\")&gt;\n        &lt;cfset resources(name=\"products\", nested=false, except=\"new,edit\")&gt;\n        &lt;cfset resources(name=\"users\", nested=false, except=\"new,edit\")&gt;\n    &lt;/cfset&gt;\n&lt;/cfset&gt;\n\n&lt;!--- Admin routes ---&gt;\n&lt;cfset namespace(\"admin\")&gt;\n    &lt;cfset get(name=\"adminDashboard\", pattern=\"/\", to=\"dashboard##index\")&gt;\n    &lt;cfset resources(\"users\")&gt;\n    &lt;cfset resources(\"products\")&gt;\n    &lt;cfset resources(\"orders\")&gt;\n&lt;/cfset&gt;\n\n&lt;!--- Catch-all route ---&gt;\n&lt;cfset get(pattern=\"*\", to=\"errors##notFound\")&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/route/#route-helpers","title":"Route Helpers","text":"<p>Generated routes create URL helpers:</p>"},{"location":"command-line-tools/commands/generate/route/#basic-helpers","title":"Basic Helpers","text":"<pre><code>&lt;!--- For route: get(name=\"about\", pattern=\"/about\", to=\"pages##about\") ---&gt;\n#linkTo(route=\"about\", text=\"About Us\")#\n#urlFor(route=\"about\")#\n#redirectTo(route=\"about\")#\n</code></pre>"},{"location":"command-line-tools/commands/generate/route/#resource-helpers","title":"Resource Helpers","text":"<pre><code>&lt;!--- For route: resources(\"products\") ---&gt;\n#linkTo(route=\"products\", text=\"All Products\")# &lt;!--- /products ---&gt;\n#linkTo(route=\"product\", key=product.id, text=\"View\")# &lt;!--- /products/123 ---&gt;\n#linkTo(route=\"newProduct\", text=\"Add Product\")# &lt;!--- /products/new ---&gt;\n#linkTo(route=\"editProduct\", key=product.id, text=\"Edit\")# &lt;!--- /products/123/edit ---&gt;\n\n#urlFor(route=\"products\")# &lt;!--- /products ---&gt;\n#urlFor(route=\"product\", key=123)# &lt;!--- /products/123 ---&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/route/#nested-resource-helpers","title":"Nested Resource Helpers","text":"<pre><code>&lt;!--- For nested resources(\"posts\") &gt; resources(\"comments\") ---&gt;\n#linkTo(route=\"postComments\", postKey=post.id, text=\"Comments\")# &lt;!--- /posts/1/comments ---&gt;\n#linkTo(route=\"postComment\", postKey=post.id, key=comment.id, text=\"View\")# &lt;!--- /posts/1/comments/5 ---&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/route/#route-constraints","title":"Route Constraints","text":""},{"location":"command-line-tools/commands/generate/route/#pattern-constraints","title":"Pattern Constraints","text":"<pre><code>wheels generate route \"/posts/[year]/[month]\" to=\"posts#archive\" constraints=\"year=[0-9]{4},month=[0-9]{2}\"\n</code></pre>"},{"location":"command-line-tools/commands/generate/route/#format-constraints","title":"Format Constraints","text":"<pre><code>wheels generate route \"/api/users\" to=\"api/users#index\" format=\"json\"\n</code></pre> <p>Generates: <pre><code>&lt;cfset get(pattern=\"/api/users\", to=\"api/users##index\", format=\"json\")&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/route/#route-testing","title":"Route Testing","text":""},{"location":"command-line-tools/commands/generate/route/#generate-route-tests","title":"Generate Route Tests","text":"<pre><code>wheels generate route products --resource\nwheels generate test routes products\n</code></pre>"},{"location":"command-line-tools/commands/generate/route/#route-test-example","title":"Route Test Example","text":"<pre><code>component extends=\"wheels.Test\" {\n\n    function test_products_routes() {\n        // Test index route\n        result = $resolve(path=\"/products\", method=\"GET\");\n        assert(result.controller == \"products\");\n        assert(result.action == \"index\");\n\n        // Test show route\n        result = $resolve(path=\"/products/123\", method=\"GET\");\n        assert(result.controller == \"products\");\n        assert(result.action == \"show\");\n        assert(result.params.key == \"123\");\n\n        // Test create route\n        result = $resolve(path=\"/products\", method=\"POST\");\n        assert(result.controller == \"products\");\n        assert(result.action == \"create\");\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/route/#route-debugging","title":"Route Debugging","text":""},{"location":"command-line-tools/commands/generate/route/#list-all-routes","title":"List All Routes","text":"<pre><code>wheels routes list\n</code></pre>"},{"location":"command-line-tools/commands/generate/route/#test-specific-route","title":"Test Specific Route","text":"<pre><code>wheels routes test \"/products/123\" --method=GET\n</code></pre> <p>Output: <pre><code>Route resolved:\n  Controller: products\n  Action: show\n  Params: {key: \"123\"}\n  Name: product\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/route/#best-practices","title":"Best Practices","text":"<ol> <li>Order matters: Place specific routes before generic ones</li> <li>Use RESTful routes: Prefer <code>resources()</code> over individual routes</li> <li>Name your routes: Always provide names for URL helpers</li> <li>Group related routes: Use namespaces and modules</li> <li>Add constraints: Validate dynamic segments</li> <li>Document complex routes: Add comments explaining purpose</li> <li>Test route resolution: Ensure routes work as expected</li> </ol>"},{"location":"command-line-tools/commands/generate/route/#common-patterns","title":"Common Patterns","text":""},{"location":"command-line-tools/commands/generate/route/#authentication-required","title":"Authentication Required","text":"<pre><code>&lt;!--- Public routes ---&gt;\n&lt;cfset get(name=\"home\", pattern=\"/\", to=\"main##index\")&gt;\n\n&lt;!--- Authenticated routes ---&gt;\n&lt;cfset namespace(name=\"authenticated\", path=\"/app\")&gt;\n    &lt;!--- All routes here require authentication ---&gt;\n    &lt;cfset resources(\"projects\")&gt;\n    &lt;cfset resources(\"tasks\")&gt;\n&lt;/cfset&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/route/#api-versioning","title":"API Versioning","text":"<pre><code>&lt;cfset namespace(\"api\")&gt;\n    &lt;cfset namespace(name=\"v1\", path=\"/v1\")&gt;\n        &lt;cfset resources(name=\"users\", except=\"new,edit\")&gt;\n    &lt;/cfset&gt;\n    &lt;cfset namespace(name=\"v2\", path=\"/v2\")&gt;\n        &lt;cfset resources(name=\"users\", except=\"new,edit\")&gt;\n    &lt;/cfset&gt;\n&lt;/cfset&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/route/#subdomain-routing","title":"Subdomain Routing","text":"<pre><code>&lt;cfset subdomain(\"api\")&gt;\n    &lt;cfset resources(\"products\")&gt;\n&lt;/cfset&gt;\n\n&lt;cfset subdomain(\"admin\")&gt;\n    &lt;cfset resources(\"users\")&gt;\n&lt;/cfset&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/route/#redirect-routes","title":"Redirect Routes","text":"<pre><code>&lt;cfset get(pattern=\"/old-about\", redirect=\"/about\")&gt;\n&lt;cfset get(pattern=\"/products/category/[name]\", redirect=\"/categories/[name]\")&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/route/#performance-considerations","title":"Performance Considerations","text":"<ol> <li>Route caching: Routes are cached in production</li> <li>Minimize regex: Complex patterns slow routing</li> <li>Avoid wildcards: Be specific when possible</li> <li>Order efficiently: Most-used routes first</li> </ol>"},{"location":"command-line-tools/commands/generate/route/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/generate/route/#route-not-found","title":"Route Not Found","text":"<ul> <li>Check route order</li> <li>Verify HTTP method</li> <li>Test with <code>wheels routes test</code></li> <li>Check for typos in pattern</li> </ul>"},{"location":"command-line-tools/commands/generate/route/#naming-conflicts","title":"Naming Conflicts","text":"<ul> <li>Ensure unique route names</li> <li>Check for duplicate patterns</li> <li>Use namespaces to avoid conflicts</li> </ul>"},{"location":"command-line-tools/commands/generate/route/#parameter-issues","title":"Parameter Issues","text":"<ul> <li>Verify parameter names match</li> <li>Check constraint patterns</li> <li>Test with various inputs</li> </ul>"},{"location":"command-line-tools/commands/generate/route/#see-also","title":"See Also","text":"<ul> <li>wheels scaffold - Generate complete CRUD with routes</li> <li>wheels generate controller - Generate controllers</li> <li>wheels generate resource - Generate RESTful resources</li> <li>wheels generate api-resource - Generate API resources</li> </ul>"},{"location":"command-line-tools/commands/generate/scaffold/","title":"wheels scaffold","text":"<p>Generate complete CRUD scaffolding for a resource.</p>"},{"location":"command-line-tools/commands/generate/scaffold/#synopsis","title":"Synopsis","text":"<pre><code>wheels scaffold name=[resourceName] [options]\n</code></pre>"},{"location":"command-line-tools/commands/generate/scaffold/#description","title":"Description","text":"<p>The <code>wheels scaffold</code> command generates a complete CRUD (Create, Read, Update, Delete) implementation including model, controller, views, tests, and database migration. It's the fastest way to create a fully functional resource.</p>"},{"location":"command-line-tools/commands/generate/scaffold/#arguments","title":"Arguments","text":"Argument Description Default <code>name</code> Resource name (singular) Required"},{"location":"command-line-tools/commands/generate/scaffold/#options","title":"Options","text":"Option Description Default <code>properties</code> Model properties (format: name:type,name2:type2) <code>belongs-to</code> Parent model relationships (comma-separated) <code>has-many</code> Child model relationships (comma-separated) <code>--api</code> Generate API-only scaffold (no views) <code>false</code> <code>--tests</code> Generate test files <code>true</code> <code>--migrate</code> Run migrations after scaffolding <code>false</code> <code>--force</code> Overwrite existing files <code>false</code>"},{"location":"command-line-tools/commands/generate/scaffold/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/generate/scaffold/#basic-scaffold","title":"Basic scaffold","text":"<pre><code>wheels scaffold name=product\n</code></pre>"},{"location":"command-line-tools/commands/generate/scaffold/#scaffold-with-properties","title":"Scaffold with properties","text":"<pre><code>wheels scaffold name=product properties=name:string,price:decimal,stock:integer\n</code></pre>"},{"location":"command-line-tools/commands/generate/scaffold/#scaffold-with-associations","title":"Scaffold with associations","text":"<pre><code>wheels scaffold name=order properties=total:decimal,status:string \\\n  belongsTo=user hasMany=orderItems\n</code></pre>"},{"location":"command-line-tools/commands/generate/scaffold/#api-scaffold","title":"API scaffold","text":"<pre><code>wheels scaffold name=product api=true properties=name:string,price:decimal\n</code></pre>"},{"location":"command-line-tools/commands/generate/scaffold/#scaffold-with-auto-migration","title":"Scaffold with auto-migration","text":"<pre><code>wheels scaffold name=category properties=name:string migrate=true\n</code></pre>"},{"location":"command-line-tools/commands/generate/scaffold/#what-gets-generated","title":"What Gets Generated","text":""},{"location":"command-line-tools/commands/generate/scaffold/#standard-scaffold","title":"Standard Scaffold","text":"<ol> <li>Model (<code>/models/Product.cfc</code>)</li> <li>Properties and validations</li> <li>Associations</li> <li> <p>Business logic</p> </li> <li> <p>Controller (<code>/controllers/Products.cfc</code>)</p> </li> <li>All CRUD actions</li> <li>Flash messages</li> <li> <p>Error handling</p> </li> <li> <p>Views (<code>/views/products/</code>)</p> </li> <li><code>index.cfm</code> - List all records</li> <li><code>show.cfm</code> - Display single record</li> <li><code>new.cfm</code> - New record form</li> <li><code>edit.cfm</code> - Edit record form</li> <li> <p><code>_form.cfm</code> - Shared form partial</p> </li> <li> <p>Migration (<code>/app/migrator/migrations/[timestamp]_create_products.cfc</code>)</p> </li> <li>Create table</li> <li>Add indexes</li> <li> <p>Define columns</p> </li> <li> <p>Tests (if enabled)</p> </li> <li>Model tests</li> <li>Controller tests</li> <li>Integration tests</li> </ol>"},{"location":"command-line-tools/commands/generate/scaffold/#api-scaffold_1","title":"API Scaffold","text":"<ol> <li>Model - Same as standard</li> <li>API Controller - JSON responses only</li> <li>Migration - Same as standard</li> <li>API Tests - JSON response tests</li> <li>No Views - API doesn't need views</li> </ol>"},{"location":"command-line-tools/commands/generate/scaffold/#generated-files-example","title":"Generated Files Example","text":"<p>For <code>wheels scaffold name=product properties=name:string,price:decimal,stock:integer</code>:</p>"},{"location":"command-line-tools/commands/generate/scaffold/#model-modelsproductcfc","title":"Model: <code>/models/Product.cfc</code>","text":"<pre><code>component extends=\"Model\" {\n\n    function init() {\n        // Properties\n        property(name=\"name\", label=\"Product Name\");\n        property(name=\"price\", label=\"Price\");\n        property(name=\"stock\", label=\"Stock Quantity\");\n\n        // Validations\n        validatesPresenceOf(\"name,price,stock\");\n        validatesUniquenessOf(\"name\");\n        validatesNumericalityOf(\"price\", greaterThan=0);\n        validatesNumericalityOf(\"stock\", onlyInteger=true, greaterThanOrEqualTo=0);\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/scaffold/#controller-controllersproductscfc","title":"Controller: <code>/controllers/Products.cfc</code>","text":"<pre><code>component extends=\"Controller\" {\n\n    function init() {\n        // Filters\n    }\n\n    function index() {\n        products = model(\"Product\").findAll(order=\"name\");\n    }\n\n    function show() {\n        product = model(\"Product\").findByKey(params.key);\n        if (!IsObject(product)) {\n            flashInsert(error=\"Product not found.\");\n            redirectTo(action=\"index\");\n        }\n    }\n\n    function new() {\n        product = model(\"Product\").new();\n    }\n\n    function create() {\n        product = model(\"Product\").new(params.product);\n        if (product.save()) {\n            flashInsert(success=\"Product was created successfully.\");\n            redirectTo(action=\"index\");\n        } else {\n            flashInsert(error=\"There was an error creating the product.\");\n            renderView(action=\"new\");\n        }\n    }\n\n    function edit() {\n        product = model(\"Product\").findByKey(params.key);\n        if (!IsObject(product)) {\n            flashInsert(error=\"Product not found.\");\n            redirectTo(action=\"index\");\n        }\n    }\n\n    function update() {\n        product = model(\"Product\").findByKey(params.key);\n        if (IsObject(product) &amp;&amp; product.update(params.product)) {\n            flashInsert(success=\"Product was updated successfully.\");\n            redirectTo(action=\"index\");\n        } else {\n            flashInsert(error=\"There was an error updating the product.\");\n            renderView(action=\"edit\");\n        }\n    }\n\n    function delete() {\n        product = model(\"Product\").findByKey(params.key);\n        if (IsObject(product) &amp;&amp; product.delete()) {\n            flashInsert(success=\"Product was deleted successfully.\");\n        } else {\n            flashInsert(error=\"Product could not be deleted.\");\n        }\n        redirectTo(action=\"index\");\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/scaffold/#view-viewsproductsindexcfm","title":"View: <code>/views/products/index.cfm</code>","text":"<pre><code>&lt;h1&gt;Products&lt;/h1&gt;\n\n#flashMessages()#\n\n&lt;p&gt;#linkTo(text=\"New Product\", action=\"new\", class=\"btn btn-primary\")#&lt;/p&gt;\n\n&lt;table class=\"table\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt;Name&lt;/th&gt;\n            &lt;th&gt;Price&lt;/th&gt;\n            &lt;th&gt;Stock&lt;/th&gt;\n            &lt;th&gt;Actions&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        &lt;cfloop query=\"products\"&gt;\n            &lt;tr&gt;\n                &lt;td&gt;#encodeForHtml(products.name)#&lt;/td&gt;\n                &lt;td&gt;#dollarFormat(products.price)#&lt;/td&gt;\n                &lt;td&gt;#products.stock#&lt;/td&gt;\n                &lt;td&gt;\n                    #linkTo(text=\"Show\", action=\"show\", key=products.id)#\n                    #linkTo(text=\"Edit\", action=\"edit\", key=products.id)#\n                    #linkTo(text=\"Delete\", action=\"delete\", key=products.id, \n                            method=\"delete\", confirm=\"Are you sure?\")#\n                &lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/cfloop&gt;\n    &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/scaffold/#form-partial-viewsproducts_formcfm","title":"Form Partial: <code>/views/products/_form.cfm</code>","text":"<pre><code>#errorMessagesFor(\"product\")#\n\n#textField(objectName=\"product\", property=\"name\", label=\"Product Name\")#\n#textField(objectName=\"product\", property=\"price\", label=\"Price\")#\n#textField(objectName=\"product\", property=\"stock\", label=\"Stock Quantity\")#\n</code></pre>"},{"location":"command-line-tools/commands/generate/scaffold/#migration-appmigratormigrationstimestamp_create_productscfc","title":"Migration: <code>/app/migrator/migrations/[timestamp]_create_products.cfc</code>","text":"<pre><code>component extends=\"wheels.migrator.Migration\" {\n\n    function up() {\n        transaction {\n            t = createTable(\"products\");\n            t.string(\"name\");\n            t.decimal(\"price\", precision=10, scale=2);\n            t.integer(\"stock\");\n            t.timestamps();\n            t.create();\n\n            addIndex(table=\"products\", columns=\"name\", unique=true);\n        }\n    }\n\n    function down() {\n        transaction {\n            dropTable(\"products\");\n        }\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/scaffold/#routes-configuration","title":"Routes Configuration","text":"<p>Add to <code>/config/routes.cfm</code>:</p> <pre><code>&lt;cfset resources(\"products\")&gt;\n</code></pre> <p>This creates all RESTful routes: - GET /products - index - GET /products/new - new - POST /products - create - GET /products/[key] - show - GET /products/[key]/edit - edit - PUT/PATCH /products/[key] - update - DELETE /products/[key] - delete</p>"},{"location":"command-line-tools/commands/generate/scaffold/#post-scaffold-steps","title":"Post-Scaffold Steps","text":"<ol> <li> <p>Run migration (if not using <code>--migrate</code>):    <pre><code>wheels dbmigrate latest\n</code></pre></p> </li> <li> <p>Add routes to <code>/config/routes.cfm</code>:    <pre><code>&lt;cfset resources(\"products\")&gt;\n</code></pre></p> </li> <li> <p>Restart application:    <pre><code>wheels reload\n</code></pre></p> </li> <li> <p>Test the scaffold:</p> </li> <li>Visit <code>/products</code> to see the index</li> <li>Create, edit, and delete records</li> <li>Run generated tests</li> </ol>"},{"location":"command-line-tools/commands/generate/scaffold/#customization","title":"Customization","text":""},{"location":"command-line-tools/commands/generate/scaffold/#adding-search","title":"Adding Search","text":"<p>In controller's <code>index()</code>: <pre><code>function index() {\n    if (StructKeyExists(params, \"search\")) {\n        products = model(\"Product\").findAll(\n            where=\"name LIKE :search\",\n            params={search: \"%#params.search#%\"}\n        );\n    } else {\n        products = model(\"Product\").findAll();\n    }\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/scaffold/#adding-pagination","title":"Adding Pagination","text":"<pre><code>function index() {\n    products = model(\"Product\").findAll(\n        page=params.page ?: 1,\n        perPage=20,\n        order=\"createdAt DESC\"\n    );\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/scaffold/#adding-filters","title":"Adding Filters","text":"<pre><code>function init() {\n    filters(through=\"authenticate\", except=\"index,show\");\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/scaffold/#template-customization","title":"Template Customization","text":"<p>The scaffold command uses templates to generate code. You can customize these templates to match your project's coding standards and markup preferences.</p>"},{"location":"command-line-tools/commands/generate/scaffold/#template-override-system","title":"Template Override System","text":"<p>The CLI uses a template override system that allows you to customize the generated code:</p> <ol> <li>CLI Templates - Default templates are located in the CLI module at <code>/cli/templates/</code></li> <li>App Templates - Custom templates in your application at <code>/app/snippets/</code> override the CLI templates</li> </ol> <p>This means you can modify the generated code structure by creating your own templates in the <code>/app/snippets/</code> directory.</p>"},{"location":"command-line-tools/commands/generate/scaffold/#how-it-works","title":"How It Works","text":"<p>When generating code, the CLI looks for templates in this order: 1. First checks <code>/app/snippets/[template-name]</code> 2. Falls back to <code>/cli/templates/[template-name]</code> if not found in app</p>"},{"location":"command-line-tools/commands/generate/scaffold/#customizing-templates","title":"Customizing Templates","text":"<p>To customize scaffold output:</p> <ol> <li>Copy the template you want to customize from <code>/cli/templates/</code> to <code>/app/snippets/</code></li> <li>Modify the template to match your project's needs</li> <li>Run scaffold - it will use your custom template</li> </ol> <p>Example for customizing the form template: <pre><code># Create the crud directory in your app\nmkdir -p app/snippets/crud\n\n# Copy the form template\ncp /path/to/wheels/cli/templates/crud/_form.txt app/snippets/crud/\n\n# Edit the template to match your markup\n# The CLI will now use your custom template\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/scaffold/#available-templates","title":"Available Templates","text":"<p>Templates used by scaffold command: - <code>crud/index.txt</code> - Index/list view - <code>crud/show.txt</code> - Show single record view - <code>crud/new.txt</code> - New record form view - <code>crud/edit.txt</code> - Edit record form view - <code>crud/_form.txt</code> - Form partial shared by new/edit - <code>ModelContent.txt</code> - Model file structure - <code>ControllerContent.txt</code> - Controller file structure</p>"},{"location":"command-line-tools/commands/generate/scaffold/#template-placeholders","title":"Template Placeholders","text":"<p>Templates use placeholders that get replaced during generation: - <code>|ObjectNameSingular|</code> - Lowercase singular name (e.g., \"product\") - <code>|ObjectNamePlural|</code> - Lowercase plural name (e.g., \"products\") - <code>|ObjectNameSingularC|</code> - Capitalized singular name (e.g., \"Product\") - <code>|ObjectNamePluralC|</code> - Capitalized plural name (e.g., \"Products\") - <code>|FormFields|</code> - Generated form fields based on properties - <code>&lt;!--- CLI-Appends-Here ---&gt;</code> - Marker for future CLI additions</p>"},{"location":"command-line-tools/commands/generate/scaffold/#best-practices","title":"Best Practices","text":"<ol> <li>Properties: Define all needed properties upfront</li> <li>Associations: Include relationships in initial scaffold</li> <li>Validation: Add custom validations after generation</li> <li>Testing: Always generate and run tests</li> <li>Routes: Use RESTful resources when possible</li> <li>Security: Add authentication/authorization</li> <li>Templates: Customize templates in <code>/app/snippets/</code> to match your project standards</li> </ol>"},{"location":"command-line-tools/commands/generate/scaffold/#comparison-with-individual-generators","title":"Comparison with Individual Generators","text":"<p>Scaffold generates everything at once:</p> <pre><code># Scaffold does all of this:\nwheels generate model product properties=\"name:string,price:decimal\"\nwheels generate controller products --rest\nwheels generate view products index,show,new,edit,_form\nwheels generate test model product\nwheels generate test controller products\nwheels dbmigrate create table products\n</code></pre>"},{"location":"command-line-tools/commands/generate/scaffold/#see-also","title":"See Also","text":"<ul> <li>wheels generate model - Generate models</li> <li>wheels generate controller - Generate controllers</li> <li>wheels generate resource - Generate REST resources</li> <li>wheels dbmigrate latest - Run migrations</li> </ul>"},{"location":"command-line-tools/commands/generate/snippets/","title":"wheels generate snippets","text":"<p>Generate code snippets and boilerplate code for common patterns.</p>"},{"location":"command-line-tools/commands/generate/snippets/#synopsis","title":"Synopsis","text":"<pre><code>wheels generate snippets [pattern] [options]\nwheels g snippets [pattern] [options]\n</code></pre>"},{"location":"command-line-tools/commands/generate/snippets/#description","title":"Description","text":"<p>The <code>wheels generate snippets</code> command creates code snippets for common Wheels patterns and best practices. It provides ready-to-use code blocks that can be customized for your specific needs, helping you implement standard patterns quickly and consistently.</p>"},{"location":"command-line-tools/commands/generate/snippets/#arguments","title":"Arguments","text":"Argument Description Default <code>pattern</code> Snippet pattern to generate Shows available patterns"},{"location":"command-line-tools/commands/generate/snippets/#options","title":"Options","text":"Option Description Default <code>--list</code> List all available snippets <code>false</code> <code>--category</code> Filter by category All categories <code>--output</code> Output format (console, file, clipboard) <code>console</code> <code>--customize</code> Interactive customization <code>false</code> <code>--force</code> Overwrite existing files <code>false</code> <code>--help</code> Show help information"},{"location":"command-line-tools/commands/generate/snippets/#available-snippets","title":"Available Snippets","text":""},{"location":"command-line-tools/commands/generate/snippets/#list-all-snippets","title":"List All Snippets","text":"<pre><code>wheels generate snippets --list\n</code></pre> <p>Output: <pre><code>Available Snippets:\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\nAuthentication:\n  - login-form          Login form with remember me\n  - auth-filter         Authentication filter\n  - password-reset      Password reset flow\n  - user-registration   User registration with validation\n\nModel Patterns:\n  - soft-delete         Soft delete implementation\n  - audit-trail         Audit trail with timestamps\n  - sluggable          URL-friendly slugs\n  - versionable        Version tracking\n  - searchable         Full-text search\n\nController Patterns:\n  - crud-actions       Complete CRUD actions\n  - api-controller     JSON API controller\n  - nested-resource    Nested resource controller\n  - admin-controller   Admin area controller\n\nView Patterns:\n  - form-with-errors   Form with error handling\n  - pagination-links   Pagination navigation\n  - search-form        Search form with filters\n  - ajax-form          AJAX form submission\n\nDatabase:\n  - migration-indexes  Common index patterns\n  - seed-data         Database seeding\n  - constraints       Foreign key constraints\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/snippets/#authentication-snippets","title":"Authentication Snippets","text":""},{"location":"command-line-tools/commands/generate/snippets/#login-form","title":"Login Form","text":"<pre><code>wheels generate snippets login-form\n</code></pre> <p>Generates: <pre><code>&lt;!--- views/sessions/new.cfm ---&gt;\n&lt;h1&gt;Login&lt;/h1&gt;\n\n#errorMessagesFor(\"user\")#\n\n#startFormTag(action=\"create\", class=\"login-form\")#\n\n    &lt;div class=\"form-group\"&gt;\n        #textField(\n            objectName=\"user\",\n            property=\"email\",\n            label=\"Email\",\n            class=\"form-control\",\n            placeholder=\"email@example.com\",\n            required=true,\n            autofocus=true\n        )#\n    &lt;/div&gt;\n\n    &lt;div class=\"form-group\"&gt;\n        #passwordField(\n            objectName=\"user\",\n            property=\"password\",\n            label=\"Password\",\n            class=\"form-control\",\n            required=true\n        )#\n    &lt;/div&gt;\n\n    &lt;div class=\"form-group\"&gt;\n        #checkBox(\n            objectName=\"user\",\n            property=\"rememberMe\",\n            label=\"Remember me\",\n            value=\"1\"\n        )#\n    &lt;/div&gt;\n\n    &lt;div class=\"form-group\"&gt;\n        #submitTag(value=\"Login\", class=\"btn btn-primary\")#\n        #linkTo(text=\"Forgot password?\", route=\"forgotPassword\", class=\"btn btn-link\")#\n    &lt;/div&gt;\n\n#endFormTag()#\n\n&lt;!--- controllers/Sessions.cfc ---&gt;\ncomponent extends=\"Controller\" {\n\n    function new() {\n        user = model(\"User\").new();\n    }\n\n    function create() {\n        user = model(\"User\").findOne(where=\"email='#params.user.email#'\");\n\n        if (IsObject(user) &amp;&amp; user.authenticate(params.user.password)) {\n            session.userId = user.id;\n\n            if (params.user.rememberMe == 1) {\n                cookie.rememberToken = user.generateRememberToken();\n                cookie.userId = encrypt(user.id, application.encryptionKey);\n            }\n\n            flashInsert(success=\"Welcome back, #user.firstName#!\");\n            redirectTo(route=\"dashboard\");\n        } else {\n            user = model(\"User\").new(email=params.user.email);\n            flashInsert(error=\"Invalid email or password.\");\n            renderView(action=\"new\");\n        }\n    }\n\n    function delete() {\n        StructDelete(session, \"userId\");\n        StructDelete(cookie, \"rememberToken\");\n        StructDelete(cookie, \"userId\");\n\n        flashInsert(success=\"You have been logged out.\");\n        redirectTo(route=\"home\");\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/snippets/#authentication-filter","title":"Authentication Filter","text":"<pre><code>wheels generate snippets auth-filter\n</code></pre> <p>Generates: <pre><code>// In Controller.cfc or specific controller\n\nfunction init() {\n    filters(through=\"authenticate\", except=\"new,create\");\n    filters(through=\"rememberUser\", only=\"new\");\n}\n\nprivate function authenticate() {\n    if (!isLoggedIn()) {\n        storeLocation();\n        flashInsert(notice=\"Please log in to continue.\");\n        redirectTo(route=\"login\");\n    }\n}\n\nprivate function isLoggedIn() {\n    return StructKeyExists(session, \"userId\") &amp;&amp; session.userId &gt; 0;\n}\n\nprivate function currentUser() {\n    if (!StructKeyExists(request, \"currentUser\")) {\n        if (isLoggedIn()) {\n            request.currentUser = model(\"User\").findByKey(session.userId);\n        } else {\n            request.currentUser = false;\n        }\n    }\n    return request.currentUser;\n}\n\nprivate function rememberUser() {\n    if (!isLoggedIn() &amp;&amp; StructKeyExists(cookie, \"rememberToken\")) {\n        user = model(\"User\").findOne(\n            where=\"rememberToken='#cookie.rememberToken#' AND rememberTokenExpiresAt &gt; NOW()\"\n        );\n\n        if (IsObject(user)) {\n            session.userId = user.id;\n            user.updateRememberToken();\n        }\n    }\n}\n\nprivate function storeLocation() {\n    if (request.method == \"GET\") {\n        session.returnTo = request.cgi.path_info;\n        if (Len(request.cgi.query_string)) {\n            session.returnTo &amp;= \"?\" &amp; request.cgi.query_string;\n        }\n    }\n}\n\nprivate function redirectBackOrTo(required string route) {\n    if (StructKeyExists(session, \"returnTo\")) {\n        local.returnTo = session.returnTo;\n        StructDelete(session, \"returnTo\");\n        redirectTo(location=local.returnTo);\n    } else {\n        redirectTo(route=arguments.route);\n    }\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/snippets/#model-patterns","title":"Model Patterns","text":""},{"location":"command-line-tools/commands/generate/snippets/#soft-delete","title":"Soft Delete","text":"<pre><code>wheels generate snippets soft-delete\n</code></pre> <p>Generates: <pre><code>// In Model init()\nproperty(name=\"deletedAt\", sql=\"deleted_at\");\n\n// Soft delete callbacks\nbeforeDelete(\"softDelete\");\nafterFind(\"excludeDeleted\");\n\n// Default scope\nfunction excludeDeleted() {\n    if (!StructKeyExists(arguments, \"includeSoftDeleted\") || !arguments.includeSoftDeleted) {\n        if (StructKeyExists(this, \"deletedAt\") &amp;&amp; !IsNull(this.deletedAt)) {\n            return false; // Exclude from results\n        }\n    }\n}\n\n// Soft delete implementation\nprivate function softDelete() {\n    this.deletedAt = Now();\n    this.save(validate=false, callbacks=false);\n    return false; // Prevent actual deletion\n}\n\n// Scopes\nfunction active() {\n    return this.findAll(where=\"deleted_at IS NULL\", argumentCollection=arguments);\n}\n\nfunction deleted() {\n    return this.findAll(where=\"deleted_at IS NOT NULL\", argumentCollection=arguments);\n}\n\nfunction withDeleted() {\n    return this.findAll(includeSoftDeleted=true, argumentCollection=arguments);\n}\n\n// Restore method\nfunction restore() {\n    this.deletedAt = \"\";\n    return this.save(validate=false);\n}\n\n// Permanent delete\nfunction forceDelete() {\n    return this.delete(callbacks=false);\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/snippets/#audit-trail","title":"Audit Trail","text":"<pre><code>wheels generate snippets audit-trail --customize\n</code></pre> <p>Interactive customization: <pre><code>? Include user tracking? (Y/n) \u203a Y\n? Track IP address? (y/N) \u203a Y\n? Track changes in JSON? (Y/n) \u203a Y\n</code></pre></p> <p>Generates: <pre><code>// models/AuditLog.cfc\ncomponent extends=\"Model\" {\n\n    function init() {\n        belongsTo(\"user\");\n\n        property(name=\"modelName\", sql=\"model_name\");\n        property(name=\"recordId\", sql=\"record_id\");\n        property(name=\"action\", sql=\"action\");\n        property(name=\"changes\", sql=\"changes\");\n        property(name=\"userId\", sql=\"user_id\");\n        property(name=\"ipAddress\", sql=\"ip_address\");\n        property(name=\"userAgent\", sql=\"user_agent\");\n\n        validatesPresenceOf(\"modelName,recordId,action\");\n    }\n\n}\n\n// In audited model\nfunction init() {\n    afterCreate(\"logCreate\");\n    afterUpdate(\"logUpdate\");\n    afterDelete(\"logDelete\");\n}\n\nprivate function logCreate() {\n    createAuditLog(\"create\", this.properties());\n}\n\nprivate function logUpdate() {\n    if (hasChanged()) {\n        createAuditLog(\"update\", this.changedProperties());\n    }\n}\n\nprivate function logDelete() {\n    createAuditLog(\"delete\", {id: this.id});\n}\n\nprivate function createAuditLog(required string action, required struct data) {\n    model(\"AuditLog\").create({\n        modelName: ListLast(GetMetaData(this).name, \".\"),\n        recordId: this.id,\n        action: arguments.action,\n        changes: SerializeJSON(arguments.data),\n        userId: request.currentUser.id ?: \"\",\n        ipAddress: request.remoteAddress,\n        userAgent: request.userAgent\n    });\n}\n\nprivate function changedProperties() {\n    local.changes = {};\n    local.properties = this.properties();\n\n    for (local.key in local.properties) {\n        if (hasChanged(local.key)) {\n            local.changes[local.key] = {\n                from: this.changedFrom(local.key),\n                to: local.properties[local.key]\n            };\n        }\n    }\n\n    return local.changes;\n}\n\n// Audit log migration\ncomponent extends=\"wheels.migrator.Migration\" {\n\n    function up() {\n        createTable(name=\"audit_logs\") {\n            t.increments(\"id\");\n            t.string(\"model_name\", null=false);\n            t.integer(\"record_id\", null=false);\n            t.string(\"action\", null=false);\n            t.text(\"changes\");\n            t.integer(\"user_id\");\n            t.string(\"ip_address\");\n            t.string(\"user_agent\");\n            t.timestamps();\n\n            t.index([\"model_name\", \"record_id\"]);\n            t.index(\"user_id\");\n            t.index(\"created_at\");\n        };\n    }\n\n    function down() {\n        dropTable(\"audit_logs\");\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/snippets/#controller-patterns","title":"Controller Patterns","text":""},{"location":"command-line-tools/commands/generate/snippets/#crud-actions","title":"CRUD Actions","text":"<pre><code>wheels generate snippets crud-actions\n</code></pre> <p>Generates complete CRUD controller with error handling, pagination, and filters.</p>"},{"location":"command-line-tools/commands/generate/snippets/#api-controller","title":"API Controller","text":"<pre><code>wheels generate snippets api-controller\n</code></pre> <p>Generates: <pre><code>component extends=\"Controller\" {\n\n    function init() {\n        provides(\"json\");\n        filters(through=\"setApiHeaders\");\n        filters(through=\"authenticateApi\");\n        filters(through=\"logApiRequest\", except=\"index,show\");\n    }\n\n    private function setApiHeaders() {\n        header name=\"X-API-Version\" value=\"1.0\";\n        header name=\"X-RateLimit-Limit\" value=\"1000\";\n        header name=\"X-RateLimit-Remaining\" value=getRateLimitRemaining();\n    }\n\n    private function authenticateApi() {\n        local.token = getAuthToken();\n\n        if (!Len(local.token)) {\n            renderUnauthorized(\"Missing authentication token\");\n        }\n\n        request.apiUser = model(\"ApiKey\").authenticate(local.token);\n\n        if (!IsObject(request.apiUser)) {\n            renderUnauthorized(\"Invalid authentication token\");\n        }\n    }\n\n    private function getAuthToken() {\n        // Check Authorization header\n        if (StructKeyExists(getHttpRequestData().headers, \"Authorization\")) {\n            local.auth = getHttpRequestData().headers.Authorization;\n            if (Left(local.auth, 7) == \"Bearer \") {\n                return Mid(local.auth, 8, Len(local.auth));\n            }\n        }\n\n        // Check X-API-Key header\n        if (StructKeyExists(getHttpRequestData().headers, \"X-API-Key\")) {\n            return getHttpRequestData().headers[\"X-API-Key\"];\n        }\n\n        // Check query parameter\n        if (StructKeyExists(params, \"api_key\")) {\n            return params.api_key;\n        }\n\n        return \"\";\n    }\n\n    private function renderUnauthorized(required string message) {\n        renderWith(\n            data={\n                error: {\n                    code: 401,\n                    message: arguments.message\n                }\n            },\n            status=401\n        );\n    }\n\n    private function renderError(required string message, numeric status = 400) {\n        renderWith(\n            data={\n                error: {\n                    code: arguments.status,\n                    message: arguments.message\n                }\n            },\n            status=arguments.status\n        );\n    }\n\n    private function renderSuccess(required any data, numeric status = 200) {\n        renderWith(\n            data={\n                success: true,\n                data: arguments.data\n            },\n            status=arguments.status\n        );\n    }\n\n    private function renderPaginated(required any query) {\n        renderWith(\n            data={\n                success: true,\n                data: arguments.query,\n                pagination: {\n                    page: arguments.query.currentPage,\n                    perPage: arguments.query.perPage,\n                    total: arguments.query.totalRecords,\n                    pages: arguments.query.totalPages\n                }\n            }\n        );\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/snippets/#view-patterns","title":"View Patterns","text":""},{"location":"command-line-tools/commands/generate/snippets/#form-with-errors","title":"Form with Errors","text":"<pre><code>wheels generate snippets form-with-errors\n</code></pre>"},{"location":"command-line-tools/commands/generate/snippets/#ajax-form","title":"AJAX Form","text":"<pre><code>wheels generate snippets ajax-form\n</code></pre> <p>Generates: <pre><code>&lt;!--- View file ---&gt;\n&lt;div id=\"contact-form-container\"&gt;\n    #startFormTag(\n        action=\"send\",\n        id=\"contact-form\",\n        class=\"ajax-form\",\n        data={\n            remote: true,\n            method: \"post\",\n            success: \"handleFormSuccess\",\n            error: \"handleFormError\"\n        }\n    )#\n\n        &lt;div class=\"form-messages\" style=\"display: none;\"&gt;&lt;/div&gt;\n\n        &lt;div class=\"form-group\"&gt;\n            #textField(\n                name=\"name\",\n                label=\"Name\",\n                class=\"form-control\",\n                required=true\n            )#\n        &lt;/div&gt;\n\n        &lt;div class=\"form-group\"&gt;\n            #emailField(\n                name=\"email\",\n                label=\"Email\",\n                class=\"form-control\",\n                required=true\n            )#\n        &lt;/div&gt;\n\n        &lt;div class=\"form-group\"&gt;\n            #textArea(\n                name=\"message\",\n                label=\"Message\",\n                class=\"form-control\",\n                rows=5,\n                required=true\n            )#\n        &lt;/div&gt;\n\n        &lt;div class=\"form-group\"&gt;\n            #submitTag(\n                value=\"Send Message\",\n                class=\"btn btn-primary\",\n                data={loading: \"Sending...\"}\n            )#\n        &lt;/div&gt;\n\n    #endFormTag()#\n&lt;/div&gt;\n\n&lt;script&gt;\n// AJAX form handler\ndocument.addEventListener('DOMContentLoaded', function() {\n    const form = document.getElementById('contact-form');\n\n    form.addEventListener('submit', function(e) {\n        e.preventDefault();\n\n        const submitBtn = form.querySelector('[type=\"submit\"]');\n        const originalText = submitBtn.value;\n        const loadingText = submitBtn.dataset.loading;\n\n        // Disable form\n        submitBtn.disabled = true;\n        submitBtn.value = loadingText;\n\n        // Send AJAX request\n        fetch(form.action, {\n            method: form.method,\n            body: new FormData(form),\n            headers: {\n                'X-Requested-With': 'XMLHttpRequest'\n            }\n        })\n        .then(response =&gt; response.json())\n        .then(data =&gt; {\n            if (data.success) {\n                handleFormSuccess(data);\n            } else {\n                handleFormError(data);\n            }\n        })\n        .catch(error =&gt; {\n            handleFormError({message: 'Network error. Please try again.'});\n        })\n        .finally(() =&gt; {\n            submitBtn.disabled = false;\n            submitBtn.value = originalText;\n        });\n    });\n});\n\nfunction handleFormSuccess(data) {\n    const form = document.getElementById('contact-form');\n    const messages = form.querySelector('.form-messages');\n\n    // Show success message\n    messages.className = 'form-messages alert alert-success';\n    messages.textContent = data.message || 'Message sent successfully!';\n    messages.style.display = 'block';\n\n    // Reset form\n    form.reset();\n\n    // Hide message after 5 seconds\n    setTimeout(() =&gt; {\n        messages.style.display = 'none';\n    }, 5000);\n}\n\nfunction handleFormError(data) {\n    const form = document.getElementById('contact-form');\n    const messages = form.querySelector('.form-messages');\n\n    // Show error message\n    messages.className = 'form-messages alert alert-danger';\n    messages.textContent = data.message || 'An error occurred. Please try again.';\n    messages.style.display = 'block';\n\n    // Show field errors\n    if (data.errors) {\n        Object.keys(data.errors).forEach(field =&gt; {\n            const input = form.querySelector(`[name=\"${field}\"]`);\n            if (input) {\n                input.classList.add('is-invalid');\n                const error = document.createElement('div');\n                error.className = 'invalid-feedback';\n                error.textContent = data.errors[field].join(', ');\n                input.parentNode.appendChild(error);\n            }\n        });\n    }\n}\n&lt;/script&gt;\n\n&lt;!--- Controller action ---&gt;\nfunction send() {\n    contact = model(\"Contact\").new(params);\n\n    if (contact.save()) {\n        if (isAjax()) {\n            renderWith(data={\n                success: true,\n                message: \"Thank you! We'll be in touch soon.\"\n            });\n        } else {\n            flashInsert(success=\"Thank you! We'll be in touch soon.\");\n            redirectTo(route=\"home\");\n        }\n    } else {\n        if (isAjax()) {\n            renderWith(data={\n                success: false,\n                message: \"Please correct the errors below.\",\n                errors: contact.allErrors()\n            }, status=422);\n        } else {\n            renderView(action=\"new\");\n        }\n    }\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/snippets/#database-snippets","title":"Database Snippets","text":""},{"location":"command-line-tools/commands/generate/snippets/#migration-indexes","title":"Migration Indexes","text":"<pre><code>wheels generate snippets migration-indexes\n</code></pre> <p>Generates common index patterns: <pre><code>// Performance indexes\nt.index(\"email\"); // Single column\nt.index([\"last_name\", \"first_name\"]); // Composite\nt.index(\"created_at\"); // Timestamp queries\n\n// Unique constraints\nt.index(\"email\", unique=true);\nt.index([\"user_id\", \"role_id\"], unique=true);\n\n// Foreign key indexes\nt.index(\"user_id\");\nt.index(\"category_id\");\n\n// Full-text search\nt.index(\"title\", type=\"fulltext\");\nt.index([\"title\", \"content\"], type=\"fulltext\");\n\n// Partial indexes (PostgreSQL)\nt.index(\"email\", where=\"deleted_at IS NULL\");\n\n// Expression indexes\nt.index(\"LOWER(email)\", name=\"idx_email_lower\");\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/snippets/#seed-data","title":"Seed Data","text":"<pre><code>wheels generate snippets seed-data\n</code></pre>"},{"location":"command-line-tools/commands/generate/snippets/#custom-snippets","title":"Custom Snippets","text":""},{"location":"command-line-tools/commands/generate/snippets/#create-custom-snippet","title":"Create Custom Snippet","text":"<pre><code>wheels generate snippets --create=my-pattern\n</code></pre> <p>Creates template in <code>~/.wheels/snippets/my-pattern/</code>: <pre><code>my-pattern/\n\u251c\u2500\u2500 snippet.json\n\u251c\u2500\u2500 files/\n\u2502   \u251c\u2500\u2500 controller.cfc\n\u2502   \u251c\u2500\u2500 model.cfc\n\u2502   \u2514\u2500\u2500 view.cfm\n\u2514\u2500\u2500 README.md\n</code></pre></p> <p><code>snippet.json</code>: <pre><code>{\n    \"name\": \"my-pattern\",\n    \"description\": \"Custom pattern description\",\n    \"category\": \"custom\",\n    \"author\": \"Your Name\",\n    \"version\": \"1.0.0\",\n    \"variables\": [\n        {\n            \"name\": \"modelName\",\n            \"prompt\": \"Model name?\",\n            \"default\": \"MyModel\"\n        }\n    ],\n    \"files\": [\n        {\n            \"source\": \"files/controller.cfc\",\n            \"destination\": \"controllers/${controllerName}.cfc\"\n        }\n    ]\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/snippets/#output-options","title":"Output Options","text":""},{"location":"command-line-tools/commands/generate/snippets/#copy-to-clipboard","title":"Copy to Clipboard","text":"<pre><code>wheels generate snippets login-form --output=clipboard\n</code></pre>"},{"location":"command-line-tools/commands/generate/snippets/#save-to-file","title":"Save to File","text":"<pre><code>wheels generate snippets api-controller --output=file --path=./controllers/Api.cfc\n</code></pre>"},{"location":"command-line-tools/commands/generate/snippets/#interactive-mode","title":"Interactive Mode","text":"<pre><code>wheels generate snippets --customize\n</code></pre>"},{"location":"command-line-tools/commands/generate/snippets/#best-practices","title":"Best Practices","text":"<ol> <li>Review generated code: Customize for your needs</li> <li>Understand the patterns: Don't blindly copy</li> <li>Keep snippets updated: Maintain with framework updates</li> <li>Share useful patterns: Contribute back to community</li> <li>Document customizations: Note changes made</li> <li>Test generated code: Ensure it works in your context</li> <li>Use consistent patterns: Across your application</li> </ol>"},{"location":"command-line-tools/commands/generate/snippets/#see-also","title":"See Also","text":"<ul> <li>wheels generate controller - Generate controllers</li> <li>wheels generate model - Generate models</li> <li>wheels scaffold - Generate complete resources</li> </ul>"},{"location":"command-line-tools/commands/generate/test/","title":"wheels generate test","text":"<p>Generate test files for models, controllers, views, and other components.</p>"},{"location":"command-line-tools/commands/generate/test/#synopsis","title":"Synopsis","text":"<pre><code>wheels generate test [type] [name] [options]\nwheels g test [type] [name] [options]\n</code></pre>"},{"location":"command-line-tools/commands/generate/test/#description","title":"Description","text":"<p>The <code>wheels generate test</code> command creates test files for various components of your Wheels application. It generates appropriate test scaffolding based on the component type and includes common test cases to get you started.</p>"},{"location":"command-line-tools/commands/generate/test/#arguments","title":"Arguments","text":"Argument Description Default <code>type</code> Type of test (model, controller, view, helper, route) Required <code>name</code> Name of the component to test Required"},{"location":"command-line-tools/commands/generate/test/#options","title":"Options","text":"Option Description Default <code>--methods</code> Specific methods to test All methods <code>--integration</code> Generate integration tests <code>false</code> <code>--coverage</code> Include coverage setup <code>false</code> <code>--fixtures</code> Generate test fixtures <code>true</code> <code>--force</code> Overwrite existing files <code>false</code> <code>--help</code> Show help information"},{"location":"command-line-tools/commands/generate/test/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/generate/test/#model-test","title":"Model Test","text":"<pre><code>wheels generate test model product\n</code></pre> <p>Generates <code>/tests/models/ProductTest.cfc</code>: <pre><code>component extends=\"wheels.Test\" {\n\n    function setup() {\n        super.setup();\n        // Clear test data\n        model(\"Product\").deleteAll();\n\n        // Setup test fixtures\n        variables.validProduct = {\n            name: \"Test Product\",\n            price: 19.99,\n            description: \"Test product description\"\n        };\n    }\n\n    function teardown() {\n        super.teardown();\n        // Clean up after tests\n        model(\"Product\").deleteAll();\n    }\n\n    // Validation Tests\n\n    function test_valid_product_saves_successfully() {\n        // Arrange\n        product = model(\"Product\").new(variables.validProduct);\n\n        // Act\n        result = product.save();\n\n        // Assert\n        assert(result, \"Product should save successfully\");\n        assert(product.id &gt; 0, \"Product should have an ID after saving\");\n    }\n\n    function test_product_requires_name() {\n        // Arrange\n        product = model(\"Product\").new(variables.validProduct);\n        product.name = \"\";\n\n        // Act\n        result = product.save();\n\n        // Assert\n        assert(!result, \"Product should not save without name\");\n        assert(ArrayLen(product.errorsOn(\"name\")) &gt; 0, \"Should have error on name\");\n    }\n\n    function test_product_requires_positive_price() {\n        // Arrange\n        product = model(\"Product\").new(variables.validProduct);\n        product.price = -10;\n\n        // Act\n        result = product.save();\n\n        // Assert\n        assert(!result, \"Product should not save with negative price\");\n        assert(ArrayLen(product.errorsOn(\"price\")) &gt; 0, \"Should have error on price\");\n    }\n\n    function test_product_name_must_be_unique() {\n        // Arrange\n        product1 = model(\"Product\").create(variables.validProduct);\n        product2 = model(\"Product\").new(variables.validProduct);\n\n        // Act\n        result = product2.save();\n\n        // Assert\n        assert(!result, \"Should not save duplicate product name\");\n        assert(ArrayLen(product2.errorsOn(\"name\")) &gt; 0, \"Should have uniqueness error\");\n    }\n\n    // Association Tests\n\n    function test_product_has_many_reviews() {\n        // Arrange\n        product = model(\"Product\").create(variables.validProduct);\n        review = product.createReview(rating=5, comment=\"Great product!\");\n\n        // Act\n        reviews = product.reviews();\n\n        // Assert\n        assert(reviews.recordCount == 1, \"Product should have one review\");\n        assert(reviews.rating == 5, \"Review rating should be 5\");\n    }\n\n    // Callback Tests\n\n    function test_before_save_sanitizes_input() {\n        // Arrange\n        product = model(\"Product\").new(variables.validProduct);\n        product.name = \"  Test Product  \";\n\n        // Act\n        product.save();\n\n        // Assert\n        assert(product.name == \"Test Product\", \"Name should be trimmed\");\n    }\n\n    // Scope Tests\n\n    function test_active_scope_returns_only_active_products() {\n        // Arrange\n        activeProduct = model(\"Product\").create(\n            variables.validProduct &amp; {isActive: true}\n        );\n        inactiveProduct = model(\"Product\").create(\n            name=\"Inactive Product\",\n            price=29.99,\n            isActive=false\n        );\n\n        // Act\n        activeProducts = model(\"Product\").active();\n\n        // Assert\n        assert(activeProducts.recordCount == 1, \"Should have one active product\");\n        assert(activeProducts.id == activeProduct.id, \"Should return active product\");\n    }\n\n    // Method Tests\n\n    function test_calculate_discount_price() {\n        // Arrange\n        product = model(\"Product\").create(variables.validProduct);\n\n        // Act\n        discountPrice = product.calculateDiscountPrice(0.20); // 20% discount\n\n        // Assert\n        expected = product.price * 0.80;\n        assert(discountPrice == expected, \"Discount price should be 80% of original\");\n    }\n\n    // Integration Tests\n\n    function test_product_lifecycle() {\n        transaction {\n            // Create\n            product = model(\"Product\").new(variables.validProduct);\n            assert(product.save(), \"Should create product\");\n            productId = product.id;\n\n            // Read\n            foundProduct = model(\"Product\").findByKey(productId);\n            assert(IsObject(foundProduct), \"Should find product\");\n            assert(foundProduct.name == variables.validProduct.name, \"Should have correct name\");\n\n            // Update\n            foundProduct.price = 24.99;\n            assert(foundProduct.save(), \"Should update product\");\n\n            // Verify update\n            updatedProduct = model(\"Product\").findByKey(productId);\n            assert(updatedProduct.price == 24.99, \"Price should be updated\");\n\n            // Delete\n            assert(updatedProduct.delete(), \"Should delete product\");\n\n            // Verify deletion\n            deletedProduct = model(\"Product\").findByKey(productId);\n            assert(!IsObject(deletedProduct), \"Product should not exist\");\n\n            // Rollback transaction\n            transaction action=\"rollback\";\n        }\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/test/#controller-test","title":"Controller Test","text":"<pre><code>wheels generate test controller products\n</code></pre> <p>Generates <code>/tests/controllers/ProductsTest.cfc</code>:</p>"},{"location":"command-line-tools/commands/generate/test/#view-test","title":"View Test","text":"<pre><code>wheels generate test view products --name=index\n</code></pre> <p>Generates a test for the products/index view.</p>"},{"location":"command-line-tools/commands/generate/test/#crud-tests","title":"CRUD Tests","text":"<pre><code>wheels generate test controller products --crud\n</code></pre> <p>Generates complete CRUD test methods for the controller. <pre><code>component extends=\"wheels.Test\" {\n\n    function setup() {\n        super.setup();\n        // Setup test data\n        model(\"Product\").deleteAll();\n\n        variables.testProducts = [];\n        for (i = 1; i &lt;= 3; i++) {\n            ArrayAppend(variables.testProducts, \n                model(\"Product\").create(\n                    name=\"Product #i#\",\n                    price=19.99 * i,\n                    description=\"Description #i#\"\n                )\n            );\n        }\n    }\n\n    function teardown() {\n        super.teardown();\n        model(\"Product\").deleteAll();\n    }\n\n    // Action Tests\n\n    function test_index_returns_all_products() {\n        // Act\n        result = processRequest(route=\"products\", method=\"GET\");\n\n        // Assert\n        assert(result.status == 200, \"Should return 200 status\");\n        assert(Find(\"&lt;h1&gt;Products&lt;/h1&gt;\", result.body), \"Should have products heading\");\n\n        for (product in variables.testProducts) {\n            assert(Find(product.name, result.body), \"Should display product: #product.name#\");\n        }\n    }\n\n    function test_show_displays_product_details() {\n        // Arrange\n        product = variables.testProducts[1];\n\n        // Act\n        result = processRequest(route=\"product\", key=product.id, method=\"GET\");\n\n        // Assert\n        assert(result.status == 200, \"Should return 200 status\");\n        assert(Find(product.name, result.body), \"Should display product name\");\n        assert(Find(DollarFormat(product.price), result.body), \"Should display formatted price\");\n    }\n\n    function test_show_returns_404_for_invalid_product() {\n        // Act\n        result = processRequest(route=\"product\", key=99999, method=\"GET\");\n\n        // Assert\n        assert(result.status == 302, \"Should redirect\");\n        assert(result.flash.error == \"Product not found.\", \"Should have error message\");\n    }\n\n    function test_new_displays_form() {\n        // Act\n        result = processRequest(route=\"newProduct\", method=\"GET\");\n\n        // Assert\n        assert(result.status == 200, \"Should return 200 status\");\n        assert(Find(\"&lt;form\", result.body), \"Should have form\");\n        assert(Find('name=\"product[name]\"', result.body), \"Should have name field\");\n        assert(Find('name=\"product[price]\"', result.body), \"Should have price field\");\n    }\n\n    function test_create_with_valid_data() {\n        // Arrange\n        params = {\n            product: {\n                name: \"New Test Product\",\n                price: 39.99,\n                description: \"New product description\"\n            }\n        };\n\n        // Act\n        result = processRequest(route=\"products\", method=\"POST\", params=params);\n\n        // Assert\n        assert(result.status == 302, \"Should redirect after creation\");\n        assert(result.flash.success == \"Product was created successfully.\", \"Should have success message\");\n\n        // Verify product was created\n        newProduct = model(\"Product\").findOne(where=\"name='New Test Product'\");\n        assert(IsObject(newProduct), \"Product should be created\");\n        assert(newProduct.price == 39.99, \"Should have correct price\");\n    }\n\n    function test_create_with_invalid_data() {\n        // Arrange\n        params = {\n            product: {\n                name: \"\",\n                price: -10,\n                description: \"Invalid product\"\n            }\n        };\n\n        // Act\n        result = processRequest(route=\"products\", method=\"POST\", params=params);\n\n        // Assert\n        assert(result.status == 200, \"Should render form again\");\n        assert(Find(\"error\", result.body), \"Should display errors\");\n        assert(model(\"Product\").count(where=\"description='Invalid product'\") == 0, \n               \"Should not create invalid product\");\n    }\n\n    function test_edit_displays_form_with_product_data() {\n        // Arrange\n        product = variables.testProducts[1];\n\n        // Act\n        result = processRequest(route=\"editProduct\", key=product.id, method=\"GET\");\n\n        // Assert\n        assert(result.status == 200, \"Should return 200 status\");\n        assert(Find('value=\"#product.name#\"', result.body), \"Should pre-fill name\");\n        assert(Find(ToString(product.price), result.body), \"Should pre-fill price\");\n    }\n\n    function test_update_with_valid_data() {\n        // Arrange\n        product = variables.testProducts[1];\n        params = {\n            product: {\n                name: \"Updated Product Name\",\n                price: 49.99\n            }\n        };\n\n        // Act\n        result = processRequest(route=\"product\", key=product.id, method=\"PUT\", params=params);\n\n        // Assert\n        assert(result.status == 302, \"Should redirect after update\");\n        assert(result.flash.success == \"Product was updated successfully.\", \"Should have success message\");\n\n        // Verify update\n        updatedProduct = model(\"Product\").findByKey(product.id);\n        assert(updatedProduct.name == \"Updated Product Name\", \"Name should be updated\");\n        assert(updatedProduct.price == 49.99, \"Price should be updated\");\n    }\n\n    function test_delete_removes_product() {\n        // Arrange\n        product = variables.testProducts[1];\n        initialCount = model(\"Product\").count();\n\n        // Act\n        result = processRequest(route=\"product\", key=product.id, method=\"DELETE\");\n\n        // Assert\n        assert(result.status == 302, \"Should redirect after deletion\");\n        assert(result.flash.success == \"Product was deleted successfully.\", \"Should have success message\");\n        assert(model(\"Product\").count() == initialCount - 1, \"Should have one less product\");\n        assert(!IsObject(model(\"Product\").findByKey(product.id)), \"Product should be deleted\");\n    }\n\n    // Filter Tests\n\n    function test_authentication_required_for_protected_actions() {\n        // Test that certain actions require authentication\n        protectedRoutes = [\n            {route: \"newProduct\", method: \"GET\"},\n            {route: \"products\", method: \"POST\"},\n            {route: \"editProduct\", key: variables.testProducts[1].id, method: \"GET\"},\n            {route: \"product\", key: variables.testProducts[1].id, method: \"PUT\"},\n            {route: \"product\", key: variables.testProducts[1].id, method: \"DELETE\"}\n        ];\n\n        for (route in protectedRoutes) {\n            // Act without authentication\n            result = processRequest(argumentCollection=route);\n\n            // Assert\n            assert(result.status == 302, \"Should redirect unauthenticated user\");\n            assert(result.redirectUrl contains \"login\", \"Should redirect to login\");\n        }\n    }\n\n    // Helper method for processing requests\n    private function processRequest(\n        required string route,\n        string method = \"GET\",\n        struct params = {},\n        numeric key = 0\n    ) {\n        local.args = {\n            route: arguments.route,\n            method: arguments.method,\n            params: arguments.params\n        };\n\n        if (arguments.key &gt; 0) {\n            local.args.key = arguments.key;\n        }\n\n        return $processRequest(argumentCollection=local.args);\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/test/#view-test_1","title":"View Test","text":"<pre><code>wheels generate test view products/index\n</code></pre> <p>Generates <code>/tests/views/products/IndexTest.cfc</code>: <pre><code>component extends=\"wheels.Test\" {\n\n    function setup() {\n        super.setup();\n        // Create test data\n        variables.products = QueryNew(\n            \"id,name,price,createdAt\",\n            \"integer,varchar,decimal,timestamp\"\n        );\n\n        for (i = 1; i &lt;= 3; i++) {\n            QueryAddRow(variables.products, {\n                id: i,\n                name: \"Product #i#\",\n                price: 19.99 * i,\n                createdAt: Now()\n            });\n        }\n    }\n\n    function test_index_view_renders_product_list() {\n        // Act\n        result = $renderView(\n            view=\"/products/index\",\n            products=variables.products,\n            layout=false\n        );\n\n        // Assert\n        assert(Find(\"&lt;h1&gt;Products&lt;/h1&gt;\", result), \"Should have products heading\");\n        assert(Find(\"&lt;table\", result), \"Should have products table\");\n        assert(Find(\"Product 1\", result), \"Should display first product\");\n        assert(Find(\"Product 2\", result), \"Should display second product\");\n        assert(Find(\"Product 3\", result), \"Should display third product\");\n    }\n\n    function test_index_view_shows_empty_state() {\n        // Arrange\n        emptyQuery = QueryNew(\"id,name,price,createdAt\");\n\n        // Act\n        result = $renderView(\n            view=\"/products/index\",\n            products=emptyQuery,\n            layout=false\n        );\n\n        // Assert\n        assert(Find(\"No products found\", result), \"Should show empty state message\");\n        assert(Find(\"Create one now\", result), \"Should have create link\");\n        assert(!Find(\"&lt;table\", result), \"Should not show table when empty\");\n    }\n\n    function test_index_view_formats_prices_correctly() {\n        // Act\n        result = $renderView(\n            view=\"/products/index\",\n            products=variables.products,\n            layout=false\n        );\n\n        // Assert\n        assert(Find(\"$19.99\", result), \"Should format first price\");\n        assert(Find(\"$39.98\", result), \"Should format second price\");\n        assert(Find(\"$59.97\", result), \"Should format third price\");\n    }\n\n    function test_index_view_includes_action_links() {\n        // Act\n        result = $renderView(\n            view=\"/products/index\",\n            products=variables.products,\n            layout=false\n        );\n\n        // Assert\n        assert(Find(\"New Product\", result), \"Should have new product link\");\n        assert(FindNoCase(\"href=\"\"/products/new\"\"\", result), \"New link should be correct\");\n\n        // Check action links for each product\n        for (row in variables.products) {\n            assert(Find(\"View&lt;/a&gt;\", result), \"Should have view link\");\n            assert(Find(\"Edit&lt;/a&gt;\", result), \"Should have edit link\");\n            assert(Find(\"Delete&lt;/a&gt;\", result), \"Should have delete link\");\n        }\n    }\n\n    function test_index_view_with_pagination() {\n        // Arrange\n        paginatedProducts = Duplicate(variables.products);\n        paginatedProducts.currentPage = 2;\n        paginatedProducts.totalPages = 5;\n        paginatedProducts.totalRecords = 50;\n\n        // Act\n        result = $renderView(\n            view=\"/products/index\",\n            products=paginatedProducts,\n            layout=false\n        );\n\n        // Assert\n        assert(Find(\"class=\"\"pagination\"\"\", result), \"Should have pagination\");\n        assert(Find(\"Previous\", result), \"Should have previous link\");\n        assert(Find(\"Next\", result), \"Should have next link\");\n        assert(Find(\"Page 2 of 5\", result), \"Should show current page\");\n    }\n\n    function test_index_view_escapes_html() {\n        // Arrange\n        productsWithHtml = QueryNew(\"id,name,price,createdAt\");\n        QueryAddRow(productsWithHtml, {\n            id: 1,\n            name: \"&lt;script&gt;alert('XSS')&lt;/script&gt;\",\n            price: 19.99,\n            createdAt: Now()\n        });\n\n        // Act\n        result = $renderView(\n            view=\"/products/index\",\n            products=productsWithHtml,\n            layout=false\n        );\n\n        // Assert\n        assert(!Find(\"&lt;script&gt;alert('XSS')&lt;/script&gt;\", result), \n               \"Should not have unescaped script tag\");\n        assert(Find(\"&amp;lt;script&amp;gt;\", result), \"Should have escaped HTML\");\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/test/#integration-test","title":"Integration Test","text":"<pre><code>wheels generate test controller products --integration\n</code></pre> <p>Generates additional integration tests: <pre><code>component extends=\"wheels.Test\" {\n\n    function test_complete_product_workflow() {\n        transaction {\n            // 1. View product list (empty)\n            result = $visit(route=\"products\");\n            assert(result.status == 200);\n            assert(Find(\"No products found\", result.body));\n\n            // 2. Navigate to new product form\n            result = $click(\"Create one now\");\n            assert(result.status == 200);\n            assert(Find(\"&lt;form\", result.body));\n\n            // 3. Submit new product form\n            result = $submitForm({\n                \"product[name]\": \"Integration Test Product\",\n                \"product[price]\": \"29.99\",\n                \"product[description]\": \"Test description\"\n            });\n            assert(result.status == 302);\n            assert(result.flash.success);\n\n            // 4. View created product\n            product = model(\"Product\").findOne(order=\"id DESC\");\n            result = $visit(route=\"product\", key=product.id);\n            assert(result.status == 200);\n            assert(Find(\"Integration Test Product\", result.body));\n\n            // 5. Edit product\n            result = $click(\"Edit\");\n            assert(Find('value=\"Integration Test Product\"', result.body));\n\n            result = $submitForm({\n                \"product[name]\": \"Updated Product\",\n                \"product[price]\": \"39.99\"\n            });\n            assert(result.status == 302);\n\n            // 6. Verify update\n            result = $visit(route=\"product\", key=product.id);\n            assert(Find(\"Updated Product\", result.body));\n            assert(Find(\"$39.99\", result.body));\n\n            // 7. Delete product\n            result = $click(\"Delete\", confirm=true);\n            assert(result.status == 302);\n            assert(result.flash.success contains \"deleted\");\n\n            // 8. Verify deletion\n            assert(!IsObject(model(\"Product\").findByKey(product.id)));\n\n            transaction action=\"rollback\";\n        }\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/test/#test-types","title":"Test Types","text":""},{"location":"command-line-tools/commands/generate/test/#model-tests","title":"Model Tests","text":"<p>Focus on: - Validations - Associations - Callbacks - Scopes - Custom methods - Data integrity</p>"},{"location":"command-line-tools/commands/generate/test/#controller-tests","title":"Controller Tests","text":"<p>Focus on: - Action responses - Parameter handling - Authentication/authorization - Flash messages - Redirects - Error handling</p>"},{"location":"command-line-tools/commands/generate/test/#view-tests","title":"View Tests","text":"<p>Focus on: - Content rendering - Data display - HTML structure - Escaping/security - Conditional display - Helpers usage</p>"},{"location":"command-line-tools/commands/generate/test/#helper-tests","title":"Helper Tests","text":"<pre><code>wheels generate test helper format\n</code></pre> <pre><code>component extends=\"wheels.Test\" {\n\n    function test_format_currency() {\n        assert(formatCurrency(19.99) == \"$19.99\");\n        assert(formatCurrency(1000) == \"$1,000.00\");\n        assert(formatCurrency(0) == \"$0.00\");\n        assert(formatCurrency(-50.5) == \"-$50.50\");\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/test/#route-tests","title":"Route Tests","text":"<pre><code>wheels generate test route products\n</code></pre> <pre><code>component extends=\"wheels.Test\" {\n\n    function test_products_routes() {\n        // Test route resolution\n        assert($resolveRoute(\"/products\") == {controller: \"products\", action: \"index\"});\n        assert($resolveRoute(\"/products/new\") == {controller: \"products\", action: \"new\"});\n        assert($resolveRoute(\"/products/123\") == {controller: \"products\", action: \"show\", key: \"123\"});\n\n        // Test route generation\n        assert(urlFor(route=\"products\") == \"/products\");\n        assert(urlFor(route=\"product\", key=123) == \"/products/123\");\n        assert(urlFor(route=\"newProduct\") == \"/products/new\");\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/test/#test-fixtures","title":"Test Fixtures","text":""},{"location":"command-line-tools/commands/generate/test/#generate-fixtures","title":"Generate Fixtures","text":"<pre><code>wheels generate test model product --fixtures\n</code></pre> <p>Creates <code>/tests/fixtures/products.cfc</code>: <pre><code>component {\n\n    function load() {\n        // Clear existing data\n        model(\"Product\").deleteAll();\n\n        // Load fixture data\n        fixtures = [\n            {\n                name: \"Widget\",\n                price: 19.99,\n                description: \"Standard widget\",\n                categoryId: 1,\n                isActive: true\n            },\n            {\n                name: \"Gadget\",\n                price: 29.99,\n                description: \"Premium gadget\",\n                categoryId: 2,\n                isActive: true\n            },\n            {\n                name: \"Doohickey\",\n                price: 9.99,\n                description: \"Budget doohickey\",\n                categoryId: 1,\n                isActive: false\n            }\n        ];\n\n        for (fixture in fixtures) {\n            model(\"Product\").create(fixture);\n        }\n\n        return fixtures;\n    }\n\n    function loadWithAssociations() {\n        products = load();\n\n        // Add reviews\n        model(\"Review\").create(\n            productId: products[1].id,\n            rating: 5,\n            comment: \"Excellent product!\"\n        );\n\n        return products;\n    }\n\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/test/#test-helpers","title":"Test Helpers","text":""},{"location":"command-line-tools/commands/generate/test/#custom-assertions","title":"Custom Assertions","text":"<pre><code>// In test file\nfunction assertProductValid(required any product) {\n    assert(IsObject(arguments.product), \"Product should be an object\");\n    assert(arguments.product.id &gt; 0, \"Product should have valid ID\");\n    assert(Len(arguments.product.name), \"Product should have name\");\n    assert(arguments.product.price &gt; 0, \"Product should have positive price\");\n}\n\nfunction assertHasError(required any model, required string property) {\n    local.errors = arguments.model.errorsOn(arguments.property);\n    assert(ArrayLen(local.errors) &gt; 0, \n           \"Expected error on #arguments.property# but found none\");\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/test/#test-data-builders","title":"Test Data Builders","text":"<pre><code>function createTestProduct(struct overrides = {}) {\n    local.defaults = {\n        name: \"Test Product #CreateUUID()#\",\n        price: RandRange(10, 100) + (RandRange(0, 99) / 100),\n        description: \"Test description\",\n        isActive: true\n    };\n\n    StructAppend(local.defaults, arguments.overrides, true);\n\n    return model(\"Product\").create(local.defaults);\n}\n\nfunction createTestUser(struct overrides = {}) {\n    local.defaults = {\n        email: \"test-#CreateUUID()#@example.com\",\n        password: \"password123\",\n        firstName: \"Test\",\n        lastName: \"User\"\n    };\n\n    StructAppend(local.defaults, arguments.overrides, true);\n\n    return model(\"User\").create(local.defaults);\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/test/#running-tests","title":"Running Tests","text":""},{"location":"command-line-tools/commands/generate/test/#run-all-tests","title":"Run all tests","text":"<pre><code>wheels test\n</code></pre>"},{"location":"command-line-tools/commands/generate/test/#run-specific-test-file","title":"Run specific test file","text":"<pre><code>wheels test app tests/models/ProductTest.cfc\n</code></pre>"},{"location":"command-line-tools/commands/generate/test/#run-specific-test-method","title":"Run specific test method","text":"<pre><code>wheels test app tests/models/ProductTest.cfc::test_product_requires_name\n</code></pre>"},{"location":"command-line-tools/commands/generate/test/#run-with-coverage","title":"Run with coverage","text":"<pre><code>wheels test --coverage\n</code></pre>"},{"location":"command-line-tools/commands/generate/test/#best-practices","title":"Best Practices","text":"<ol> <li>Test in isolation: Each test should be independent</li> <li>Use descriptive names: Test names should explain what they test</li> <li>Follow AAA pattern: Arrange, Act, Assert</li> <li>Clean up data: Use setup/teardown or transactions</li> <li>Test edge cases: Empty data, nulls, extremes</li> <li>Mock external services: Don't rely on external APIs</li> <li>Keep tests fast: Optimize slow tests</li> <li>Test one thing: Each test should verify one behavior</li> <li>Use fixtures wisely: Share common test data</li> <li>Run tests frequently: Before commits and in CI</li> </ol>"},{"location":"command-line-tools/commands/generate/test/#common-testing-patterns","title":"Common Testing Patterns","text":""},{"location":"command-line-tools/commands/generate/test/#testing-private-methods","title":"Testing Private Methods","text":"<pre><code>function test_private_method_through_public_interface() {\n    // Don't test private methods directly\n    // Test them through public methods that use them\n    product = model(\"Product\").new(name: \"  Test  \");\n    product.save(); // Calls private sanitize method\n    assert(product.name == \"Test\");\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/test/#testing-time-dependent-code","title":"Testing Time-Dependent Code","text":"<pre><code>function test_expiration_date() {\n    // Use specific dates instead of Now()\n    testDate = CreateDate(2024, 1, 1);\n    product = model(\"Product\").new(\n        expiresAt: DateAdd(\"d\", 30, testDate)\n    );\n\n    // Test with mocked current date\n    request.currentDate = testDate;\n    assert(!product.isExpired());\n\n    request.currentDate = DateAdd(\"d\", 31, testDate);\n    assert(product.isExpired());\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/test/#testing-randomness","title":"Testing Randomness","text":"<pre><code>function test_random_discount() {\n    // Test the range, not specific values\n    product = model(\"Product\").new(price: 100);\n\n    for (i = 1; i &lt;= 100; i++) {\n        discount = product.getRandomDiscount();\n        assert(discount &gt;= 0.05 &amp;&amp; discount &lt;= 0.25, \n               \"Discount should be between 5% and 25%\");\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/test/#see-also","title":"See Also","text":"<ul> <li>wheels test run - Run tests</li> <li>wheels test coverage - Test coverage</li> <li>Testing Guide - Testing documentation</li> </ul>"},{"location":"command-line-tools/commands/generate/view/","title":"wheels generate view","text":"<p>Generate view files for controllers.</p>"},{"location":"command-line-tools/commands/generate/view/#synopsis","title":"Synopsis","text":"<pre><code>wheels generate view [objectName] [name] [template]\nwheels g view [objectName] [name] [template]\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#description","title":"Description","text":"<p>The <code>wheels generate view</code> command creates view files for controllers. It can generate individual views using templates or create blank view files.</p>"},{"location":"command-line-tools/commands/generate/view/#arguments","title":"Arguments","text":"Argument Description Default <code>objectName</code> View path folder (e.g., user) Required <code>name</code> Name of the file to create (e.g., edit) Required <code>template</code> Optional template to use"},{"location":"command-line-tools/commands/generate/view/#template-options","title":"Template Options","text":"<p>Available templates: - <code>crud/_form</code> - Form partial for new/edit views - <code>crud/edit</code> - Edit form view - <code>crud/index</code> - List/index view - <code>crud/new</code> - New form view - <code>crud/show</code> - Show/detail view</p>"},{"location":"command-line-tools/commands/generate/view/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/generate/view/#basic-view-no-template","title":"Basic view (no template)","text":"<p><pre><code>wheels generate view user show\n</code></pre> Creates: <code>/views/users/show.cfm</code> with empty content</p>"},{"location":"command-line-tools/commands/generate/view/#view-with-crud-template","title":"View with CRUD template","text":"<p><pre><code>wheels generate view user show crud/show\n</code></pre> Creates: <code>/views/users/show.cfm</code> using the show template</p>"},{"location":"command-line-tools/commands/generate/view/#edit-form-with-template","title":"Edit form with template","text":"<p><pre><code>wheels generate view user edit crud/edit\n</code></pre> Creates: <code>/views/users/edit.cfm</code> using the edit template</p>"},{"location":"command-line-tools/commands/generate/view/#form-partial","title":"Form partial","text":"<p><pre><code>wheels generate view user _form crud/_form\n</code></pre> Creates: <code>/views/users/_form.cfm</code> using the form partial template</p>"},{"location":"command-line-tools/commands/generate/view/#index-view","title":"Index view","text":"<p><pre><code>wheels generate view product index crud/index\n</code></pre> Creates: <code>/views/products/index.cfm</code> using the index template</p>"},{"location":"command-line-tools/commands/generate/view/#generated-code-examples","title":"Generated Code Examples","text":""},{"location":"command-line-tools/commands/generate/view/#without-template-blank-file","title":"Without Template (blank file)","text":"<pre><code>&lt;!--- View file created by wheels generate view ---&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#with-crud-index-template","title":"With CRUD Index Template","text":"<pre><code>&lt;h1&gt;Products&lt;/h1&gt;\n\n&lt;p&gt;\n    #linkTo(text=\"New Product\", action=\"new\", class=\"btn btn-primary\")#\n&lt;/p&gt;\n\n&lt;cfif products.recordCount&gt;\n    &lt;table class=\"table\"&gt;\n        &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;th&gt;ID&lt;/th&gt;\n                &lt;th&gt;Name&lt;/th&gt;\n                &lt;th&gt;Created&lt;/th&gt;\n                &lt;th&gt;Actions&lt;/th&gt;\n            &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n            &lt;cfoutput query=\"products\"&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;#products.id#&lt;/td&gt;\n                    &lt;td&gt;#products.name#&lt;/td&gt;\n                    &lt;td&gt;#dateFormat(products.createdAt, \"mm/dd/yyyy\")#&lt;/td&gt;\n                    &lt;td&gt;\n                        #linkTo(text=\"View\", action=\"show\", key=products.id, class=\"btn btn-sm btn-info\")#\n                        #linkTo(text=\"Edit\", action=\"edit\", key=products.id, class=\"btn btn-sm btn-warning\")#\n                        #linkTo(text=\"Delete\", action=\"delete\", key=products.id, method=\"delete\", confirm=\"Are you sure?\", class=\"btn btn-sm btn-danger\")#\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/cfoutput&gt;\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n&lt;cfelse&gt;\n    &lt;p class=\"alert alert-info\"&gt;No products found.&lt;/p&gt;\n&lt;/cfif&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#form-view-newcfm","title":"Form View (new.cfm)","text":"<pre><code>&lt;h1&gt;New Product&lt;/h1&gt;\n\n#includePartial(\"/products/form\")#\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#form-partial-_formcfm","title":"Form Partial (_form.cfm)","text":"<pre><code>#startFormTag(action=formAction)#\n\n    &lt;cfif product.hasErrors()&gt;\n        &lt;div class=\"alert alert-danger\"&gt;\n            &lt;h4&gt;Please correct the following errors:&lt;/h4&gt;\n            #errorMessagesFor(\"product\")#\n        &lt;/div&gt;\n    &lt;/cfif&gt;\n\n    &lt;div class=\"form-group\"&gt;\n        #textFieldTag(name=\"product[name]\", value=product.name, label=\"Name\", class=\"form-control\")#\n    &lt;/div&gt;\n\n    &lt;div class=\"form-group\"&gt;\n        #textAreaTag(name=\"product[description]\", value=product.description, label=\"Description\", class=\"form-control\", rows=5)#\n    &lt;/div&gt;\n\n    &lt;div class=\"form-group\"&gt;\n        #numberFieldTag(name=\"product[price]\", value=product.price, label=\"Price\", class=\"form-control\", step=\"0.01\")#\n    &lt;/div&gt;\n\n    &lt;div class=\"form-group\"&gt;\n        #selectTag(name=\"product[categoryId]\", options=categories, selected=product.categoryId, label=\"Category\", class=\"form-control\", includeBlank=\"-- Select Category --\")#\n    &lt;/div&gt;\n\n    &lt;div class=\"form-group\"&gt;\n        #checkBoxTag(name=\"product[isActive]\", checked=product.isActive, label=\"Active\", value=1)#\n    &lt;/div&gt;\n\n    &lt;div class=\"form-actions\"&gt;\n        #submitTag(value=submitLabel, class=\"btn btn-primary\")#\n        #linkTo(text=\"Cancel\", action=\"index\", class=\"btn btn-secondary\")#\n    &lt;/div&gt;\n\n#endFormTag()#\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#show-view-showcfm","title":"Show View (show.cfm)","text":"<pre><code>&lt;h1&gt;Product Details&lt;/h1&gt;\n\n&lt;div class=\"card\"&gt;\n    &lt;div class=\"card-body\"&gt;\n        &lt;h2 class=\"card-title\"&gt;#product.name#&lt;/h2&gt;\n\n        &lt;dl class=\"row\"&gt;\n            &lt;dt class=\"col-sm-3\"&gt;Description&lt;/dt&gt;\n            &lt;dd class=\"col-sm-9\"&gt;#product.description#&lt;/dd&gt;\n\n            &lt;dt class=\"col-sm-3\"&gt;Price&lt;/dt&gt;\n            &lt;dd class=\"col-sm-9\"&gt;#dollarFormat(product.price)#&lt;/dd&gt;\n\n            &lt;dt class=\"col-sm-3\"&gt;Category&lt;/dt&gt;\n            &lt;dd class=\"col-sm-9\"&gt;#product.category.name#&lt;/dd&gt;\n\n            &lt;dt class=\"col-sm-3\"&gt;Status&lt;/dt&gt;\n            &lt;dd class=\"col-sm-9\"&gt;\n                &lt;cfif product.isActive&gt;\n                    &lt;span class=\"badge badge-success\"&gt;Active&lt;/span&gt;\n                &lt;cfelse&gt;\n                    &lt;span class=\"badge badge-secondary\"&gt;Inactive&lt;/span&gt;\n                &lt;/cfif&gt;\n            &lt;/dd&gt;\n\n            &lt;dt class=\"col-sm-3\"&gt;Created&lt;/dt&gt;\n            &lt;dd class=\"col-sm-9\"&gt;#dateTimeFormat(product.createdAt, \"mmm dd, yyyy h:nn tt\")#&lt;/dd&gt;\n\n            &lt;dt class=\"col-sm-3\"&gt;Updated&lt;/dt&gt;\n            &lt;dd class=\"col-sm-9\"&gt;#dateTimeFormat(product.updatedAt, \"mmm dd, yyyy h:nn tt\")#&lt;/dd&gt;\n        &lt;/dl&gt;\n    &lt;/div&gt;\n    &lt;div class=\"card-footer\"&gt;\n        #linkTo(text=\"Edit\", action=\"edit\", key=product.id, class=\"btn btn-primary\")#\n        #linkTo(text=\"Delete\", action=\"delete\", key=product.id, method=\"delete\", confirm=\"Are you sure?\", class=\"btn btn-danger\")#\n        #linkTo(text=\"Back to List\", action=\"index\", class=\"btn btn-secondary\")#\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#view-templates","title":"View Templates","text":""},{"location":"command-line-tools/commands/generate/view/#available-templates","title":"Available Templates","text":"Template Description Use Case <code>default</code> Standard HTML structure General purpose <code>bootstrap</code> Bootstrap 5 components Modern web apps <code>tailwind</code> Tailwind CSS classes Utility-first design <code>ajax</code> AJAX-enabled views Dynamic updates <code>mobile</code> Mobile-optimized Responsive design <code>print</code> Print-friendly layout Reports <code>email</code> Email template Notifications"},{"location":"command-line-tools/commands/generate/view/#template-structure","title":"Template Structure","text":"<p>Templates are located in: <pre><code>~/.commandbox/cfml/modules/wheels-cli/templates/views/\n\u251c\u2500\u2500 default/\n\u2502   \u251c\u2500\u2500 index.cfm\n\u2502   \u251c\u2500\u2500 show.cfm\n\u2502   \u251c\u2500\u2500 new.cfm\n\u2502   \u251c\u2500\u2500 edit.cfm\n\u2502   \u2514\u2500\u2500 _form.cfm\n\u251c\u2500\u2500 bootstrap/\n\u2514\u2500\u2500 custom/\n</code></pre></p>"},{"location":"command-line-tools/commands/generate/view/#partial-views","title":"Partial Views","text":""},{"location":"command-line-tools/commands/generate/view/#naming-convention","title":"Naming Convention","text":"<p>Partials start with underscore: - <code>_form.cfm</code> - Form partial - <code>_item.cfm</code> - List item partial - <code>_sidebar.cfm</code> - Sidebar partial</p>"},{"location":"command-line-tools/commands/generate/view/#generate-partials","title":"Generate Partials","text":"<pre><code>wheels generate view shared header,footer,navigation --partial\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#using-partials","title":"Using Partials","text":"<pre><code>&lt;!--- In layout or view ---&gt;\n#includePartial(\"/shared/header\")#\n#includePartial(\"/products/form\", product=product)#\n#includePartial(partial=\"item\", query=products)#\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#layout-integration","title":"Layout Integration","text":""},{"location":"command-line-tools/commands/generate/view/#with-layout-default","title":"With Layout (default)","text":"<pre><code>&lt;!--- Generated view assumes layout wrapper ---&gt;\n&lt;h1&gt;Page Title&lt;/h1&gt;\n&lt;p&gt;Content here&lt;/p&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#without-layout","title":"Without Layout","text":"<pre><code>wheels generate view products standalone --layout=false\n</code></pre> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Standalone View&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;Products&lt;/h1&gt;\n    &lt;!-- Complete HTML structure --&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#custom-formats","title":"Custom Formats","text":""},{"location":"command-line-tools/commands/generate/view/#html-format","title":"HTML Format","text":"<p><pre><code>wheels generate view products index --format=html\n</code></pre> Creates: <code>/views/products/index.html</code></p>"},{"location":"command-line-tools/commands/generate/view/#custom-extensions","title":"Custom Extensions","text":"<p><pre><code>wheels generate view emails welcome --format=txt\n</code></pre> Creates: <code>/views/emails/welcome.txt</code></p>"},{"location":"command-line-tools/commands/generate/view/#ajax-views","title":"Ajax Views","text":""},{"location":"command-line-tools/commands/generate/view/#generate-ajax-view","title":"Generate AJAX View","text":"<pre><code>wheels generate view products search --template=ajax\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#ajax-template-example","title":"AJAX Template Example","text":"<pre><code>&lt;cfif isAjax()&gt;\n    &lt;!--- Return just the content ---&gt;\n    &lt;cfoutput query=\"products\"&gt;\n        &lt;div class=\"search-result\"&gt;\n            &lt;h3&gt;#products.name#&lt;/h3&gt;\n            &lt;p&gt;#products.description#&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/cfoutput&gt;\n&lt;cfelse&gt;\n    &lt;!--- Include full page structure ---&gt;\n    &lt;div id=\"search-results\"&gt;\n        &lt;cfinclude template=\"_results.cfm\"&gt;\n    &lt;/div&gt;\n&lt;/cfif&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#form-helpers","title":"Form Helpers","text":""},{"location":"command-line-tools/commands/generate/view/#standard-form","title":"Standard Form","text":"<pre><code>#startFormTag(action=\"create\", method=\"post\", class=\"needs-validation\")#\n    #textField(objectName=\"product\", property=\"name\", label=\"Product Name\", class=\"form-control\", required=true)#\n    #textArea(objectName=\"product\", property=\"description\", label=\"Description\", class=\"form-control\", rows=5)#\n    #select(objectName=\"product\", property=\"categoryId\", options=categories, label=\"Category\", class=\"form-control\")#\n    #submitTag(value=\"Save Product\", class=\"btn btn-primary\")#\n#endFormTag()#\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#file-upload-form","title":"File Upload Form","text":"<pre><code>#startFormTag(action=\"upload\", multipart=true)#\n    #fileFieldTag(name=\"productImage\", label=\"Product Image\", accept=\"image/*\", class=\"form-control\")#\n    #submitTag(value=\"Upload\", class=\"btn btn-primary\")#\n#endFormTag()#\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#responsive-design","title":"Responsive Design","text":""},{"location":"command-line-tools/commands/generate/view/#mobile-first-template","title":"Mobile-First Template","text":"<pre><code>wheels generate view products index --template=mobile\n</code></pre> <pre><code>&lt;div class=\"container-fluid\"&gt;\n    &lt;div class=\"row\"&gt;\n        &lt;div class=\"col-12\"&gt;\n            &lt;h1 class=\"h3\"&gt;Products&lt;/h1&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"row\"&gt;\n        &lt;cfoutput query=\"products\"&gt;\n            &lt;div class=\"col-12 col-md-6 col-lg-4 mb-3\"&gt;\n                &lt;div class=\"card h-100\"&gt;\n                    &lt;div class=\"card-body\"&gt;\n                        &lt;h5 class=\"card-title\"&gt;#products.name#&lt;/h5&gt;\n                        &lt;p class=\"card-text\"&gt;#products.description#&lt;/p&gt;\n                        #linkTo(text=\"View\", action=\"show\", key=products.id, class=\"btn btn-primary btn-sm\")#\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/cfoutput&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#localization","title":"Localization","text":""},{"location":"command-line-tools/commands/generate/view/#generate-localized-views","title":"Generate Localized Views","text":"<p><pre><code>wheels generate view products index --locale=es\n</code></pre> Creates: <code>/views/products/index_es.cfm</code></p>"},{"location":"command-line-tools/commands/generate/view/#localized-content","title":"Localized Content","text":"<pre><code>&lt;h1&gt;#l(\"products.title\")#&lt;/h1&gt;\n&lt;p&gt;#l(\"products.description\")#&lt;/p&gt;\n\n#linkTo(text=l(\"buttons.new\"), action=\"new\", class=\"btn btn-primary\")#\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#testing-views","title":"Testing Views","text":""},{"location":"command-line-tools/commands/generate/view/#generate-view-tests","title":"Generate View Tests","text":"<pre><code>wheels generate view products index\nwheels generate test view products/index\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#view-test-example","title":"View Test Example","text":"<pre><code>component extends=\"wheels.Test\" {\n\n    function test_index_displays_products() {\n        products = model(\"Product\").findAll(maxRows=5);\n        result = renderView(view=\"/products/index\", products=products, layout=false);\n\n        assert(Find(\"&lt;h1&gt;Products&lt;/h1&gt;\", result));\n        assert(Find(\"New Product\", result));\n        assertEquals(products.recordCount, ListLen(result, \"&lt;tr&gt;\") - 1);\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#performance-optimization","title":"Performance Optimization","text":""},{"location":"command-line-tools/commands/generate/view/#caching-views","title":"Caching Views","text":"<pre><code>&lt;cfcache action=\"cache\" timespan=\"#CreateTimeSpan(0,1,0,0)#\"&gt;\n    &lt;!--- Expensive view content ---&gt;\n    #includePartial(\"products/list\", products=products)#\n&lt;/cfcache&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#lazy-loading","title":"Lazy Loading","text":"<pre><code>&lt;div class=\"products-container\" data-lazy-load=\"/products/more\"&gt;\n    &lt;!--- Initial content ---&gt;\n&lt;/div&gt;\n\n&lt;script&gt;\n// Implement lazy loading\n&lt;/script&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#best-practices","title":"Best Practices","text":"<ol> <li>Keep views simple and focused on presentation</li> <li>Use partials for reusable components</li> <li>Move complex logic to helpers or controllers</li> <li>Follow naming conventions consistently</li> <li>Use semantic HTML markup</li> <li>Include accessibility attributes</li> <li>Optimize for performance with caching</li> <li>Test views with various data states</li> </ol>"},{"location":"command-line-tools/commands/generate/view/#common-patterns","title":"Common Patterns","text":""},{"location":"command-line-tools/commands/generate/view/#empty-state","title":"Empty State","text":"<pre><code>&lt;cfif products.recordCount&gt;\n    &lt;!--- Show products ---&gt;\n&lt;cfelse&gt;\n    &lt;div class=\"empty-state\"&gt;\n        &lt;h2&gt;No products found&lt;/h2&gt;\n        &lt;p&gt;Get started by adding your first product.&lt;/p&gt;\n        #linkTo(text=\"Add Product\", action=\"new\", class=\"btn btn-primary\")#\n    &lt;/div&gt;\n&lt;/cfif&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#loading-state","title":"Loading State","text":"<pre><code>&lt;div class=\"loading-spinner\" style=\"display: none;\"&gt;\n    &lt;i class=\"fa fa-spinner fa-spin\"&gt;&lt;/i&gt; Loading...\n&lt;/div&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#error-state","title":"Error State","text":"<pre><code>&lt;cfif structKeyExists(variables, \"error\")&gt;\n    &lt;div class=\"alert alert-danger\"&gt;\n        &lt;strong&gt;Error:&lt;/strong&gt; #error.message#\n    &lt;/div&gt;\n&lt;/cfif&gt;\n</code></pre>"},{"location":"command-line-tools/commands/generate/view/#see-also","title":"See Also","text":"<ul> <li>wheels generate controller - Generate controllers</li> <li>wheels scaffold - Generate complete CRUD</li> <li>wheels generate test - Generate view tests</li> </ul>"},{"location":"command-line-tools/commands/maintenance/","title":"Maintenance Commands","text":"<p>Commands for managing application maintenance mode and cleaning up temporary files.</p>"},{"location":"command-line-tools/commands/maintenance/#available-commands","title":"Available Commands","text":""},{"location":"command-line-tools/commands/maintenance/#maintenance-mode","title":"Maintenance Mode","text":"<ul> <li>wheels maintenance:on - Enable maintenance mode</li> <li>wheels maintenance:off - Disable maintenance mode</li> </ul>"},{"location":"command-line-tools/commands/maintenance/#cleanup-commands","title":"Cleanup Commands","text":"<ul> <li>wheels cleanup:logs - Remove old log files</li> <li>wheels cleanup:tmp - Remove temporary files</li> <li>wheels cleanup:sessions - Remove expired sessions</li> </ul>"},{"location":"command-line-tools/commands/maintenance/#quick-examples","title":"Quick Examples","text":""},{"location":"command-line-tools/commands/maintenance/#enable-maintenance-mode","title":"Enable Maintenance Mode","text":"<pre><code># Basic maintenance\nwheels maintenance:on\n\n# With custom message\nwheels maintenance:on message=\"Back at 3:00 PM\"\n\n# Allow admin access\nwheels maintenance:on allowedIPs=\"192.168.1.100\"\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/#cleanup-old-files","title":"Cleanup Old Files","text":"<pre><code># Clean logs older than 7 days\nwheels cleanup:logs\n\n# Clean all temp files\nwheels cleanup:tmp --force\n\n# Clean expired sessions\nwheels cleanup:sessions\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/#common-workflows","title":"Common Workflows","text":""},{"location":"command-line-tools/commands/maintenance/#deployment-with-maintenance","title":"Deployment with Maintenance","text":"<pre><code># Enable maintenance\nwheels maintenance:on message=\"Upgrading...\" --force\n\n# Deploy and migrate\ngit pull &amp;&amp; wheels dbmigrate latest\n\n# Clean up and disable maintenance\nwheels cleanup:tmp --force\nwheels maintenance:off --force\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/#scheduled-cleanup","title":"Scheduled Cleanup","text":"<pre><code># Add to crontab\n0 2 * * * wheels cleanup:logs days=30 --force\n0 3 * * * wheels cleanup:tmp --force\n0 4 * * * wheels cleanup:sessions --force\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/#see-also","title":"See Also","text":"<ul> <li>Asset and Cache Management</li> <li>Server Management</li> <li>Database Management</li> </ul>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/","title":"Cleanup Commands","text":""},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#overview","title":"Overview","text":"<p>The cleanup commands help maintain your application by removing old log files, temporary files, and expired sessions. Regular cleanup improves performance, frees disk space, and keeps your application directory organized.</p>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#commands","title":"Commands","text":""},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#wheels-cleanuplogs","title":"wheels cleanup:logs","text":"<p>Remove old log files from your application.</p> <pre><code>wheels cleanup:logs [days] [pattern] [directory] [--dryRun] [--force]\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#parameters","title":"Parameters","text":"<ul> <li><code>days</code> - Number of days to keep logs (default: 7)</li> <li><code>pattern</code> - File pattern to match (default: *.log)</li> <li><code>directory</code> - Custom log directory (default: logs/)</li> <li><code>--dryRun</code> - Show what would be deleted without actually deleting</li> <li><code>--force</code> - Skip confirmation prompt</li> </ul>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#examples","title":"Examples","text":"<pre><code># Remove logs older than 7 days (default)\nwheels cleanup:logs\n\n# Keep last 30 days of logs\nwheels cleanup:logs days=30\n\n# Clean specific directory\nwheels cleanup:logs directory=\"logs/custom\"\n\n# Match multiple patterns\nwheels cleanup:logs pattern=\"*.log,*.txt\"\n\n# Preview without deleting\nwheels cleanup:logs --dryRun\n\n# Clean all logs immediately without confirmation\nwheels cleanup:logs days=0 --force\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#features","title":"Features","text":"<ul> <li>Recursively scans for log files</li> <li>Shows file age and size statistics</li> <li>Removes empty directories after cleanup</li> <li>Detailed reporting of freed disk space</li> </ul>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#wheels-cleanuptmp","title":"wheels cleanup:tmp","text":"<p>Remove old temporary files from your application.</p> <pre><code>wheels cleanup:tmp [days] [directories] [patterns] [excludePatterns] [--dryRun] [--force]\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#parameters_1","title":"Parameters","text":"<ul> <li><code>days</code> - Number of days to keep temporary files (default: 1)</li> <li><code>directories</code> - Comma-separated list of directories to clean (default: tmp,temp,cache)</li> <li><code>patterns</code> - Comma-separated list of file patterns to match (default: ,.) </li> <li><code>excludePatterns</code> - Comma-separated list of patterns to exclude (default: .gitkeep,.gitignore)</li> <li><code>--dryRun</code> - Show what would be deleted without actually deleting</li> <li><code>--force</code> - Skip confirmation prompt</li> </ul>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#examples_1","title":"Examples","text":"<pre><code># Remove temp files older than 1 day (default)\nwheels cleanup:tmp\n\n# Keep last 3 days\nwheels cleanup:tmp days=3\n\n# Clean specific directories\nwheels cleanup:tmp directories=\"tmp,temp,cache,uploads/temp\"\n\n# Custom file patterns\nwheels cleanup:tmp patterns=\"*.tmp,*.cache,~*\"\n\n# Exclude important files\nwheels cleanup:tmp excludePatterns=\".gitkeep,important.tmp,*.lock\"\n\n# Preview cleanup\nwheels cleanup:tmp --dryRun\n\n# Force immediate cleanup\nwheels cleanup:tmp days=0 --force\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#features_1","title":"Features","text":"<ul> <li>Cleans multiple temp directories</li> <li>Flexible pattern matching with exclusions</li> <li>Preserves important files (.gitkeep, .gitignore)</li> <li>Groups files by directory in output</li> <li>Removes empty directories after cleanup</li> </ul>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#wheels-cleanupsessions","title":"wheels cleanup:sessions","text":"<p>Remove expired session files from your application.</p> <pre><code>wheels cleanup:sessions [storage] [directory] [datasource] [table] [expiredOnly] [--dryRun] [--force]\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#parameters_2","title":"Parameters","text":"<ul> <li><code>storage</code> - Session storage type: file or database (default: file)</li> <li><code>directory</code> - Custom session directory for file storage (default: sessions/)</li> <li><code>datasource</code> - Datasource name for database sessions</li> <li><code>table</code> - Table name for database sessions (default: sessions)</li> <li><code>expiredOnly</code> - Only remove expired sessions (default: true)</li> <li><code>--dryRun</code> - Show what would be deleted without actually deleting</li> <li><code>--force</code> - Skip confirmation prompt</li> </ul>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#examples_2","title":"Examples","text":"<pre><code># Clean file-based sessions\nwheels cleanup:sessions\n\n# Clean database sessions\nwheels cleanup:sessions storage=database datasource=mydb\n\n# Custom session directory\nwheels cleanup:sessions directory=\"WEB-INF/lucee/sessions\"\n\n# Database with custom table\nwheels cleanup:sessions \\\n  storage=database \\\n  datasource=mydb \\\n  table=user_sessions\n\n# Delete all sessions (not just expired)\nwheels cleanup:sessions expiredOnly=false --force\n\n# Preview session cleanup\nwheels cleanup:sessions --dryRun\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#features_2","title":"Features","text":"<ul> <li>Supports both file and database session storage</li> <li>Auto-detects common session directories:</li> <li><code>WEB-INF/cfclasses/sessions</code></li> <li><code>WEB-INF/lucee/sessions</code></li> <li><code>sessions/</code></li> <li>System temp directory</li> <li>Shows active vs expired session counts</li> <li>Configurable expiration detection (default: 2 hours)</li> </ul>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#best-practices","title":"Best Practices","text":""},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#1-schedule-regular-cleanups","title":"1. Schedule Regular Cleanups","text":"<p>Add to your cron jobs or scheduled tasks:</p> <pre><code># Daily cleanup at 2 AM\n0 2 * * * cd /path/to/app &amp;&amp; wheels cleanup:logs days=7 --force\n0 3 * * * cd /path/to/app &amp;&amp; wheels cleanup:tmp days=1 --force\n0 4 * * * cd /path/to/app &amp;&amp; wheels cleanup:sessions --force\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#2-test-with-dry-run-first","title":"2. Test with Dry Run First","text":"<p>Always preview what will be deleted:</p> <pre><code># Check what will be deleted\nwheels cleanup:logs --dryRun\nwheels cleanup:tmp --dryRun\nwheels cleanup:sessions --dryRun\n\n# If looks good, run the actual cleanup\nwheels cleanup:logs --force\nwheels cleanup:tmp --force\nwheels cleanup:sessions --force\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#3-monitor-disk-usage","title":"3. Monitor Disk Usage","text":"<pre><code># Check disk usage before cleanup\ndf -h\n\n# Run cleanup commands\nwheels cleanup:logs days=30 --force\nwheels cleanup:tmp --force\nwheels cleanup:sessions --force\n\n# Check disk usage after cleanup\ndf -h\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#4-deployment-cleanup","title":"4. Deployment Cleanup","text":"<p>Include in your deployment script:</p> <pre><code>#!/bin/bash\n# deployment.sh\n\n# Clean up before deployment\nwheels cleanup:tmp --force\nwheels cleanup:sessions expiredOnly=false --force\n\n# Deploy new code\ngit pull\nwheels dbmigrate latest\n\n# Clean up old logs after deployment\nwheels cleanup:logs days=30 --force\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#5-different-retention-policies","title":"5. Different Retention Policies","text":"<p>Set different retention periods based on file type:</p> <pre><code># Keep error logs longer\nwheels cleanup:logs pattern=\"error*.log\" days=90\nwheels cleanup:logs pattern=\"access*.log\" days=7\nwheels cleanup:logs pattern=\"debug*.log\" days=1\n\n# Clean different temp directories with different policies\nwheels cleanup:tmp directories=\"cache\" days=7\nwheels cleanup:tmp directories=\"uploads/temp\" days=1\nwheels cleanup:tmp directories=\"tmp\" days=0\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#output-examples","title":"Output Examples","text":""},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#log-cleanup-output","title":"Log Cleanup Output","text":"<pre><code>Scanning for log files older than 7 days...\nCutoff date: 2024-01-08 10:30:00\n\nFound 15 log file(s) to clean up:\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 File            \u2502 Age      \u2502 Size     \u2502 Modified            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 app.log.1       \u2502 10 days  \u2502 2.3 MB   \u2502 2024-01-05 14:23    \u2502\n\u2502 app.log.2       \u2502 15 days  \u2502 1.8 MB   \u2502 2023-12-31 09:15    \u2502\n\u2502 error.log.old   \u2502 30 days  \u2502 512 KB   \u2502 2023-12-16 18:45    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nTotal size to be freed: 4.6 MB\n\n\u2713 Successfully deleted 15 log file(s).\n\u2713 Freed 4.6 MB of disk space.\n\u2713 Removed 2 empty directories.\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#session-cleanup-output","title":"Session Cleanup Output","text":"<pre><code>Scanning session files in: /app/WEB-INF/lucee/sessions\n\nSession summary:\n  Total sessions: 127\n  Expired sessions: 89\n  Active sessions: 38\n\nFound 89 session file(s) to clean up:\n\nSummary by age:\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Age Range   \u2502 Count \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 2-24 hours  \u2502 45    \u2502\n\u2502 1-7 days    \u2502 32    \u2502\n\u2502 &gt; 7 days    \u2502 12    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nTotal size to be freed: 1.2 MB\n\n\u2713 Successfully deleted 89 session file(s).\n\u2713 Freed 1.2 MB of disk space.\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#permission-errors","title":"Permission Errors","text":"<p>If you get permission errors:</p> <pre><code># Run with appropriate user\nsudo -u www-data wheels cleanup:logs --force\n\n# Or fix permissions\nchmod -R 755 logs/\nchown -R www-data:www-data logs/\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#files-not-being-detected","title":"Files Not Being Detected","text":"<ol> <li>Check the directory path is correct</li> <li>Verify the file pattern matches your files</li> <li>Use <code>--dryRun</code> to see what's being scanned</li> <li>Check if files are excluded by excludePatterns</li> </ol>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#session-cleanup-issues","title":"Session Cleanup Issues","text":"<ol> <li> <p>For file sessions, ensure correct directory:    <pre><code># Find session files\nfind / -name \"*.cfm\" -path \"*/sessions/*\" 2&gt;/dev/null\n</code></pre></p> </li> <li> <p>For database sessions, verify table structure:    <pre><code>-- Check if expires column exists\nDESCRIBE sessions;\n</code></pre></p> </li> </ol>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#performance-tips","title":"Performance Tips","text":"<ol> <li>Run during off-peak hours to minimize impact</li> <li>Clean incrementally - don't let files accumulate for months</li> <li>Monitor cleanup duration - adjust retention if taking too long</li> <li>Use specific patterns to avoid scanning unnecessary files</li> </ol>"},{"location":"command-line-tools/commands/maintenance/cleanup-commands/#related-commands","title":"Related Commands","text":"<ul> <li>wheels cache:clear - Clear application caches</li> <li>wheels maintenance:on - Enable maintenance during cleanup</li> <li>wheels stats - View application statistics</li> </ul>"},{"location":"command-line-tools/commands/maintenance/maintenance-mode/","title":"Maintenance Mode Commands","text":""},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#overview","title":"Overview","text":"<p>The maintenance mode commands allow you to control application availability during deployments, upgrades, or maintenance tasks. When maintenance mode is enabled, users see a maintenance message instead of the regular application, with options for IP whitelisting and custom redirects.</p>"},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#commands","title":"Commands","text":""},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#wheels-maintenanceon","title":"wheels maintenance:on","text":"<p>Enable maintenance mode for your application.</p> <pre><code>wheels maintenance:on [message] [allowedIPs] [redirectURL] [--force]\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#parameters","title":"Parameters","text":"<ul> <li><code>message</code> - Custom maintenance message to display (default: \"The application is currently undergoing maintenance. Please check back soon.\")</li> <li><code>allowedIPs</code> - Comma-separated list of IP addresses that can bypass maintenance mode</li> <li><code>redirectURL</code> - Optional URL to redirect users to during maintenance</li> <li><code>--force</code> - Skip confirmation prompt</li> </ul>"},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#examples","title":"Examples","text":"<pre><code># Basic maintenance mode\nwheels maintenance:on\n\n# Custom message\nwheels maintenance:on message=\"We'll be back at 3:00 PM EST\"\n\n# Allow admin IPs to bypass\nwheels maintenance:on allowedIPs=\"192.168.1.100,10.0.0.5\"\n\n# Redirect to status page\nwheels maintenance:on redirectURL=\"https://status.example.com\"\n\n# Combined options without confirmation\nwheels maintenance:on \\\n  message=\"Scheduled maintenance in progress\" \\\n  allowedIPs=\"192.168.1.100\" \\\n  redirectURL=\"/status\" \\\n  --force\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#how-it-works","title":"How It Works","text":"<ol> <li>Creates a <code>.maintenance</code> file in the <code>config/</code> directory containing:</li> <li>Enabled status</li> <li>Custom message</li> <li>Allowed IP addresses</li> <li>Redirect URL</li> <li>Timestamp when enabled</li> <li> <p>Username who enabled it</p> </li> <li> <p>Automatically updates <code>Application.cfc</code> to add a maintenance check:</p> </li> <li>Adds <code>checkMaintenanceMode()</code> private method</li> <li>Calls it from <code>onRequestStart()</code></li> <li> <p>Backs up original Application.cfc</p> </li> <li> <p>When a request is made:</p> </li> <li>Checks if maintenance mode is enabled</li> <li>Allows whitelisted IPs through</li> <li>Redirects to custom URL if specified</li> <li>Otherwise shows maintenance page with message</li> </ol>"},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#wheels-maintenanceoff","title":"wheels maintenance:off","text":"<p>Disable maintenance mode and restore normal application access.</p> <pre><code>wheels maintenance:off [--force] [--cleanup]\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#parameters_1","title":"Parameters","text":"<ul> <li><code>--force</code> - Skip confirmation prompt</li> <li><code>--cleanup</code> - Remove maintenance check from Application.cfc</li> </ul>"},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#examples_1","title":"Examples","text":"<pre><code># Basic disable\nwheels maintenance:off\n\n# Skip confirmation\nwheels maintenance:off --force\n\n# Clean up Application.cfc modifications\nwheels maintenance:off --cleanup\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#what-it-shows","title":"What It Shows","text":"<ul> <li>Current maintenance configuration</li> <li>How long maintenance mode was active</li> <li>Who enabled maintenance mode</li> </ul>"},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#best-practices","title":"Best Practices","text":""},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#1-deployment-workflow","title":"1. Deployment Workflow","text":"<pre><code># Enable maintenance before deployment\nwheels maintenance:on message=\"Upgrading to version 2.0\" --force\n\n# Pull latest code\ngit pull origin main\n\n# Run database migrations\nwheels dbmigrate latest\n\n# Clear caches\nwheels cache:clear\n\n# Run tests\nwheels test app\n\n# Disable maintenance\nwheels maintenance:off --force\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#2-scheduled-maintenance","title":"2. Scheduled Maintenance","text":"<pre><code># Schedule maintenance with clear messaging\nwheels maintenance:on \\\n  message=\"Scheduled maintenance: 2:00 AM - 4:00 AM EST. We apologize for any inconvenience.\" \\\n  redirectURL=\"/maintenance-schedule\"\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#3-emergency-maintenance","title":"3. Emergency Maintenance","text":"<pre><code># Quick emergency maintenance\nwheels maintenance:on message=\"Emergency maintenance in progress\" --force\n\n# Allow only admin access\nwheels maintenance:on \\\n  message=\"System maintenance\" \\\n  allowedIPs=\"192.168.1.100\" \\\n  --force\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#4-testing-maintenance-mode","title":"4. Testing Maintenance Mode","text":"<pre><code># Enable with your IP allowed\nwheels maintenance:on allowedIPs=\"$(curl -s ifconfig.me)\"\n\n# Test from another IP or incognito window\n# Should see maintenance page\n\n# Disable when done\nwheels maintenance:off\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#configuration-storage","title":"Configuration Storage","text":"<p>The maintenance configuration is stored in <code>config/.maintenance</code> as JSON:</p> <pre><code>{\n  \"enabled\": true,\n  \"message\": \"The application is currently undergoing maintenance...\",\n  \"allowedIPs\": \"192.168.1.100,10.0.0.5\",\n  \"redirectURL\": \"\",\n  \"enabledAt\": \"2024-01-15 14:30:00\",\n  \"enabledBy\": \"admin\"\n}\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#applicationcfc-integration","title":"Application.cfc Integration","text":"<p>The maintenance check is automatically added to your Application.cfc:</p> <pre><code>private function checkMaintenanceMode() {\n    var maintenanceFile = expandPath(\"/config/.maintenance\");\n    if (fileExists(maintenanceFile)) {\n        var config = deserializeJSON(fileRead(maintenanceFile));\n        if (config.enabled) {\n            // Check if current IP is allowed\n            var clientIP = cgi.remote_addr;\n            if (len(config.allowedIPs) &amp;&amp; listFindNoCase(config.allowedIPs, clientIP)) {\n                return; // Allow access\n            }\n\n            // Handle redirect\n            if (len(config.redirectURL)) {\n                location(url=config.redirectURL, addtoken=false);\n            }\n\n            // Show maintenance message\n            writeOutput(\"&lt;!DOCTYPE html&gt;...\");\n            abort;\n        }\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#maintenance-mode-not-working","title":"Maintenance Mode Not Working","text":"<ol> <li>Check if <code>.maintenance</code> file exists in <code>config/</code> directory</li> <li>Verify Application.cfc has the maintenance check</li> <li>Ensure file permissions allow reading the maintenance file</li> <li>Check server logs for errors</li> </ol>"},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#cant-disable-maintenance-mode","title":"Can't Disable Maintenance Mode","text":"<ol> <li>Use <code>--force</code> flag to skip confirmation</li> <li>Manually delete <code>config/.maintenance</code> file if needed</li> <li>Use <code>--cleanup</code> to remove Application.cfc modifications</li> </ol>"},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#ip-whitelisting-not-working","title":"IP Whitelisting Not Working","text":"<ol> <li>Check the actual client IP: <code>cgi.remote_addr</code></li> <li>Behind a proxy? May need to check <code>cgi.http_x_forwarded_for</code></li> <li>Verify IP format in allowedIPs parameter</li> </ol>"},{"location":"command-line-tools/commands/maintenance/maintenance-mode/#related-commands","title":"Related Commands","text":"<ul> <li>wheels cache:clear - Clear caches after maintenance</li> <li>wheels dbmigrate latest - Run migrations during maintenance</li> <li>wheels reload - Reload application after changes</li> </ul>"},{"location":"command-line-tools/commands/performance/optimize-performance/","title":"optimize performance","text":"<p>Automatically applies performance optimizations to your Wheels application based on analysis results.</p>"},{"location":"command-line-tools/commands/performance/optimize-performance/#usage","title":"Usage","text":"<pre><code>wheels optimize performance [target] [--aggressive] [--dry-run] [--backup]\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize-performance/#parameters","title":"Parameters","text":"<ul> <li><code>target</code> - (Optional) Target area to optimize. Default: current directory</li> <li><code>--aggressive</code> - (Optional) Apply aggressive optimizations that may change behavior</li> <li><code>--dry-run</code> - (Optional) Show what would be changed without applying</li> <li><code>--backup</code> - (Optional) Create backup before applying changes</li> </ul>"},{"location":"command-line-tools/commands/performance/optimize-performance/#description","title":"Description","text":"<p>The <code>optimize performance</code> command automatically implements performance improvements identified through analysis. It can:</p> <ul> <li>Add database indexes</li> <li>Implement query result caching</li> <li>Optimize asset delivery</li> <li>Enable application-level caching</li> <li>Refactor inefficient code patterns</li> <li>Configure performance settings</li> </ul>"},{"location":"command-line-tools/commands/performance/optimize-performance/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/performance/optimize-performance/#basic-optimization","title":"Basic optimization","text":"<pre><code>wheels optimize performance\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize-performance/#optimize-specific-directory","title":"Optimize specific directory","text":"<pre><code>wheels optimize performance app/models\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize-performance/#preview-changes-without-applying","title":"Preview changes without applying","text":"<pre><code>wheels optimize performance --dry-run\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize-performance/#aggressive-optimization-with-backup","title":"Aggressive optimization with backup","text":"<pre><code>wheels optimize performance --aggressive --backup\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize-performance/#optimize-entire-application-aggressively","title":"Optimize entire application aggressively","text":"<pre><code>wheels optimize performance . --aggressive\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize-performance/#optimization-targets","title":"Optimization Targets","text":""},{"location":"command-line-tools/commands/performance/optimize-performance/#database","title":"Database","text":"<ul> <li>Creates missing indexes</li> <li>Optimizes slow queries</li> <li>Adds query hints</li> <li>Implements connection pooling</li> <li>Configures query caching</li> </ul>"},{"location":"command-line-tools/commands/performance/optimize-performance/#caching","title":"Caching","text":"<ul> <li>Enables view caching</li> <li>Implements action caching</li> <li>Configures cache headers</li> <li>Sets up CDN integration</li> <li>Optimizes cache keys</li> </ul>"},{"location":"command-line-tools/commands/performance/optimize-performance/#assets","title":"Assets","text":"<ul> <li>Minifies CSS/JavaScript</li> <li>Implements asset fingerprinting</li> <li>Configures compression</li> <li>Optimizes images</li> <li>Sets up asset pipeline</li> </ul>"},{"location":"command-line-tools/commands/performance/optimize-performance/#code","title":"Code","text":"<ul> <li>Refactors N+1 queries</li> <li>Implements lazy loading</li> <li>Optimizes loops</li> <li>Reduces object instantiation</li> <li>Improves algorithm efficiency</li> </ul>"},{"location":"command-line-tools/commands/performance/optimize-performance/#output","title":"Output","text":"<pre><code>Performance Optimization\n========================\n\nAnalyzing application... \u2713\nCreating backup... \u2713\n\nApplying optimizations:\n\nDatabase Optimizations:\n\u2713 Added index on users.email\n\u2713 Added composite index on orders(user_id, created_at)\n\u2713 Implemented query caching for User.findActive()\n\u2713 Optimized ORDER BY clause in Product.search()\n\nCaching Optimizations:\n\u2713 Enabled action caching for ProductsController.index\n\u2713 Added fragment caching to product listings\n\u2713 Configured Redis for session storage\n\u2713 Set cache expiration for static content\n\nAsset Optimizations:\n\u2713 Minified 15 JavaScript files (saved 145KB)\n\u2713 Compressed 8 CSS files (saved 62KB)\n\u2713 Enabled gzip compression\n\u2713 Configured browser caching headers\n\nCode Optimizations:\n\u2713 Fixed N+1 query in OrdersController.index\n\u2713 Replaced 3 array loops with cfloop query\n\u2713 Implemented lazy loading for User.orders\n~ Skipped: Complex refactoring in ReportService (requires --aggressive)\n\nSummary:\n- Applied: 18 optimizations\n- Skipped: 3 (require manual review or --aggressive flag)\n- Estimated improvement: 35-40% faster page loads\n\nNext steps:\n1. Run 'wheels reload' to apply changes\n2. Test application thoroughly\n3. Monitor performance metrics\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize-performance/#dry-run-mode","title":"Dry Run Mode","text":"<p>Preview changes without applying them:</p> <pre><code>wheels optimize performance --dry-run\n\nOptimization Preview\n====================\n\nWould apply the following changes:\n\n1. Database: Create index on users.email\n   SQL: CREATE INDEX idx_users_email ON users(email);\n\n2. Cache: Enable action caching for ProductsController.index\n   File: /app/controllers/ProductsController.cfc\n   Add: &lt;cfset caches(action=\"index\", time=30)&gt;\n\n3. Query: Optimize Product.search()\n   File: /app/models/Product.cfc\n   Change: Add query hint for index usage\n\n[... more changes ...]\n\nRun without --dry-run to apply these optimizations.\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize-performance/#aggressive-mode","title":"Aggressive Mode","text":"<p>Enables optimizations that may change application behavior:</p> <pre><code>wheels optimize performance --aggressive\n\nAdditional aggressive optimizations:\n\u2713 Converted synchronous operations to async\n\u2713 Implemented aggressive query result caching\n\u2713 Reduced session timeout to 20 minutes\n\u2713 Disabled debug output in production\n\u2713 Implemented database connection pooling\n\u26a0\ufe0f Changed default query timeout to 10 seconds\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize-performance/#backup-and-rollback","title":"Backup and Rollback","text":"<p>Backups are created automatically:</p> <pre><code>Backup created: /backups/optimize-backup-20240115-143022.zip\n\nTo rollback:\nwheels optimize rollback --backup=optimize-backup-20240115-143022.zip\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize-performance/#configuration","title":"Configuration","text":"<p>Customize optimization behavior in <code>/config/optimizer.json</code>:</p> <pre><code>{\n  \"database\": {\n    \"autoIndex\": true,\n    \"indexThreshold\": 1000,\n    \"queryTimeout\": 30\n  },\n  \"caching\": {\n    \"defaultDuration\": 3600,\n    \"cacheQueries\": true\n  },\n  \"assets\": {\n    \"minify\": true,\n    \"compress\": true,\n    \"cdnEnabled\": false\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize-performance/#notes","title":"Notes","text":"<ul> <li>Always test optimizations in a staging environment first</li> <li>Some optimizations require application restart</li> <li>Monitor application after applying optimizations</li> <li>Use <code>wheels analyze performance</code> to measure improvements</li> <li>Aggressive optimizations should be carefully reviewed</li> </ul>"},{"location":"command-line-tools/commands/performance/optimize/","title":"wheels optimize","text":"<p>Base command for application optimization.</p>"},{"location":"command-line-tools/commands/performance/optimize/#synopsis","title":"Synopsis","text":"<pre><code>wheels optimize [subcommand] [options]\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize/#description","title":"Description","text":"<p>The <code>wheels optimize</code> command provides tools to improve your Wheels application's performance. It analyzes and optimizes various aspects including database queries, asset delivery, caching strategies, and code execution.</p>"},{"location":"command-line-tools/commands/performance/optimize/#subcommands","title":"Subcommands","text":"Command Description <code>performance</code> Comprehensive performance optimization"},{"location":"command-line-tools/commands/performance/optimize/#options","title":"Options","text":"Option Description <code>--help</code> Show help information <code>--version</code> Show version information"},{"location":"command-line-tools/commands/performance/optimize/#direct-usage","title":"Direct Usage","text":"<p>When called without subcommands, runs automatic optimizations:</p> <pre><code>wheels optimize\n</code></pre> <p>This performs: 1. Database query optimization 2. Asset minification and bundling 3. Cache configuration 4. Code optimization</p>"},{"location":"command-line-tools/commands/performance/optimize/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/performance/optimize/#run-all-optimizations","title":"Run all optimizations","text":"<pre><code>wheels optimize\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize/#optimize-with-detailed-output","title":"Optimize with detailed output","text":"<pre><code>wheels optimize --verbose\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize/#dry-run-to-preview-changes","title":"Dry run to preview changes","text":"<pre><code>wheels optimize --dry-run\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize/#optimize-specific-areas","title":"Optimize specific areas","text":"<pre><code>wheels optimize --only=database,assets\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize/#optimization-areas","title":"Optimization Areas","text":""},{"location":"command-line-tools/commands/performance/optimize/#database","title":"Database","text":"<ul> <li>Index analysis and creation</li> <li>Query optimization</li> <li>Connection pooling</li> <li>Cache configuration</li> </ul>"},{"location":"command-line-tools/commands/performance/optimize/#assets","title":"Assets","text":"<ul> <li>JavaScript minification</li> <li>CSS optimization</li> <li>Image compression</li> <li>Bundle creation</li> </ul>"},{"location":"command-line-tools/commands/performance/optimize/#caching","title":"Caching","text":"<ul> <li>Query cache setup</li> <li>Page cache configuration</li> <li>Object cache optimization</li> <li>CDN integration</li> </ul>"},{"location":"command-line-tools/commands/performance/optimize/#code","title":"Code","text":"<ul> <li>Dead code elimination</li> <li>Function optimization</li> <li>Memory usage reduction</li> <li>Startup time improvement</li> </ul>"},{"location":"command-line-tools/commands/performance/optimize/#output-example","title":"Output Example","text":"<pre><code>Wheels Application Optimization\n==============================\n\nAnalyzing application...\n\u2713 Scanned 245 files\n\u2713 Analyzed 1,234 queries\n\u2713 Checked 456 assets\n\nOptimizations Applied:\n---------------------\n\nDatabase (4 optimizations)\n  \u2713 Added index on users.email\n  \u2713 Added composite index on orders(user_id, created_at)\n  \u2713 Optimized slow query in ProductModel.cfc\n  \u2713 Enabled query caching for static queries\n\nAssets (3 optimizations)\n  \u2713 Minified 23 JavaScript files (saved 145KB)\n  \u2713 Optimized 15 CSS files (saved 67KB)\n  \u2713 Compressed 34 images (saved 2.3MB)\n\nCaching (2 optimizations)\n  \u2713 Configured Redis for object caching\n  \u2713 Enabled page caching for static routes\n\nCode (3 optimizations)\n  \u2713 Removed 12 unused functions\n  \u2713 Optimized application startup\n  \u2713 Reduced memory footprint by 15%\n\nPerformance Impact:\n  - Page load time: -32% (2.4s \u2192 1.6s)\n  - Database queries: -45% (avg 23ms \u2192 12ms)\n  - Memory usage: -15% (512MB \u2192 435MB)\n  - Startup time: -20% (8s \u2192 6.4s)\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize/#configuration","title":"Configuration","text":"<p>Configure via <code>.wheels-optimize.json</code>:</p> <pre><code>{\n  \"optimize\": {\n    \"database\": {\n      \"autoIndex\": true,\n      \"queryCache\": true,\n      \"slowQueryThreshold\": 100\n    },\n    \"assets\": {\n      \"minify\": true,\n      \"bundle\": true,\n      \"compress\": true,\n      \"compressionQuality\": 85\n    },\n    \"cache\": {\n      \"provider\": \"redis\",\n      \"ttl\": 3600,\n      \"autoEvict\": true\n    },\n    \"code\": {\n      \"removeDeadCode\": true,\n      \"optimizeStartup\": true,\n      \"memoryOptimization\": true\n    }\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize/#optimization-strategies","title":"Optimization Strategies","text":""},{"location":"command-line-tools/commands/performance/optimize/#development-mode","title":"Development Mode","text":"<p>Focuses on developer experience: <pre><code>wheels optimize --env=development\n</code></pre> - Faster rebuilds - Source maps preserved - Debug information retained</p>"},{"location":"command-line-tools/commands/performance/optimize/#production-mode","title":"Production Mode","text":"<p>Maximum performance: <pre><code>wheels optimize --env=production\n</code></pre> - Aggressive minification - Dead code elimination - Maximum compression</p>"},{"location":"command-line-tools/commands/performance/optimize/#balanced-mode","title":"Balanced Mode","text":"<p>Balance between size and debuggability: <pre><code>wheels optimize --mode=balanced\n</code></pre></p>"},{"location":"command-line-tools/commands/performance/optimize/#advanced-options","title":"Advanced Options","text":""},{"location":"command-line-tools/commands/performance/optimize/#selective-optimization","title":"Selective Optimization","text":"<pre><code># Only database optimizations\nwheels optimize --only=database\n\n# Exclude asset optimization\nwheels optimize --skip=assets\n\n# Specific optimizations\nwheels optimize --optimizations=minify,compress,index\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize/#performance-budgets","title":"Performance Budgets","text":"<pre><code># Set performance budgets\nwheels optimize --budget-js=200kb --budget-css=50kb\n\n# Fail if budgets exceeded\nwheels optimize --strict-budgets\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize/#integration","title":"Integration","text":""},{"location":"command-line-tools/commands/performance/optimize/#build-process","title":"Build Process","text":"<pre><code>{\n  \"scripts\": {\n    \"build\": \"wheels optimize --env=production\",\n    \"build:dev\": \"wheels optimize --env=development\"\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize/#cicd-pipeline","title":"CI/CD Pipeline","text":"<pre><code>- name: Optimize application\n  run: |\n    wheels optimize --env=production\n    wheels optimize --verify\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize/#optimization-reports","title":"Optimization Reports","text":""},{"location":"command-line-tools/commands/performance/optimize/#generate-report","title":"Generate Report","text":"<pre><code>wheels optimize --report=optimization-report.html\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize/#report-contents","title":"Report Contents","text":"<ul> <li>Before/after metrics</li> <li>Optimization details</li> <li>Performance graphs</li> <li>Recommendations</li> </ul>"},{"location":"command-line-tools/commands/performance/optimize/#rollback","title":"Rollback","text":"<p>If optimizations cause issues:</p> <pre><code># Create backup before optimizing\nwheels optimize --backup\n\n# Rollback to backup\nwheels optimize --rollback\n\n# Rollback specific optimization\nwheels optimize --rollback=database\n</code></pre>"},{"location":"command-line-tools/commands/performance/optimize/#best-practices","title":"Best Practices","text":"<ol> <li>Test After Optimization: Verify functionality</li> <li>Monitor Performance: Track real-world impact</li> <li>Incremental Approach: Optimize gradually</li> <li>Keep Backups: Enable rollback capability</li> <li>Document Changes: Track what was optimized</li> </ol>"},{"location":"command-line-tools/commands/performance/optimize/#performance-monitoring","title":"Performance Monitoring","text":"<p>After optimization: <pre><code># Verify optimizations\nwheels optimize --verify\n\n# Performance benchmark\nwheels optimize --benchmark\n\n# Compare before/after\nwheels optimize --compare\n</code></pre></p>"},{"location":"command-line-tools/commands/performance/optimize/#common-issues","title":"Common Issues","text":""},{"location":"command-line-tools/commands/performance/optimize/#over-optimization","title":"Over-optimization","text":"<ul> <li>Breaking functionality</li> <li>Debugging difficulties</li> <li>Longer build times</li> </ul>"},{"location":"command-line-tools/commands/performance/optimize/#solutions","title":"Solutions","text":"<ul> <li>Use balanced mode</li> <li>Keep source maps in development</li> <li>Test thoroughly</li> </ul>"},{"location":"command-line-tools/commands/performance/optimize/#use-cases","title":"Use Cases","text":"<ol> <li>Pre-deployment: Optimize before production</li> <li>Performance Issues: Fix slow applications</li> <li>Cost Reduction: Reduce resource usage</li> <li>User Experience: Improve load times</li> <li>Scalability: Prepare for growth</li> </ol>"},{"location":"command-line-tools/commands/performance/optimize/#notes","title":"Notes","text":"<ul> <li>Always backup before optimization</li> <li>Some optimizations require restart</li> <li>Monitor application after optimization</li> <li>Optimization impact varies by application</li> </ul>"},{"location":"command-line-tools/commands/performance/optimize/#see-also","title":"See Also","text":"<ul> <li>wheels optimize performance - Detailed performance optimization</li> <li>wheels analyze performance - Performance analysis</li> <li>wheels cache - Cache management</li> <li>wheels config - Configuration management</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-info/","title":"wheels plugin info","text":"<p>Show detailed information about a Wheels plugin.</p>"},{"location":"command-line-tools/commands/plugins/plugins-info/#synopsis","title":"Synopsis","text":"<pre><code>wheels plugin info &lt;name&gt;\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-info/#description","title":"Description","text":"<p>The <code>wheels plugin info</code> command displays comprehensive information about a specific Wheels plugin. It shows both ForgeBox metadata and local installation status, helping you make informed decisions about plugin usage.</p>"},{"location":"command-line-tools/commands/plugins/plugins-info/#arguments","title":"Arguments","text":""},{"location":"command-line-tools/commands/plugins/plugins-info/#name-required","title":"name (required)","text":"<p>The name of the plugin to show information for.</p>"},{"location":"command-line-tools/commands/plugins/plugins-info/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/plugins/plugins-info/#show-plugin-information","title":"Show plugin information","text":"<pre><code>wheels plugin info wheels-auth\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-info/#check-a-specific-plugin","title":"Check a specific plugin","text":"<pre><code>wheels plugin info wheels-api-builder\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-info/#output-example","title":"Output Example","text":"<pre><code>\ud83d\udce6 Plugin Information: wheels-auth\n\n\u2705 Status: Installed locally\n\ud83d\udccc Version: 2.0.0\n\nForgeBox Information:\n\ud83d\udcdd Name: Wheels Authentication Plugin\n\ud83d\udd17 Slug: wheels-auth\n\ud83c\udff7\ufe0f  Latest Version: 2.1.0\n\ud83d\udcc1 Type: cfwheels-plugins\n\ud83d\udcc4 Description: Complete authentication and authorization system for Wheels applications\n\ud83d\udc64 Author: John Doe\n\ud83d\udcca Downloads: 15,432\n\ud83d\udcc5 Created: 2022-03-15\n\ud83d\udd04 Updated: 2024-01-15\n\ud83c\udf10 Homepage: https://github.com/johndoe/wheels-auth\n\ud83d\udcbb Repository: https://github.com/johndoe/wheels-auth.git\n\ud83d\udc1b Issues: https://github.com/johndoe/wheels-auth/issues\n\u2696\ufe0f  License: MIT\n\nDependencies:\n  \u2022 wheels-validation: &gt;=1.0.0\n  \u2022 bcrypt: &gt;=1.0.0\n\nAvailable Versions:\n  \u2022 2.1.0 (2024-01-15)\n  \u2022 2.0.0 (2023-11-20)\n  \u2022 1.9.5 (2023-09-10)\n  \u2022 1.9.0 (2023-07-05)\n  \u2022 1.8.0 (2023-05-01)\n  ... and 12 more\n\nInstallation:\nTo update this plugin:\n  wheels plugin update wheels-auth\n\nTo see all available plugins:\n  wheels plugin search\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-info/#information-sections","title":"Information Sections","text":""},{"location":"command-line-tools/commands/plugins/plugins-info/#status-information","title":"Status Information","text":"<ul> <li>Installation Status: Whether plugin is installed locally or globally</li> <li>Installed Version: Current version if installed</li> <li>Update Available: Shows if newer version exists</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-info/#forgebox-metadata","title":"ForgeBox Metadata","text":"<ul> <li>Name &amp; Description: Official plugin name and purpose</li> <li>Version Info: Latest version and version history</li> <li>Author Details: Plugin creator information</li> <li>Statistics: Download count and activity metrics</li> <li>Links: Homepage, repository, and issue tracker</li> <li>License: Distribution license</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-info/#dependencies","title":"Dependencies","text":"<p>Lists required dependencies with version constraints.</p>"},{"location":"command-line-tools/commands/plugins/plugins-info/#version-history","title":"Version History","text":"<p>Shows recent versions with release dates (limited to 5 most recent).</p>"},{"location":"command-line-tools/commands/plugins/plugins-info/#installation-commands","title":"Installation Commands","text":"<p>Based on status, suggests appropriate commands: - Not Installed: <code>wheels plugin install &lt;name&gt;</code> - Installed: <code>wheels plugin update &lt;name&gt;</code> - Outdated: Shows update command with version</p>"},{"location":"command-line-tools/commands/plugins/plugins-info/#use-cases","title":"Use Cases","text":""},{"location":"command-line-tools/commands/plugins/plugins-info/#pre-installation-check","title":"Pre-Installation Check","text":"<pre><code># Check plugin before installing\nwheels plugin info wheels-cache-manager\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-info/#version-verification","title":"Version Verification","text":"<pre><code># Check if update available\nwheels plugin info wheels-api-builder\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-info/#dependency-review","title":"Dependency Review","text":"<pre><code># Review dependencies before installation\nwheels plugin info wheels-payment-gateway\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-info/#notes","title":"Notes","text":"<ul> <li>Requires internet connection for ForgeBox data</li> <li>Shows local installation status first</li> <li>Caches ForgeBox data for 5 minutes</li> <li>Works with both installed and uninstalled plugins</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-info/#error-handling","title":"Error Handling","text":""},{"location":"command-line-tools/commands/plugins/plugins-info/#plugin-not-found","title":"Plugin Not Found","text":"<pre><code>Error: Plugin 'wheels-unknown' not found on ForgeBox or installed locally\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-info/#network-issues","title":"Network Issues","text":"<p>Shows local information if available, with warning about missing ForgeBox data.</p>"},{"location":"command-line-tools/commands/plugins/plugins-info/#see-also","title":"See Also","text":"<ul> <li>wheels plugin search - Search for plugins</li> <li>wheels plugin install - Install plugins</li> <li>wheels plugin update - Update plugins</li> <li>wheels plugin list - List installed plugins</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-init/","title":"wheels plugin init","text":"<p>Initialize a new Wheels plugin project with scaffolding.</p>"},{"location":"command-line-tools/commands/plugins/plugins-init/#synopsis","title":"Synopsis","text":"<pre><code>wheels plugin init &lt;name&gt; [--author=&lt;name&gt;] [--description=&lt;text&gt;] [--version=&lt;version&gt;] [--license=&lt;type&gt;]\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-init/#description","title":"Description","text":"<p>The <code>wheels plugin init</code> command creates a new Wheels plugin project with a complete directory structure, configuration files, and example code. It follows Wheels plugin conventions and prepares the plugin for development and distribution on ForgeBox.</p>"},{"location":"command-line-tools/commands/plugins/plugins-init/#arguments","title":"Arguments","text":""},{"location":"command-line-tools/commands/plugins/plugins-init/#name-required","title":"name (required)","text":"<p>Name of the plugin. Will be prefixed with 'wheels-' if not already present.</p>"},{"location":"command-line-tools/commands/plugins/plugins-init/#options","title":"Options","text":""},{"location":"command-line-tools/commands/plugins/plugins-init/#-author","title":"--author","text":"<p>Plugin author name. - Default: Empty string - Example: <code>--author=\"John Doe\"</code></p>"},{"location":"command-line-tools/commands/plugins/plugins-init/#-description","title":"--description","text":"<p>Plugin description. - Default: Empty string - Example: <code>--description=\"Authentication system for Wheels\"</code></p>"},{"location":"command-line-tools/commands/plugins/plugins-init/#-version","title":"--version","text":"<p>Initial version number. - Default: <code>1.0.0</code> - Example: <code>--version=0.1.0</code></p>"},{"location":"command-line-tools/commands/plugins/plugins-init/#-license","title":"--license","text":"<p>License type for the plugin. - Default: <code>MIT</code> - Options: <code>MIT</code>, <code>Apache-2.0</code>, <code>GPL-3.0</code>, <code>BSD-3-Clause</code>, <code>ISC</code>, <code>Proprietary</code></p>"},{"location":"command-line-tools/commands/plugins/plugins-init/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/plugins/plugins-init/#basic-plugin-initialization","title":"Basic plugin initialization","text":"<pre><code>wheels plugin init my-plugin\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-init/#with-metadata","title":"With metadata","text":"<pre><code>wheels plugin init authentication \\\n  --author=\"Jane Smith\" \\\n  --description=\"Complete auth system\" \\\n  --version=\"0.1.0\" \\\n  --license=MIT\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-init/#quick-start","title":"Quick start","text":"<pre><code>wheels plugin init wheels-api-tools --author=\"DevTeam\"\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-init/#generated-structure","title":"Generated Structure","text":"<pre><code>wheels-my-plugin/\n\u251c\u2500\u2500 box.json              # Package configuration\n\u251c\u2500\u2500 ModuleConfig.cfc      # CommandBox module configuration\n\u251c\u2500\u2500 README.md             # Documentation template\n\u251c\u2500\u2500 .gitignore           # Git ignore file\n\u251c\u2500\u2500 commands/            # CLI commands directory\n\u2502   \u2514\u2500\u2500 hello.cfc        # Example command\n\u251c\u2500\u2500 models/              # Service components\n\u251c\u2500\u2500 templates/           # File templates\n\u2514\u2500\u2500 tests/               # Test suite\n    \u2514\u2500\u2500 MainTest.cfc     # Example test\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-init/#file-contents","title":"File Contents","text":""},{"location":"command-line-tools/commands/plugins/plugins-init/#boxjson","title":"box.json","text":"<pre><code>{\n  \"name\": \"wheels-my-plugin\",\n  \"version\": \"1.0.0\",\n  \"author\": \"John Doe\",\n  \"type\": \"commandbox-modules,cfwheels-plugins\",\n  \"keywords\": \"cfwheels,wheels,cli,plugin\",\n  \"shortDescription\": \"Plugin description\",\n  \"license\": [{\n    \"type\": \"MIT\",\n    \"URL\": \"\"\n  }]\n}\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-init/#moduleconfigcfc","title":"ModuleConfig.cfc","text":"<pre><code>component {\n    this.title = \"wheels-my-plugin\";\n    this.author = \"John Doe\";\n    this.version = \"1.0.0\";\n    this.description = \"Plugin description\";\n\n    function configure() {\n        // Module settings\n        settings = {};\n    }\n\n    function onLoad() {\n        // Register commands\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-init/#example-command","title":"Example Command","text":"<pre><code>component extends=\"commandbox.system.BaseCommand\" {\n    function run() {\n        print.greenLine(\"Hello from wheels-my-plugin!\");\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-init/#development-workflow","title":"Development Workflow","text":"<p>After initialization:</p> <ol> <li> <p>Navigate to directory <pre><code>cd wheels-my-plugin\n</code></pre></p> </li> <li> <p>Initialize Git <pre><code>git init\ngit add .\ngit commit -m \"Initial plugin structure\"\n</code></pre></p> </li> <li> <p>Install dependencies <pre><code>box install\n</code></pre></p> </li> <li> <p>Link for local development <pre><code>box package link\n</code></pre></p> </li> <li> <p>Test example command <pre><code>wheels hello\n</code></pre></p> </li> </ol>"},{"location":"command-line-tools/commands/plugins/plugins-init/#plugin-development","title":"Plugin Development","text":""},{"location":"command-line-tools/commands/plugins/plugins-init/#adding-commands","title":"Adding Commands","text":"<p>Create new commands in the <code>commands/</code> directory: <pre><code>// commands/mycommand.cfc\ncomponent extends=\"commandbox.system.BaseCommand\" {\n    function run(required string name) {\n        print.line(\"Hello, #arguments.name#!\");\n    }\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/plugins/plugins-init/#adding-services","title":"Adding Services","text":"<p>Create service components in <code>models/</code>: <pre><code>// models/MyService.cfc\ncomponent singleton {\n    function processData(data) {\n        // Service logic\n    }\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/plugins/plugins-init/#adding-templates","title":"Adding Templates","text":"<p>Place template files in <code>templates/</code>: <pre><code>templates/\n\u251c\u2500\u2500 controller.txt\n\u251c\u2500\u2500 model.txt\n\u2514\u2500\u2500 view.txt\n</code></pre></p>"},{"location":"command-line-tools/commands/plugins/plugins-init/#publishing","title":"Publishing","text":"<p>When ready to publish:</p> <ol> <li> <p>Update version <pre><code>box bump --minor\n</code></pre></p> </li> <li> <p>Login to ForgeBox <pre><code>box login\n</code></pre></p> </li> <li> <p>Publish <pre><code>box package publish\n</code></pre></p> </li> </ol>"},{"location":"command-line-tools/commands/plugins/plugins-init/#best-practices","title":"Best Practices","text":"<ol> <li>Naming: Always prefix with <code>wheels-</code></li> <li>Versioning: Start with 0.1.0 for initial development</li> <li>Documentation: Update README.md with usage instructions</li> <li>Testing: Add comprehensive tests in <code>/tests/</code></li> <li>Examples: Include working examples</li> <li>Dependencies: Minimize external dependencies</li> </ol>"},{"location":"command-line-tools/commands/plugins/plugins-init/#plugin-types","title":"Plugin Types","text":"<p>Common plugin categories: - Authentication &amp; Security - API Development - Database Tools - Development Helpers - Testing Utilities - Performance Tools - UI Components</p>"},{"location":"command-line-tools/commands/plugins/plugins-init/#configuration-options","title":"Configuration Options","text":"<p>The generated ModuleConfig.cfc supports: - Settings management - Event interceptors - Custom injection bindings - Command registration - Lifecycle hooks</p>"},{"location":"command-line-tools/commands/plugins/plugins-init/#testing","title":"Testing","text":"<p>Run tests with: <pre><code>box testbox run\n</code></pre></p>"},{"location":"command-line-tools/commands/plugins/plugins-init/#notes","title":"Notes","text":"<ul> <li>Plugin name automatically prefixed with 'wheels-'</li> <li>Creates git-ready project structure</li> <li>Includes CommandBox module configuration</li> <li>Ready for ForgeBox publishing</li> <li>Example command demonstrates basic functionality</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-init/#see-also","title":"See Also","text":"<ul> <li>wheels generate plugin - Alternative plugin generator</li> <li>wheels plugin install - Install plugins</li> <li>Plugin Development Guide</li> <li>Publishing to ForgeBox</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-install/","title":"plugins install","text":"<p>Installs a Wheels CLI plugin from various sources including ForgeBox, GitHub, or local files.</p>"},{"location":"command-line-tools/commands/plugins/plugins-install/#usage","title":"Usage","text":"<pre><code>wheels plugins install &lt;name&gt; [--dev] [--global] [--version=&lt;version&gt;]\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-install/#parameters","title":"Parameters","text":"<ul> <li><code>name</code> - (Required) Plugin name or repository URL</li> <li><code>--dev</code> - (Optional) Install as development dependency</li> <li><code>--global</code> - (Optional) Install globally</li> <li><code>--version</code> - (Optional) Specific version to install</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-install/#description","title":"Description","text":"<p>The <code>plugins install</code> command downloads and installs Wheels plugins into your application. It supports multiple installation sources:</p> <ul> <li>ForgeBox Registry: Official and community plugins</li> <li>GitHub Repositories: Direct installation from GitHub</li> <li>Local Files: ZIP files or directories</li> <li>URL Downloads: Direct ZIP file URLs</li> </ul> <p>The command automatically: - Checks plugin compatibility - Resolves dependencies - Backs up existing plugins - Runs installation scripts</p>"},{"location":"command-line-tools/commands/plugins/plugins-install/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/plugins/plugins-install/#install-from-forgebox","title":"Install from ForgeBox","text":"<pre><code>wheels plugins install wheels-vue-cli\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-install/#install-specific-version","title":"Install specific version","text":"<pre><code>wheels plugins install wheels-docker --version=2.0.0\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-install/#install-from-github","title":"Install from GitHub","text":"<pre><code>wheels plugins install https://github.com/user/wheels-plugin\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-install/#install-as-development-dependency","title":"Install as development dependency","text":"<pre><code>wheels plugins install wheels-docker --dev\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-install/#install-globally","title":"Install globally","text":"<pre><code>wheels plugins install wheels-cli-tools --global\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-install/#install-with-multiple-options","title":"Install with multiple options","text":"<pre><code>wheels plugins install wheels-testing --dev --version=1.5.0\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-install/#installation-process","title":"Installation Process","text":"<ol> <li>Download: Fetches plugin from specified source</li> <li>Validation: Checks compatibility and requirements</li> <li>Backup: Creates backup of existing plugin (if any)</li> <li>Installation: Extracts files to plugins directory</li> <li>Dependencies: Installs required dependencies</li> <li>Initialization: Runs plugin setup scripts</li> <li>Verification: Confirms successful installation</li> </ol>"},{"location":"command-line-tools/commands/plugins/plugins-install/#output","title":"Output","text":"<pre><code>\ud83d\udce6 Installing plugin: wheels-vue-cli...\n\n\u2705 Plugin installed successfully\n</code></pre> <p>If installation fails: <pre><code>\ud83d\udce6 Installing plugin: invalid-plugin...\n\n\u274c Plugin installation failed\nError: Plugin not found in repository\n</code></pre></p>"},{"location":"command-line-tools/commands/plugins/plugins-install/#plugin-sources","title":"Plugin Sources","text":""},{"location":"command-line-tools/commands/plugins/plugins-install/#forgebox","title":"ForgeBox","text":"<pre><code># Install by name (searches ForgeBox)\nwheels plugins install plugin-name\n\n# Install specific ForgeBox ID\nwheels plugins install forgebox:plugin-slug\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-install/#github","title":"GitHub","text":"<pre><code># HTTPS URL\nwheels plugins install https://github.com/user/repo\n\n# GitHub shorthand\nwheels plugins install github:user/repo\n\n# Specific branch/tag\nwheels plugins install github:user/repo#v2.0.0\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-install/#direct-url","title":"Direct URL","text":"<pre><code>wheels plugins install https://example.com/plugin.zip\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-install/#notes","title":"Notes","text":"<ul> <li>Plugins must be compatible with your Wheels version</li> <li>Always backup your application before installing plugins</li> <li>Some plugins require manual configuration after installation</li> <li>Use <code>wheels plugins list</code> to verify installation</li> <li>Restart your application to activate new plugins</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-list/","title":"plugins list","text":"<p>Lists installed Wheels CLI plugins or shows available plugins from ForgeBox.</p>"},{"location":"command-line-tools/commands/plugins/plugins-list/#usage","title":"Usage","text":"<pre><code>wheels plugins list [--global] [--format=&lt;format&gt;] [--available]\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-list/#parameters","title":"Parameters","text":"<ul> <li><code>--global</code> - (Optional) Show globally installed plugins</li> <li><code>--format</code> - (Optional) Output format: <code>table</code>, <code>json</code>. Default: <code>table</code></li> <li><code>--available</code> - (Optional) Show available plugins from ForgeBox</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-list/#description","title":"Description","text":"<p>The <code>plugins list</code> command displays information about all plugins installed in your Wheels application, including:</p> <ul> <li>Plugin name and version</li> <li>Installation status (active/inactive)</li> <li>Compatibility with current Wheels version</li> <li>Description and author information</li> <li>Dependencies on other plugins</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-list/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/plugins/plugins-list/#list-all-local-plugins","title":"List all local plugins","text":"<pre><code>wheels plugins list\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-list/#show-globally-installed-plugins","title":"Show globally installed plugins","text":"<pre><code>wheels plugins list --global\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-list/#export-as-json","title":"Export as JSON","text":"<pre><code>wheels plugins list --format=json\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-list/#show-available-plugins-from-forgebox","title":"Show available plugins from ForgeBox","text":"<pre><code>wheels plugins list --available\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-list/#output","title":"Output","text":""},{"location":"command-line-tools/commands/plugins/plugins-list/#table-format-default","title":"Table Format (Default)","text":"<pre><code>\ud83e\udde9 Installed Wheels CLI Plugins\n\nName                Version    Description\n---------------------------------------------\nwheels-vue-cli      1.2.0     Vue.js integration for Wheels\nwheels-docker       2.0.1     Docker deployment tools\nwheels-testing      1.5.0     Advanced testing utilities\n\nTotal: 3 plugins\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-list/#available-plugins-from-forgebox","title":"Available Plugins from ForgeBox","text":"<pre><code>================ Available Wheels Plugins From ForgeBox ======================\n[Lists all available cfwheels-plugins from ForgeBox]\n=============================================================================\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-list/#json-format","title":"JSON Format","text":"<pre><code>{\n  \"plugins\": [\n    {\n      \"name\": \"wheels-vue-cli\",\n      \"version\": \"1.2.0\",\n      \"description\": \"Vue.js integration for Wheels\"\n    }\n  ]\n}\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-list/#notes","title":"Notes","text":"<ul> <li>Local plugins are stored in your project</li> <li>Global plugins are available to all projects</li> <li>Use <code>wheels plugins install</code> to add new plugins</li> <li>Use <code>wheels plugins remove</code> to uninstall plugins</li> <li>The <code>--available</code> flag queries the ForgeBox registry</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/","title":"wheels plugin outdated","text":"<p>List installed plugins that have newer versions available.</p>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#synopsis","title":"Synopsis","text":"<pre><code>wheels plugin outdated [--format=&lt;format&gt;]\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#description","title":"Description","text":"<p>The <code>wheels plugin outdated</code> command checks all installed plugins against ForgeBox to identify which ones have updates available. This helps maintain plugins at their latest versions for security and feature updates.</p>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#options","title":"Options","text":""},{"location":"command-line-tools/commands/plugins/plugins-outdated/#-format","title":"--format","text":"<p>Output format for the results. - Default: <code>table</code> - Options: <code>table</code>, <code>json</code></p>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/plugins/plugins-outdated/#check-for-outdated-plugins","title":"Check for outdated plugins","text":"<pre><code>wheels plugin outdated\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#get-results-in-json-format","title":"Get results in JSON format","text":"<pre><code>wheels plugin outdated --format=json\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#output-example","title":"Output Example","text":""},{"location":"command-line-tools/commands/plugins/plugins-outdated/#table-format-default","title":"Table Format (default)","text":"<pre><code>\ud83d\udcca Checking for outdated plugins...\n\nChecking wheels-auth... outdated\nChecking wheels-api-builder... up to date\nChecking wheels-cache... outdated\nChecking wheels-validation... up to date\n\nOutdated Plugins:\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Plugin               \u2502 Current \u2502 Latest \u2502 Type \u2502 Updated    \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 wheels-auth         \u2502 2.0.0   \u2502 2.1.0  \u2502 prod \u2502 2024-01-15 \u2502\n\u2502 wheels-cache        \u2502 3.0.1   \u2502 3.1.0  \u2502 prod \u2502 2024-01-10 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nFound 2 outdated plugins\n\nUpdate Commands:\n\nUpdate all plugins:\n  wheels plugin update:all\n\nUpdate specific plugin:\n  wheels plugin update &lt;plugin-name&gt;\n\nPreview updates without installing:\n  wheels plugin update:all --dry-run\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#json-format","title":"JSON Format","text":"<pre><code>[\n  {\n    \"name\": \"wheels-auth\",\n    \"currentVersion\": \"2.0.0\",\n    \"latestVersion\": \"2.1.0\",\n    \"isDev\": false,\n    \"updateDate\": \"2024-01-15T10:30:00Z\",\n    \"author\": \"John Doe\"\n  },\n  {\n    \"name\": \"wheels-cache\",\n    \"currentVersion\": \"3.0.1\",\n    \"latestVersion\": \"3.1.0\",\n    \"isDev\": false,\n    \"updateDate\": \"2024-01-10T14:45:00Z\",\n    \"author\": \"Jane Smith\"\n  }\n]\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#status-indicators","title":"Status Indicators","text":"<p>During checking: - <code>checking...</code> - Currently checking plugin - <code>outdated</code> - Newer version available - <code>up to date</code> - Already at latest version - <code>error</code> - Could not check (network issue, etc.)</p>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#information-shown","title":"Information Shown","text":"<p>For each outdated plugin: - Plugin Name: Name of the plugin - Current Version: Currently installed version - Latest Version: Newest available version - Type: prod (production) or dev (development) - Updated: Date of latest version release</p>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#update-strategies","title":"Update Strategies","text":"<p>Based on results, different update approaches:</p>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#single-plugin-update","title":"Single Plugin Update","text":"<pre><code>wheels plugin update wheels-auth\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#batch-update","title":"Batch Update","text":"<pre><code>wheels plugin update:all\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#preview-first","title":"Preview First","text":"<pre><code>wheels plugin update:all --dry-run\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#version-comparison","title":"Version Comparison","text":"<p>The command performs semantic version comparison: - Major: Breaking changes (1.x.x \u2192 2.x.x) - Minor: New features (x.1.x \u2192 x.2.x) - Patch: Bug fixes (x.x.1 \u2192 x.x.2)</p>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#check-frequency","title":"Check Frequency","text":"<p>Best practices for checking: - Development: Weekly or before starting new features - Staging: Before deployment to production - Production: Monthly or quarterly - CI/CD: As part of build process</p>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#error-handling","title":"Error Handling","text":""},{"location":"command-line-tools/commands/plugins/plugins-outdated/#network-issues","title":"Network Issues","text":"<pre><code>\u26a0\ufe0f  Could not check 1 plugin:\n  \u2022 wheels-payment\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#all-up-to-date","title":"All Up to Date","text":"<pre><code>\u2705 All plugins are up to date!\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#integration-with-cicd","title":"Integration with CI/CD","text":"<p>Use in automated workflows:</p> <pre><code># Check and fail if outdated\nwheels plugin outdated --format=json | jq 'length &gt; 0' &amp;&amp; exit 1\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#performance","title":"Performance","text":"<ul> <li>Checks are performed in parallel</li> <li>Results cached for 5 minutes</li> <li>Only checks plugins in box.json</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#filtering-options","title":"Filtering Options","text":"<p>Future versions will support: <pre><code># Check only production dependencies\nwheels plugin outdated --production\n\n# Check only dev dependencies\nwheels plugin outdated --dev\n\n# Check specific plugin\nwheels plugin outdated wheels-auth\n</code></pre></p>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#notes","title":"Notes","text":"<ul> <li>Requires internet connection</li> <li>Checks against ForgeBox registry</li> <li>Respects version constraints in box.json</li> <li>Does not modify any files</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-outdated/#see-also","title":"See Also","text":"<ul> <li>wheels plugin update - Update single plugin</li> <li>wheels plugin update:all - Update all plugins</li> <li>wheels plugin list - List installed plugins</li> <li>wheels plugin info - Show plugin details</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-remove/","title":"plugins remove","text":"<p>Removes an installed Wheels CLI plugin.</p>"},{"location":"command-line-tools/commands/plugins/plugins-remove/#usage","title":"Usage","text":"<pre><code>wheels plugins remove &lt;name&gt; [--global] [--force]\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-remove/#parameters","title":"Parameters","text":"<ul> <li><code>name</code> - (Required) Plugin name to remove</li> <li><code>--global</code> - (Optional) Remove globally installed plugin</li> <li><code>--force</code> - (Optional) Force removal without confirmation</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-remove/#description","title":"Description","text":"<p>The <code>plugins remove</code> command safely uninstalls a plugin from your Wheels application. It:</p> <ul> <li>Checks for dependent plugins</li> <li>Creates a backup (by default)</li> <li>Removes plugin files</li> <li>Cleans up configuration</li> <li>Updates plugin registry</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-remove/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/plugins/plugins-remove/#basic-plugin-removal","title":"Basic plugin removal","text":"<pre><code>wheels plugins remove wheels-vue-cli\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-remove/#remove-global-plugin","title":"Remove global plugin","text":"<pre><code>wheels plugins remove wheels-docker --global\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-remove/#force-removal-skip-confirmation","title":"Force removal (skip confirmation)","text":"<pre><code>wheels plugins remove wheels-testing --force\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-remove/#remove-global-plugin-without-confirmation","title":"Remove global plugin without confirmation","text":"<pre><code>wheels plugins remove wheels-cli-tools --global --force\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-remove/#removal-process","title":"Removal Process","text":"<ol> <li>Dependency Check: Ensures no other plugins depend on this one</li> <li>Backup Creation: Saves plugin files to backup directory</li> <li>Deactivation: Disables plugin in application</li> <li>File Removal: Deletes plugin files and directories</li> <li>Cleanup: Removes configuration entries</li> <li>Verification: Confirms successful removal</li> </ol>"},{"location":"command-line-tools/commands/plugins/plugins-remove/#output","title":"Output","text":""},{"location":"command-line-tools/commands/plugins/plugins-remove/#with-confirmation-prompt-default","title":"With confirmation prompt (default)","text":"<pre><code>Are you sure you want to remove the plugin 'wheels-vue-cli'? (y/n): y\n\ud83d\uddd1\ufe0f  Removing plugin: wheels-vue-cli...\n\n\u2705 Plugin removed successfully\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-remove/#with-force-flag","title":"With force flag","text":"<pre><code>\ud83d\uddd1\ufe0f  Removing plugin: wheels-vue-cli...\n\n\u2705 Plugin removed successfully\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-remove/#cancellation","title":"Cancellation","text":"<pre><code>Are you sure you want to remove the plugin 'wheels-vue-cli'? (y/n): n\nPlugin removal cancelled.\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-remove/#notes","title":"Notes","text":"<ul> <li>The <code>--force</code> flag skips the confirmation prompt</li> <li>Use <code>--global</code> to remove plugins installed globally</li> <li>Use <code>wheels plugins list</code> to verify removal</li> <li>Some plugins may require manual cleanup of configuration files</li> <li>Restart your application after removing plugins that affect core functionality</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-search/","title":"wheels plugin search","text":"<p>Search for Wheels plugins on ForgeBox.</p>"},{"location":"command-line-tools/commands/plugins/plugins-search/#synopsis","title":"Synopsis","text":"<pre><code>wheels plugin search [query] [--format=&lt;format&gt;] [--orderBy=&lt;field&gt;]\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-search/#description","title":"Description","text":"<p>The <code>wheels plugin search</code> command searches ForgeBox for available Wheels plugins. You can search for all plugins or filter by keywords. Results can be sorted by various criteria and output in different formats.</p>"},{"location":"command-line-tools/commands/plugins/plugins-search/#arguments","title":"Arguments","text":""},{"location":"command-line-tools/commands/plugins/plugins-search/#query-optional","title":"query (optional)","text":"<p>Search term to filter plugins. If omitted, all available plugins are shown.</p>"},{"location":"command-line-tools/commands/plugins/plugins-search/#options","title":"Options","text":""},{"location":"command-line-tools/commands/plugins/plugins-search/#-format","title":"--format","text":"<p>Output format for the results.</p> <ul> <li>Default: <code>table</code></li> <li>Options: <code>table</code>, <code>json</code></li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-search/#-orderby","title":"--orderBy","text":"<p>Sort results by specified field.</p> <ul> <li>Default: <code>downloads</code></li> <li>Options: <code>name</code>, <code>downloads</code>, <code>updated</code></li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-search/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/plugins/plugins-search/#search-all-plugins","title":"Search all plugins","text":"<pre><code>wheels plugin search\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-search/#search-for-authentication-plugins","title":"Search for authentication plugins","text":"<pre><code>wheels plugin search auth\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-search/#search-with-specific-sorting","title":"Search with specific sorting","text":"<pre><code>wheels plugin search --orderBy=updated\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-search/#get-results-in-json-format","title":"Get results in JSON format","text":"<pre><code>wheels plugin search auth --format=json\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-search/#search-for-api-related-plugins","title":"Search for API-related plugins","text":"<pre><code>wheels plugin search \"api builder\"\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-search/#output","title":"Output","text":""},{"location":"command-line-tools/commands/plugins/plugins-search/#table-format-default","title":"Table Format (default)","text":"<pre><code>\ud83d\udd0d Searching ForgeBox for Wheels plugins...\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Name                    \u2502 Version \u2502 Downloads \u2502 Updated    \u2502 Description                                     \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 wheels-auth            \u2502 2.1.0   \u2502 15,432    \u2502 2024-01-15 \u2502 Complete authentication and authorization sys... \u2502\n\u2502 wheels-api-builder     \u2502 1.5.0   \u2502 8,921     \u2502 2024-01-10 \u2502 RESTful API scaffolding and documentation       \u2502\n\u2502 wheels-cache-manager   \u2502 3.0.2   \u2502 6,543     \u2502 2024-01-08 \u2502 Advanced caching strategies for Wheels apps     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nFound 3 plugins\n\nTo install a plugin, use:\n  wheels plugin install &lt;plugin-name&gt;\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-search/#json-format","title":"JSON Format","text":"<pre><code>[\n  {\n    \"slug\": \"wheels-auth\",\n    \"name\": \"Wheels Authentication\",\n    \"version\": \"2.1.0\",\n    \"downloads\": 15432,\n    \"updateDate\": \"2024-01-15T10:30:00Z\",\n    \"summary\": \"Complete authentication and authorization system\",\n    \"author\": {\n      \"name\": \"John Doe\"\n    }\n  }\n]\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-search/#search-tips","title":"Search Tips","text":"<ol> <li>Broad Search: Start with general terms like \"auth\" or \"api\"</li> <li>Exact Phrases: Use quotes for exact phrase matching</li> <li>Popular First: Default sort by downloads shows most popular plugins</li> <li>Recent Updates: Use <code>--orderBy=updated</code> to find actively maintained plugins</li> </ol>"},{"location":"command-line-tools/commands/plugins/plugins-search/#plugin-types","title":"Plugin Types","text":"<p>The search includes various plugin types: - Authentication &amp; Security - API &amp; Web Services - Database &amp; ORM Extensions - Testing &amp; Development Tools - UI Components &amp; Themes - Performance &amp; Caching - File Handling &amp; Media</p>"},{"location":"command-line-tools/commands/plugins/plugins-search/#integration-with-other-commands","title":"Integration with Other Commands","text":"<p>After finding plugins: 1. Get detailed info: <code>wheels plugin info &lt;plugin-name&gt;</code> 2. Install directly: <code>wheels plugin install &lt;plugin-name&gt;</code> 3. Check compatibility: <code>wheels plugin info &lt;plugin-name&gt;</code></p>"},{"location":"command-line-tools/commands/plugins/plugins-search/#notes","title":"Notes","text":"<ul> <li>Search results are cached for 15 minutes</li> <li>Results limited to 50 plugins per search</li> <li>Only shows plugins compatible with cfwheels</li> <li>ForgeBox availability required</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-search/#see-also","title":"See Also","text":"<ul> <li>wheels plugin info - Show plugin details</li> <li>wheels plugin install - Install plugins</li> <li>wheels plugin list - List installed plugins</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/","title":"wheels plugin update:all","text":"<p>Update all installed Wheels plugins to their latest versions.</p>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#synopsis","title":"Synopsis","text":"<pre><code>wheels plugin update:all [--dry-run] [--force]\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#description","title":"Description","text":"<p>The <code>wheels plugin update:all</code> command checks all installed plugins for available updates and updates them to their latest versions. It handles dependencies automatically and can preview changes before applying them.</p>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#options","title":"Options","text":""},{"location":"command-line-tools/commands/plugins/plugins-update-all/#-dry-run","title":"--dry-run","text":"<p>Show what would be updated without actually updating. - Default: false</p>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#-force","title":"--force","text":"<p>Force update even if already at latest version. - Default: false</p>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/plugins/plugins-update-all/#update-all-plugins","title":"Update all plugins","text":"<pre><code>wheels plugin update:all\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#preview-updates","title":"Preview updates","text":"<pre><code>wheels plugin update:all --dry-run\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#force-update-all","title":"Force update all","text":"<pre><code>wheels plugin update:all --force\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#output-example","title":"Output Example","text":""},{"location":"command-line-tools/commands/plugins/plugins-update-all/#checking-phase","title":"Checking Phase","text":"<pre><code>\ud83d\udd04 Checking for plugin updates...\n\nChecking wheels-auth... update available (2.0.0 \u2192 2.1.0)\nChecking wheels-api-builder... up to date (1.5.0)\nChecking wheels-cache... update available (3.0.1 \u2192 3.1.0)\nChecking wheels-validation... up to date (2.2.0)\n\nUpdates available:\n\n  \ud83d\udce6 wheels-auth: 2.0.0 \u2192 2.1.0\n  \ud83d\udce6 wheels-cache: 3.0.1 \u2192 3.1.0\n\nUpdate 2 plugins? (y/N):\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#update-phase","title":"Update Phase","text":"<pre><code>Updating wheels-auth...\n  \u2705 Updated successfully!\n\nUpdating wheels-cache...\n  \u2705 Updated successfully!\n\nUpdate Summary:\n\n\u2705 2 plugins updated successfully\n\u274c 0 plugins failed to update\n\u26a0\ufe0f  0 plugins could not be checked\n\nTo see all installed plugins:\n  wheels plugin list\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#dry-run-mode","title":"Dry Run Mode","text":"<p>Preview changes without updating:</p> <pre><code>wheels plugin update:all --dry-run\n</code></pre> <p>Output: <pre><code>Updates available:\n\n  \ud83d\udce6 wheels-auth: 2.0.0 \u2192 2.1.0\n  \ud83d\udce6 wheels-cache: 3.0.1 \u2192 3.1.0\n\nDry run mode - no updates will be performed\nRemove --dry-run to actually update plugins\n</code></pre></p>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#update-process","title":"Update Process","text":"<ol> <li>Discovery: Finds all installed plugins</li> <li>Version Check: Queries ForgeBox for latest versions</li> <li>Comparison: Identifies outdated plugins</li> <li>Confirmation: Asks for user confirmation (unless --force)</li> <li>Sequential Updates: Updates each plugin in dependency order</li> <li>Summary: Reports success/failure for each plugin</li> </ol>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#dependency-resolution","title":"Dependency Resolution","text":"<p>The command handles dependencies intelligently: - Updates dependencies before dependent plugins - Resolves version conflicts automatically - Warns about breaking changes</p>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#batch-operations","title":"Batch Operations","text":""},{"location":"command-line-tools/commands/plugins/plugins-update-all/#selective-updates","title":"Selective Updates","text":"<p>While update:all updates everything, you can: <pre><code># Update only production dependencies\nwheels plugin update:all --production\n\n# Update only dev dependencies\nwheels plugin update:all --dev\n</code></pre></p>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#error-handling","title":"Error Handling","text":""},{"location":"command-line-tools/commands/plugins/plugins-update-all/#partial-failures","title":"Partial Failures","text":"<p>If some plugins fail to update: <pre><code>Update Summary:\n\n\u2705 3 plugins updated successfully\n\u274c 1 plugin failed to update\n\u26a0\ufe0f  1 plugin could not be checked\n\nFailed updates:\n- wheels-payment: Network timeout\n\nTo retry failed updates individually:\n  wheels plugin update wheels-payment\n</code></pre></p>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#rollback-on-failure","title":"Rollback on Failure","text":"<p>Each plugin update is isolated - failures don't affect other updates.</p>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#progress-indicators","title":"Progress Indicators","text":"<p>For many plugins, shows progress: <pre><code>\ud83d\udd04 Checking for plugin updates... [5/10]\n</code></pre></p>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#conflict-resolution","title":"Conflict Resolution","text":"<p>When conflicts arise: <pre><code>Dependency conflict detected:\n  wheels-auth 2.1.0 requires wheels-validation &gt;=3.0.0\n  Current: wheels-validation 2.2.0\n\nOptions:\n1. Update wheels-validation first\n2. Skip wheels-auth update\n3. Force update (may cause issues)\n\nChoose option (1-3):\n</code></pre></p>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#best-practices","title":"Best Practices","text":"<ol> <li>Regular Updates: Run weekly in development</li> <li>Test First: Always test in development environment</li> <li>Dry Run: Use --dry-run before production updates</li> <li>Incremental: Update frequently to avoid large jumps</li> <li>Backup: Backup before bulk updates</li> </ol>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#performance","title":"Performance","text":"<ul> <li>Checks are performed in parallel for speed</li> <li>Updates are sequential for safety</li> <li>Results are cached for 5 minutes</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#common-workflows","title":"Common Workflows","text":""},{"location":"command-line-tools/commands/plugins/plugins-update-all/#development-routine","title":"Development Routine","text":"<pre><code># Monday morning routine\nwheels plugin outdated\nwheels plugin update:all --dry-run\nwheels plugin update:all\nwheels test app\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#production-updates","title":"Production Updates","text":"<pre><code># Production update process\nwheels plugin update:all --dry-run &gt; updates.log\n# Review updates.log\nwheels plugin update:all\nwheels reload\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#notes","title":"Notes","text":"<ul> <li>Requires internet connection</li> <li>Updates modify box.json</li> <li>Some plugins may require restart</li> <li>Updates are logged for troubleshooting</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-update-all/#see-also","title":"See Also","text":"<ul> <li>wheels plugin update - Update single plugin</li> <li>wheels plugin outdated - Check for updates</li> <li>wheels plugin list - List installed plugins</li> <li>wheels plugin info - Show plugin details</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-update/","title":"wheels plugin update","text":"<p>Update a Wheels plugin to the latest or specified version.</p>"},{"location":"command-line-tools/commands/plugins/plugins-update/#synopsis","title":"Synopsis","text":"<pre><code>wheels plugin update &lt;name&gt; [--version=&lt;version&gt;] [--force]\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update/#description","title":"Description","text":"<p>The <code>wheels plugin update</code> command updates an installed Wheels plugin. By default, it updates to the latest version available on ForgeBox, but you can specify a particular version. The command handles dependency updates automatically.</p>"},{"location":"command-line-tools/commands/plugins/plugins-update/#arguments","title":"Arguments","text":""},{"location":"command-line-tools/commands/plugins/plugins-update/#name-required","title":"name (required)","text":"<p>The name of the plugin to update.</p>"},{"location":"command-line-tools/commands/plugins/plugins-update/#options","title":"Options","text":""},{"location":"command-line-tools/commands/plugins/plugins-update/#-version","title":"--version","text":"<p>Specific version to update to. - Default: latest - Example: <code>--version=2.0.0</code></p>"},{"location":"command-line-tools/commands/plugins/plugins-update/#-force","title":"--force","text":"<p>Force update even if already at the target version. - Default: false</p>"},{"location":"command-line-tools/commands/plugins/plugins-update/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/plugins/plugins-update/#update-to-latest-version","title":"Update to latest version","text":"<pre><code>wheels plugin update wheels-auth\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update/#update-to-specific-version","title":"Update to specific version","text":"<pre><code>wheels plugin update wheels-api-builder --version=2.0.0\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update/#force-reinstall-current-version","title":"Force reinstall current version","text":"<pre><code>wheels plugin update wheels-cache --force\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update/#output-example","title":"Output Example","text":"<pre><code>\ud83d\udd04 Updating plugin: wheels-auth\n\nCurrent version: 2.0.0\nUpdating to: latest\n\nInstalling update...\n\n\u2705 Plugin 'wheels-auth' updated successfully!\n\nTo see plugin info:\n  wheels plugin info wheels-auth\n\nTo see all installed plugins:\n  wheels plugin list\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update/#update-process","title":"Update Process","text":"<ol> <li>Version Check: Compares current vs available versions</li> <li>Dependency Resolution: Checks dependency compatibility</li> <li>Backup: Creates backup of current version (if applicable)</li> <li>Download: Fetches new version from ForgeBox</li> <li>Installation: Replaces old files with new version</li> <li>Configuration: Preserves existing configuration</li> <li>Cleanup: Removes temporary files</li> </ol>"},{"location":"command-line-tools/commands/plugins/plugins-update/#version-specifications","title":"Version Specifications","text":""},{"location":"command-line-tools/commands/plugins/plugins-update/#latest-version","title":"Latest Version","text":"<pre><code>wheels plugin update wheels-auth\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update/#specific-version","title":"Specific Version","text":"<pre><code>wheels plugin update wheels-auth --version=2.1.0\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update/#version-ranges","title":"Version Ranges","text":"<pre><code>wheels plugin update wheels-auth --version=\"&gt;=2.0.0 &lt;3.0.0\"\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update/#dependency-handling","title":"Dependency Handling","text":"<p>Updates handle dependencies automatically: - Compatible Updates: Proceeds automatically - Breaking Changes: Prompts for confirmation - Conflicts: Shows resolution options</p>"},{"location":"command-line-tools/commands/plugins/plugins-update/#configuration-preservation","title":"Configuration Preservation","text":"<p>The update process preserves: - Plugin configuration files - Custom modifications (warned if overwritten) - Database migrations - User-generated content</p>"},{"location":"command-line-tools/commands/plugins/plugins-update/#rollback-support","title":"Rollback Support","text":"<p>If update fails: <pre><code># Automatic rollback on failure\nPlugin update failed. Rolling back to version 2.0.0...\nRollback complete.\n</code></pre></p>"},{"location":"command-line-tools/commands/plugins/plugins-update/#pre-update-checks","title":"Pre-Update Checks","text":"<p>The command performs several checks: 1. Installation Status: Verifies plugin is installed 2. Version Availability: Confirms target version exists 3. Compatibility: Checks Wheels version compatibility 4. Dependencies: Validates dependency requirements 5. Disk Space: Ensures sufficient space</p>"},{"location":"command-line-tools/commands/plugins/plugins-update/#common-scenarios","title":"Common Scenarios","text":""},{"location":"command-line-tools/commands/plugins/plugins-update/#regular-updates","title":"Regular Updates","text":"<pre><code># Check and update single plugin\nwheels plugin info wheels-auth\nwheels plugin update wheels-auth\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update/#major-version-updates","title":"Major Version Updates","text":"<pre><code># Update with breaking changes\nwheels plugin update wheels-api --version=3.0.0\n# Prompts for confirmation due to major version change\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update/#development-updates","title":"Development Updates","text":"<pre><code># Update dev dependency\nwheels plugin update wheels-test-utils --dev\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update/#error-messages","title":"Error Messages","text":""},{"location":"command-line-tools/commands/plugins/plugins-update/#plugin-not-installed","title":"Plugin Not Installed","text":"<pre><code>Error: Plugin 'wheels-auth' is not installed. Use 'wheels plugin install wheels-auth' to install it.\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update/#already-up-to-date","title":"Already Up-to-Date","text":"<pre><code>Plugin is already at the latest version (2.1.0)\nUse --force to reinstall anyway\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update/#version-not-found","title":"Version Not Found","text":"<pre><code>Error: Version '3.0.0' not found for plugin 'wheels-auth'\nAvailable versions: 2.1.0, 2.0.0, 1.9.0\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins-update/#best-practices","title":"Best Practices","text":"<ol> <li>Test First: Update in development before production</li> <li>Read Changelogs: Review breaking changes</li> <li>Backup: Backup before major updates</li> <li>Dependencies: Update dependencies first</li> <li>Incremental: Update one version at a time for major changes</li> </ol>"},{"location":"command-line-tools/commands/plugins/plugins-update/#notes","title":"Notes","text":"<ul> <li>Updates modify box.json dependencies</li> <li>Some plugins may require application restart</li> <li>Configuration files are backed up before update</li> <li>Network connection required</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins-update/#see-also","title":"See Also","text":"<ul> <li>wheels plugin update:all - Update all plugins</li> <li>wheels plugin outdated - Check for updates</li> <li>wheels plugin info - Show plugin details</li> <li>wheels plugin list - List installed plugins</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins/","title":"wheels plugins","text":"<p>Base command for plugin management in Wheels applications.</p>"},{"location":"command-line-tools/commands/plugins/plugins/#synopsis","title":"Synopsis","text":"<pre><code>wheels plugins [subcommand] [options]\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins/#description","title":"Description","text":"<p>The <code>wheels plugins</code> command provides comprehensive plugin management for Wheels applications. It handles plugin discovery, installation, configuration, and lifecycle management.</p>"},{"location":"command-line-tools/commands/plugins/plugins/#subcommands","title":"Subcommands","text":"Command Description <code>list</code> List installed plugins <code>search</code> Search for plugins on ForgeBox <code>info</code> Show detailed plugin information <code>install</code> Install a plugin <code>update</code> Update a specific plugin <code>update:all</code> Update all installed plugins <code>outdated</code> List plugins with available updates <code>remove</code> Remove a plugin <code>init</code> Initialize a new plugin project"},{"location":"command-line-tools/commands/plugins/plugins/#options","title":"Options","text":"Option Description <code>--help</code> Show help information <code>--version</code> Show version information"},{"location":"command-line-tools/commands/plugins/plugins/#direct-usage","title":"Direct Usage","text":"<p>When called without subcommands, displays plugin overview:</p> <pre><code>wheels plugins\n</code></pre> <p>Output: <pre><code>Wheels Plugin Manager\n====================\n\nInstalled Plugins: 5\n\u251c\u2500\u2500 authentication (v2.1.0) - User authentication system\n\u251c\u2500\u2500 pagination (v1.5.2) - Advanced pagination helpers\n\u251c\u2500\u2500 validation (v3.0.1) - Extended validation rules\n\u251c\u2500\u2500 caching (v2.2.0) - Enhanced caching strategies\n\u2514\u2500\u2500 api-tools (v1.8.3) - RESTful API utilities\n\nAvailable Updates: 2\n- validation: v3.0.1 \u2192 v3.1.0\n- api-tools: v1.8.3 \u2192 v2.0.0\n\nRun 'wheels plugins list' for detailed information\n</code></pre></p>"},{"location":"command-line-tools/commands/plugins/plugins/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/plugins/plugins/#show-plugin-overview","title":"Show plugin overview","text":"<pre><code>wheels plugins\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins/#quick-plugin-check","title":"Quick plugin check","text":"<pre><code>wheels plugins --check\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins/#update-all-plugins","title":"Update all plugins","text":"<pre><code>wheels plugins --update-all\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins/#plugin-system-info","title":"Plugin system info","text":"<pre><code>wheels plugins --info\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins/#plugin-system","title":"Plugin System","text":""},{"location":"command-line-tools/commands/plugins/plugins/#plugin-structure","title":"Plugin Structure","text":"<pre><code>/plugins/\n\u251c\u2500\u2500 authentication/\n\u2502   \u251c\u2500\u2500 Authentication.cfc\n\u2502   \u251c\u2500\u2500 config/\n\u2502   \u251c\u2500\u2500 models/\n\u2502   \u251c\u2500\u2500 views/\n\u2502   \u2514\u2500\u2500 plugin.json\n\u251c\u2500\u2500 pagination/\n\u2514\u2500\u2500 ...\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins/#plugin-metadata","title":"Plugin Metadata","text":"<p>Each plugin contains <code>plugin.json</code>: <pre><code>{\n  \"name\": \"authentication\",\n  \"version\": \"2.1.0\",\n  \"description\": \"User authentication system\",\n  \"author\": \"Wheels Community\",\n  \"wheels\": \"&gt;=2.0.0\",\n  \"dependencies\": {\n    \"validation\": \"&gt;=3.0.0\"\n  }\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/plugins/plugins/#plugin-registry","title":"Plugin Registry","text":""},{"location":"command-line-tools/commands/plugins/plugins/#official-registry","title":"Official Registry","text":"<p>Default source for plugins: <pre><code>https://www.forgebox.io/type/cfwheels-plugins/\n</code></pre></p>"},{"location":"command-line-tools/commands/plugins/plugins/#custom-registries","title":"Custom Registries","text":"<p>Configure additional sources: <pre><code>{\n  \"pluginRegistries\": [\n    \"https://www.forgebox.io/type/cfwheels-plugins/\",\n    \"https://company.com/wheels-plugins/\"\n  ]\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/plugins/plugins/#plugin-lifecycle","title":"Plugin Lifecycle","text":""},{"location":"command-line-tools/commands/plugins/plugins/#discovery","title":"Discovery","text":"<pre><code># Search for plugins\nwheels plugins search authentication\n\n# Browse categories\nwheels plugins browse --category=security\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins/#installation","title":"Installation","text":"<pre><code># Install from registry\nwheels plugins install authentication\n\n# Install from GitHub\nwheels plugins install github:user/wheels-plugin\n\n# Install from file\nwheels plugins install ./my-plugin.zip\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins/#configuration","title":"Configuration","text":"<pre><code># Configure plugin\nwheels plugins configure authentication\n\n# View configuration\nwheels plugins config authentication\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins/#updates","title":"Updates","text":"<pre><code># Check for updates\nwheels plugins outdated\n\n# Update specific plugin\nwheels plugins update authentication\n\n# Update all plugins\nwheels plugins update --all\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins/#plugin-development","title":"Plugin Development","text":""},{"location":"command-line-tools/commands/plugins/plugins/#create-plugin","title":"Create Plugin","text":"<pre><code># Generate plugin scaffold\nwheels generate plugin my-plugin\n\n# Plugin structure created:\n# /plugins/my-plugin/\n#   \u251c\u2500\u2500 MyPlugin.cfc\n#   \u251c\u2500\u2500 plugin.json\n#   \u251c\u2500\u2500 config/\n#   \u251c\u2500\u2500 tests/\n#   \u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins/#plugin-api","title":"Plugin API","text":"<pre><code>component extends=\"wheels.Plugin\" {\n\n    function init() {\n        this.version = \"1.0.0\";\n        this.author = \"Your Name\";\n        this.description = \"Plugin description\";\n    }\n\n    function setup() {\n        // Plugin initialization\n    }\n\n    function teardown() {\n        // Plugin cleanup\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins/#environment-support","title":"Environment Support","text":""},{"location":"command-line-tools/commands/plugins/plugins/#environment-specific-plugins","title":"Environment-Specific Plugins","text":"<pre><code>{\n  \"plugins\": {\n    \"production\": [\"caching\", \"monitoring\"],\n    \"development\": [\"debug-toolbar\", \"profiler\"],\n    \"all\": [\"authentication\", \"validation\"]\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins/#conditional-loading","title":"Conditional Loading","text":"<pre><code>// In environment.cfm\nif (get(\"environment\") == \"development\") {\n    addPlugin(\"debug-toolbar\");\n}\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins/#plugin-commands","title":"Plugin Commands","text":"<p>Plugins can register custom commands: <pre><code>// In plugin\nthis.commands = {\n    \"auth:create-user\": \"commands/CreateUser.cfc\",\n    \"auth:reset-password\": \"commands/ResetPassword.cfc\"\n};\n</code></pre></p> <p>Usage: <pre><code>wheels auth:create-user admin@example.com\nwheels auth:reset-password user123\n</code></pre></p>"},{"location":"command-line-tools/commands/plugins/plugins/#dependency-management","title":"Dependency Management","text":""},{"location":"command-line-tools/commands/plugins/plugins/#automatic-resolution","title":"Automatic Resolution","text":"<pre><code># Installs plugin and dependencies\nwheels plugins install api-tools\n# Also installs: validation, serialization\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins/#conflict-resolution","title":"Conflict Resolution","text":"<pre><code># When conflicts exist\nwheels plugins install authentication --resolve=prompt\n</code></pre> <p>Options: - <code>prompt</code>: Ask for each conflict - <code>newest</code>: Use newest version - <code>oldest</code>: Keep existing version</p>"},{"location":"command-line-tools/commands/plugins/plugins/#plugin-storage","title":"Plugin Storage","text":""},{"location":"command-line-tools/commands/plugins/plugins/#global-plugins","title":"Global Plugins","text":"<p>Shared across projects: <pre><code>wheels plugins install authentication --global\n</code></pre></p> <p>Location: <code>~/.wheels/plugins/</code></p>"},{"location":"command-line-tools/commands/plugins/plugins/#project-plugins","title":"Project Plugins","text":"<p>Project-specific: <pre><code>wheels plugins install authentication\n</code></pre></p> <p>Location: <code>/plugins/</code></p>"},{"location":"command-line-tools/commands/plugins/plugins/#security","title":"Security","text":""},{"location":"command-line-tools/commands/plugins/plugins/#plugin-verification","title":"Plugin Verification","text":"<pre><code># Verify plugin signatures\nwheels plugins verify authentication\n\n# Install only verified plugins\nwheels plugins install authentication --verified-only\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins/#permission-control","title":"Permission Control","text":"<pre><code>{\n  \"pluginPermissions\": {\n    \"fileSystem\": [\"read\", \"write\"],\n    \"network\": [\"http\", \"https\"],\n    \"database\": [\"read\", \"write\"]\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/plugins/plugins/#common-issues","title":"Common Issues","text":"<ol> <li> <p>Plugin Not Loading <pre><code>wheels plugins diagnose authentication\n</code></pre></p> </li> <li> <p>Dependency Conflicts <pre><code>wheels plugins deps --tree\n</code></pre></p> </li> <li> <p>Version Incompatibility <pre><code>wheels plugins check-compatibility\n</code></pre></p> </li> </ol>"},{"location":"command-line-tools/commands/plugins/plugins/#best-practices","title":"Best Practices","text":"<ol> <li>Version Lock: Lock plugin versions for production</li> <li>Test Updates: Test in development first</li> <li>Backup: Backup before major updates</li> <li>Documentation: Document custom plugins</li> <li>Security: Verify plugin sources</li> </ol>"},{"location":"command-line-tools/commands/plugins/plugins/#plugin-cache","title":"Plugin Cache","text":""},{"location":"command-line-tools/commands/plugins/plugins/#clear-cache","title":"Clear Cache","text":"<pre><code>wheels plugins cache clear\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins/#rebuild-cache","title":"Rebuild Cache","text":"<pre><code>wheels plugins cache rebuild\n</code></pre>"},{"location":"command-line-tools/commands/plugins/plugins/#notes","title":"Notes","text":"<ul> <li>Plugins are loaded in dependency order</li> <li>Some plugins require application restart</li> <li>Global plugins override project plugins</li> <li>Plugin conflicts are resolved by load order</li> </ul>"},{"location":"command-line-tools/commands/plugins/plugins/#see-also","title":"See Also","text":"<ul> <li>wheels plugin list - List plugins</li> <li>wheels plugin search - Search for plugins</li> <li>wheels plugin info - Show plugin details</li> <li>wheels plugin install - Install plugins</li> <li>wheels plugin update - Update plugins</li> <li>wheels plugin update:all - Update all plugins</li> <li>wheels plugin outdated - Check for updates</li> <li>wheels plugin remove - Remove plugins</li> <li>wheels plugin init - Create new plugin</li> <li>Plugin Development Guide</li> </ul>"},{"location":"command-line-tools/commands/security/security-scan/","title":"security scan","text":"<p>Scans your Wheels application for security vulnerabilities and provides remediation recommendations.</p>"},{"location":"command-line-tools/commands/security/security-scan/#usage","title":"Usage","text":"<pre><code>wheels security scan [path] [--fix] [--report=&lt;format&gt;] [--severity=&lt;level&gt;] [--output=&lt;file&gt;]\n</code></pre>"},{"location":"command-line-tools/commands/security/security-scan/#parameters","title":"Parameters","text":"<ul> <li><code>path</code> - (Optional) Path to scan. Default: current directory (<code>.</code>)</li> <li><code>--fix</code> - (Optional) Attempt to fix issues automatically</li> <li><code>--report</code> - (Optional) Report format: <code>console</code>, <code>json</code>, <code>html</code>. Default: <code>console</code></li> <li><code>--severity</code> - (Optional) Minimum severity to report: <code>low</code>, <code>medium</code>, <code>high</code>, <code>critical</code>. Default: <code>medium</code></li> <li><code>--output</code> - (Optional) Output file for report</li> </ul>"},{"location":"command-line-tools/commands/security/security-scan/#description","title":"Description","text":"<p>The <code>security scan</code> command performs comprehensive security analysis of your Wheels application, checking for:</p> <ul> <li>SQL injection vulnerabilities</li> <li>Cross-site scripting (XSS) risks</li> <li>Cross-site request forgery (CSRF) issues</li> <li>Insecure direct object references</li> <li>Security misconfigurations</li> <li>Outdated dependencies with known vulnerabilities</li> <li>Weak authentication patterns</li> <li>Information disclosure risks</li> </ul>"},{"location":"command-line-tools/commands/security/security-scan/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/security/security-scan/#standard-security-scan","title":"Standard security scan","text":"<pre><code>wheels security scan\n</code></pre>"},{"location":"command-line-tools/commands/security/security-scan/#scan-with-auto-fix","title":"Scan with auto-fix","text":"<pre><code>wheels security scan --fix\n</code></pre>"},{"location":"command-line-tools/commands/security/security-scan/#generate-html-security-report","title":"Generate HTML security report","text":"<pre><code>wheels security scan --report=html --output=security-audit.html\n</code></pre>"},{"location":"command-line-tools/commands/security/security-scan/#scan-specific-directory-with-high-severity-only","title":"Scan specific directory with high severity only","text":"<pre><code>wheels security scan app/models --severity=high\n</code></pre>"},{"location":"command-line-tools/commands/security/security-scan/#json-report-for-cicd-integration","title":"JSON report for CI/CD integration","text":"<pre><code>wheels security scan --report=json --output=scan-results.json\n</code></pre>"},{"location":"command-line-tools/commands/security/security-scan/#severity-levels","title":"Severity Levels","text":"<p>The <code>--severity</code> parameter filters which issues are reported:</p>"},{"location":"command-line-tools/commands/security/security-scan/#low","title":"Low","text":"<ul> <li>Code style issues that could lead to vulnerabilities</li> <li>Missing best practices</li> <li>Informational findings</li> </ul>"},{"location":"command-line-tools/commands/security/security-scan/#medium-default","title":"Medium (Default)","text":"<ul> <li>Potential security issues requiring review</li> <li>Missing security headers</li> <li>Weak configurations</li> </ul>"},{"location":"command-line-tools/commands/security/security-scan/#high","title":"High","text":"<ul> <li>Confirmed vulnerabilities with moderate impact</li> <li>Authentication/authorization issues</li> <li>Data validation problems</li> </ul>"},{"location":"command-line-tools/commands/security/security-scan/#critical","title":"Critical","text":"<ul> <li>Severe vulnerabilities requiring immediate attention</li> <li>SQL injection risks</li> <li>Remote code execution possibilities</li> </ul>"},{"location":"command-line-tools/commands/security/security-scan/#output","title":"Output","text":"<pre><code>Security Scan Results\n====================\n\nScanning application...\n\u2713 Configuration files\n\u2713 Controllers (15 files)\n\u2713 Models (8 files)\n\u2713 Views (23 files)\n\u2717 Dependencies (2 issues)\n\nCRITICAL: 1 issue found\n-----------------------\n1. SQL Injection Risk\n   File: /app/models/User.cfc\n   Line: 45\n   Code: findOne(where=\"id = #params.id#\")\n   Fix: Use parameterized queries\n\nHIGH: 3 issues found\n--------------------\n1. XSS Vulnerability\n   File: /app/views/users/show.cfm\n   Line: 12\n   Code: &lt;h1&gt;#user.name#&lt;/h1&gt;\n   Fix: Use htmlEditFormat() or encodeForHTML()\n\n2. Missing CSRF Token\n   File: /app/views/users/edit.cfm\n   Line: 8\n   Fix: Add authenticityToken() to form\n\n3. Outdated Dependency\n   Package: jackson-databind\n   Version: 2.9.0 (CVE-2019-12345)\n   Fix: Update to version 2.14.0 or higher\n\nMEDIUM: 5 issues found\nLOW: 12 issues found\n\nSummary:\n- Critical: 1\n- High: 3\n- Medium: 5\n- Low: 12\n- Total: 21 vulnerabilities\n\nRecommended Actions:\n1. Fix all CRITICAL issues immediately\n2. Address HIGH issues before deployment\n3. Plan remediation for MEDIUM issues\n4. Review LOW issues for false positives\n</code></pre>"},{"location":"command-line-tools/commands/security/security-scan/#auto-fix-feature","title":"Auto-Fix Feature","text":"<p>The <code>--fix</code> flag automatically resolves safe issues:</p> <pre><code>wheels security scan --fix\n\nAuto-fixing security issues...\n\u2713 Added htmlEditFormat() to 3 output statements\n\u2713 Added CSRF tokens to 2 forms\n\u2713 Updated .htaccess security headers\n\u2717 Cannot auto-fix: SQL injection (requires manual review)\n\nFixed 5 of 8 fixable issues\nManual intervention required for 3 issues\n</code></pre>"},{"location":"command-line-tools/commands/security/security-scan/#report-formats","title":"Report Formats","text":""},{"location":"command-line-tools/commands/security/security-scan/#html-report","title":"HTML Report","text":"<p><pre><code>wheels security scan --report=security-report.html\n</code></pre> Generates interactive HTML report with: - Executive summary - Detailed findings with code snippets - Remediation steps - Compliance mapping (OWASP, CWE)</p>"},{"location":"command-line-tools/commands/security/security-scan/#json-report","title":"JSON Report","text":"<p><pre><code>wheels security scan --report=security-report.json\n</code></pre> Machine-readable format for CI/CD integration</p>"},{"location":"command-line-tools/commands/security/security-scan/#integration","title":"Integration","text":""},{"location":"command-line-tools/commands/security/security-scan/#cicd-pipeline","title":"CI/CD Pipeline","text":"<pre><code># Example GitHub Actions\n- name: Security Scan\n  run: |\n    wheels security scan --severity=medium --report=json --output=scan.json\n    if [ $? -ne 0 ]; then\n      echo \"Security vulnerabilities found\"\n      exit 1\n    fi\n</code></pre>"},{"location":"command-line-tools/commands/security/security-scan/#pre-commit-hook","title":"Pre-commit Hook","text":"<pre><code>#!/bin/bash\nwheels security scan --severity=high\nif [ $? -ne 0 ]; then\n  echo \"Commit blocked: Security issues detected\"\n  exit 1\nfi\n</code></pre>"},{"location":"command-line-tools/commands/security/security-scan/#notes","title":"Notes","text":"<ul> <li>Scans are performed locally; no code is sent externally</li> <li>False positives can be suppressed with inline comments</li> <li>Regular scanning is recommended as part of development workflow</li> <li>Keep scan rules updated with <code>wheels deps update</code></li> <li>Some fixes require manual review to ensure functionality</li> </ul>"},{"location":"command-line-tools/commands/security/security/","title":"wheels security","text":"<p>Base command for security management and vulnerability scanning.</p>"},{"location":"command-line-tools/commands/security/security/#synopsis","title":"Synopsis","text":"<pre><code>wheels security [subcommand] [options]\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#description","title":"Description","text":"<p>The <code>wheels security</code> command provides comprehensive security tools for Wheels applications. It scans for vulnerabilities, checks security configurations, and helps implement security best practices.</p>"},{"location":"command-line-tools/commands/security/security/#subcommands","title":"Subcommands","text":"Command Description <code>scan</code> Scan for security vulnerabilities"},{"location":"command-line-tools/commands/security/security/#options","title":"Options","text":"Option Description <code>--help</code> Show help information <code>--version</code> Show version information"},{"location":"command-line-tools/commands/security/security/#direct-usage","title":"Direct Usage","text":"<p>When called without subcommands, performs a quick security check:</p> <pre><code>wheels security\n</code></pre> <p>Output: <pre><code>Wheels Security Overview\n=======================\n\nLast Scan: 2024-01-15 10:30:45\nStatus: 3 issues found\n\nCritical: 0\nHigh:     1 \nMedium:   2\nLow:      0\n\nVulnerabilities:\n- [HIGH] SQL Injection risk in UserModel.cfc:45\n- [MEDIUM] Missing CSRF protection on /admin routes\n- [MEDIUM] Outdated dependency: cfml-jwt (2.1.0 \u2192 3.0.0)\n\nRun 'wheels security scan' for detailed analysis\n</code></pre></p>"},{"location":"command-line-tools/commands/security/security/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/security/security/#quick-security-check","title":"Quick security check","text":"<pre><code>wheels security\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#check-security-status","title":"Check security status","text":"<pre><code>wheels security --status\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#generate-security-report","title":"Generate security report","text":"<pre><code>wheels security --report\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#check-specific-area","title":"Check specific area","text":"<pre><code>wheels security --check=dependencies\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#security-areas","title":"Security Areas","text":""},{"location":"command-line-tools/commands/security/security/#code-security","title":"Code Security","text":"<ul> <li>SQL injection detection</li> <li>XSS vulnerability scanning</li> <li>Path traversal checks</li> <li>Command injection risks</li> </ul>"},{"location":"command-line-tools/commands/security/security/#configuration","title":"Configuration","text":"<ul> <li>Security headers</li> <li>CORS settings</li> <li>Authentication config</li> <li>Session management</li> </ul>"},{"location":"command-line-tools/commands/security/security/#dependencies","title":"Dependencies","text":"<ul> <li>Vulnerable packages</li> <li>Outdated libraries</li> <li>License compliance</li> <li>Supply chain risks</li> </ul>"},{"location":"command-line-tools/commands/security/security/#infrastructure","title":"Infrastructure","text":"<ul> <li>SSL/TLS configuration</li> <li>Port exposure</li> <li>File permissions</li> <li>Environment secrets</li> </ul>"},{"location":"command-line-tools/commands/security/security/#security-configuration","title":"Security Configuration","text":"<p>Configure via <code>.wheels-security.json</code>:</p> <pre><code>{\n  \"security\": {\n    \"scanOnCommit\": true,\n    \"autoFix\": false,\n    \"severity\": \"medium\",\n    \"ignore\": [\n      {\n        \"rule\": \"sql-injection\",\n        \"file\": \"legacy/*.cfc\",\n        \"reason\": \"Legacy code, sandboxed\"\n      }\n    ],\n    \"checks\": {\n      \"dependencies\": true,\n      \"code\": true,\n      \"configuration\": true,\n      \"infrastructure\": true\n    }\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#security-policies","title":"Security Policies","text":""},{"location":"command-line-tools/commands/security/security/#define-policies","title":"Define Policies","text":"<p>Create <code>.wheels-security-policy.yml</code>:</p> <pre><code>policies:\n  - name: \"No Direct SQL\"\n    description: \"Prevent direct SQL execution\"\n    severity: \"high\"\n    rules:\n      - pattern: \"queryExecute\\\\(.*\\\\$.*\\\\)\"\n        message: \"Use parameterized queries\"\n\n  - name: \"Secure Headers\"\n    description: \"Require security headers\"\n    severity: \"medium\"\n    headers:\n      - \"X-Frame-Options\"\n      - \"X-Content-Type-Options\"\n      - \"Content-Security-Policy\"\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#policy-enforcement","title":"Policy Enforcement","text":"<pre><code># Check policy compliance\nwheels security --check-policy\n\n# Enforce policies (fail on violation)\nwheels security --enforce-policy\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#integration","title":"Integration","text":""},{"location":"command-line-tools/commands/security/security/#git-hooks","title":"Git Hooks","text":"<p><code>.git/hooks/pre-commit</code>: <pre><code>#!/bin/bash\nwheels security scan --severity=high --fail-on-issues\n</code></pre></p>"},{"location":"command-line-tools/commands/security/security/#cicd-pipeline","title":"CI/CD Pipeline","text":"<pre><code>- name: Security scan\n  run: |\n    wheels security scan --format=sarif\n    wheels security --upload-results\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#ide-integration","title":"IDE Integration","text":"<pre><code>{\n  \"wheels.security\": {\n    \"realTimeScan\": true,\n    \"showInlineWarnings\": true\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#security-headers","title":"Security Headers","text":""},{"location":"command-line-tools/commands/security/security/#check-headers","title":"Check Headers","text":"<pre><code>wheels security headers --check\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#configure-headers","title":"Configure Headers","text":"<pre><code>// Application.cfc\nthis.securityHeaders = {\n    \"X-Frame-Options\": \"DENY\",\n    \"X-Content-Type-Options\": \"nosniff\",\n    \"Strict-Transport-Security\": \"max-age=31536000\",\n    \"Content-Security-Policy\": \"default-src 'self'\"\n};\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#dependency-scanning","title":"Dependency Scanning","text":""},{"location":"command-line-tools/commands/security/security/#check-dependencies","title":"Check Dependencies","text":"<pre><code>wheels security deps\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#update-vulnerable-dependencies","title":"Update Vulnerable Dependencies","text":"<pre><code>wheels security deps --fix\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#license-compliance","title":"License Compliance","text":"<pre><code>wheels security licenses --allowed=MIT,Apache-2.0\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#security-fixes","title":"Security Fixes","text":""},{"location":"command-line-tools/commands/security/security/#automatic-fixes","title":"Automatic Fixes","text":"<pre><code># Fix auto-fixable issues\nwheels security fix\n\n# Fix specific issue types\nwheels security fix --type=headers,csrf\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#manual-fixes","title":"Manual Fixes","text":"<p>The command provides guidance: <pre><code>Issue: SQL Injection Risk\nFile: /models/User.cfc:45\nFix: Replace direct SQL with parameterized query\n\nCurrent:\nquery = \"SELECT * FROM users WHERE id = #arguments.id#\";\n\nSuggested:\nqueryExecute(\n    \"SELECT * FROM users WHERE id = :id\",\n    { id: arguments.id }\n);\n</code></pre></p>"},{"location":"command-line-tools/commands/security/security/#security-reports","title":"Security Reports","text":""},{"location":"command-line-tools/commands/security/security/#generate-reports","title":"Generate Reports","text":"<pre><code># HTML report\nwheels security scan --report=html\n\n# JSON report for tools\nwheels security scan --format=json\n\n# SARIF for GitHub\nwheels security scan --format=sarif\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#report-contents","title":"Report Contents","text":"<ul> <li>Executive summary</li> <li>Detailed findings</li> <li>Remediation steps</li> <li>Compliance status</li> <li>Trend analysis</li> </ul>"},{"location":"command-line-tools/commands/security/security/#compliance","title":"Compliance","text":""},{"location":"command-line-tools/commands/security/security/#standards","title":"Standards","text":"<p>Check compliance with standards: <pre><code># OWASP Top 10\nwheels security compliance --standard=owasp-top10\n\n# PCI DSS\nwheels security compliance --standard=pci-dss\n\n# Custom standard\nwheels security compliance --standard=./company-standard.yml\n</code></pre></p>"},{"location":"command-line-tools/commands/security/security/#security-monitoring","title":"Security Monitoring","text":""},{"location":"command-line-tools/commands/security/security/#continuous-monitoring","title":"Continuous Monitoring","text":"<pre><code># Start monitoring\nwheels security monitor --start\n\n# Check monitor status\nwheels security monitor --status\n\n# View alerts\nwheels security monitor --alerts\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#alert-configuration","title":"Alert Configuration","text":"<pre><code>{\n  \"monitoring\": {\n    \"alerts\": {\n      \"email\": \"security@example.com\",\n      \"slack\": \"https://hooks.slack.com/...\",\n      \"severity\": \"high\"\n    }\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#security-best-practices","title":"Security Best Practices","text":"<ol> <li>Regular Scans: Schedule automated scans</li> <li>Fix Quickly: Address high-severity issues immediately</li> <li>Update Dependencies: Keep libraries current</li> <li>Security Training: Educate development team</li> <li>Defense in Depth: Layer security measures</li> </ol>"},{"location":"command-line-tools/commands/security/security/#common-vulnerabilities","title":"Common Vulnerabilities","text":""},{"location":"command-line-tools/commands/security/security/#sql-injection","title":"SQL Injection","text":"<pre><code>// Vulnerable\nquery = \"SELECT * FROM users WHERE id = #url.id#\";\n\n// Secure\nqueryExecute(\n    \"SELECT * FROM users WHERE id = :id\",\n    { id: { value: url.id, cfsqltype: \"integer\" } }\n);\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#xss","title":"XSS","text":"<pre><code>// Vulnerable\n&lt;cfoutput&gt;#form.userInput#&lt;/cfoutput&gt;\n\n// Secure\n&lt;cfoutput&gt;#encodeForHTML(form.userInput)#&lt;/cfoutput&gt;\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#emergency-response","title":"Emergency Response","text":""},{"location":"command-line-tools/commands/security/security/#incident-detection","title":"Incident Detection","text":"<pre><code># Check for compromise indicators\nwheels security incident --check\n\n# Generate incident report\nwheels security incident --report\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#lockdown-mode","title":"Lockdown Mode","text":"<pre><code># Enable security lockdown\nwheels security lockdown --enable\n\n# Disable after resolution\nwheels security lockdown --disable\n</code></pre>"},{"location":"command-line-tools/commands/security/security/#notes","title":"Notes","text":"<ul> <li>Security scans may take time on large codebases</li> <li>Some checks require running application</li> <li>False positives should be documented</li> <li>Regular updates improve detection accuracy</li> </ul>"},{"location":"command-line-tools/commands/security/security/#see-also","title":"See Also","text":"<ul> <li>wheels security scan - Detailed security scanning</li> <li>wheels analyze security - Security analysis (deprecated)</li> <li>Security Best Practices</li> <li>OWASP Guidelines</li> </ul>"},{"location":"command-line-tools/commands/server/server-log/","title":"wheels server log","text":"<p>Tail the Wheels development server logs.</p>"},{"location":"command-line-tools/commands/server/server-log/#synopsis","title":"Synopsis","text":"<pre><code>wheels server log [options]\n</code></pre>"},{"location":"command-line-tools/commands/server/server-log/#description","title":"Description","text":"<p>The <code>wheels server log</code> command displays and follows the server log output, making it easy to monitor your application's behavior and debug issues.</p>"},{"location":"command-line-tools/commands/server/server-log/#options","title":"Options","text":""},{"location":"command-line-tools/commands/server/server-log/#name","title":"<code>name</code>","text":"<ul> <li>Type: String</li> <li>Description: Name of the server whose logs to display</li> <li>Example: <code>wheels server log name=myapp</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-log/#-follow","title":"<code>--follow</code>","text":"<ul> <li>Type: Boolean flag</li> <li>Default: <code>true</code></li> <li>Description: Follow log output (like tail -f)</li> <li>Example: <code>wheels server log --follow</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-log/#lines","title":"<code>lines</code>","text":"<ul> <li>Type: Numeric</li> <li>Default: <code>50</code></li> <li>Description: Number of lines to show initially</li> <li>Example: <code>wheels server log lines=100</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-log/#-debug","title":"<code>--debug</code>","text":"<ul> <li>Type: Boolean flag</li> <li>Description: Show debug-level logging</li> <li>Example: <code>wheels server log --debug</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-log/#examples","title":"Examples","text":"<pre><code># Follow logs (default behavior)\nwheels server log\n\n# Show last 100 lines\nwheels server log lines=100\n\n# Show logs without following\nwheels server log --follow=false\n\n# Enable debug logging\nwheels server log --debug\n</code></pre>"},{"location":"command-line-tools/commands/server/server-log/#log-information","title":"Log Information","text":"<p>The logs typically include: - HTTP request/response information - Application errors and stack traces - Database queries (if enabled) - Custom application logging - Server startup/shutdown messages</p>"},{"location":"command-line-tools/commands/server/server-log/#keyboard-shortcuts","title":"Keyboard Shortcuts","text":"<ul> <li>Ctrl+C - Stop following logs and return to command prompt</li> <li>Ctrl+L - Clear the screen (while following)</li> </ul>"},{"location":"command-line-tools/commands/server/server-log/#notes","title":"Notes","text":"<ul> <li>By default, the command follows log output (similar to <code>tail -f</code>)</li> <li>Use <code>--debug</code> to see more detailed logging information</li> <li>The number of initial lines shown can be customized with the <code>lines</code> parameter</li> <li>Logs are stored in the CommandBox server's log directory</li> </ul>"},{"location":"command-line-tools/commands/server/server-log/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels server start</code> - Start the server</li> <li><code>wheels server status</code> - Check server status</li> <li><code>wheels test debug</code> - Debug mode for tests</li> </ul>"},{"location":"command-line-tools/commands/server/server-log/#see-also","title":"See Also","text":"<ul> <li>CommandBox Logging Documentation</li> <li>Wheels Debugging Guide</li> </ul>"},{"location":"command-line-tools/commands/server/server-open/","title":"wheels server open","text":"<p>Open the Wheels application in a web browser.</p>"},{"location":"command-line-tools/commands/server/server-open/#synopsis","title":"Synopsis","text":"<pre><code>wheels server open [path] [options]\n</code></pre>"},{"location":"command-line-tools/commands/server/server-open/#description","title":"Description","text":"<p>The <code>wheels server open</code> command opens your Wheels application in a web browser. It automatically detects the server URL and can open specific paths within your application.</p>"},{"location":"command-line-tools/commands/server/server-open/#arguments","title":"Arguments","text":""},{"location":"command-line-tools/commands/server/server-open/#path","title":"<code>path</code>","text":"<ul> <li>Type: String</li> <li>Default: <code>/</code></li> <li>Description: URL path to open (e.g., <code>/admin</code>, <code>/users</code>)</li> <li>Example: <code>wheels server open /admin</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-open/#options","title":"Options","text":""},{"location":"command-line-tools/commands/server/server-open/#-browser","title":"<code>--browser</code>","text":"<ul> <li>Type: String</li> <li>Description: Specific browser to use (chrome, firefox, safari, etc.)</li> <li>Example: <code>wheels server open --browser=firefox</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-open/#name","title":"<code>name</code>","text":"<ul> <li>Type: String</li> <li>Description: Name of the server to open</li> <li>Example: <code>wheels server open name=myapp</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-open/#examples","title":"Examples","text":"<pre><code># Open application homepage\nwheels server open\n\n# Open admin panel\nwheels server open /admin\n\n# Open users listing\nwheels server open /users\n\n# Open in specific browser\nwheels server open --browser=chrome\n\n# Open path in Firefox\nwheels server open /dashboard --browser=firefox\n</code></pre>"},{"location":"command-line-tools/commands/server/server-open/#supported-browsers","title":"Supported Browsers","text":"<p>The <code>--browser</code> option supports: - <code>chrome</code> - Google Chrome - <code>firefox</code> - Mozilla Firefox - <code>safari</code> - Safari (macOS) - <code>edge</code> - Microsoft Edge - <code>opera</code> - Opera</p> <p>If no browser is specified, your system's default browser is used.</p>"},{"location":"command-line-tools/commands/server/server-open/#notes","title":"Notes","text":"<ul> <li>The command first checks if the server is running before attempting to open</li> <li>If the server isn't running, it will suggest starting it first</li> <li>The path argument should start with <code>/</code> for proper URL construction</li> <li>The browser must be installed on your system to use the <code>--browser</code> option</li> </ul>"},{"location":"command-line-tools/commands/server/server-open/#error-messages","title":"Error Messages","text":""},{"location":"command-line-tools/commands/server/server-open/#server-doesnt-appear-to-be-running","title":"\"Server doesn't appear to be running\"","text":"<p>The server must be started before you can open it in a browser: <pre><code>wheels server start\nwheels server open\n</code></pre></p>"},{"location":"command-line-tools/commands/server/server-open/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels server start</code> - Start the server</li> <li><code>wheels server status</code> - Check if server is running</li> </ul>"},{"location":"command-line-tools/commands/server/server-open/#see-also","title":"See Also","text":"<ul> <li>CommandBox Browser Integration</li> </ul>"},{"location":"command-line-tools/commands/server/server-restart/","title":"wheels server restart","text":"<p>Restart the Wheels development server and reload the application.</p>"},{"location":"command-line-tools/commands/server/server-restart/#synopsis","title":"Synopsis","text":"<pre><code>wheels server restart [options]\n</code></pre>"},{"location":"command-line-tools/commands/server/server-restart/#description","title":"Description","text":"<p>The <code>wheels server restart</code> command restarts a running CommandBox server and automatically reloads the Wheels application. This ensures that both server-level and application-level changes are picked up.</p>"},{"location":"command-line-tools/commands/server/server-restart/#options","title":"Options","text":""},{"location":"command-line-tools/commands/server/server-restart/#name","title":"<code>name</code>","text":"<ul> <li>Type: String</li> <li>Description: Name of the server to restart</li> <li>Example: <code>wheels server restart name=myapp</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-restart/#-force","title":"<code>--force</code>","text":"<ul> <li>Type: Boolean flag</li> <li>Description: Force restart even if server appears stopped</li> <li>Example: <code>wheels server restart --force</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-restart/#examples","title":"Examples","text":"<pre><code># Restart the default server\nwheels server restart\n\n# Restart a specific named server\nwheels server restart name=myapp\n\n# Force restart\nwheels server restart --force\n</code></pre>"},{"location":"command-line-tools/commands/server/server-restart/#what-it-does","title":"What It Does","text":"<ol> <li>Stops the running server</li> <li>Starts the server again with the same configuration</li> <li>Automatically runs <code>wheels reload</code> to refresh the application</li> <li>Confirms successful restart</li> </ol>"},{"location":"command-line-tools/commands/server/server-restart/#notes","title":"Notes","text":"<ul> <li>This command is particularly useful when you've made changes to server configuration or installed new dependencies</li> <li>The automatic application reload ensures that Wheels picks up any code changes</li> <li>If the reload fails, you may need to manually refresh your browser</li> </ul>"},{"location":"command-line-tools/commands/server/server-restart/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels server start</code> - Start the server</li> <li><code>wheels server stop</code> - Stop the server</li> <li><code>wheels server status</code> - Check server status</li> <li><code>wheels reload</code> - Reload just the application</li> </ul>"},{"location":"command-line-tools/commands/server/server-restart/#see-also","title":"See Also","text":"<ul> <li>CommandBox Server Documentation</li> </ul>"},{"location":"command-line-tools/commands/server/server-start/","title":"wheels server start","text":"<p>Start the Wheels development server with enhanced checks and features.</p>"},{"location":"command-line-tools/commands/server/server-start/#synopsis","title":"Synopsis","text":"<pre><code>wheels server start [options]\n</code></pre>"},{"location":"command-line-tools/commands/server/server-start/#description","title":"Description","text":"<p>The <code>wheels server start</code> command starts a CommandBox server with Wheels-specific enhancements. It checks that you're in a valid Wheels application directory before starting and provides helpful error messages if not.</p> <p>This command wraps CommandBox's native <code>server start</code> functionality while adding: - Validation that the current directory is a Wheels application - Automatic detection of existing running servers - Wheels-specific configuration suggestions - Integration with Wheels application context</p>"},{"location":"command-line-tools/commands/server/server-start/#options","title":"Options","text":""},{"location":"command-line-tools/commands/server/server-start/#port","title":"<code>port</code>","text":"<ul> <li>Type: Numeric</li> <li>Description: Port number to start server on</li> <li>Example: <code>wheels server start port=8080</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-start/#host","title":"<code>host</code>","text":"<ul> <li>Type: String</li> <li>Default: <code>127.0.0.1</code></li> <li>Description: Host/IP address to bind server to</li> <li>Example: <code>wheels server start host=0.0.0.0</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-start/#-rewritesenable","title":"<code>--rewritesEnable</code>","text":"<ul> <li>Type: Boolean flag</li> <li>Description: Enable URL rewriting for clean URLs</li> <li>Example: <code>wheels server start --rewritesEnable</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-start/#openbrowser","title":"<code>openbrowser</code>","text":"<ul> <li>Type: Boolean</li> <li>Default: <code>true</code></li> <li>Description: Open browser after starting server</li> <li>Example: <code>wheels server start openbrowser=false</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-start/#directory","title":"<code>directory</code>","text":"<ul> <li>Type: String</li> <li>Default: Current working directory</li> <li>Description: Directory to serve</li> <li>Example: <code>wheels server start directory=/path/to/app</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-start/#name","title":"<code>name</code>","text":"<ul> <li>Type: String</li> <li>Description: Name for the server instance</li> <li>Example: <code>wheels server start name=myapp</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-start/#-force","title":"<code>--force</code>","text":"<ul> <li>Type: Boolean flag</li> <li>Description: Force start even if server is already running</li> <li>Example: <code>wheels server start --force</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-start/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/server/server-start/#basic-usage","title":"Basic Usage","text":"<pre><code># Start server with defaults\nwheels server start\n\n# Start on specific port\nwheels server start port=3000\n\n# Start without opening browser\nwheels server start openbrowser=false\n</code></pre>"},{"location":"command-line-tools/commands/server/server-start/#advanced-usage","title":"Advanced Usage","text":"<pre><code># Start with multiple options\nwheels server start port=8080 host=0.0.0.0 --rewritesEnable\n\n# Start with custom name\nwheels server start name=myapp port=8080\n\n# Force restart if already running\nwheels server start --force\n</code></pre>"},{"location":"command-line-tools/commands/server/server-start/#notes","title":"Notes","text":"<ul> <li>The command validates that the current directory contains a Wheels application by checking for <code>/vendor/wheels</code>, <code>/config</code>, and <code>/app</code> directories</li> <li>If a server is already running, use <code>--force</code> to start anyway or <code>wheels server restart</code> to restart</li> <li>After starting, the command displays helpful information about other server commands</li> <li>The server configuration can also be managed through <code>server.json</code> file</li> </ul>"},{"location":"command-line-tools/commands/server/server-start/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels server stop</code> - Stop the server</li> <li><code>wheels server restart</code> - Restart the server</li> <li><code>wheels server status</code> - Check server status</li> <li><code>wheels server log</code> - View server logs</li> <li><code>wheels server open</code> - Open in browser</li> </ul>"},{"location":"command-line-tools/commands/server/server-start/#see-also","title":"See Also","text":"<ul> <li>CommandBox Server Documentation</li> <li>Wheels Configuration Guide</li> </ul>"},{"location":"command-line-tools/commands/server/server-status/","title":"wheels server status","text":"<p>Show detailed status of the Wheels development server.</p>"},{"location":"command-line-tools/commands/server/server-status/#synopsis","title":"Synopsis","text":"<pre><code>wheels server status [options]\n</code></pre>"},{"location":"command-line-tools/commands/server/server-status/#description","title":"Description","text":"<p>The <code>wheels server status</code> command displays the current status of your CommandBox server along with Wheels-specific information. It provides more context than the standard server status command.</p>"},{"location":"command-line-tools/commands/server/server-status/#options","title":"Options","text":""},{"location":"command-line-tools/commands/server/server-status/#name","title":"<code>name</code>","text":"<ul> <li>Type: String</li> <li>Description: Name of the server to check</li> <li>Example: <code>wheels server status name=myapp</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-status/#-json","title":"<code>--json</code>","text":"<ul> <li>Type: Boolean flag</li> <li>Description: Output status in JSON format</li> <li>Example: <code>wheels server status --json</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-status/#-verbose","title":"<code>--verbose</code>","text":"<ul> <li>Type: Boolean flag</li> <li>Description: Show detailed server information</li> <li>Example: <code>wheels server status --verbose</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-status/#examples","title":"Examples","text":"<pre><code># Check default server status\nwheels server status\n\n# Check specific server\nwheels server status name=myapp\n\n# Get JSON output for scripting\nwheels server status --json\n\n# Show verbose details\nwheels server status --verbose\n</code></pre>"},{"location":"command-line-tools/commands/server/server-status/#output-information","title":"Output Information","text":"<p>When the server is running, displays: - Server running status - URL and port information - Wheels framework version - Application root directory - Quick action suggestions</p> <p>Example output: <pre><code>Wheels Server Status\n===================\n\nStatus: Running\nURL: http://127.0.0.1:60000\nPID: 12345\n\nWheels Application Info:\n  Wheels Version: 2.5.0\n  Application Root: /Users/you/myapp\n\nQuick Actions:\n  wheels server open     - Open in browser\n  wheels server log      - View logs\n  wheels reload          - Reload application\n</code></pre></p>"},{"location":"command-line-tools/commands/server/server-status/#notes","title":"Notes","text":"<ul> <li>The command enhances CommandBox's native status with Wheels-specific information</li> <li>Use <code>--json</code> format when integrating with scripts or other tools</li> <li>The verbose flag shows additional server configuration details</li> </ul>"},{"location":"command-line-tools/commands/server/server-status/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels server start</code> - Start the server</li> <li><code>wheels server stop</code> - Stop the server</li> <li><code>wheels server log</code> - View server logs</li> </ul>"},{"location":"command-line-tools/commands/server/server-status/#see-also","title":"See Also","text":"<ul> <li>CommandBox Server Documentation</li> </ul>"},{"location":"command-line-tools/commands/server/server-stop/","title":"wheels server stop","text":"<p>Stop the Wheels development server.</p>"},{"location":"command-line-tools/commands/server/server-stop/#synopsis","title":"Synopsis","text":"<pre><code>wheels server stop [options]\n</code></pre>"},{"location":"command-line-tools/commands/server/server-stop/#description","title":"Description","text":"<p>The <code>wheels server stop</code> command stops a running CommandBox server. It provides a simple way to shut down your development server cleanly.</p>"},{"location":"command-line-tools/commands/server/server-stop/#options","title":"Options","text":""},{"location":"command-line-tools/commands/server/server-stop/#name","title":"<code>name</code>","text":"<ul> <li>Type: String</li> <li>Description: Name of the server to stop (if multiple servers are running)</li> <li>Example: <code>wheels server stop name=myapp</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-stop/#-force","title":"<code>--force</code>","text":"<ul> <li>Type: Boolean flag</li> <li>Description: Force stop all running servers</li> <li>Example: <code>wheels server stop --force</code></li> </ul>"},{"location":"command-line-tools/commands/server/server-stop/#examples","title":"Examples","text":"<pre><code># Stop the default server\nwheels server stop\n\n# Stop a specific named server\nwheels server stop name=myapp\n\n# Force stop all servers\nwheels server stop --force\n</code></pre>"},{"location":"command-line-tools/commands/server/server-stop/#notes","title":"Notes","text":"<ul> <li>If no server name is specified, stops the server in the current directory</li> <li>Use <code>--force</code> to stop all running servers at once</li> <li>The command will confirm when the server has been stopped successfully</li> </ul>"},{"location":"command-line-tools/commands/server/server-stop/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels server start</code> - Start the server</li> <li><code>wheels server restart</code> - Restart the server</li> <li><code>wheels server status</code> - Check server status</li> </ul>"},{"location":"command-line-tools/commands/server/server-stop/#see-also","title":"See Also","text":"<ul> <li>CommandBox Server Documentation</li> </ul>"},{"location":"command-line-tools/commands/server/server/","title":"wheels server","text":"<p>Manage the Wheels development server with enhanced functionality.</p>"},{"location":"command-line-tools/commands/server/server/#synopsis","title":"Synopsis","text":"<pre><code>wheels server [subcommand] [options]\n</code></pre>"},{"location":"command-line-tools/commands/server/server/#description","title":"Description","text":"<p>The <code>wheels server</code> command provides a suite of server management tools that wrap CommandBox's native server functionality with Wheels-specific enhancements. These commands add validation, helpful error messages, and integration with the Wheels framework.</p>"},{"location":"command-line-tools/commands/server/server/#available-subcommands","title":"Available Subcommands","text":"<ul> <li><code>start</code> - Start the development server</li> <li><code>stop</code> - Stop the development server</li> <li><code>restart</code> - Restart the development server</li> <li><code>status</code> - Show server status</li> <li><code>log</code> - Tail server logs</li> <li><code>open</code> - Open application in browser</li> </ul>"},{"location":"command-line-tools/commands/server/server/#key-features","title":"Key Features","text":""},{"location":"command-line-tools/commands/server/server/#wheels-application-validation","title":"Wheels Application Validation","text":"<p>All server commands check that you're working in a valid Wheels application directory before executing. This prevents common errors and provides helpful guidance.</p>"},{"location":"command-line-tools/commands/server/server/#enhanced-status-information","title":"Enhanced Status Information","text":"<p>When checking server status, the commands also display: - Wheels framework version - Application root directory - Quick action suggestions</p>"},{"location":"command-line-tools/commands/server/server/#integrated-restart","title":"Integrated Restart","text":"<p>The <code>restart</code> command not only restarts the server but also reloads the Wheels application, ensuring your changes are picked up.</p>"},{"location":"command-line-tools/commands/server/server/#smart-browser-opening","title":"Smart Browser Opening","text":"<p>The <code>open</code> command can open specific paths in your application and works with your preferred browser.</p>"},{"location":"command-line-tools/commands/server/server/#examples","title":"Examples","text":"<pre><code># Display available server commands\nwheels server\n\n# Start server on port 8080\nwheels server start port=8080\n\n# Check if server is running\nwheels server status\n\n# Tail the server logs\nwheels server log\n\n# Open admin panel in browser\nwheels server open /admin\n</code></pre>"},{"location":"command-line-tools/commands/server/server/#configuration","title":"Configuration","text":"<p>Server settings can be configured through:</p> <ol> <li>Command line options - Pass options directly to commands</li> <li>server.json - Create a <code>server.json</code> file in your project root</li> <li>box.json - Configure server settings in your <code>box.json</code></li> </ol> <p>Example <code>server.json</code>: <pre><code>{\n  \"web\": {\n    \"port\": 8080,\n    \"host\": \"127.0.0.1\",\n    \"rewrites\": {\n      \"enable\": true\n    }\n  }\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/server/server/#integration-with-commandbox","title":"Integration with CommandBox","text":"<p>These commands are thin wrappers around CommandBox's native server commands, providing: - Validation specific to Wheels applications - Better error messages and guidance - Integration with Wheels-specific features - Consistent command structure</p> <p>You can always use the native CommandBox commands directly if needed: <pre><code># Native CommandBox commands still work\nserver start\nserver stop\nserver status\n</code></pre></p>"},{"location":"command-line-tools/commands/server/server/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/server/server/#server-wont-start","title":"Server won't start","text":"<ol> <li>Check if a server is already running: <code>wheels server status</code></li> <li>Try forcing a start: <code>wheels server start --force</code></li> <li>Check for port conflicts: <code>wheels server start port=8081</code></li> </ol>"},{"location":"command-line-tools/commands/server/server/#cant-find-wheels-application","title":"Can't find Wheels application","text":"<p>Ensure you're in a directory containing: - <code>/vendor/wheels</code> - The Wheels framework - <code>/config</code> - Configuration files - <code>/app</code> - Application code</p>"},{"location":"command-line-tools/commands/server/server/#server-starts-but-application-doesnt-work","title":"Server starts but application doesn't work","text":"<ol> <li>Check logs: <code>wheels server log</code></li> <li>Verify database connection in datasource settings</li> <li>Try reloading: <code>wheels reload</code></li> </ol>"},{"location":"command-line-tools/commands/server/server/#see-also","title":"See Also","text":"<ul> <li>CommandBox Server Documentation</li> <li>Wheels Installation Guide</li> </ul>"},{"location":"command-line-tools/commands/testing/test-advanced/","title":"Advanced Testing Commands","text":"<p>The Wheels CLI provides advanced testing capabilities through integration with TestBox CLI. These commands offer specialized test runners for different testing scenarios.</p>"},{"location":"command-line-tools/commands/testing/test-advanced/#prerequisites","title":"Prerequisites","text":"<p>Before using these commands, you must install TestBox CLI:</p> <pre><code>box install commandbox-testbox-cli\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-advanced/#available-commands","title":"Available Commands","text":""},{"location":"command-line-tools/commands/testing/test-advanced/#testall-run-all-tests","title":"test:all - Run All Tests","text":"<p>Runs all tests in your application using TestBox CLI.</p> <pre><code>wheels test:all\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-advanced/#options","title":"Options","text":"<ul> <li><code>--reporter</code> - Test reporter format (simple, spec, junit, json, tap, min, doc)</li> <li><code>--coverage</code> - Generate coverage report</li> <li><code>--coverageReporter</code> - Coverage reporter format (html, json, xml)</li> <li><code>--coverageOutputDir</code> - Directory for coverage output</li> <li><code>--verbose</code> - Verbose output</li> <li><code>--failFast</code> - Stop on first test failure</li> <li><code>--directory</code> - Test directory to run (default: tests)</li> <li><code>--recurse</code> - Recurse into subdirectories</li> <li><code>--bundles</code> - Comma-delimited list of test bundles to run</li> <li><code>--labels</code> - Comma-delimited list of test labels to run</li> <li><code>--excludes</code> - Comma-delimited list of test bundles to exclude</li> <li><code>--filter</code> - Test filter pattern</li> </ul>"},{"location":"command-line-tools/commands/testing/test-advanced/#examples","title":"Examples","text":"<pre><code># Run with spec reporter\nwheels test:all --reporter=spec\n\n# Run with coverage\nwheels test:all --coverage --coverageReporter=html\n\n# Filter tests by name\nwheels test:all --filter=UserTest --verbose\n\n# Run specific bundles\nwheels test:all --bundles=tests.unit.models,tests.unit.controllers\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-advanced/#testunit-run-unit-tests","title":"test:unit - Run Unit Tests","text":"<p>Runs only unit tests located in the <code>tests/unit</code> directory.</p> <pre><code>wheels test:unit\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-advanced/#options_1","title":"Options","text":"<ul> <li><code>--reporter</code> - Test reporter format (simple, spec, junit, json, tap, min, doc)</li> <li><code>--verbose</code> - Verbose output</li> <li><code>--failFast</code> - Stop on first test failure</li> <li><code>--bundles</code> - Comma-delimited list of test bundles to run</li> <li><code>--labels</code> - Comma-delimited list of test labels to run</li> <li><code>--excludes</code> - Comma-delimited list of test bundles to exclude</li> <li><code>--filter</code> - Test filter pattern</li> <li><code>--directory</code> - Unit test directory (default: tests/unit)</li> </ul>"},{"location":"command-line-tools/commands/testing/test-advanced/#examples_1","title":"Examples","text":"<pre><code># Run with spec reporter\nwheels test:unit --reporter=spec\n\n# Filter specific tests\nwheels test:unit --filter=UserModelTest\n\n# Verbose output with fail fast\nwheels test:unit --verbose --failFast\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-advanced/#testintegration-run-integration-tests","title":"test:integration - Run Integration Tests","text":"<p>Runs only integration tests located in the <code>tests/integration</code> directory.</p> <pre><code>wheels test:integration\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-advanced/#options_2","title":"Options","text":"<p>Same as <code>test:unit</code> but defaults to <code>tests/integration</code> directory.</p>"},{"location":"command-line-tools/commands/testing/test-advanced/#examples_2","title":"Examples","text":"<pre><code># Run integration tests\nwheels test:integration\n\n# Run specific workflow tests\nwheels test:integration --filter=UserWorkflowTest\n\n# With verbose output\nwheels test:integration --verbose\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-advanced/#testwatch-watch-mode","title":"test:watch - Watch Mode","text":"<p>Watches for file changes and automatically reruns tests.</p> <pre><code>wheels test:watch\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-advanced/#options_3","title":"Options","text":"<ul> <li><code>--directory</code> - Test directory to watch (default: tests)</li> <li><code>--reporter</code> - Test reporter format</li> <li><code>--verbose</code> - Verbose output</li> <li><code>--delay</code> - Delay in milliseconds before rerunning tests (default: 1000)</li> <li><code>--watchPaths</code> - Additional paths to watch (comma-separated)</li> <li><code>--excludePaths</code> - Paths to exclude from watching (comma-separated)</li> <li><code>--bundles</code> - Test bundles to run</li> <li><code>--labels</code> - Test labels to run</li> <li><code>--excludes</code> - Test bundles to exclude</li> <li><code>--filter</code> - Test filter pattern</li> </ul>"},{"location":"command-line-tools/commands/testing/test-advanced/#examples_3","title":"Examples","text":"<pre><code># Watch all tests\nwheels test:watch\n\n# Watch unit tests only\nwheels test:watch --directory=tests/unit\n\n# Watch with custom delay\nwheels test:watch --delay=500\n\n# Watch additional paths\nwheels test:watch --watchPaths=models,controllers\n\n# Exclude paths from watching\nwheels test:watch --excludePaths=logs,temp\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-advanced/#testcoverage-code-coverage","title":"test:coverage - Code Coverage","text":"<p>Runs tests with code coverage analysis.</p> <pre><code>wheels test:coverage\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-advanced/#options_4","title":"Options","text":"<ul> <li><code>--directory</code> - Test directory to run (default: tests)</li> <li><code>--reporter</code> - Coverage reporter format (html, json, xml, simple)</li> <li><code>--outputDir</code> - Directory to output the coverage report</li> <li><code>--threshold</code> - Coverage percentage threshold (0-100)</li> <li><code>--pathsToCapture</code> - Paths to capture for coverage (comma-separated)</li> <li><code>--whitelist</code> - Whitelist paths for coverage (comma-separated)</li> <li><code>--blacklist</code> - Blacklist paths from coverage (comma-separated)</li> <li><code>--bundles</code> - Test bundles to run</li> <li><code>--labels</code> - Test labels to run</li> <li><code>--excludes</code> - Test bundles to exclude</li> <li><code>--filter</code> - Test filter pattern</li> <li><code>--verbose</code> - Verbose output</li> </ul>"},{"location":"command-line-tools/commands/testing/test-advanced/#examples_4","title":"Examples","text":"<pre><code># Basic coverage\nwheels test:coverage\n\n# JSON reporter with threshold\nwheels test:coverage --reporter=json --threshold=80\n\n# Coverage for specific directories\nwheels test:coverage --pathsToCapture=models,controllers\n\n# Unit tests only with coverage\nwheels test:coverage --directory=tests/unit\n\n# With whitelist\nwheels test:coverage --whitelist=app/models,app/controllers\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-advanced/#test-organization","title":"Test Organization","text":""},{"location":"command-line-tools/commands/testing/test-advanced/#directory-structure","title":"Directory Structure","text":"<p>The recommended test directory structure:</p> <pre><code>tests/\n\u251c\u2500\u2500 unit/           # Unit tests\n\u2502   \u251c\u2500\u2500 models/     # Model unit tests\n\u2502   \u251c\u2500\u2500 controllers/# Controller unit tests\n\u2502   \u2514\u2500\u2500 helpers/    # Helper unit tests\n\u251c\u2500\u2500 integration/    # Integration tests\n\u2502   \u251c\u2500\u2500 workflows/  # User workflow tests\n\u2502   \u2514\u2500\u2500 api/        # API integration tests\n\u2514\u2500\u2500 results/        # Test results and coverage\n    \u2514\u2500\u2500 coverage/   # Coverage reports\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-advanced/#sample-tests","title":"Sample Tests","text":"<p>When you run <code>test:unit</code> or <code>test:integration</code> for the first time and the directories don't exist, sample test files are created automatically.</p>"},{"location":"command-line-tools/commands/testing/test-advanced/#best-practices","title":"Best Practices","text":"<ol> <li>Separate Unit and Integration Tests</li> <li>Keep unit tests fast and isolated</li> <li> <p>Integration tests can interact with databases and external services</p> </li> <li> <p>Use Labels for Test Organization <pre><code>it(\"should process payments\", function() {\n    // test code\n}).labels(\"critical\", \"payments\");\n</code></pre></p> </li> <li> <p>Set Coverage Thresholds</p> </li> <li>Aim for at least 80% code coverage</li> <li> <p>Use <code>--threshold</code> to enforce minimum coverage</p> </li> <li> <p>Watch Mode for TDD</p> </li> <li>Use <code>test:watch</code> during development</li> <li> <p>Keep tests running in a separate terminal</p> </li> <li> <p>CI/CD Integration</p> </li> <li>Use <code>--reporter=junit</code> for CI systems</li> <li>Generate coverage reports with <code>--reporter=xml</code></li> </ol>"},{"location":"command-line-tools/commands/testing/test-advanced/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/testing/test-advanced/#testbox-cli-not-found","title":"TestBox CLI Not Found","text":"<p>If you get an error about TestBox CLI not being installed:</p> <pre><code>box install commandbox-testbox-cli\nbox reload\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-advanced/#no-tests-found","title":"No Tests Found","text":"<p>Make sure your test files: - Are in the correct directory - Have the <code>.cfc</code> extension - Extend <code>testbox.system.BaseSpec</code></p>"},{"location":"command-line-tools/commands/testing/test-advanced/#coverage-not-working","title":"Coverage Not Working","text":"<p>Ensure: - Tests are actually executing code - Paths to capture are correctly specified - No syntax errors in tested code</p>"},{"location":"command-line-tools/commands/testing/test-advanced/#related-commands","title":"Related Commands","text":"<ul> <li><code>wheels test run</code> - Modern test runner (not a TestBox wrapper)</li> <li><code>box testbox run</code> - Direct TestBox CLI usage</li> <li><code>wheels g test</code> - Generate test files</li> </ul>"},{"location":"command-line-tools/commands/testing/test-coverage/","title":"wheels test coverage","text":"<p>Generate code coverage reports for your test suite.</p>"},{"location":"command-line-tools/commands/testing/test-coverage/#synopsis","title":"Synopsis","text":"<pre><code>wheels test coverage [options]\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-coverage/#description","title":"Description","text":"<p>The <code>wheels test coverage</code> command runs your test suite while collecting code coverage metrics. It generates detailed reports showing which parts of your code are tested and identifies areas that need more test coverage.</p>"},{"location":"command-line-tools/commands/testing/test-coverage/#options","title":"Options","text":"Option Description Default <code>--type</code> Type of tests to run: app, core, or plugin <code>app</code> <code>--servername</code> Name of server to reload (current server) <code>--reload</code> Force a reload of wheels <code>false</code> <code>--debug</code> Show debug info <code>false</code> <code>--output-dir</code> Directory to output the coverage report <code>tests/coverageReport</code>"},{"location":"command-line-tools/commands/testing/test-coverage/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/testing/test-coverage/#generate-basic-coverage-report","title":"Generate basic coverage report","text":"<pre><code>wheels test coverage\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-coverage/#generate-coverage-for-core-tests","title":"Generate coverage for core tests","text":"<pre><code>wheels test coverage --type=core\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-coverage/#custom-output-directory","title":"Custom output directory","text":"<pre><code>wheels test coverage --output-dir=reports/coverage\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-coverage/#force-reload-before-coverage","title":"Force reload before coverage","text":"<pre><code>wheels test coverage --reload --debug\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-coverage/#coverage-for-specific-server","title":"Coverage for specific server","text":"<pre><code>wheels test coverage --servername=myapp\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-coverage/#what-it-does","title":"What It Does","text":"<ol> <li>Instruments Code: Adds coverage tracking to your application</li> <li>Runs Tests: Executes all specified tests</li> <li>Collects Metrics: Tracks which lines are executed</li> <li>Generates Reports: Creates coverage reports in requested formats</li> <li>Analyzes Results: Provides insights and recommendations</li> </ol>"},{"location":"command-line-tools/commands/testing/test-coverage/#coverage-metrics","title":"Coverage Metrics","text":""},{"location":"command-line-tools/commands/testing/test-coverage/#line-coverage","title":"Line Coverage","text":"<p>Percentage of code lines executed: <pre><code>File: /app/models/User.cfc\nLines: 156/200 (78%)\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-coverage/#function-coverage","title":"Function Coverage","text":"<p>Percentage of functions tested: <pre><code>Functions: 45/50 (90%)\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-coverage/#branch-coverage","title":"Branch Coverage","text":"<p>Percentage of code branches tested: <pre><code>Branches: 120/150 (80%)\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-coverage/#statement-coverage","title":"Statement Coverage","text":"<p>Percentage of statements executed: <pre><code>Statements: 890/1000 (89%)\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-coverage/#report-formats","title":"Report Formats","text":""},{"location":"command-line-tools/commands/testing/test-coverage/#html-report","title":"HTML Report","text":"<p>Interactive web-based report: <pre><code>wheels test coverage --format=html\n</code></pre></p> <p>Features: - File browser - Source code viewer - Line-by-line coverage - Sortable metrics - Trend charts</p>"},{"location":"command-line-tools/commands/testing/test-coverage/#json-report","title":"JSON Report","text":"<p>Machine-readable format: <pre><code>wheels test coverage --format=json\n</code></pre></p> <pre><code>{\n  \"summary\": {\n    \"lines\": { \"total\": 1000, \"covered\": 850, \"percent\": 85 },\n    \"functions\": { \"total\": 100, \"covered\": 92, \"percent\": 92 },\n    \"branches\": { \"total\": 200, \"covered\": 160, \"percent\": 80 }\n  },\n  \"files\": {\n    \"/app/models/User.cfc\": {\n      \"lines\": { \"total\": 200, \"covered\": 156, \"percent\": 78 }\n    }\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-coverage/#xml-report","title":"XML Report","text":"<p>For CI/CD integration: <pre><code>wheels test coverage --format=xml\n</code></pre></p> <p>Compatible with: - Jenkins - GitLab CI - GitHub Actions - SonarQube</p>"},{"location":"command-line-tools/commands/testing/test-coverage/#console-report","title":"Console Report","text":"<p>Quick terminal output: <pre><code>wheels test coverage --format=console\n</code></pre></p> <pre><code>Code Coverage Report\n===================\n\nOverall Coverage: 85.3%\n\nFile                          Lines    Funcs    Branch   Stmt\n---------------------------- -------- -------- -------- --------\n/app/models/User.cfc           78.0%    85.0%    72.0%    80.0%\n/app/models/Order.cfc          92.0%    95.0%    88.0%    90.0%\n/app/controllers/Users.cfc     85.0%    90.0%    82.0%    86.0%\n\nUncovered Files:\n- /app/models/Legacy.cfc (0%)\n- /app/helpers/Deprecated.cfc (0%)\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-coverage/#coverage-thresholds","title":"Coverage Thresholds","text":""},{"location":"command-line-tools/commands/testing/test-coverage/#global-threshold","title":"Global Threshold","text":"<pre><code>wheels test coverage --threshold=80\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-coverage/#per-metric-thresholds","title":"Per-Metric Thresholds","text":"<p>Configure in <code>.wheels-coverage.json</code>: <pre><code>{\n  \"thresholds\": {\n    \"global\": 80,\n    \"lines\": 85,\n    \"functions\": 90,\n    \"branches\": 75,\n    \"statements\": 85\n  }\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-coverage/#file-specific-thresholds","title":"File-Specific Thresholds","text":"<pre><code>{\n  \"thresholds\": {\n    \"global\": 80,\n    \"files\": {\n      \"/app/models/User.cfc\": 90,\n      \"/app/models/Order.cfc\": 95\n    }\n  }\n}\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-coverage/#configuration","title":"Configuration","text":""},{"location":"command-line-tools/commands/testing/test-coverage/#coverage-configuration-file","title":"Coverage Configuration File","text":"<p><code>.wheels-coverage.json</code>: <pre><code>{\n  \"include\": [\n    \"app/models/**/*.cfc\",\n    \"app/controllers/**/*.cfc\"\n  ],\n  \"exclude\": [\n    \"app/models/Legacy.cfc\",\n    \"**/*Test.cfc\"\n  ],\n  \"reporters\": [\"html\", \"json\"],\n  \"reportDir\": \"./coverage\",\n  \"thresholds\": {\n    \"global\": 80\n  },\n  \"watermarks\": {\n    \"lines\": [50, 80],\n    \"functions\": [50, 80],\n    \"branches\": [50, 80],\n    \"statements\": [50, 80]\n  }\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-coverage/#integration","title":"Integration","text":""},{"location":"command-line-tools/commands/testing/test-coverage/#cicd-pipeline","title":"CI/CD Pipeline","text":"<pre><code>- name: Run tests with coverage\n  run: |\n    wheels test coverage --format=xml --threshold=80 --fail-on-low\n\n- name: Upload coverage\n  uses: codecov/codecov-action@v3\n  with:\n    file: ./coverage/coverage.xml\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-coverage/#git-hooks","title":"Git Hooks","text":"<p><code>.git/hooks/pre-push</code>: <pre><code>#!/bin/bash\nwheels test coverage --threshold=80 --fail-on-low\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-coverage/#badge-generation","title":"Badge Generation","text":"<pre><code>wheels test coverage --format=badge &gt; coverage-badge.svg\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-coverage/#analyzing-results","title":"Analyzing Results","text":""},{"location":"command-line-tools/commands/testing/test-coverage/#identify-untested-code","title":"Identify Untested Code","text":"<p>The HTML report highlights: - Red: Uncovered lines - Yellow: Partially covered branches - Green: Fully covered code</p>"},{"location":"command-line-tools/commands/testing/test-coverage/#focus-areas","title":"Focus Areas","text":"<ol> <li>Critical Paths: Ensure high coverage</li> <li>Complex Logic: Test all branches</li> <li>Error Handling: Cover edge cases</li> <li>New Features: Maintain coverage</li> </ol>"},{"location":"command-line-tools/commands/testing/test-coverage/#best-practices","title":"Best Practices","text":"<ol> <li>Set Realistic Goals: Start with achievable thresholds</li> <li>Incremental Improvement: Gradually increase thresholds</li> <li>Focus on Quality: 100% coverage doesn't mean bug-free</li> <li>Test Business Logic: Prioritize critical code</li> <li>Regular Monitoring: Track coverage trends</li> </ol>"},{"location":"command-line-tools/commands/testing/test-coverage/#performance-considerations","title":"Performance Considerations","text":"<p>Coverage collection adds overhead: - Slower test execution - Increased memory usage - Larger test artifacts</p> <p>Tips: - Run coverage in CI/CD, not every test run - Use incremental coverage for faster feedback - Exclude third-party code</p>"},{"location":"command-line-tools/commands/testing/test-coverage/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/testing/test-coverage/#low-coverage","title":"Low Coverage","text":"<ul> <li>Check if tests are actually running</li> <li>Verify include/exclude patterns</li> <li>Look for untested files</li> </ul>"},{"location":"command-line-tools/commands/testing/test-coverage/#coverage-not-collected","title":"Coverage Not Collected","text":"<ul> <li>Ensure code is instrumented</li> <li>Check file path patterns</li> <li>Verify test execution</li> </ul>"},{"location":"command-line-tools/commands/testing/test-coverage/#report-generation-failed","title":"Report Generation Failed","text":"<ul> <li>Check output directory permissions</li> <li>Verify report format support</li> <li>Review error logs</li> </ul>"},{"location":"command-line-tools/commands/testing/test-coverage/#advanced-usage","title":"Advanced Usage","text":""},{"location":"command-line-tools/commands/testing/test-coverage/#incremental-coverage","title":"Incremental Coverage","text":"<pre><code># Coverage for changed files only\nwheels test coverage --since=HEAD~1\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-coverage/#coverage-trends","title":"Coverage Trends","text":"<pre><code># Generate trend data\nwheels test coverage --save-baseline\n\n# Compare with baseline\nwheels test coverage --compare-baseline\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-coverage/#merge-coverage","title":"Merge Coverage","text":"<pre><code># From multiple test runs\nwheels test coverage --merge coverage1.json coverage2.json\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-coverage/#notes","title":"Notes","text":"<ul> <li>Coverage data is collected during test execution</li> <li>Some code may be unreachable and shouldn't count</li> <li>Focus on meaningful coverage, not just percentages</li> <li>Different metrics provide different insights</li> </ul>"},{"location":"command-line-tools/commands/testing/test-coverage/#see-also","title":"See Also","text":"<ul> <li>wheels test - Run tests</li> <li>wheels test run - Run specific tests</li> <li>wheels test debug - Debug test execution</li> <li>Testing Best Practices</li> </ul>"},{"location":"command-line-tools/commands/testing/test-debug/","title":"wheels test debug","text":"<p>Debug test execution with detailed diagnostics and troubleshooting tools.</p>"},{"location":"command-line-tools/commands/testing/test-debug/#synopsis","title":"Synopsis","text":"<pre><code>wheels test debug [spec] [options]\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-debug/#description","title":"Description","text":"<p>The <code>wheels test debug</code> command provides advanced debugging capabilities for your test suite. It helps identify why tests are failing, diagnose test environment issues, and provides detailed execution traces for troubleshooting complex test problems.</p>"},{"location":"command-line-tools/commands/testing/test-debug/#options","title":"Options","text":"Option Description Default <code>type</code> Type of tests to run: app, core, or plugin <code>app</code> <code>spec</code> Specific test spec to run (e.g., models.user) <code>servername</code> Name of server to reload (current server) <code>--reload</code> Force a reload of wheels (boolean flag) <code>false</code> <code>--break-on-failure</code> Stop test execution on first failure (boolean flag) <code>true</code> <code>output-level</code> Output verbosity: 1=minimal, 2=normal, 3=verbose <code>3</code>"},{"location":"command-line-tools/commands/testing/test-debug/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/testing/test-debug/#debug-all-app-tests","title":"Debug all app tests","text":"<pre><code>wheels test debug\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-debug/#debug-specific-test-spec","title":"Debug specific test spec","text":"<pre><code>wheels test debug spec=models.user\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-debug/#debug-with-minimal-output","title":"Debug with minimal output","text":"<pre><code>wheels test debug output-level=1\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-debug/#debug-without-stopping-on-failure","title":"Debug without stopping on failure","text":"<pre><code>wheels test debug --break-on-failure=false\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-debug/#debug-core-framework-tests","title":"Debug core framework tests","text":"<pre><code>wheels test debug type=core --reload\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-debug/#enable-remote-debugging","title":"Enable remote debugging","text":"<pre><code>wheels test debug --inspect port=9229\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-debug/#debug-slow-tests","title":"Debug slow tests","text":"<pre><code>wheels test debug slow=500 verbose=2\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-debug/#debug-output","title":"Debug Output","text":""},{"location":"command-line-tools/commands/testing/test-debug/#basic-debug-info","title":"Basic Debug Info","text":"<pre><code>\ud83d\udd0d Test Debug Session Started\n================================\n\nEnvironment: testing\nDebug Level: 1\nTest Framework: TestBox 5.0.0\nCFML Engine: Lucee 5.3.9.141\n\nRunning: UserModelTest.testValidation\nStatus: RUNNING\n\n[DEBUG] Setting up test case...\n[DEBUG] Creating test user instance\n[DEBUG] Validating empty user\n[DEBUG] Assertion: user.hasErrors() = true \u2713\n[DEBUG] Test completed in 45ms\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-debug/#verbose-trace-output","title":"Verbose Trace Output","text":"<p>With <code>--trace verbose=3</code>: <pre><code>\ud83d\udd0d Test Execution Trace\n======================\n\n\u25b6 UserModelTest.setup()\n  \u2514\u2500 [0.5ms] Creating test database transaction\n  \u2514\u2500 [1.2ms] Loading test fixtures\n  \u2514\u2500 [0.3ms] Initializing test context\n\n\u25b6 UserModelTest.testValidation()\n  \u251c\u2500 [0.1ms] var user = model(\"User\").new()\n  \u2502   \u2514\u2500 [2.1ms] Model instantiation\n  \u2502   \u2514\u2500 [0.5ms] Property initialization\n  \u251c\u2500 [0.2ms] user.validate()\n  \u2502   \u2514\u2500 [5.3ms] Running validations\n  \u2502   \u251c\u2500 [1.2ms] Checking required fields\n  \u2502   \u251c\u2500 [2.1ms] Email format validation\n  \u2502   \u2514\u2500 [2.0ms] Custom validations\n  \u251c\u2500 [0.1ms] expect(user.hasErrors()).toBe(true)\n  \u2502   \u2514\u2500 [0.3ms] Assertion passed \u2713\n  \u2514\u2500 [0.1ms] Test completed\n\nTotal Time: 10.2ms\nMemory Used: 2.3MB\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-debug/#interactive-debugging","title":"Interactive Debugging","text":""},{"location":"command-line-tools/commands/testing/test-debug/#step-mode","title":"Step Mode","text":"<p>With <code>--step</code>: <pre><code>\u25b6 Entering step mode for UserModelTest.testLogin\n\n[1] user = model(\"User\").findOne(where=\"email='test@example.com'\")\n    &gt; (n)ext, (s)tep into, (c)ontinue, (v)ariables, (q)uit: v\n\nVariables:\n- arguments: {}\n- local: { user: [undefined] }\n- this: UserModelTest instance\n\n    &gt; n\n\n[2] expect(user.authenticate(\"password123\")).toBe(true)\n    &gt; v\n\nVariables:\n- arguments: {}\n- local: { user: User instance {id: 1, email: \"test@example.com\"} }\n\n    &gt; s\n\n  [2.1] Entering: user.authenticate(\"password123\")\n       Parameters: { password: \"password123\" }\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-debug/#breakpoints","title":"Breakpoints","text":"<p>Set breakpoints in code: <pre><code>// In test file\nfunction testComplexLogic() {\n    var result = complexCalculation(data);\n\n    debugBreak(); // Execution pauses here\n\n    expect(result).toBe(expectedValue);\n}\n</code></pre></p> <p>Or via command line: <pre><code>wheels test debug breakpoint=OrderTest.testCalculateTotal:25\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-debug/#test-context-inspection","title":"Test Context Inspection","text":""},{"location":"command-line-tools/commands/testing/test-debug/#dump-test-context","title":"Dump Test Context","text":"<p>With <code>--dump-context</code>: <pre><code>Test Context Dump\n================\n\nTest: UserModelTest.testPermissions\nPhase: Execution\n\nApplication Scope:\n- wheels.version: 2.5.0\n- wheels.environment: testing\n- Custom settings: { ... }\n\nRequest Scope:\n- cgi.request_method: \"GET\"\n- url: { testMethod: \"testPermissions\" }\n\nTest Data:\n- Fixtures loaded: users, roles, permissions\n- Test user: { id: 999, email: \"test@example.com\" }\n- Database state: Transaction active\n\nComponent State:\n- UserModelTest properties: { ... }\n- Inherited properties: { ... }\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-debug/#performance-analysis","title":"Performance Analysis","text":""},{"location":"command-line-tools/commands/testing/test-debug/#slow-test-detection","title":"Slow Test Detection","text":"<p>With <code>slow=500</code>: <pre><code>\u26a0\ufe0f Slow Tests Detected\n=====================\n\n1. OrderModelTest.testLargeOrderProcessing - 2,345ms \ud83d\udc0c\n   - Database queries: 45 (1,234ms)\n   - Model operations: 892ms\n   - Assertions: 219ms\n\n2. UserControllerTest.testBulkImport - 1,567ms \ud83d\udc0c\n   - File I/O: 623ms\n   - Validation: 512ms\n   - Database inserts: 432ms\n\n3. ReportTest.testGenerateYearlyReport - 987ms \u26a0\ufe0f\n   - Data aggregation: 654ms\n   - PDF generation: 333ms\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-debug/#remote-debugging","title":"Remote Debugging","text":""},{"location":"command-line-tools/commands/testing/test-debug/#enable-inspector","title":"Enable Inspector","text":"<pre><code>wheels test debug --inspect\n</code></pre> <p>Connect with Chrome DevTools: 1. Open Chrome/Edge 2. Navigate to <code>chrome://inspect</code> 3. Click \"Configure\" and add <code>localhost:9229</code> 4. Click \"inspect\" on the target</p>"},{"location":"command-line-tools/commands/testing/test-debug/#debug-protocol","title":"Debug Protocol","text":"<p><pre><code>wheels test debug --inspect-brk port=9230\n</code></pre> - <code>--inspect</code>: Enable debugging - <code>--inspect-brk</code>: Break on first line - Custom port for multiple sessions</p>"},{"location":"command-line-tools/commands/testing/test-debug/#failure-analysis","title":"Failure Analysis","text":""},{"location":"command-line-tools/commands/testing/test-debug/#pause-on-failure","title":"Pause on Failure","text":"<p>With <code>--pause-on-failure</code>: <pre><code>\u2717 Test Failed: UserModelTest.testUniqueEmail\n\nTest paused at failure point.\n\nFailure Details:\n- Expected: true\n- Actual: false\n- Location: UserModelTest.cfc:45\n\nDebug Options:\n(i) Inspect variables\n(s) Show stack trace\n(d) Dump database state\n(r) Retry test\n(c) Continue\n(q) Quit\n\n&gt; i\n\nLocal Variables:\n- user1: User { email: \"test@example.com\", id: 1 }\n- user2: User { email: \"test@example.com\", errors: [\"Email already exists\"] }\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-debug/#stack-trace-analysis","title":"Stack Trace Analysis","text":"<pre><code>Stack Trace:\n-----------\n1. TestBox.expectation.toBe() at TestBox/system/Expectation.cfc:123\n2. UserModelTest.testUniqueEmail() at tests/models/UserModelTest.cfc:45\n3. TestBox.runTest() at TestBox/system/BaseSpec.cfc:456\n4. Model.validate() at wheels/Model.cfc:789\n5. Model.validatesUniquenessOf() at wheels/Model.cfc:1234\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-debug/#test-replay","title":"Test Replay","text":""},{"location":"command-line-tools/commands/testing/test-debug/#replay-failed-tests","title":"Replay Failed Tests","text":"<pre><code>wheels test debug --replay\n</code></pre> <p>Replays last failed tests with debug info: <pre><code>Replaying 3 failed tests from last run...\n\n1/3 UserModelTest.testValidation\n    - Original failure: Assertion failed at line 23\n    - Replay status: PASSED \u2713\n    - Possible flaky test\n\n2/3 OrderControllerTest.testCheckout\n    - Original failure: Database connection timeout\n    - Replay status: FAILED \u2717\n    - Consistent failure\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-debug/#configuration","title":"Configuration","text":""},{"location":"command-line-tools/commands/testing/test-debug/#debug-configuration","title":"Debug Configuration","text":"<p><code>.wheels-test-debug.json</code>: <pre><code>{\n  \"debug\": {\n    \"defaultLevel\": 1,\n    \"slowThreshold\": 1000,\n    \"breakpoints\": [\n      \"UserModelTest.testComplexScenario:45\",\n      \"OrderTest.testEdgeCase:78\"\n    ],\n    \"trace\": {\n      \"includeFramework\": false,\n      \"maxDepth\": 10\n    },\n    \"output\": {\n      \"colors\": true,\n      \"timestamps\": true,\n      \"saveToFile\": \"./debug.log\"\n    }\n  }\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-debug/#debugging-strategies","title":"Debugging Strategies","text":""},{"location":"command-line-tools/commands/testing/test-debug/#1-isolate-failing-test","title":"1. Isolate Failing Test","text":"<pre><code># Run only the failing test\nwheels test debug UserModelTest.testValidation --trace\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-debug/#2-check-test-environment","title":"2. Check Test Environment","text":"<pre><code># Dump environment and context\nwheels test debug --dump-context &gt; test-context.txt\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-debug/#3-step-through-execution","title":"3. Step Through Execution","text":"<pre><code># Interactive debugging\nwheels test debug FailingTest --step --pause-on-failure\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-debug/#4-compare-working-vs-failing","title":"4. Compare Working vs Failing","text":"<pre><code># Debug working test\nwheels test debug WorkingTest --trace &gt; working.log\n\n# Debug failing test\nwheels test debug FailingTest --trace &gt; failing.log\n\n# Compare outputs\ndiff working.log failing.log\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-debug/#common-issues","title":"Common Issues","text":""},{"location":"command-line-tools/commands/testing/test-debug/#test-pollution","title":"Test Pollution","text":"<p>Debug test isolation: <pre><code>wheels test debug --trace verbose=3 | grep -E \"(setup|teardown|transaction)\"\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-debug/#race-conditions","title":"Race Conditions","text":"<p>Debug timing issues: <pre><code>wheels test debug slow=100 --trace\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-debug/#database-state","title":"Database State","text":"<pre><code>wheels test debug --dump-context | grep -A 20 \"Database state\"\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-debug/#best-practices","title":"Best Practices","text":"<ol> <li>Start Simple: Use basic debug before advanced options</li> <li>Isolate Issues: Debug one test at a time</li> <li>Use Breakpoints: Strategic breakpoints save time</li> <li>Check Environment: Ensure test environment is correct</li> <li>Save Debug Logs: Keep logs for complex issues</li> </ol>"},{"location":"command-line-tools/commands/testing/test-debug/#notes","title":"Notes","text":"<ul> <li>Debug mode affects test performance</li> <li>Some features require specific CFML engine support</li> <li>Remote debugging requires network access</li> <li>Verbose output can be overwhelming - filter as needed</li> </ul>"},{"location":"command-line-tools/commands/testing/test-debug/#see-also","title":"See Also","text":"<ul> <li>wheels test - Run tests normally</li> <li>wheels test run - Run specific tests</li> <li>wheels test coverage - Coverage analysis</li> <li>Debugging Guide</li> </ul>"},{"location":"command-line-tools/commands/testing/test-run/","title":"wheels test run","text":"<p>Run TestBox tests for your application with advanced features.</p>"},{"location":"command-line-tools/commands/testing/test-run/#synopsis","title":"Synopsis","text":"<pre><code>wheels test run [spec] [options]\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#description","title":"Description","text":"<p>The <code>wheels test run</code> command executes your application's TestBox test suite with support for watching, filtering, and various output formats. This is the primary command for running your application tests (as opposed to framework tests).</p>"},{"location":"command-line-tools/commands/testing/test-run/#options","title":"Options","text":"Option Description Default <code>filter</code> Filter tests by pattern or name <code>group</code> Run specific test group <code>--coverage</code> Generate coverage report (boolean flag) <code>false</code> <code>reporter</code> Test reporter format: console, junit, json, tap <code>console</code> <code>--watch</code> Watch for file changes and rerun tests (boolean flag) <code>false</code> <code>--verbose</code> Verbose output (boolean flag) <code>false</code> <code>--fail-fast</code> Stop on first test failure (boolean flag) <code>false</code>"},{"location":"command-line-tools/commands/testing/test-run/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/testing/test-run/#run-all-tests","title":"Run all tests","text":"<pre><code>wheels test run\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#filter-tests-by-pattern","title":"Filter tests by pattern","text":"<pre><code>wheels test run filter=\"User\"\nwheels test run filter=\"test_user_validation\"\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#watch-mode","title":"Watch mode","text":"<pre><code>wheels test run --watch\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#run-specific-test-group","title":"Run specific test group","text":"<pre><code>wheels test run group=\"unit\"\nwheels test run group=\"integration\"\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#generate-coverage-report","title":"Generate coverage report","text":"<pre><code>wheels test run --coverage\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#use-different-reporter","title":"Use different reporter","text":"<pre><code>wheels test run reporter=json\nwheels test run reporter=junit\nwheels test run reporter=tap\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#stop-on-first-failure","title":"Stop on first failure","text":"<pre><code>wheels test run --fail-fast\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#verbose-output-with-coverage","title":"Verbose output with coverage","text":"<pre><code>wheels test run --verbose --coverage reporter=console\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#test-structure","title":"Test Structure","text":"<p>Standard test directory layout: <pre><code>/tests/\n\u251c\u2500\u2500 Application.cfc      # Test configuration\n\u251c\u2500\u2500 models/             # Model tests\n\u2502   \u251c\u2500\u2500 UserTest.cfc\n\u2502   \u2514\u2500\u2500 ProductTest.cfc\n\u251c\u2500\u2500 controllers/        # Controller tests\n\u2502   \u251c\u2500\u2500 UsersTest.cfc\n\u2502   \u2514\u2500\u2500 ProductsTest.cfc\n\u251c\u2500\u2500 views/             # View tests\n\u251c\u2500\u2500 integration/       # Integration tests\n\u2514\u2500\u2500 helpers/          # Test helpers\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-run/#writing-tests","title":"Writing Tests","text":""},{"location":"command-line-tools/commands/testing/test-run/#model-test-example","title":"Model Test Example","text":"<pre><code>component extends=\"testbox.system.BaseSpec\" {\n\n    function run() {\n        describe(\"User Model\", function() {\n\n            beforeEach(function() {\n                // Reset test data\n                application.wirebox.getInstance(\"User\").deleteAll();\n            });\n\n            it(\"validates required fields\", function() {\n                var user = model(\"User\").new();\n                expect(user.valid()).toBeFalse();\n                expect(user.errors).toHaveKey(\"email\");\n                expect(user.errors).toHaveKey(\"username\");\n            });\n\n            it(\"saves with valid data\", function() {\n                var user = model(\"User\").new(\n                    email=\"test@example.com\",\n                    username=\"testuser\",\n                    password=\"secret123\"\n                );\n                expect(user.save()).toBeTrue();\n                expect(user.id).toBeGT(0);\n            });\n\n            it(\"prevents duplicate emails\", function() {\n                var user1 = model(\"User\").create(\n                    email=\"test@example.com\",\n                    username=\"user1\"\n                );\n\n                var user2 = model(\"User\").new(\n                    email=\"test@example.com\",\n                    username=\"user2\"\n                );\n\n                expect(user2.valid()).toBeFalse();\n                expect(user2.errors.email).toContain(\"already exists\");\n            });\n\n        });\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#controller-test-example","title":"Controller Test Example","text":"<pre><code>component extends=\"testbox.system.BaseSpec\" {\n\n    function run() {\n        describe(\"Products Controller\", function() {\n\n            it(\"lists all products\", function() {\n                // Create test data\n                var product = model(\"Product\").create(name=\"Test Product\");\n\n                // Make request\n                var event = execute(\n                    event=\"products.index\",\n                    renderResults=true\n                );\n\n                // Assert response\n                expect(event.getRenderedContent()).toInclude(\"Test Product\");\n                expect(event.getValue(\"products\")).toBeArray();\n            });\n\n            it(\"requires auth for create\", function() {\n                var event = execute(\n                    event=\"products.create\",\n                    renderResults=false\n                );\n\n                expect(event.getValue(\"relocate_URI\")).toBe(\"/login\");\n            });\n\n        });\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#test-configuration","title":"Test Configuration","text":""},{"location":"command-line-tools/commands/testing/test-run/#testsapplicationcfc","title":"/tests/Application.cfc","text":"<pre><code>component {\n    this.name = \"WheelsTestingSuite\" &amp; Hash(GetCurrentTemplatePath());\n\n    // Use test datasource\n    this.datasources[\"wheelstestdb\"] = {\n        url = \"jdbc:h2:mem:wheelstestdb;MODE=MySQL\"\n    };\n    this.datasource = \"wheelstestdb\";\n\n    // Test settings\n    this.testbox = {\n        testBundles = \"tests\",\n        recurse = true,\n        reporter = \"simple\",\n        labels = \"\",\n        options = {}\n    };\n}\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#watch-mode_1","title":"Watch Mode","text":"<p>Watch mode reruns tests on file changes:</p> <pre><code>wheels test run --watch\n</code></pre> <p>Output: <pre><code>[TestBox Watch] Monitoring for changes...\n[TestBox Watch] Watching: /tests, /models, /controllers\n\n[14:23:45] Change detected: models/User.cfc\n[14:23:45] Running tests...\n\n\u2713 User Model &gt; validates required fields (12ms)\n\u2713 User Model &gt; saves with valid data (45ms)\n\u2713 User Model &gt; prevents duplicate emails (23ms)\n\nTests: 3 passed, 0 failed\nTime: 80ms\n\n[TestBox Watch] Waiting for changes...\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-run/#reporters","title":"Reporters","text":""},{"location":"command-line-tools/commands/testing/test-run/#simple-default","title":"Simple (Default)","text":"<p><pre><code>wheels test run reporter=simple\n</code></pre> - Colored console output - Shows progress dots - Summary at end</p>"},{"location":"command-line-tools/commands/testing/test-run/#text","title":"Text","text":"<p><pre><code>wheels test run reporter=text\n</code></pre> - Plain text output - Good for CI systems - No colors</p>"},{"location":"command-line-tools/commands/testing/test-run/#json","title":"JSON","text":"<p><pre><code>wheels test run reporter=json\n</code></pre> <pre><code>{\n    \"totalDuration\": 523,\n    \"totalSpecs\": 25,\n    \"totalPass\": 24,\n    \"totalFail\": 1,\n    \"totalError\": 0,\n    \"totalSkipped\": 0\n}\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-run/#junit","title":"JUnit","text":"<p><pre><code>wheels test run reporter=junit outputFile=results.xml\n</code></pre> - JUnit XML format - For CI integration - Jenkins compatible</p>"},{"location":"command-line-tools/commands/testing/test-run/#tap","title":"TAP","text":"<p><pre><code>wheels test run reporter=tap\n</code></pre> - Test Anything Protocol - Cross-language format</p>"},{"location":"command-line-tools/commands/testing/test-run/#filtering-tests","title":"Filtering Tests","text":""},{"location":"command-line-tools/commands/testing/test-run/#by-bundle","title":"By Bundle","text":"<pre><code># Run only model tests\nwheels test run bundles=models\n\n# Run multiple bundles\nwheels test run bundles=models,controllers\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#by-label","title":"By Label","text":"<pre><code>it(\"can authenticate\", function() {\n    // test code\n}).labels(\"auth,critical\");\n</code></pre> <pre><code># Run only critical tests\nwheels test run labels=critical\n\n# Run auth OR api tests\nwheels test run labels=auth,api\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#by-name-filter","title":"By Name Filter","text":"<pre><code># Run tests matching pattern\nwheels test run filter=\"user\"\nwheels test run filter=\"validate*\"\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#exclude-patterns","title":"Exclude Patterns","text":"<pre><code># Skip slow tests\nwheels test run excludes=\"*slow*,*integration*\"\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#parallel-execution","title":"Parallel Execution","text":"<p>Run tests in parallel threads: <pre><code>wheels test run threads=4\n</code></pre></p> <p>Benefits: - Faster execution - Better CPU utilization - Finds concurrency issues</p>"},{"location":"command-line-tools/commands/testing/test-run/#code-coverage","title":"Code Coverage","text":"<p>Generate coverage reports: <pre><code>wheels test run --coverage coverageOutputDir=coverage/\n</code></pre></p> <p>View report: <pre><code>open coverage/index.html\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test-run/#test-helpers","title":"Test Helpers","text":"<p>Create reusable test utilities:</p> <pre><code>// /tests/helpers/TestHelper.cfc\ncomponent {\n\n    function createTestUser(struct overrides={}) {\n        var defaults = {\n            email: \"test#CreateUUID()#@example.com\",\n            username: \"user#CreateUUID()#\",\n            password: \"testpass123\"\n        };\n\n        return model(\"User\").create(\n            argumentCollection = defaults.append(arguments.overrides)\n        );\n    }\n\n    function loginAs(required user) {\n        session.userId = arguments.user.id;\n        session.isAuthenticated = true;\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#database-strategies","title":"Database Strategies","text":""},{"location":"command-line-tools/commands/testing/test-run/#transaction-rollback","title":"Transaction Rollback","text":"<pre><code>function beforeAll() {\n    transaction action=\"begin\";\n}\n\nfunction afterAll() {\n    transaction action=\"rollback\";\n}\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#database-cleaner","title":"Database Cleaner","text":"<pre><code>function beforeEach() {\n    queryExecute(\"DELETE FROM users\");\n    queryExecute(\"DELETE FROM products\");\n}\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#fixtures","title":"Fixtures","text":"<pre><code>function loadFixtures() {\n    var users = deserializeJSON(\n        fileRead(\"/tests/fixtures/users.json\")\n    );\n\n    for (var userData in users) {\n        model(\"User\").create(userData);\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#cicd-integration","title":"CI/CD Integration","text":""},{"location":"command-line-tools/commands/testing/test-run/#github-actions","title":"GitHub Actions","text":"<pre><code>- name: Run tests\n  run: |\n    wheels test run reporter=junit outputFile=test-results.xml\n\n- name: Upload results\n  uses: actions/upload-artifact@v4\n  with:\n    name: test-results\n    path: test-results.xml\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#pre-commit-hook","title":"Pre-commit Hook","text":"<pre><code>#!/bin/bash\n# .git/hooks/pre-commit\n\necho \"Running tests...\"\nwheels test run labels=unit\n\nif [ $? -ne 0 ]; then\n    echo \"Tests failed. Commit aborted.\"\n    exit 1\nfi\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#performance-tips","title":"Performance Tips","text":"<ol> <li> <p>Use labels for fast feedback    <pre><code>wheels test run labels=unit  # Fast\nwheels test run labels=integration  # Slow\n</code></pre></p> </li> <li> <p>Parallel execution <pre><code>wheels test run threads=4\n</code></pre></p> </li> <li> <p>Watch specific directories <pre><code>wheels test run tests/models --watch\n</code></pre></p> </li> <li> <p>Skip slow tests during development <pre><code>wheels test run excludes=\"*integration*\"\n</code></pre></p> </li> </ol>"},{"location":"command-line-tools/commands/testing/test-run/#common-issues","title":"Common Issues","text":""},{"location":"command-line-tools/commands/testing/test-run/#out-of-memory","title":"Out of Memory","text":"<pre><code># Increase memory\nbox server set jvm.heapSize=1024\nbox server restart\n</code></pre>"},{"location":"command-line-tools/commands/testing/test-run/#test-pollution","title":"Test Pollution","text":"<ul> <li>Use <code>beforeEach</code>/<code>afterEach</code></li> <li>Reset global state</li> <li>Use transactions</li> </ul>"},{"location":"command-line-tools/commands/testing/test-run/#flaky-tests","title":"Flaky Tests","text":"<ul> <li>Avoid time-dependent tests</li> <li>Mock external services</li> <li>Use fixed test data</li> </ul>"},{"location":"command-line-tools/commands/testing/test-run/#see-also","title":"See Also","text":"<ul> <li>wheels test - Run framework tests</li> <li>wheels test coverage - Generate coverage</li> <li>wheels test debug - Debug tests</li> <li>wheels generate test - Generate test files</li> </ul>"},{"location":"command-line-tools/commands/testing/test/","title":"wheels test","text":"<p>\u26a0\ufe0f DEPRECATED: This command is deprecated. Use <code>wheels test run</code> or the advanced testing commands (<code>wheels test:all</code>, <code>wheels test:unit</code>, etc.) instead.</p> <p>Run Wheels framework tests (core, app, or plugin tests).</p>"},{"location":"command-line-tools/commands/testing/test/#synopsis","title":"Synopsis","text":"<pre><code>wheels test [type] [servername] [options]\n</code></pre>"},{"location":"command-line-tools/commands/testing/test/#description","title":"Description","text":"<p>The <code>wheels test</code> command runs the built-in Wheels framework test suite. This is different from <code>wheels test run</code> which runs your application's TestBox tests. Use this command to verify framework integrity or test Wheels plugins.</p>"},{"location":"command-line-tools/commands/testing/test/#arguments","title":"Arguments","text":"Argument Description Default <code>type</code> Test type: <code>core</code>, <code>app</code>, or <code>plugin</code> <code>app</code> <code>serverName</code> CommandBox server name Current server"},{"location":"command-line-tools/commands/testing/test/#options","title":"Options","text":"Option Description Default <code>reload</code> Reload before running tests <code>true</code> <code>debug</code> Show debug output <code>false</code> <code>format</code> Output format <code>json</code> <code>adapter</code> Test adapter <code>\"\"</code> (empty) <code>--help</code> Show help information"},{"location":"command-line-tools/commands/testing/test/#test-types","title":"Test Types","text":""},{"location":"command-line-tools/commands/testing/test/#core-tests","title":"Core Tests","text":"<p><pre><code>wheels test core\n</code></pre> - Tests Wheels framework functionality - Verifies framework integrity - Useful after framework updates</p>"},{"location":"command-line-tools/commands/testing/test/#app-tests","title":"App Tests","text":"<p><pre><code>wheels test app\n</code></pre> - Runs application-level framework tests - Tests Wheels configuration - Verifies app-specific framework features</p>"},{"location":"command-line-tools/commands/testing/test/#plugin-tests","title":"Plugin Tests","text":"<p><pre><code>wheels test plugin\n</code></pre> - Tests installed Wheels plugins - Verifies plugin compatibility - Checks plugin functionality</p>"},{"location":"command-line-tools/commands/testing/test/#examples","title":"Examples","text":""},{"location":"command-line-tools/commands/testing/test/#run-app-tests-default","title":"Run app tests (default)","text":"<pre><code>wheels test\n</code></pre>"},{"location":"command-line-tools/commands/testing/test/#run-core-framework-tests","title":"Run core framework tests","text":"<pre><code>wheels test core\n</code></pre>"},{"location":"command-line-tools/commands/testing/test/#run-tests-on-specific-server","title":"Run tests on specific server","text":"<pre><code>wheels test type=app serverName=myserver\n</code></pre>"},{"location":"command-line-tools/commands/testing/test/#run-with-debug-output","title":"Run with debug output","text":"<pre><code>wheels test debug=true\n</code></pre>"},{"location":"command-line-tools/commands/testing/test/#skip-reload","title":"Skip reload","text":"<pre><code>wheels test reload=false\n</code></pre>"},{"location":"command-line-tools/commands/testing/test/#deprecation-notice","title":"Deprecation Notice","text":"<pre><code>\u26a0\ufe0f  WARNING: The 'wheels test' command is deprecated.\n   Please use 'wheels test run' instead.\n   See: wheels help test run\n</code></pre>"},{"location":"command-line-tools/commands/testing/test/#output-example","title":"Output Example","text":"<pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551           Running Wheels Tests                \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n\nTest Type: app\nServer: default\nReloading: Yes\n\nInitializing test environment...\n\u2713 Environment ready\n\nRunning tests...\n\nModel Tests\n  \u2713 validations work correctly (15ms)\n  \u2713 associations load properly (23ms)\n  \u2713 callbacks execute in order (8ms)\n\nController Tests\n  \u2713 filters apply correctly (12ms)\n  \u2713 caching works as expected (45ms)\n  \u2713 provides correct formats (5ms)\n\nView Tests\n  \u2713 helpers render correctly (18ms)\n  \u2713 partials include properly (9ms)\n  \u2713 layouts apply correctly (11ms)\n\nPlugin Tests\n  \u2713 DBMigrate plugin loads (7ms)\n  \u2713 Scaffold plugin works (22ms)\n\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551              Test Summary                     \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n\nTotal Tests: 11\nPassed: 11\nFailed: 0\nErrors: 0\nTime: 173ms\n\n\u2713 All tests passed!\n</code></pre>"},{"location":"command-line-tools/commands/testing/test/#framework-test-categories","title":"Framework Test Categories","text":""},{"location":"command-line-tools/commands/testing/test/#model-tests","title":"Model Tests","text":"<ul> <li>Validations</li> <li>Associations</li> <li>Callbacks</li> <li>Properties</li> <li>Calculations</li> </ul>"},{"location":"command-line-tools/commands/testing/test/#controller-tests","title":"Controller Tests","text":"<ul> <li>Filters</li> <li>Caching</li> <li>Provides/formats</li> <li>Redirects</li> <li>Rendering</li> </ul>"},{"location":"command-line-tools/commands/testing/test/#view-tests","title":"View Tests","text":"<ul> <li>Helper functions</li> <li>Form helpers</li> <li>Asset helpers</li> <li>Partials</li> <li>Layouts</li> </ul>"},{"location":"command-line-tools/commands/testing/test/#dispatcher-tests","title":"Dispatcher Tests","text":"<ul> <li>Routing</li> <li>URL rewriting</li> <li>Request handling</li> <li>Parameter parsing</li> </ul>"},{"location":"command-line-tools/commands/testing/test/#configuration","title":"Configuration","text":""},{"location":"command-line-tools/commands/testing/test/#test-settings","title":"Test Settings","text":"<p>In <code>/config/settings.cfm</code>: <pre><code>&lt;cfset set(testEnvironment=true)&gt;\n&lt;cfset set(testDataSource=\"myapp_test\")&gt;\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test/#test-database","title":"Test Database","text":"<p>Create separate test database: <pre><code>CREATE DATABASE myapp_test;\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test/#debugging-failed-tests","title":"Debugging Failed Tests","text":""},{"location":"command-line-tools/commands/testing/test/#enable-debug-mode","title":"Enable debug mode","text":"<pre><code>wheels test debug=true\n</code></pre>"},{"location":"command-line-tools/commands/testing/test/#check-specific-test-file","title":"Check specific test file","text":"<pre><code>Failed: Model Tests &gt; validations work correctly\nFile: /tests/framework/model/validations.cfc\nLine: 45\nExpected: true\nActual: false\n</code></pre>"},{"location":"command-line-tools/commands/testing/test/#common-issues","title":"Common issues","text":"<ol> <li>Database not configured: Check test datasource</li> <li>Reload password wrong: Verify settings</li> <li>Plugin conflicts: Disable plugins and retest</li> <li>Cache issues: Clear cache and retry</li> </ol>"},{"location":"command-line-tools/commands/testing/test/#continuous-integration","title":"Continuous Integration","text":""},{"location":"command-line-tools/commands/testing/test/#github-actions","title":"GitHub Actions","text":"<pre><code>- name: Run Wheels tests\n  run: |\n    box install\n    box server start\n    wheels test core\n    wheels test app\n</code></pre>"},{"location":"command-line-tools/commands/testing/test/#jenkins","title":"Jenkins","text":"<pre><code>stage('Framework Tests') {\n    steps {\n        sh 'wheels test core'\n        sh 'wheels test app'\n    }\n}\n</code></pre>"},{"location":"command-line-tools/commands/testing/test/#custom-framework-tests","title":"Custom Framework Tests","text":"<p>Add tests in <code>/tests/framework/</code>:</p> <pre><code>component extends=\"wheels.Test\" {\n\n    function test_custom_framework_feature() {\n        // Test custom framework modification\n        actual = customFrameworkMethod();\n        assert(actual == expected);\n    }\n\n}\n</code></pre>"},{"location":"command-line-tools/commands/testing/test/#performance-testing","title":"Performance Testing","text":"<p>Run with timing: <pre><code>wheels test --debug | grep \"Time:\"\n</code></pre></p> <p>Monitor slow tests: <pre><code>\u2713 complex query test (523ms) \u26a0\ufe0f SLOW\n\u2713 simple validation (8ms)\n</code></pre></p>"},{"location":"command-line-tools/commands/testing/test/#test-isolation","title":"Test Isolation","text":"<p>Tests run in isolation: - Separate request for each test - Transaction rollback (if enabled) - Clean application state</p>"},{"location":"command-line-tools/commands/testing/test/#troubleshooting","title":"Troubleshooting","text":""},{"location":"command-line-tools/commands/testing/test/#tests-wont-run","title":"Tests won't run","text":"<pre><code># Check server is running\nbox server status\n\n# Verify test URL\ncurl http://localhost:3000/wheels/tests\n</code></pre>"},{"location":"command-line-tools/commands/testing/test/#reload-issues","title":"Reload issues","text":"<pre><code># Manual reload first\nwheels reload\n\n# Then run tests\nwheels test reload=false\n</code></pre>"},{"location":"command-line-tools/commands/testing/test/#memory-issues","title":"Memory issues","text":"<pre><code># Increase heap size\nbox server set jvm.heapSize=512\nbox server restart\n</code></pre>"},{"location":"command-line-tools/commands/testing/test/#best-practices","title":"Best Practices","text":"<ol> <li>Run before deployment</li> <li>Test after framework updates</li> <li>Verify plugin compatibility</li> <li>Use CI/CD integration</li> <li>Keep test database clean</li> </ol>"},{"location":"command-line-tools/commands/testing/test/#migration-to-new-command","title":"Migration to New Command","text":""},{"location":"command-line-tools/commands/testing/test/#old-command-deprecated","title":"Old Command (Deprecated)","text":"<pre><code>wheels test app\nwheels test core myserver\nwheels test debug=true\n</code></pre>"},{"location":"command-line-tools/commands/testing/test/#new-command","title":"New Command","text":"<pre><code>wheels test run\nwheels test run --group=core\nwheels test run --verbose\n</code></pre>"},{"location":"command-line-tools/commands/testing/test/#difference-from-testbox-tests","title":"Difference from TestBox Tests","text":"Feature <code>wheels test</code> (deprecated) <code>wheels test run</code> Purpose Framework tests Application tests Framework Wheels Test TestBox Location <code>/wheels/tests/</code> <code>/tests/</code> Use Case Framework integrity App functionality Status Deprecated Current"},{"location":"command-line-tools/commands/testing/test/#see-also","title":"See Also","text":"<ul> <li>wheels test run - Run TestBox application tests</li> <li>wheels test coverage - Generate coverage reports</li> <li>wheels test debug - Debug test execution</li> <li>wheels reload - Reload application</li> </ul>"},{"location":"database-interaction-through-models/associations/","title":"Associations","text":"<p>Associations in Wheels allow you to define the relationships between your database tables. After configuring these relationships, doing pesky table joins becomes a trivial task. And like all other ORM functions in Wheels, this is done without writing a single line of SQL.</p>"},{"location":"database-interaction-through-models/associations/#3-types-of-associations","title":"3 Types of Associations","text":"<p>In order to set up associations, you only need to remember 3 simple methods. Considering that the human brain only reliably remembers up to 7 items, we've left you with a lot of extra space. You're welcome. :)</p> <p>The association methods should always be called in the <code>config()</code> method of a model that relates to another model within your application.</p>"},{"location":"database-interaction-through-models/associations/#the-belongsto-association","title":"The belongsTo Association","text":"<p>If your database table contains a field that is a foreign key to another table, then this is where to use the belongsTo()function.</p> <p>If we had a comments table that contains a foreign key to the posts table called <code>postid</code>, then we would have this <code>config()</code> method within our comment model:</p> <p>{% code title=\"app/models/comment.cfc\" %} <pre><code>component extends=\"Model\" {\n\n    function config() {\n        belongsTo(\"post\");\n    }\n\n}\n</code></pre> {% endcode %}</p>"},{"location":"database-interaction-through-models/associations/#the-hasone-and-hasmany-associations","title":"The hasOne and hasMany Associations","text":"<p>On the other side of the relationship are the \"has\" functions. As you may have astutely guessed, these functions should be used according to the nature of the model relationship.</p> <p>At this time, you need to be a little eccentric and talk to yourself. Your association should make sense in plain English language.</p>"},{"location":"database-interaction-through-models/associations/#an-example-of-hasmany","title":"An example of hasMany","text":"<p>So let's consider the <code>post / comment</code> relationship mentioned above for <code>belongsTo()</code>. If we were to talk to ourselves, we would say, \"A post has many comments.\" And that's how you should construct your post model:</p> <p>{% code title=\"app/models/Post.cfc\" %} <pre><code>component extends=\"Model\" {\n\n    function config() {\n        hasMany(\"comments\");\n    }\n\n}\n</code></pre> {% endcode %}</p> <p>You may be a little concerned because our model is called <code>comment</code> and not <code>comments</code>. No need to worry: Wheels understands the need for the plural in conjunction with the <code>hasMany()</code> method.</p> <p>And don't worry about those pesky words in the English language that aren't pluralized by just adding an \"s\" to the end. Wheels is smart enough to know that words like \"deer\" and \"children\" are the plurals of \"deer\" and \"child,\" respectively.</p>"},{"location":"database-interaction-through-models/associations/#an-example-of-hasone","title":"An Example of hasOne","text":"<p>The hasOne() association is not used as often as the hasMany() association, but it has its use cases. The most common use case is when you have a large table that you have broken down into two or more smaller tables (a.k.a. denormalization) for performance reasons or otherwise.</p> <p>Let's consider an association between <code>user</code> and <code>profile</code>. A lot of websites allow you to enter required info such as name and email but also allow you to add optional information such as age, salary, and so on. These can of course be stored in the same table. But given the fact that so much information is optional, it would make sense to have the required info in a <code>users</code> table and the optional info in a <code>profiles</code> table. This gives us a <code>hasOne()</code> relationship between these two models: \"A user has one profile.\"</p> <p>In this case, our <code>profile</code> model would look like this:</p> <p>{% code title=\"app/models/profile.cfc\" %} <pre><code>component extends=\"Model\" {\n\n    function config() {\n        belongsTo(\"user\");\n    }\n\n}\n</code></pre> {% endcode %}</p> <p>And our user model would look like this:</p> <p>{% code title=\"app/models/user.cfc\" %} <pre><code>component extends=\"Model\" {\n\n    function config() {\n        hasOne(\"profile\");\n    }\n\n}\n</code></pre> {% endcode %}</p> <p>As you can see, you do not pluralize \"profile\" in this case because there is only one profile.</p> <p>By the way, as you can see above, the association goes both ways, i.e. a <code>user hasOne() profile</code>, and a <code>profile belongsTo()</code> a <code>user</code>. Generally speaking, all associations should be set up this way. This will give you the fullest API to work with in terms of the methods and arguments that Wheels makes available for you.</p> <p>However, this is not a definite requirement. Wheels associations are completely independent of one another, so it's perfectly OK to setup a hasMany() association without specifying the related belongsTo() association.</p>"},{"location":"database-interaction-through-models/associations/#dependencies","title":"Dependencies","text":"<p>A dependency is when an associated model relies on the existence of its parent. In the example above, a <code>profile</code> is dependent on a <code>user</code>. When you delete the <code>user</code>, you would usually want to delete the <code>profile</code> as well.</p> <p>Wheels makes this easy for you. When setting up your association, simply add the argument <code>dependent</code> with one of the following values, and Wheels will automatically deal with the dependency.</p> <p>In your <code>model.cfc</code> file's <code>config()</code> function::</p> <pre><code>// Instantiates the `profile` model and calls its `delete()` method.\nhasOne(name=\"profile\", dependent=\"delete\");\n\n// Quickly deletes the `profile` without instantiating it.\nhasOne(name=\"profile\", dependent=\"deleteAll\");\n\n// Sets the `userId` of the profile to `NULL`.\nhasOne(name=\"profile\", dependent=\"remove\");\n\n// Sets the `userId` of the profile to `NULL` (without instantiation).\nhasOne(name=\"profile\", dependent=\"removeAll\");\n</code></pre> <p>You can create dependencies on <code>hasOne()</code> and <code>hasMany()</code> associations, but not <code>belongsTo()</code>.</p>"},{"location":"database-interaction-through-models/associations/#self-joins","title":"Self-Joins","text":"<p>It's possible for a model to be associated to itself. Take a look at the below setup where an employee belongs to a manager for example:</p> <p>{% code title=\"app/models/employee.cfc\" %} <pre><code>component extends=\"Model\" {\n\n    function config() {\n        belongsTo(name=\"manager\", modelName=\"employee\", foreignKey=\"managerId\");\n    }\n\n}\n</code></pre> {% endcode %}</p> <p>Both the manager and employee are stored in the same <code>employees</code> table and share the same <code>Employee</code> model.</p> <p>When you use this association in your code, the <code>employees</code> table will be joined to itself using the <code>managerid</code> column. Wheels will handle the aliasing of the (otherwise duplicated) table names. It does this by using the pluralized version of the name you gave the association (in other words \"managers\" in this case).</p> <p>This is important to remember because if you, for example, want to select the manager's name, you will have to do so manually (Wheels won't do this for you, like it does with normal associations) using the <code>select</code> argument.</p> <p>Here's an example of how to select both the name of the employee and their manager:</p> <p>{% code title=\"app/controllers/employees.cfc\" %} <pre><code>component extends=\"Controller\" {\n function index() {\n\n   employees= model(\"employee\").findAll(include=\"manager\", select=\"employees.name, managers.name AS managerName\");\n\n }\n}\n</code></pre> {% endcode %}</p> <p>{% hint style=\"info\" %}</p>"},{"location":"database-interaction-through-models/associations/#know-your-joins","title":"Know Your Joins","text":"<p>Because the default <code>joinType</code> for <code>belongsTo()</code> is <code>inner</code>, employees without a manager assigned to them will not be returned in the <code>findAll()</code> call above. To return all rows you can set <code>jointype</code> to <code>outer</code> instead. {% endhint %}</p>"},{"location":"database-interaction-through-models/associations/#database-table-setup","title":"Database Table Setup","text":"<p>Like everything else in Wheels, we strongly recommend a default naming convention for foreign key columns in your database tables.</p> <p>In this case, the convention is to use the singular name of the related table with <code>id</code> appended to the end. So to link up our table to the <code>employees</code> table, the foreign key column should be named <code>employeeid</code>.</p>"},{"location":"database-interaction-through-models/associations/#breaking-the-convention","title":"Breaking the Convention","text":"<p>Wheels offers a way to configure your models to break this naming convention, however. This is done by using the <code>foreignKey</code> argument in your models' <code>belongsTo()</code> calls.</p> <p>Let's pretend that you have a relationship between <code>author</code> and <code>post</code>, but you didn't use the naming convention and instead called the column <code>author_id</code>. (You just can't seem to let go of the underscores, can you?)</p> <p>Your post's <code>config()</code> method would then need to look like this:</p> <p>{% code title=\"app/models/post.cfc\" %} <pre><code>component extends=\"Model\" {\n\n    function config() {\n        belongsTo(name=\"author\", foreignKey=\"author_id\");\n    }\n\n}\n</code></pre> {% endcode %}</p> <p>You can keep your underscores if it's your preference or if it's required of your application.</p>"},{"location":"database-interaction-through-models/associations/#leveraging-model-associations-in-your-application","title":"Leveraging Model Associations in Your Application","text":"<p>Now that we have our associations set up, let's use them to get some data into our applications.</p> <p>There are a couple ways to join data via associations, which we'll go over now.</p>"},{"location":"database-interaction-through-models/associations/#using-the-include-argument-in-findall","title":"Using the include Argument in findAll()","text":"<p>To join data from related tables in our findAll() calls, we simply need to use the include argument. Let's say that we wanted to include data about the author in our  findAll() call for <code>posts</code>.</p> <p>Here's what that call would look like:</p> <p>{% code title=\"app/controllers/posts.cfc\" %} <pre><code>component extends=\"Controller\" {\n function index() {\n\n   posts = model(\"post\").findAll(include=\"author\");\n\n }\n}\n</code></pre> {% endcode %}</p> <p>It's that simple. Wheels will then join the <code>authors</code> table automatically so that you can use that data along with the data from <code>posts</code>.</p> <p>Note that if you switch the above statement around like this:</p> <p>{% code title=\"app/controllers/authors.cfc\" %} <pre><code>component extends=\"Controller\" {\n function index() {\n\n  authors = model(\"author\").findAll(include=\"posts\");\n\n }\n}\n</code></pre> {% endcode %}</p> <p>Then you would need to specify \"post\" in its plural form, \"posts.\" If you're thinking about when to use the singular form and when to use the plural form, just use the one that seems most natural.</p> <p>If you look at the two examples above, you'll see that in example #1, you're asking for all posts including each post's author (hence the singular \"author\"). In example #2, you're asking for all authors and all of the posts written by each author (hence the plural \"posts\").</p> <p>You're not limited to specifying just one association in the <code>include</code> argument. You can for example return data for <code>authors</code>, <code>posts</code>, and <code>bios</code> in one call like this:</p> <p>{% code title=\"app/controllers/authors.cfc\" %} <pre><code>component extends=\"Controller\" {\n function index() {\n\n   authorsPostsAndComments =    model(\"author\").findAll(include=\"posts,bio\");\n\n }\n}\n</code></pre> {% endcode %}</p> <p>To include several tables, simply delimit the names of the models with a comma. All models should contain related associations, or else you'll get a mountain of repeated data back.</p>"},{"location":"database-interaction-through-models/associations/#joining-tables-through-a-chain-of-associations","title":"Joining Tables Through a Chain of Associations","text":"<p>When you need to include tables more than one step away in a chain of joins, you will need to start using parenthesis. Look at the following example:</p> <p>{% code title=\"app/controllers/comments.cfc\" %} <pre><code>component extends=\"Controller\" {\n function index() {\n\n   commentsPostsAndAuthors = model(\"comment\").findAll(include=\"post(author)\");\n\n }\n}\n</code></pre> {% endcode %}</p> <p>The use of parentheses above tells Wheels to look for an association named <code>author</code> on the <code>post</code> model instead of on the <code>comment</code> model. (Looking at the <code>comment</code> model is the default behavior when not using parenthesis.)</p>"},{"location":"database-interaction-through-models/associations/#handling-column-naming-collisions","title":"Handling Column Naming Collisions","text":"<p>There is a minor caveat to this approach. If you have a column in both associated tables with the same name, Wheels will pick just one to represent that column.</p> <p>In order to include both columns, you can override this behavior with the <code>select</code> argument in the finder functions.</p> <p>For example, if we had a column named <code>name</code> in both your <code>posts</code> and <code>authors</code> tables, then you could use the <code>select</code> argument like so:</p> <p>{% code title=\"app/controllers/posts.cfc\" %} <pre><code>component extends=\"Controller\" {\n function index() {\n\n   posts = model(\"post\").findAll(\n    select=\"posts.name, authors.id, authors.post_id, authors.name AS authorname\",\n    include=\"author\"\n);\n\n }\n}\n</code></pre> {% endcode %}</p> <p>You would need to hard-code all column names that you need in that case, which does remove some of the simplicity. There are always trade-offs!</p>"},{"location":"database-interaction-through-models/associations/#using-dynamic-shortcut-methods","title":"Using Dynamic Shortcut Methods","text":"<p>A cool feature of Wheels is the ability to use dynamic shortcut methods to work with the models you have set up associations for. By dynamic, we mean that the name of the method depends on what name you have given the association when you set it up. By shortcut, we mean that the method usually delegates the actual processing to another Wheels method but gives you, the developer, an easier way to achieve the task (and makes your code more readable in the process).</p> <p>As usual, this will make more sense when put into the context of an example. So let's do that right now.</p>"},{"location":"database-interaction-through-models/associations/#example-dynamic-shortcut-methods-for-posts-and-comments","title":"Example: Dynamic Shortcut Methods for Posts and Comments","text":"<p>Let's say that you tell Wheels through a hasMany() call that a <code>post</code> has many <code>comments</code>. What happens then is that Wheels will enrich the post model by adding a bunch of useful methods related to this association.</p> <p>If you wanted to get all <code>comments</code> that have been submitted for a <code>post</code>, you can now call <code>post.comments()</code>. In the background, Wheels will delegate this to a findAll() call with the <code>where</code> argument set to <code>postid=#post.id#</code>.</p>"},{"location":"database-interaction-through-models/associations/#listing-of-dynamic-shortcut-methods","title":"Listing of Dynamic Shortcut Methods","text":"<p>Here are all the methods that are added for the three possible association types.</p> <p>Methods Added by hasMany</p> <p>Given that you have told Wheels that a <code>post</code> has many <code>comments</code> through a hasMany() call, here are the methods that will be made available to you on the <code>post</code> model.</p> <p>Replace <code>[associationName]</code> below with the name of the associated model (i.e. <code>comments</code> in the case of the example that we're using here).</p> Method Example Description associationName post.comments() Returns all comments where the foreign key matches the post's primary key value. Similar to calling <code>model(\"comment\").findAll(where=\"postid=#post.id#\")</code>. addAssociationName post.addComment(comment) Adds a comment to the post association by setting its foreign key to the post's primary key value. Similar to calling <code>model(\"comment\").updateByKey(key=comment.id, postid=post.id)</code>. removeAssociationName post.removeComment(comment) Removes a comment from the post association by setting its foreign key value to <code>NULL</code>. Similar to calling <code>model(\"comment\").updateByKey(key=comment.id, postid=\"\")</code>. deleteAssociationName post.deleteComment(comment) Deletes the associated comment from the database table. Similar to calling <code>model(\"comment\").deleteByKey(key=comment.id)</code>. removeAllAssociationName post.removeAllComments() Removes all comments from the post association by setting their foreign key values to <code>NULL</code>. Similar to calling <code>model(\"comment\").updateAll(postid=\"\", where=\"postid=#post.id#\")</code>. deleteAllAssociationName post.deleteAllComments() Deletes the associated comments from the database table. Similar to calling <code>model(\"comment\").deleteAll(where=\"postid=#post.id#\")</code>. [associationName]Count() post.commentCount() Returns the number of associated comments. Similar to calling <code>model(\"comment\").count(where=\"postid=#post.id#\")</code>. newAssociationName post.newComment() Creates a new comment object. Similar to calling <code>model(\"comment\").new(postid=post.id)</code>. createAssociationName post.createComment() Creates a new comment object and saves it to the database. Similar to calling <code>model(\"comment\").create(postid=post.id)</code>. hasAssociationName post.hasComments() Returns true if the post has any comments associated with it. Similar to calling <code>model(\"comment\").exists(where=\"postid=#post.id#\")</code>. findOneAssociationName post.findOneComment() Returns one of the associated comments. Similar to calling <code>model(\"comment\").findOne(where=\"postid=#post.id#\")</code>. <p>Methods Added by hasOne</p> <p>The hasOne() association adds a few methods as well. Most of them are very similar to the ones added by hasMany().</p> <p>Given that you have told Wheels that an <code>author</code> has one <code>profile</code> through a hasOne() call, here are the methods that will be made available to you on the <code>author</code> model.</p> Method Example Description associationName author.profile() Returns the profile where the foreign key matches the author's primary key value. Similar to calling model(\"profile\").findOne(where=\"authorid=#author.id#\"). setAssociationName author.setProfile(profile) Sets the profile to be associated with the author by setting its foreign key to the author's primary key value. You can pass in either a profile object or the primary key value of a profile object to this method. Similar to calling model(\"profile\").updateByKey(key=profile.id, authorid=author.id). removeAssociationName author.removeProfile() Removes the profile from the author association by setting its foreign key to NULL. Similar to calling model(\"profile\").updateOne(where=\"authorid=#author.id#\", authorid=\"\"). deleteAssociationName author.deleteProfile() Deletes the associated profile from the database table. Similar to calling model(\"profile\").deleteOne(where=\"authorid=#author.id#\") newAssociationName author.newProfile() Creates a new profile object. Similar to calling model(\"profile\").new(authorid=author.id). createAssociationName author.createProfile() Creates a new profile object and saves it to the database. Similar to calling model(\"profile\").create(authorid=author.id). hasAssociationName author.hasProfile() Returns true if the author has an associated profile. Similar to calling model(\"profile\").exists(where=\"authorid=#author.id#\"). <p>Methods Added by belongsTo</p> <p>The belongsTo() association adds a couple of methods to your model as well.</p> <p>Given that you have told Wheels that a <code>comment</code> belongs to a <code>post</code> through a belongsTo() call, here are the methods that will be made available to you on the <code>comment</code> model.</p> Method Example Description associationName comment.post() Returns the post where the primary key matches the comment's foreign key value. Similar to calling model(\"post\").findByKey(comment.postid). hasAssociationName comment.hasPost() Returns true if the comment has a post associated with it. Similar to calling model(\"post\").exists(comment.postid). <p>One general rule for all of the methods above is that you can always supply any argument that is accepted by the method that the processing is delegated to. This means that you can, for example, call <code>post.comments(order=\"createdAt DESC\")</code>, and the <code>order</code> argument will be passed along to <code>findAll()</code>.</p> <p>Another rule is that whenever a method accepts an object as its first argument, you also have the option of supplying the primary key value instead. This means that <code>author.setProfile(profile)</code> will perform the same task as <code>author.setProfile(1)</code>. (Of course, we're assuming that the <code>profile</code> object in this example has a primary key value of <code>1</code>.)</p>"},{"location":"database-interaction-through-models/associations/#performance-of-dynamic-association-finders","title":"Performance of Dynamic Association Finders","text":"<p>You may be concerned that using a dynamic finder adds yet another database call to your application.</p> <p>If it makes you feel any better, all calls in your Wheels request that generate the same SQL queries will be cached for that request. No need to worry about the performance implications of making multiple calls to the same <code>author.posts()</code> call in the scenario above, for example.</p>"},{"location":"database-interaction-through-models/associations/#passing-arguments-to-dynamic-shortcut-methods","title":"Passing Arguments to Dynamic Shortcut Methods","text":"<p>You can also pass arguments to dynamic shortcut methods where applicable. For example, with the <code>[associationName]()</code> method, perhaps we'd want to limit a <code>post</code>'s comment listing to just ones created today. We can pass a <code>where</code> argument similar to what is passed to the <code>findAll()</code> function that powers <code>[associationName]()</code> behind the scenes.</p> <pre><code>today = DateFormat(Now(), \"yyyy-mm-dd\");\ncomments = post.comments(where=\"createdAt &gt;= '#today# 00:00:00'\");\n</code></pre>"},{"location":"database-interaction-through-models/associations/#many-to-many-relationships","title":"Many-to-Many Relationships","text":"<p>We can use the same 3 association functions to set up many-to-many table relationships in our models. It follows the same logic as the descriptions mentioned earlier in this chapter, so let's jump right into an example.</p> <p>Let's say that we wanted to set up a relationship between <code>customers</code> and <code>publications</code>. A <code>customer</code> can be subscribed to many <code>publications</code>, and <code>publications</code> can be subscribed to by many <code>customers</code>. In our database, this relationship is linked together by a third table called <code>subscriptions</code> (sometimes called a bridge entity by ERD snobs).</p>"},{"location":"database-interaction-through-models/associations/#setting-up-the-models","title":"Setting up the Models","text":"<p>Here are the representative models:</p> <p>{% code title=\"app/models/Customer.cfc\" %} <pre><code>component extends=\"Model\" {\n\n    function config() {\n        hasMany(\"subscriptions\");\n    }\n\n}\n</code></pre> {% endcode %}</p> <p>{% code title=\"app/models/Publication.cfc\" %} <pre><code>component extends=\"Model\" {\n\n    function config() {\n        hasMany(\"subscriptions\");\n    }\n\n}\n</code></pre> {% endcode %}</p> <p>{% code title=\"app/models/Subscription.cfc\" %} <pre><code>component extends=\"Model\" {\n\n    function config() {\n      belongsTo(\"customer\");\n      belongsTo(\"publication\");\n    }\n\n}\n</code></pre> {% endcode %}</p> <p>This assumes that there are foreign key columns in <code>subscriptions</code> called <code>customerid</code> and <code>publicationid</code>.</p>"},{"location":"database-interaction-through-models/associations/#using-finders-with-a-many-to-many-relationship","title":"Using Finders with a Many-to-Many Relationship","text":"<p>At this point, it's still fairly easy to get data from the many-to-many association that we have set up above.</p> <p>We can include the related tables from the <code>subscription</code> bridge entity to get the same effect:</p> <p>{% code title=\"app/controllers/subscriptions.cfc\" %} <pre><code>component extends=\"Controller\" {\n function index() {\n\n   subscriptions= model(\"subscription\").findAll(include=\"customer,publication\");\n\n }\n}\n</code></pre> {% endcode %}</p>"},{"location":"database-interaction-through-models/associations/#creating-a-shortcut-for-a-many-to-many-relationship","title":"Creating a Shortcut for a Many-to-Many Relationship","text":"<p>With the <code>shortcut</code> argument to hasMany(), you can have Wheels create a dynamic method that lets you bypass the join model and instead reference the model on the other end of the many-to-many relationship directly.</p> <p>For our example above, you can alter the hasMany() call on the <code>customer</code> model to look like this instead:</p> <p>{% code title=\"app/models/customer.cfc\" %} <pre><code>component extends=\"Model\" {\n\n function config() {\n    hasMany(name=\"subscriptions\", shortcut=\"publications\");\n }\n}\n</code></pre> {% endcode %}</p> <p>Now you can get a customer's publications directly by using code like this:</p> <p>{% code title=\"app/controllers/customers.cfc\" %} <pre><code>component extends=\"Controller\" {\n function edit() {\n\n   customer= model(\"customer\").findByKey(params.key);\n   publications= customer.publications();\n\n }\n}\n</code></pre> {% endcode %}</p> <p>This functionality relies on having set up all the appropriate hasMany() and belongsTo() associations in all 3 models (like we have in our example in this chapter).</p> <p>It also relies on the association names being consistent, but if you have customized your association names, you can specify exactly which associations the shortcut method should use with the <code>through</code> argument.</p> <p>The <code>through</code> argument accepts a list of 2 association names. The first argument is the name of the belongsTo()association (set in the <code>subscription</code> model in this case), and the second argument is the hasMany() association going back the other way (set in the <code>publication</code> model).</p> <p>Sound complicated? That's another reason to stick to the conventions whenever possible: it keeps things simple.</p>"},{"location":"database-interaction-through-models/associations/#are-you-still-with-us","title":"Are You Still with Us?","text":"<p>As you just read, Wheels offers a ton of functionality to make your life easier in working with relational databases. Be sure to give some of these techniques a try in your next Wheels application, and you'll be amazed at how little code that you'll need to write to interact with your database.</p>"},{"location":"database-interaction-through-models/automatic-time-stamps/","title":"Automatic Time Stamps","text":"<p>When working with database tables, it is very common to have a column that holds the time that the record was added or last modified. If you have an e-commerce website with an orders table, you want to store the date and time the order was made; if you run a blog, you want to know when someone left a comment; and so on.</p> <p>As with anything that is a common task performed by many developers, it makes a good candidate for abstracting to the framework level. So that's what we did.</p>"},{"location":"database-interaction-through-models/automatic-time-stamps/#columns-used-for-timestamps","title":"Columns Used for Timestamps","text":"<p>If you have either of the following columns in your database table, Wheels will see them and treat them a little differently than others.</p> <p>createdat</p> <p>Wheels will use a <code>createdat</code> column automatically to store the current date and time when an <code>INSERT</code>operation is made (which could happen through a save() or create() operation, for example).</p> <p>updatedat</p> <p>If Wheels sees an <code>updatedat</code> column, it will use it to store the current date and time automatically when an <code>UPDATE</code> operation is made (which could happen through a save() or update() operation, for example).</p>"},{"location":"database-interaction-through-models/automatic-time-stamps/#data-type-of-columns","title":"Data Type of Columns","text":"<p>If you add any of these columns to your table, make sure they can accept date/time values (like <code>datetime</code> or <code>timestamp</code>, for example) and that they can be set to <code>null</code>.</p>"},{"location":"database-interaction-through-models/automatic-time-stamps/#time-zones","title":"Time Zones","text":"<p>Time stamping is done in UTC (Coordinated Universal Time) by default but if you want to use your local time instead all you have to do is change the global setting for it like this:</p> <p><code>set(timeStampMode=\"local\");</code></p>"},{"location":"database-interaction-through-models/calculated-properties/","title":"Calculated Properties","text":""},{"location":"database-interaction-through-models/calculated-properties/#working-within-cfmls-constraints-to-deliver-oop-like-functionality","title":"Working within CFML's Constraints to Deliver OOP-like Functionality","text":"<p>Wheels makes up for the slowness of arrays of objects in CFML by providing calculated properties. With calculated properties, you can generate additional properties on the fly based on logic and data within your database.</p>"},{"location":"database-interaction-through-models/calculated-properties/#example-1-full-name","title":"Example #1: Full Name","text":"<p>Consider the example of <code>fullName</code>. If your database table has fields for <code>firstName</code> and <code>lastName</code>, it wouldn't make sense to store a third column called <code>fullName</code>. This would require more storage for redundant data, and it would add extra complexity that could lead to bugs and maintenance problems in the future.</p>"},{"location":"database-interaction-through-models/calculated-properties/#traditional-object-oriented-calculations","title":"Traditional Object-Oriented Calculations","text":"<p>In most object-oriented languages, you would add a method to your class called <code>getFullName()</code>, which would return the concatenation of <code>this.firstName &amp; \" \" &amp; this.lastName</code>. The <code>getFullName()</code> method could potentially provide arguments to list the last name first and other types of calculations or transformations as well.</p> <p>Wheels still allows for you to do this sort of dynamic calculation with the <code>returnAs=\"objects\"</code> argument in methods like findAll(), but we advise against it when fetching large data sets because of the slowness of <code>CreateObject()</code> across CFML engines.</p> <p>See the chapter on Reading Records for more information.</p>"},{"location":"database-interaction-through-models/calculated-properties/#using-calculated-properties-to-generate-fullname-in-the-database-at-runtime","title":"Using Calculated Properties to Generate fullName in the Database at Runtime","text":"<p>As an alternative, you can set up a calculated property that dynamically performs the concatenation at the database level. In our example, we would write a line similar to this in our model's <code>config()</code> method:</p> <pre><code>property(\n        name=\"fullName\",\n        sql=\"RTRIM(LTRIM(ISNULL(users.firstname, '') + ' '\n            + ISNULL(users.lastname, '')))\"\n    );\n</code></pre> <p>As you can probably deduce, we're creating a SQL statement that will be run in the <code>SELECT</code> clause to generate the `fullName.</p> <p>With this line in place, <code>fullName</code> will become available in both full model objects and query objects returned by the various finder methods like findAll() and findOne().</p>"},{"location":"database-interaction-through-models/calculated-properties/#example-2-age","title":"Example #2: Age","text":"<p>Naturally, if you store the user's birth date in the database, your application can use that data to dynamically calculate the user's age. Your app always knows how many years old the user is without needing to explicitly store his or her age.</p>"},{"location":"database-interaction-through-models/calculated-properties/#creating-the-calculated-property-for-age","title":"Creating the Calculated Property for Age","text":"<p>In order to calculate an extra property called <code>age</code> based on the <code>birthDate</code> column, our calculated property in <code>config()</code> may look something like this:</p> <p>Example Code</p> <pre><code>property(\n        name=\"age\",\n        sql=\"(CAST(CONVERT(CHAR(8), GETDATE(), 112) AS INT)\n            - CAST(CONVERT(CHAR(8), users.date_of_birth, 112) AS INT))\n            / 10000\"\n);\n</code></pre> <p>Much like the <code>fullName</code> example above, this will cause the database to add a property called <code>age</code> storing the user's age as an integer.</p> <p>Note that the cost to this approach is that you may need to introduce DBMS-specific code into your models. This may cause problems when you need to switch DBMS platforms, but at least all of this logic is isolated into your model CFCs.</p>"},{"location":"database-interaction-through-models/calculated-properties/#using-the-new-age-property-for-other-database-calculations","title":"Using the New age Property for Other Database Calculations","text":"<p>Calculated properties don't end at just generating extra properties. You can now also use the new property for additional calculations:</p> <ul> <li>Creating additional properties with the <code>select</code> argument</li> <li>Additional <code>where</code> clause calculations</li> <li>Record sorting with <code>order</code></li> <li>Pagination</li> <li>And so on\u2026</li> </ul> <p>For example, let's say that we only want to use <code>age</code> to return users who are in their 20s. We can use the new <code>age</code>property as if it existed in the database table. For extra measure, let's also sort the results from oldest to youngest.</p> <p>Example Code</p> <pre><code>users = model(\"user\").findAll(\n        where=\"age &gt;= 20 AND age &lt; 30\", order=\"age DESC\"\n);\n</code></pre>"},{"location":"database-interaction-through-models/calculated-properties/#specifying-a-data-type","title":"Specifying a Data Type","text":"<p>By default, calculated properties will return <code>char</code> as the column data type. Whilst this covers most scenarios, if you want to return something like a date, it can be problematic. Thankfully we can just specify a <code>dataType</code> argument to return the appropriate data type.</p> <pre><code>property(\n  name=\"createdAtAlias\",\n  sql=\"posts.createdat\", \n  dataType=\"datetime\"\n);\n</code></pre>"},{"location":"database-interaction-through-models/column-statistics/","title":"Column Statistics","text":"<p>Since Wheels simplifies so much for you when you select, insert, update, and delete rows from the database, it would be a little annoying if you had to revert back to using <code>cfquery</code> and <code>COUNT(id) AS x</code> type queries when you wanted to get aggregate values, right?</p> <p>Well, good news. Of course you don't need to do this; just use the built-in functions sum(), minimum(), maximum(), average() and count().</p> <p>Let's start with the count() function, shall we?</p>"},{"location":"database-interaction-through-models/column-statistics/#counting-rows","title":"Counting Rows","text":"<p>To count how many rows you have in your <code>authors</code> table, simply do this:</p> <pre><code>authorCount = model(\"author\").count();\n</code></pre> <p>What if you only want to count authors with a last name starting with \"A\"? Like the findAll() function, count() will accept a <code>where</code> argument, so you can do this:</p> <pre><code>authorCount = model(\"author\").count(where=\"lastName LIKE 'A%'\");\n</code></pre> <p>Simple enough. But what if you wanted to count only authors in the USA, and that information is stored in a different table? Let's say you have stored country information in a table called <code>profiles</code> and also setup a <code>hasOne</code> / <code>belongsTo</code> association between the <code>author</code> and <code>profile</code> models.</p> <p>Just like in the findAll() function, you can now use the <code>include</code> argument to reference other tables.</p> <p>In our case, the code would end up looking something like this:</p> <pre><code>authorCount = model(\"author\").count(include=\"profile\", where=\"countryId=1 AND lastName LIKE 'A%'\");\n</code></pre> <p>Or, if you care more about readability than performance, why not just join in the <code>countries</code> table as well?</p> <pre><code>authorCount = model(\"author\").count(include=\"profile(country)\", where=\"name='USA' AND lastName LIKE 'A%'\");\n</code></pre> <p>In the background, these functions all perform SQL that looks like this:</p> <p>{% code title=\"MySQL\" %} <pre><code>SELECT COUNT(*)\nFROM authors\nWHERE ...\n</code></pre> {% endcode %}</p> <p>However, if you include a <code>hasMany</code> association, Wheels will be smart enough to add the <code>DISTINCT</code> keyword to the SQL. This makes sure that you're only counting unique rows.</p> <p>For example, the following method call:</p> <pre><code>authorCount = model(\"author\").count(include=\"books\", where=\"title LIKE 'Wheels%'\");\n</code></pre> <p>Will execute this SQL (presuming <code>id</code> is the primary key of the <code>authors</code> table and the correct associations have been setup):</p> <p>{% code title=\"MySQL\" %} <pre><code>SELECT COUNT(DISTINCT authors.id)\nFROM authors LEFT OUTER JOIN books ON authors.id = books.authorid\nWHERE ..\n</code></pre> {% endcode %}</p> <p>OK, so now we've covered the count() function, but there are a few other functions you can use as well to get column statistics.</p>"},{"location":"database-interaction-through-models/column-statistics/#getting-an-average","title":"Getting an Average","text":"<p>You can use the average() function to get the average value on any given column. The difference between this function and the count() function is that this operates on a single column, while the count() function operates on complete records. Therefore, you need to pass in the name of the property you want to get an average for.</p> <p>The same goes for the remaining column statistics functions as well; they all accept the <code>property</code> argument.</p> <p>Here's an example of getting the average salary in a specific department:</p> <pre><code>avgSalary = model(\"employee\").average(property=\"salary\", where=\"departmentId=1\");\n</code></pre> <p>You can also pass in <code>distinct=true</code> to this function if you want to include only each unique instance of a value in the average calculation.</p>"},{"location":"database-interaction-through-models/column-statistics/#getting-the-highest-and-lowest-values","title":"Getting the Highest and Lowest Values","text":"<p>To get the highest and lowest values for a property, you can use the minimum() and maximum() functions.</p> <p>They are pretty self explanatory, as you can tell by the following examples:</p> <pre><code>highestSalary = model(\"employee\").maximum(\"salary\");\nlowestSalary = model(\"employee\").minimum(\"salary\");\n</code></pre>"},{"location":"database-interaction-through-models/column-statistics/#getting-the-sum-of-all-values","title":"Getting the Sum of All Values","text":"<p>The last of the column statistics functions is the sum() function.</p> <p>As you have probably already figured out, sum() adds all values for a given property and returns the result. You can use the same arguments as with the other functions (<code>property, where, include</code>, and <code>distinct</code>).</p> <p>Let's wrap up this chapter on a happy note by getting the total dollar amount you've made:</p> <pre><code>howRichAmI = model(\"invoice\").sum(\"billedAmount\");\n</code></pre>"},{"location":"database-interaction-through-models/column-statistics/#grouping-your-results","title":"Grouping Your Results","text":"<p>All of the methods we've covered in this chapter accepts the <code>group</code> argument. Let's build on the example with getting the average salary for a department above, but this time, let's get the average for all departments instead.</p> <pre><code>avgSalaries = model(\"employee\").average(property=\"salary\", group=\"departmentId\");\n</code></pre> <p>When you choose to group results like this you get a <code>cfquery</code> result set back, as opposed to a single value.</p> <p>{% hint style=\"info\" %}</p>"},{"location":"database-interaction-through-models/column-statistics/#limited-support","title":"Limited Support","text":"<p>The <code>group</code> argument is currently only supported on SQL Server and MySQL databases. {% endhint %}</p>"},{"location":"database-interaction-through-models/creating-records/","title":"Creating Records","text":"<p>In Wheels, one way to create objects that represent records in our table is by calling the new() class-level method.</p> <pre><code>newAuthor = model(\"author\").new();\n</code></pre> <p>We now have an empty <code>Author</code> object that we can start filling in properties for. These properties correspond with the columns in the <code>authors</code> database table, unless you have mapped them specifically to columns with other names (or mapped to an entirely different table).</p> <pre><code>newAuthor.firstName = \"John\";\nnewAuthor.lastName = \"Doe\";\n</code></pre> <p>At this point, the <code>newAuthor</code> object only exists in memory. We save it to the database by calling its save() method.</p> <pre><code>newAuthor.save();\n</code></pre>"},{"location":"database-interaction-through-models/creating-records/#creating-based-on-a-struct","title":"Creating Based on a Struct","text":"<p>If you want to create a new object based on parameters sent in from a form request, the new() method conveniently accepts a struct as well. As we'll see later, when you use the Wheels form helpers, they automatically turn your form variables into a struct that you can pass into new() and other methods.</p> <p>Given that <code>params.newAuthor</code> is a struct containing the <code>firstName</code> and <code>lastName</code> variables, the code below does the same as the code above (without saving it though).</p> <pre><code>newAuthor = model(\"author\").new(params.newAuthor);\n</code></pre>"},{"location":"database-interaction-through-models/creating-records/#saving-straight-to-the-database","title":"Saving Straight to the Database","text":"<p>If you want to save a new author to the database right away, you can use the create() method instead.</p> <p>{% code title=\"\" %} <pre><code>model(\"author\").create(params.newAuthor);\n</code></pre> {% endcode %}</p>"},{"location":"database-interaction-through-models/creating-records/#the-primary-key","title":"The Primary Key","text":"<p>Note that if we have opted to have the database create the primary key for us (which is usually done by auto-incrementing it), it will be available automatically after the object has been saved.</p> <p>This means you can read the value by doing something like this. (This example assumes you have an auto-incrementing <code>integer</code> column named <code>id</code> as the primary key.)</p> <pre><code>&lt;cfscript&gt;\nnewAuthor = model(\"author\").new();\nnewAuthor.firstName = \"Joe\";\nnewAuthor.lastName = \"Jones\";\nnewAuthor.save();\n&lt;/cfscript&gt;\n&lt;cfoutput&gt;#newAuthor.id#&lt;/cfoutput&gt;\n</code></pre> <p>Don't forget that you can name your primary key whatever you want, and you can even use composite keys, natural keys, non auto-incrementing, and so on.</p> <p>No matter which method you prefer, Wheels will use database introspection to see how your table is structured and act accordingly.</p>"},{"location":"database-interaction-through-models/creating-records/#using-database-defaults","title":"Using Database Defaults","text":"<p>The best way of handling model defaults is usually by setting a default constraint in your database. When Wheels saves the model to the database, it will automatically insert the default value if you haven't provided one within your model.</p> <p>However, unlike the primary key, Wheels will not automatically load database defaults after saving as it requires an additional database call and in most cases is not required. (After saving, the most common action is to redirect, in which case you would reload the newly saved model in the next request anyway.)</p> <p>Of course, if you do need to access the database default immediately after saving, Wheels allows this. Simply add <code>reload=true</code> to the create(), update(), or save() methods:</p> <pre><code>newAuthor = model(\"author\").new();\nnewAuthor.firstName = \"Joe\";\nnewAuthor.lastName = \"Jones\";\nnewAuthor.save(reload=true);\n</code></pre>"},{"location":"database-interaction-through-models/creating-records/#using-model-defaults","title":"Using Model Defaults","text":"<p>Sometimes a database default isn't the most appropriate solution because the value is only set after the model has been inserted. If you want to set a default value when it is first created with new() or create(), then you can pass the <code>defaultValue</code> argument of the property() method used in your model's <code>config()</code> block.</p> <pre><code>property(name=\"welcomeText\", defaultValue=\"Hello world!\");\n</code></pre> <p>This is effectively the same as doing this:</p> <pre><code>model(\"myModel\").new(welcomeText=\"Hello world!\");\n</code></pre> <p>..except you only need to set it once per model.</p>"},{"location":"database-interaction-through-models/deleting-records/","title":"Deleting Records","text":"<p>Deleting records in Wheels is simple. If you have fetched an object, you can just call its delete() method. If you don't have any callbacks specified for the class, all that will happen is that the record will be deleted from the table and <code>true</code> will be returned.</p>"},{"location":"database-interaction-through-models/deleting-records/#delete-callbacks","title":"Delete Callbacks","text":"<p>If you have callbacks however, this is what happens:</p> <p>First, all methods registered to be run before a delete happens (these are registered using a beforeDelete() call from the <code>config</code> function) will be executed, if any exist.</p> <p>If these return <code>true</code>, Wheels will proceed and delete the record from the table. If <code>false</code> is returned from the callback code, processing will return to your code without the record being deleted. (<code>false</code> is returned to you in this case.)</p> <p>If the record was deleted, the afterDelete() callback code is executed, and whatever that code returns will be returned to you. (You should make all your callbacks return <code>true</code> or <code>false</code>.)</p> <p>If you're unfamiliar with the concept of callbacks, you can read about them in the Object Callbacks chapter.</p>"},{"location":"database-interaction-through-models/deleting-records/#example-of-deleting-a-record","title":"Example of Deleting a Record","text":"<p>Here's a simple example of fetching a record from the database and then deleting it.</p> <pre><code>aPost = model(\"post\").findByKey(33);\naPost.delete();\n</code></pre> <p>There are also 3 class-level delete methods available: deleteByKey(), deleteOne(), and deleteAll(). These work similarly to the class level methods for updating, which you can read more about in Updating Records.</p>"},{"location":"database-interaction-through-models/dirty-records/","title":"Dirty Records","text":"<p>Wheels provides some very useful methods for tracking changes to objects. You might think, Why do I need that? Won't I just know that I changed the object myself?</p> <p>Well, that depends on the structure of your code.</p> <p>As you work with Wheels and move away from that procedural spaghetti mess you used to call code to a better, cleaner object-oriented approach, you may get a sense that you have lost control of what your code is doing. Your new code is creating objects, they in turn call methods on other objects automatically, methods are being called from multiple places, and so on. Don't worry though, this is a good thing. It just takes a while to get used to, and with the help of some Wheels functionality, it won't take you that long to get used to it either.</p>"},{"location":"database-interaction-through-models/dirty-records/#an-example-with-callbacks","title":"An Example with Callbacks","text":"<p>One area where this sense of losing control is especially noticeable is when you are using callbacks on objects (see the chapter on Object Callbacks for more info). So let's use that for our example.</p> <p>Let's say you have used a callback to specify that a method should be called whenever a <code>user</code> object is saved to the database. You won't know exactly where this method was called from. It could have been the user doing it themselves on the website, or it could have been done from your internal administration area. Generally speaking, you don't need to know this either.</p> <p>One thing your business logic might need to know though is a way to tell exactly what was changed on the object. Maybe you want to handle things differently if the user's last name was changed than if the email address was changed, for example.</p> <p>Let's look at the methods Wheels provide to make tracking these changes easier for you.</p>"},{"location":"database-interaction-through-models/dirty-records/#methods-for-tracking-changes","title":"Methods for Tracking Changes","text":"<p>Let's get to coding\u2026</p> <pre><code>post = model(\"post\").findByKey(1);\nresult = post.hasChanged();\n</code></pre> <p>Here we are using the hasChanged() method to see if any of the object properties has changed.</p> <p>By the way, when we are talking about \"change\" in Wheels, we always mean whether or not an object's properties have changed compared to what is stored in the columns they map to in the database table.</p> <p>In the case of the above example, the <code>result</code> variable will contain <code>false</code> because we just fetched the object from the database and did not make any changes to it at all.</p> <p>Well, let's make a change then. If we didn't, this chapter wouldn't be all that interesting, would it?</p> <pre><code>post.title = \"A New Post Title\";\nresult = post.hasChanged();\n</code></pre> <p>Now result will be <code>true</code> because what is stored in <code>post.title</code> differs from what is stored in the <code>title</code>column for this record in the <code>posts</code> table (well, unless the title was \"A New Post Title\" even before the change, in which case the result would still be <code>false</code>).</p> <p>When calling hasChanged() with no arguments, Wheels will check all properties on the object and return <code>true</code> if any of them have changed. If you want to see if a specific property has changed, you can pass in <code>property=\"title\"</code> to it or use the dynamic method <code>[propertyName]HasChanged()</code>. Replace <code>[propertyName]</code> with the name of the property. In our case, the method would then be named <code>titleHasChanged()</code>.</p> <p>If you want to see what a value was before a change was made, you can do so by calling changedFrom() and passing in the name of a property. This can also be done with the dynamic <code>[propertyName]ChangedFrom()</code> method.</p> <p>When an object is in a changed state, there are a couple of methods you can use to report back on these changes. changedProperties() will give you a list of the property names that have been changed. allChanges() returns a struct containing all the changes (both the property names and the changed values themselves).</p> <p>If you have made changes to an object and for some reason you want to revert it back, you can do so by calling reload() on it. This will query the database and update the object properties with their corresponding values from the database.</p> <p>OK, let's save the object to the database now and see how that affects things.</p> <pre><code>post.save();\nresult = post.hasChanged();\n</code></pre> <p>Now <code>result</code> will once again contain <code>false</code>. When you save a changed (a.k.a. \"dirty\") object, it clears out its changed state tracking and is considered unchanged again.</p>"},{"location":"database-interaction-through-models/dirty-records/#dont-forget-the-context","title":"Don't Forget the Context","text":"<p>All of the examples in this chapter look a little ridiculous because it doesn't make much sense to check the status of an object when you changed it manually in your code. As we said in the beginning of the chapter, when put into context of callbacks, multiple methods, etc., it will become clear how useful these methods really are.</p>"},{"location":"database-interaction-through-models/dirty-records/#internal-use-of-change-tracking","title":"Internal Use of Change Tracking","text":"<p>It's worth noting here that Wheels makes good use of this change tracking internally as well. If you make changes to an object, Wheels is smart enough to only update the changed columns, leaving the rest alone. This is good for a number of reasons but perhaps most importantly for database performance. In high traffic web applications, the bottleneck is often the database, and anything that can be done to prevent unnecessary database access is a good thing.</p>"},{"location":"database-interaction-through-models/dirty-records/#one-gotcha-about-tracking-changes","title":"One \"Gotcha\" About Tracking Changes","text":"<p>If you create a brand new object with the new() method and call hasChanged() on it, it will return <code>true</code>. The reason for this seemingly unexpected behavior is that change is always viewed from the database's perspective. The hasChanged() method will return <code>true</code> in this case because it is different from what is stored in the database (i.e. it doesn't exist at all in the database yet).</p> <p>If you would simply like to know if an object exists in the database or not, you can use the isNew() method.</p>"},{"location":"database-interaction-through-models/dynamic-finders/","title":"Dynamic Finders","text":"<p>Since the introduction of <code>onMissingMethod()</code> in CFML, we have been able to port over the concept of _dynamic finders_from Rails to Wheels.</p> <p>The concept is simple. Instead of using arguments to tell Wheels what you want to do, you can use a dynamically-named method.</p> <p>For example, the following code:</p> <pre><code>me = model(\"user\").findOne(where=\"email='me@myself.com'\");\n</code></pre> <p>Can also be written as:</p> <pre><code>me = model(\"user\").findOneByEmail(\"me@myself.com\");\n</code></pre> <p>Through the power of <code>onMissingMethod()</code>, Wheels will parse the method name and figure out that the value supplied is supposed to be matched against the <code>email</code> column.</p>"},{"location":"database-interaction-through-models/dynamic-finders/#dynamic-finders-involving-more-than-one-column","title":"Dynamic Finders Involving More than One Column","text":"<p>You can take this one step further by using code such as:</p> <pre><code>me = model(\"user\").findOneByUserNameAndPassword(\"bob,pass\");\n</code></pre> <p>In this case, Wheels will split the function name on the And part and determine that you want to find the record where the username column is \"bob\" and the password column is \"pass\".</p> <p>When you are passing in two values, make special note of the fact that they should be passed in as a list to one argument and not as two separate arguments.</p>"},{"location":"database-interaction-through-models/dynamic-finders/#works-with-findall-too","title":"Works with findAll() too","text":"<p>In the examples above, we've used the findOne() method, but you can use the same approach on a findAll() method as well.</p>"},{"location":"database-interaction-through-models/dynamic-finders/#passing-in-other-finder-parameters","title":"Passing in Other Finder Parameters","text":"<p>In the background, these dynamically-named methods just pass along execution to findOne() or findAll(). This means that you can also pass in any arguments that are accepted by those two methods.</p> <p>The below code, for example, is perfectly valid:</p> <pre><code>users = model(\"user\").findAllByState(value=\"NY\", order=\"name\", page=3);\n</code></pre> <p>When passing in multiple arguments like above, you have to start naming them instead of relying on the order of the arguments though. When doing so, you need to name the argument <code>value</code> if you're passing in just one value and <code>values</code> if you're passing in multiple values in a list. In other words, you need to name it <code>values</code> when calling an <code>And</code>type dynamic finder.</p> <pre><code>users = model(\"user\").findAllByCityAndState(\n        values=\"Buffalo,NY\", order=\"name\", page=3\n);\n</code></pre>"},{"location":"database-interaction-through-models/dynamic-finders/#avoid-the-word-and-in-database-column-names","title":"Avoid the Word \"And\" in Database Column Names","text":"<p>Keep in mind that this dynamic method calling will break down completely if you ever name a column <code>firstandlastname</code> or something similar because Wheels will then split the method name incorrectly. So avoid using \"And\" in the column name if you plan on taking advantage of dynamically-named finder methods.</p>"},{"location":"database-interaction-through-models/getting-paginated-data/","title":"Getting Paginated Data","text":"<p>If you searched for \"coldfusion\" on Google, would you want all results to be returned on one page? Probably not because it would take a long time for Google to first get the records out of its index and then prepare the page for you. Your browser would slow to a halt as it tried to render the page. When the page would finally show up, it would be a pain to scroll through all those results.</p> <p>Rightly so, Google uses pagination to spread out the results on several pages.</p> <p>And in Wheels, it's really simple to do this type of pagination. Here's how:</p> <ul> <li>Get records from the database based on a page number. Going back to the Google example, this would mean getting records 11-20 when the user is viewing the second results page. This is (mostly) done using the <code>findAll()</code> function and the <code>page</code> and <code>perPage</code> arguments.</li> <li>Display the links to all the other pages that the user should be able to go to. This is done using the paginationLinks() function or using a lower-level function pagination().</li> </ul> <p>This chapter will deal with the first part: getting the paginated data. Please proceed to the chapter called Displaying Links for Pagination if you wish to learn how to output the page links in your view.</p>"},{"location":"database-interaction-through-models/getting-paginated-data/#learning-by-example","title":"Learning by Example","text":"<p>Let's jump straight to an example:</p> <pre><code>authors = model(\"Author\").findAll(page=2, perPage=25, order=\"lastName\");\n</code></pre> <p>That simple code will return authors 26-50 from the database, ordered by their last name.</p> <p>What SQL statements are actually being executed depends on which database engine you use. (The MySQL adapter will use <code>LIMIT</code> and <code>OFFSET</code>, and the Microsoft SQL Server adapter will use <code>TOP</code> and some tricky sub queries.) Turn on debugging in the ColdFusion Administrator if you want to see exactly what's going on under the hood.</p> <p>One important thing that you should be aware of is that pagination is done based on objects and not records. To illustrate what that means, we can expand on the above example a little:</p> <pre><code>authorsAndBooks = model(\"Author\").findAll(\n  include=\"Books\", page=2, perPage=25, order=\"lastName\"\n);\n</code></pre> <p>Here, we tell Wheels that we also want to include any books written by the authors in the result. Since it's possible that an author has written many books, we can't know in advance how many records we'll get back (as opposed to the first example, where we know we will get 25 records back). If each author has written 2 books, for example, we will get 50 records back.</p> <p>If you do want to paginate based on the books instead, all that you need to do is flip the <code>findAll()</code> statement around a little:</p> <pre><code>booksAndAuthors = model(\"Book\").findAll(\n  include=\"Author\", page=2, perPage=25, order=\"lastName\"\n);\n</code></pre> <p>Here, we call the <code>findAll()</code> function on the Book class instead, and thereby we ensure that the pagination is based on the books and not the authors. In this case, we will always get 25 records back.</p> <p>If you need to know more about the returned query, you can use the <code>pagination()</code> function which returns a struct with keys <code>pagination().currentPage</code>, <code>pagination().totalPages</code> and <code>pagination().totalRecords</code>. </p> <p>That's all there is to it, really. The best way to learn pagination is to play around with it with debugging turned on.</p> <p>Don't forget to check the chapter Displaying Links for Pagination.</p>"},{"location":"database-interaction-through-models/nested-properties/","title":"Nested Properties","text":"<p>When you're starting out as a Wheels developer, you are probably amazed at the simplicity of a model's CRUD methods. But then it all gets quite a bit more complex when you need to update records in multiple database tables in a single transaction.</p> <p>Nested properties in Wheels makes this scenario dead simple. With a configuration using the nestedProperties()function in your model's <code>config()</code> method, you can save changes to that model and its associated models in a single call with save(), create(), or update().</p>"},{"location":"database-interaction-through-models/nested-properties/#one-to-one-relationships-with-nested-properties","title":"One-to-One Relationships with Nested Properties","text":"<p>Consider a <code>user</code> model that has one <code>profile</code>:</p> <p>{% code title=\"app/models/User.cfc\" %} <pre><code>component extends=\"Model\" {\n\n  function config() {\n        hasOne(\"profile\");\n        nestedProperties(associations=\"profile\");\n    }\n\n}\n</code></pre> {% endcode %}</p> <p>By adding the call to nestedProperties() in the model, you can create both the <code>user</code> object and the <code>profile</code> object in a single call to create().</p>"},{"location":"database-interaction-through-models/nested-properties/#setting-up-data-for-the-user-form-in-the-controller","title":"Setting up Data for the user Form in the Controller","text":"<p>First, in our controller, let's set the data needed for our form:</p> <p>{% code title=\"app/controllers/User.cfc\" %} <pre><code>// In app/controllers/User.cfc\nfunction new() {\n    var newProfile = model(\"profile\").new();\n    user = model(\"user\").new(profile=newProfile);\n}\n</code></pre> {% endcode %}</p> <p>Because our form will also expect an object called <code>profile</code> nested within the <code>user</code> object, we must create a new instance of it and set it as a property in the call to <code>user.new()</code>.</p> <p>Also, because we don't intend on using the particular <code>newProfile</code> object set in the first line of the action, we can <code>var</code> scope it to clearly mark our intentions for its use.</p> <p>If this were an <code>edit</code> action calling an existing object, our call would need to look similar to this:</p> <p>{% code title=\"app/controllers/User.cfc\" %} <pre><code>function edit() {\n    user = model(\"user\").findByKey(key=params.key, include=\"profile\");\n}\n</code></pre> {% endcode %}</p> <p>Because the form will also expect data set in the <code>profile</code> property, you must include that association in the finder call with the <code>include</code> argument.</p>"},{"location":"database-interaction-through-models/nested-properties/#building-a-form-for-posting-nested-properties","title":"Building a Form for Posting Nested Properties","text":"<p>For this example, our form at <code>app/views/users/new.cfm</code> will end up looking like this:</p> <p>{% code title=\"app/views/users/new.cfm\" %} <pre><code>#startFormTag(action=\"create\")#\n\n    &lt;!--- Data for user model ---&gt;\n    #textField(label=\"First Name\", objectName=\"user\", property=\"firstName\")#\n    #textField(label=\"Last Name\", objectName=\"user\", property=\"lastName\")#\n\n    &lt;!--- Data for associated profile model ---&gt;\n    #textField(\n        label=\"Twitter Handle\",\n        objectName=\"user\",\n        association=\"profile\",\n        property=\"twitterHandle\"\n    )#\n    #textArea(\n        label=\"Biography\",\n        objectName=\"user\",\n        association=\"profile\",\n        property=\"bio\"\n    )#\n\n    &lt;div&gt;#submitTag(value=\"Create\")#&lt;/div&gt;\n\n#endFormTag()#\n</code></pre> {% endcode %}</p> <p>Of note are the calls to form helpers for the <code>profile</code> model, which contain an extra argument for <code>association</code>. This argument is available for all object-based form helpers. By using the <code>association</code> argument, Wheels will name the form field in such a way that the properties for the profile will be nested within an object in the <code>user</code> model.</p> <p>Take a minute to read that last statement again. OK, let's move on to the action that handles the form submission.</p>"},{"location":"database-interaction-through-models/nested-properties/#saving-the-object-and-its-nested-properties","title":"Saving the Object and Its Nested Properties","text":"<p>You may be surprised to find out that our standard <code>create</code> action does not change at all from what you're used to.</p> <p>{% code title=\"app/controllers/Users.cfc\" %} <pre><code>function create() {\n    user = model(\"user\").new(params.user);\n    if ( user.save() ) {\n        flashInsert(success=\"The user was created successfully.\");\n        redirectTo(controller=params.controller);\n    } else {\n        renderView(action=\"new\");\n    }\n}\n</code></pre> {% endcode %}</p> <p>When calling <code>user.save()</code> in the example above, Wheels takes care of the following:</p> <ul> <li>Saves the data passed into the <code>user</code> model.</li> <li>Sets a property on <code>user</code> called profile with the <code>profile</code> data stored in an object.</li> <li>Saves the data passed into that <code>profile</code> model.</li> <li>Wraps all calls in a transaction in case validations on any of the objects fail or something wrong happens with the database.</li> </ul> <p>For the <code>edit</code> scenario, this is what our <code>update</code> action would look like (which is very similar to <code>create</code>):</p> <p>{% code title=\"app/controllers/Users.cfc\" %} <pre><code>function update() {\n    user = model(\"user\").findByKey(params.user.id);\n    if ( user.update(params.user) ) {\n        flashInsert(success=\"The user was updated successfully.\");\n        redirectTo(action=\"edit\");\n    } else {\n        renderView(action=\"edit\");\n    }\n}\n</code></pre> {% endcode %}</p>"},{"location":"database-interaction-through-models/nested-properties/#one-to-many-relationships-with-nested-properties","title":"One-to-Many Relationships with Nested Properties","text":"<p>Nested properties work with one-to-many associations as well, except now the nested properties will contain an array of objects instead of a single one. We know that one <code>user</code> can have many <code>addresses</code>. Furthermore, we know that each <code>user</code> has only one <code>profile</code>. </p> <p>In the <code>user</code> model, let's add an association called <code>addresses</code> and also enable it as nested properties.</p> <p>{% code title=\"app/models/User.cfc\" %} <pre><code>component extends=\"Model\" {\n\n function config() {\n        hasOne(\"profile\");\n        hasMany(\"addresses\");\n        nestedProperties(\n            associations=\"profile,addresses\",\n            allowDelete=true\n        );\n    }\n\n}\n</code></pre> {% endcode %}</p> <p>In this example, we have added the <code>addresses</code> association to the call to nestedProperties().</p> <p>The <code>addresses</code> table contains a foreign key to the <code>Users</code> table called <code>userid</code>, Now in the <code>addresses</code> model, let's associate it with its parent <code>User</code> and also enable it as nested properties.</p> <p>{% code title=\"app/models/Address.cfc\" %} <pre><code>component extends=\"Model\" {\n\n function config() {\n        belongsTo(\"User\");\n        nestedProperties(\n            associations=\"User\",\n            allowDelete=true\n        );\n    }\n\n}\n</code></pre> {% endcode %}</p>"},{"location":"database-interaction-through-models/nested-properties/#setting-up-data-for-the-user-form-in-the-controller_1","title":"Setting up Data for the user Form in the Controller","text":"<p>Setting up data for the form is similar to the one-to-one scenario, but this time the form will expect an array of objects for the nested properties instead of a single object.</p> <p>In this example, we'll just put one new <code>address</code> in the array.</p> <p>{% code title=\"app/controllers/Users.cfc\" %} <pre><code>function new() {\n    var newAddresses = [ model(\"address\").new() ];\n    user = model(\"user\").new(addresses=newAddresses);\n}\n</code></pre> {% endcode %}</p> <p>In the <code>edit</code> scenario, we just need to remember to call the <code>include</code> argument to include the array of addresses saved for the particular <code>user</code>:</p> <p>{% code title=\"app/controllers/Users.cfc\" %} <pre><code>function edit() {\n    user = model(\"user\").findByKey(key=params.key, include=\"addresses\");\n}\n</code></pre> {% endcode %}</p>"},{"location":"database-interaction-through-models/nested-properties/#building-the-form-for-the-one-to-many-association","title":"Building the Form for the One-to-Many Association","text":"<p>This time, we'll add a section for addresses on our form:</p> <p>{% code title=\"app/views/users/_form.cfm\" %} <pre><code>#startFormTag(action=\"create\")#\n\n    &lt;!--- Data for `user` model ---&gt;\n    &lt;fieldset&gt;\n        &lt;legend&gt;User&lt;/legend&gt;\n\n        #textField(label=\"First Name\", objectName=\"user\", property=\"firstName\")#\n        #textField(label=\"Last Name\", objectName=\"user\", property=\"lastName\")#\n    &lt;/fieldset&gt;\n\n    &lt;!--- Data for `address` models ---&gt;\n    &lt;fieldset&gt;\n        &lt;legend&gt;Addresses&lt;/legend&gt;\n\n        &lt;div id=\"addresses\"&gt;\n            #includePartial(user.addresses)#\n        &lt;/div&gt;\n    &lt;/fieldset&gt;\n\n    &lt;div&gt;#submitTag(value=\"Create\")#&lt;/div&gt;\n\n#endFormTag()#\n</code></pre> {% endcode %}</p> <p>In this case, you'll see that the form for addresses is broken into a partial. (See the chapter on Partials for more details.) Let's take a look at that partial.</p>"},{"location":"database-interaction-through-models/nested-properties/#the-_address-partial","title":"The _address Partial","text":"<p>Here is the code for the partial at <code>app/views/users/_address.cfm</code>. Wheels will loop through each <code>address</code> in your nested properties and display this piece of code for each one.</p> <p>{% code title=\"app/views/users/_address.cfm\" %} <pre><code>&lt;div class=\"address\"&gt;\n    #textField(\n        label=\"Street\",\n        objectName=\"user\",\n        association=\"addresses\",\n        position=arguments.current,\n        property=\"address1\"\n    )#\n    #textField(\n        label=\"City\",\n        objectName=\"user\",\n        association=\"addresses\",\n        position=arguments.current,\n        property=\"city\"\n    )#\n    #textField(\n        label=\"State\",\n        objectName=\"user\",\n        association=\"addresses\",\n        position=arguments.current,\n        property=\"state\"\n    )#\n    #textField(\n        label=\"Zip\",\n        objectName=\"user\",\n        association=\"addresses\",\n        position=arguments.current,\n        property=\"zip\"\n    )#\n&lt;/div&gt;\n</code></pre> {% endcode %}</p> <p>Because there can be multiple addresses on the form, the form helpers require an additional argument for <code>position</code>. Without having a unique position identifier for each <code>address</code>, Wheels would have no way of understanding which <code>state</code> field matches with which particular <code>address</code>, for example.</p> <p>Here, we're passing a value of <code>arguments.current</code> for <code>position</code>. This value is set automatically by Wheels for each iteration through the loop of <code>addresses</code>.</p>"},{"location":"database-interaction-through-models/nested-properties/#auto-saving-a-collection-of-child-objects","title":"Auto-saving a Collection of Child Objects","text":"<p>Even with a complex form with a number of child objects, Wheels will save all of the data through its parent's save(), update(), or create() methods.</p> <p>Basically, your typical code to save the <code>user</code> and its <code>addresses</code> is exactly the same as the code demonstrated in the Saving the Object and Its Nested Properties section earlier in this chapter.</p> <p>Writing the action to save the data is clearly the easiest part of this process!</p>"},{"location":"database-interaction-through-models/nested-properties/#transactions-are-included-by-default","title":"Transactions are Included by Default","text":"<p>As mentioned earlier, Wheels will automatically wrap your database operations for nested properties in a transaction. That way if something goes wrong with any of the operations, the transaction will rollback, and you won't end up with incomplete saves.</p> <p>See the chapter on Transactions for more details.</p>"},{"location":"database-interaction-through-models/nested-properties/#many-to-many-relationships-with-nested-properties","title":"Many-to-Many Relationships with Nested Properties","text":"<p>We all enter the scenario where we have \"join tables\" where we need to associate models in a many-to-many fashion. Wheels makes this pairing of entities simple with some form helpers.</p> <p>Consider the many-to-many associations related to <code>customers, publications</code>, and <code>subscriptions</code>, straight from the Associations chapter.</p> <pre><code>//  app/models/Customer.cfc\ncomponent extends=\"Model\" {\n\n    public function config() {\n        hasMany(name=\"subscriptions\", shortcut=\"publications\");\n    }\n\n}\n//  app/models/Publication.cfc\ncomponent extends=\"Model\" {\n\n    public function config() {\n        hasMany(\"subscriptions\");\n    }\n\n}\n//  app/models/Subscription.cfc\ncomponent extends=\"Model\" {\n\n    public function config() {\n        belongsTo(\"customer\");\n        belongsTo(\"publication\");\n    }\n\n}\n</code></pre> <p>When it's time to save <code>customer</code>s' subscriptions in the <code>subscriptions</code> join table, one approach is to loop through data submitted by checkBoxTag()s from your form, populate <code>subscription</code> model objects with the data, and call save(). This approach is valid, but it is quite cumbersome. Fortunately, there is a simpler way.</p>"},{"location":"database-interaction-through-models/nested-properties/#setting-up-the-nested-properties-in-the-model","title":"Setting up the Nested Properties in the Model","text":"<p>Here is how we would set up the nested properties in the <code>customer</code> model for this example:</p> <p>{% code title=\"app/models/Customer.cfc\" %} <pre><code>component extends=\"Model\" {\n\n    public function config() {\n        //  Associations\n        hasMany(name=\"subscriptions\", shortcut=\"publications\");\n        //  Nested properties\n        nestedProperties(\n            associations=\"subscriptions\",\n            allowDelete=true\n        );\n    }\n\n}\n</code></pre> {% endcode %}</p>"},{"location":"database-interaction-through-models/nested-properties/#setting-up-data-for-the-customer-form-in-the-controller","title":"Setting up Data for the customer Form in the Controller","text":"<p>Let's define the data needed in an <code>edit</code> action in the controller at <code>app/controllers/Customers.cfc</code>.</p> <p>{% code title=\"app/controllers/Customers.cfc\" %} <pre><code>function edit() {\n    customer = model(\"customer\").findByKey(\n        key=params.key,\n        include=\"subscriptions\"\n    );\n    publications = model(\"publication\").findAll(order=\"title\");\n}\n</code></pre> {% endcode %}</p> <p>For the view, we need to pull the <code>customer</code> with its associated <code>subscriptions</code> included with the <code>include</code> argument. We also need all of the <code>publication</code>s in the system for the user to choose from.</p>"},{"location":"database-interaction-through-models/nested-properties/#building-the-many-to-many-form","title":"Building the Many-to-Many Form","text":"<p>We can now build a series of check boxes that will allow the end user choose which <code>publications</code> to assign to the <code>customer</code>.</p> <p>The view template at <code>app/views/customers/edit.cfm</code> is where the magic happens. In this view, we will have a form for editing the <code>customer</code> and check boxes for selecting the <code>customer</code>'s <code>subscriptions</code>.</p> <p>{% code title=\"app/views/customers/edit.cfm\" %} <pre><code>&lt;cfparam name=\"customer\"&gt;\n&lt;cfparam name=\"publications\" type=\"query\"&gt;\n\n&lt;cfoutput&gt;\n\n#startFormTag(action=\"update\")#\n\n&lt;fieldset&gt;\n    &lt;legend&gt;Customer&lt;/legend&gt;\n\n    #textField(\n        label=\"First Name\",\n        objectName=\"customer\",\n        property=\"firstName\"\n    )#\n    #textField(\n        label=\"Last Name\",\n        objectName=\"customer\",\n        property=\"lastName\"\n    )#\n&lt;/fieldset&gt;\n\n&lt;fieldset&gt;\n    &lt;legend&gt;Subscriptions&lt;/legend&gt;\n\n    &lt;cfloop query=\"publications\"&gt;\n        #hasManyCheckBox(\n            label=publications.title,\n            objectName=\"customer\",\n            association=\"subscriptions\",\n            keys=\"#customer.key()#,#publications.id#\"\n        )#\n    &lt;/cfloop&gt;\n&lt;/fieldset&gt;\n\n&lt;div&gt;\n    #hiddenField(objectName=\"customer\", value=\"id\")#\n    #submitTag()#\n&lt;/div&gt;\n\n#endFormTag()#\n\n&lt;/cfoutput&gt;\n</code></pre> {% endcode %}</p> <p>The main point of interest in this example is the <code>&lt;fieldset&gt;</code> for Subscriptions, which loops through the query of <code>publications</code> and uses the hasManyCheckBox() form helper. This helper is similar to checkBox() and checkBoxTag(), but it is specifically designed for building form data related by associations. (Note that checkBox() is primarily designed for columns in your table that store a single <code>true/false</code> value, so that is the big difference.)</p> <p>Notice that the <code>objectName</code> argument passed to hasManyCheckBox() is the parent <code>customer</code> object and the <code>associations</code> argument contains the name of the related association. Wheels will build a form variable named in a way that the <code>customer</code> object is automatically bound to the <code>subscriptions</code> association.</p> <p>The <code>keys</code> argument accepts the foreign keys that should be associated together in the <code>subscriptions</code> join table. Note that these keys should be listed in the order that they appear in the database table. In this example, the <code>subscriptions</code> table in the database contains a composite primary key with columns called <code>customerid</code> and <code>publicationid</code>, in that order.</p>"},{"location":"database-interaction-through-models/nested-properties/#how-the-form-submission-works","title":"How the Form Submission Works","text":"<p>Handling the form submission is the most powerful part of the process, but like all other nested properties scenarios, it involves no extra effort on your part.</p> <p>You'll notice that this example <code>update</code> action is fairly standard for a Wheels application:</p> <p>{% code title=\"app/controllers/Customers.cfc\" %} <pre><code>function update() {\n    //  Load customer object\n    customer = model(\"customer\").findByKey(params.customer.id);\n    /*  If update is successful, generate success message\n        and redirect back to edit screen */\n    if ( customer.update(params.customer) ) {\n        redirectTo(\n            action=\"edit\",\n            key=customer.id,\n            success=\"#customer.firstName# #customer.lastName# record updated successfully.\"\n        );\n        //  If update fails, show form with errors \n    } else {\n        renderView(action=\"edit\");\n    }\n}\n</code></pre> {% endcode %}</p> <p>In fact, there is nothing special about this. But with the nested properties defined in the model, Wheels handles quite a bit when you save the <code>parent</code> customer object:</p> <ul> <li>Wheels will update the <code>customers</code> table with any changes submitted in the Customers <code>&lt;fieldset&gt;</code>.</li> <li>Wheels will add and remove records in the <code>subscriptions</code> table depending on which check boxes are selected by the user in the Subscriptions <code>&lt;fieldset&gt;</code>.</li> <li>All of these database queries will be wrapped in a Transaction . If any of the above updates don't pass validation or if the database queries fail, the transaction will roll back.</li> </ul>"},{"location":"database-interaction-through-models/object-callbacks/","title":"Object Callbacks","text":"<p>Callbacks in Wheels allow you to have code executed before and/or after certain operations on an object. This requires some further explanation, so let's go straight to an example of a real-world application: the e-commerce checkout.</p>"},{"location":"database-interaction-through-models/object-callbacks/#a-real-world-example-of-using-callbacks","title":"A Real-World Example of Using Callbacks","text":"<p>Let's look at a possible scenario for what happens when a visitor to your imaginary e-commerce website submits their credit card details to finalize an order:</p> <ul> <li>You create a new <code>order</code> object using the new() method based on the incoming form parameters.</li> <li>You call the save() method on the order object, which will cause Wheels to first validate the object and then store it in the database if it passes validation.</li> <li>The next day, you call the update( method on the object because the user decided to change the shipping method for the order.</li> <li>Another day passes, and you call the delete() method on the object because the visitor called in to cancel the order.</li> </ul> <p>Let's say you want to have the following things executed somewhere in the code:</p> <ul> <li>Stripping out dashes from the credit card number to make it as easy as possible for the user to make a purchase.</li> <li>Calculating shipping cost based on the country the package will be sent to.</li> </ul> <p>It's tempting to put this code right in the controller, isn't it? But if you think ahead a little, you'll realize that you might build an administrative interface for orders and maybe an express checkout as well at some point in the future. You don't want to duplicate all your logic in all these places, do you?</p> <p>Object callbacks to the rescue! By using object callbacks to implement this sort of logic in your model, you keep it out of your controllers and ensure your code stays DRY (Don't Repeat Yourself).</p> <p>Part of the <code>Order.cfc</code> model file:</p> <p>{% code title=\"Order.cfc\" %} <pre><code>component extends=\"Model\" {\n\n    public function config() {\n        beforeValidationOnCreate(\"fixCreditCard\");\n        afterValidation(\"calculateShippingCost\");\n    }\n\n    public function fixCreditCard() {\n\n        writeOutput(\"Code for stripping out dashes in credit card numbers goes here...\");\n    }\n\n    public function calculateShippingCost() {\n\n        writeOutput(\"Code for calculating shipping cost goes here...\");\n    }\n\n}\n</code></pre> {% endcode %}</p> <p>The above code registers 2 methods to be run at specific points in the life cycle of all objects in your application.</p>"},{"location":"database-interaction-through-models/object-callbacks/#use-proper-naming","title":"Use Proper Naming","text":"<p>When naming your callbacks you might be tempted to try and keep things (too) simple by doing something like <code>afterValidation(\"afterValidation\")</code>.</p> <p>Do not do this.</p> <p>If you do, Wheels will fail silently and you might be left wondering why nothing is happening. (What is happening is that you, if there is a corresponding method named <code>afterValidation</code>, unintentionally overrode an internal Wheels method.)</p> <p>It's best to name the methods so they describe what task they actually perform, such as <code>calculateShippingCost</code> or <code>fixCreditCard</code> as shown in the example above.</p>"},{"location":"database-interaction-through-models/object-callbacks/#registering-and-controlling-callbacks","title":"Registering and Controlling Callbacks","text":"<p>The following 16 functions can be used to register callbacks.</p> <ul> <li>afterNew() or afterFind()</li> <li>afterInitialization()</li> <li>beforeValidation()</li> <li>beforeValidationOnCreate() or beforeValidationOnUpdate()</li> <li>afterValidation()</li> <li>afterValidationOnCreate() or afterValidationOnUpdate()</li> <li>beforeSave()</li> <li>beforeCreate() or beforeUpdate()</li> <li>afterCreate() or afterUpdate()</li> <li>afterSave()</li> <li>beforeDelete()</li> <li>afterDelete()</li> </ul>"},{"location":"database-interaction-through-models/object-callbacks/#callback-life-cycle","title":"Callback Life Cycle","text":"<p>As you can see above, there are a few places (5, to be exact) where one callback or the other will be executed, but not both.</p> <p>The very first possible callback that can take place in an object's life cycle is either afterNew() or afterFind. The afterNew() callback methods are triggered when you create the object yourself for the very first time, for example, when using the new() method. afterFind() is triggered when the object is created as a result of fetching a record from the database, for example, when using findByKey(). (There is some special behavior for this callback type that we'll explain in detail later on in this chapter).</p> <p>The remaining callbacks get executed depending on whether or not we're running a \"create,\" \"update,\" or \"delete\" operation.</p>"},{"location":"database-interaction-through-models/object-callbacks/#breaking-a-callback-chain","title":"Breaking a Callback Chain","text":"<p>If you want to completely break the callback chain for an object, you can do so by returning <code>false</code> from your callback method. (Otherwise, always return <code>true</code> or nothing at all.) As an example of breaking the callback chain, let's say you have called the save() method on a new object and the method you've registered with the beforeCreate() callback returns <code>false</code>. As a result, because the method you've registered with the beforeCreate() callback will exit the callback chain early by returning <code>false</code>, no record will be inserted in the database.</p>"},{"location":"database-interaction-through-models/object-callbacks/#order-of-callbacks","title":"Order of Callbacks","text":"<p>Sometimes you need to run more than one method at a specific point in the object's life cycle. You can do this by passing in a list of method names like this:</p> <pre><code>beforeSave(\"checkSomething,checkSomethingElse\");\n</code></pre> <p>When an object is saved in your application, these two callbacks will be executed in the order that you registered them. The <code>checkSomething</code> method will be executed first, and unless it returns <code>false</code>, the <code>checkSomethingElse</code> method will be executed directly afterward.</p>"},{"location":"database-interaction-through-models/object-callbacks/#special-case-1-findall-and-the-afterfind-callback","title":"Special Case #1: findAll() and the afterFind() Callback","text":"<p>When you read about the afterFind() callback above, you may have thought that it must surely only work for findOne()/ findByKey() calls but not for findAll() because those calls return query result sets by default, not objects.</p> <p>Believe it or not, but callbacks are even triggered on findAll()! You do need to write your callback code differently though because there will be no <code>this</code> scope in the query object. Instead of modifying properties in the <code>this</code> scope like you normally would, the properties are passed to the callback method via the <code>arguments</code> struct.</p> <p>{% hint style=\"info\" %}</p>"},{"location":"database-interaction-through-models/object-callbacks/#column-types","title":"Column Types","text":"<p>We recommend that you respect the query column types. If you have a date / time value in the query, don't try to change it to a string for example. Some engines will allow it while others won't. {% endhint %}</p> <p>Does that sound complicated? This example should clear it up a little. Let's show some code to display how you can handle setting a <code>fullName</code> property on a hypothetical <code>artist</code> model.</p> <p>Because all afterFind() callbacks run when fetching records from the database, it's a good idea to check to make sure that the columns used in the method's logic exist before performing any operations. You mostly encounter this issue when using the <code>select</code> argument on a finder to limit the number of columns returned. But no worries! You can use <code>StructKeyExists()</code> and perform a simple check to make sure that the columns exists in the <code>arguments</code> scope.</p> <pre><code>component extends=\"Model\" output=\"false\" {\n\n    public function config() {\n        afterFind(\"setFullName\");\n    }\n\n    public function setFullName() {\n        arguments.fullName = \"\";\n        if ( StructKeyExists(arguments, \"firstName\")\n            &amp;&amp; StructKeyExists(arguments, \"lastName\") ) {\n            arguments.fullName = Trim(\n                arguments.firstName &amp; \" \" &amp; arguments.lastName\n            );\n        }\n        return arguments;\n    }\n\n}\n</code></pre> <p>In our example model, an artist's name can consist of both a first name and a last name (\"John Mayer\") or just the band / last name (\"Abba.\"). The <code>setFullName()</code> method handles the logic to concatenate the names.</p> <p>Always remember to return the <code>arguments</code> struct, otherwise Wheels won't be able to tell that you actually wanted to make any changes to the query.</p> <p>Note that callbacks set on included models are not executed. Look at this example:</p> <pre><code>fooBars = model(\"foo\").findAll(include=\"bars\");\n</code></pre> <p>That will cause callback to be executed on the <code>Foo</code> model but not the <code>Bar</code> model.</p>"},{"location":"database-interaction-through-models/object-callbacks/#special-case-2-callbacks-and-the-updateall-and-deleteall-methods","title":"Special Case # 2: Callbacks and the updateAll() and deleteAll() Methods","text":"<p>Please note that if you use the updateAll() or the deleteAll() methods in Wheels, they will not instantiate objects by default, and thus any callbacks will be skipped. This is good for performance reasons because if you update 1,000 records at once, you probably don't want to run the callbacks on each object. Especially not if they involve database calls.</p> <p>However, if you want to execute all callbacks in those methods as well, all you have to do is pass in <code>instantiate=true</code>to the updateAll()/ deleteAll() methods.</p>"},{"location":"database-interaction-through-models/object-relational-mapping/","title":"Object Relational Mapping","text":"<p>Mapping objects in your application to records in your database tables is a key concept in Wheels. Let's take a look at exactly how this mapping is performed.</p>"},{"location":"database-interaction-through-models/object-relational-mapping/#class-and-object-methods","title":"Class and Object Methods","text":"<p>Unlike most other languages, there is no notion of class level (a.k.a. \"static\") methods in CFML. This means that even if you call a method that does not need to use any instance data, you still have to create an object first.</p> <p>In Wheels, we create an object like this:</p> <pre><code>model(\"author\");\n</code></pre> <p>The built-in Wheels model() function will return a reference to an <code>author</code> object in the <code>application</code> scope (unless it's the first time you call this function, in which case it will also create and store it in the <code>application</code> scope).</p> <p>Once you have the <code>author</code> object, you can start calling class methods on it, like findByKey(), for example. findByKey() returns an instance of the object with data from the database record defined by the key value that you pass.</p> <p>Obviously, <code>author</code> is just an example here, and you'll use the names of the <code>.cfc</code> files you have created in the <code>app/models</code> folder.</p> <pre><code>authorClass = model(\"author\");\nauthorObject = authorClass.findByKey(1);\n</code></pre> <p>For readability, this is usually combined into the following:</p> <pre><code>authorObject = model(\"author\").findByKey(1);\n</code></pre> <p>Now <code>authorObject</code> is an instance of the <code>Author</code> class, and you can call object level methods on it, like update() and save().</p> <pre><code>authorObject.update(firstName=\"Joe\");\n</code></pre> <p>In this case, the above code updates <code>firstName</code> field of the <code>author</code> record with a primary key value of <code>1</code> to <code>Joe</code>.</p>"},{"location":"database-interaction-through-models/object-relational-mapping/#primary-keys","title":"Primary Keys","text":"<p>Traditionally in Wheels, a primary key is usually named <code>id</code>, it increments automatically, and it's of the <code>integer</code> data type. However, Wheels is very flexible in this area. You can setup your primary keys in practically any way you want to. You can use natural keys (<code>varchar</code>, for example), composite keys (having multiple columns as primary keys), and you can name the key(s) whatever you want.</p> <p>You can also choose whether the database creates the key for you (using auto-incrementation, for example) or create them yourself directly in your code.</p> <p>What's best, Wheels will introspect the database to see what choices you have made and act accordingly.</p>"},{"location":"database-interaction-through-models/object-relational-mapping/#tables-and-classes","title":"Tables and Classes","text":"<p>Wheels comes with a custom built ORM. ORM stands for \"Object-Relational Mapping\" and means that tables in your relational database map to classes in your application. The records in your tables map to objects of your classes, and the columns in these tables map to properties on the objects.</p> <p>To create a class in your application that maps to a table in your database, all you need to do is create a new class file in your <code>app/models</code> folder and make it extend the <code>Model.cfc</code> file.</p> <pre><code>component extends=\"Model\" {\n}\n</code></pre> <p>If you don't intend to create any custom methods in your class, you can actually skip this step and just call methods without having a file created. It will work just as well. As your application grows, you'll probably want to have your own methods though, so remember the <code>app/models</code> folder. That's where they'll go.</p> <p>Once you have created the file (or deliberately chosen not to for now), you will have a bunch of methods available handle reading and writing to the <code>authors</code> table. (For the purpose of showing some examples, we will assume that you have created a file named <code>Author.cfc</code>, which will then be mapped to the <code>authors</code> table in the database).</p> <p>For example, you can write the following code to get the author with the primary key of <code>1</code>, change his first name, and save the record back to the database.</p> <pre><code>auth = model(\"author\").findByKey(1);\nauth.firstName = \"Joe\";\nauth.save();\n</code></pre> <p>This code makes use of the class method findByKey(), updates the object property in memory, and then saves it back to the database using the object method save(). We'll get back to all these methods and more later.</p>"},{"location":"database-interaction-through-models/object-relational-mapping/#table-and-cfc-naming","title":"Table and CFC Naming","text":"<p>By default, a table name should be the plural version of the class name. So if you have an <code>Author.cfc</code> class, the table name should be <code>authors</code>.</p> <p>To change this behavior you can use the table() method. This method call should be placed in the <code>config()</code> method of your class file, which is where all configuration of your model is done.</p> <p>So, for example, if you wanted for your <code>author</code> model to map to a table in your database named <code>tbl_authors</code>, you would add the following code to the <code>config()</code> method:</p> <pre><code>component extends=\"Model\" {\n    function config() {\n    table(\"tbl_authors\");\n  }\n}\n</code></pre>"},{"location":"database-interaction-through-models/object-relational-mapping/#models-without-database-tables","title":"Models Without Database Tables","text":"<p>Most of the time, you will want to have your model mapped to a database table. However, it is possible to skip this requirement with a simple setting:</p> <pre><code>function config() {\n    table(false);\n}\n</code></pre> <p>With that in place, you have the foundation for a model that never touches the database. When you call methods like save(), create(), update(), and delete() on a tableless model, the entire model lifecycle will still run, including object validation and object callbacks.</p> <p>Typically, you will want to configure properties and validations manually for tableless models and then override save() and other persistence methods needed by your application to persist with the data elsewhere (maybe in the <code>session</code> scope, an external NoSQL database, or as an email sent from a contact form).</p> <p>Features supported:</p> <ul> <li>Properties</li> <li>Validations</li> <li>Callbacks involving initialisation and validations</li> </ul> <p>See Building search forms with tableless models in Wheels for a worked-out example.</p>"},{"location":"database-interaction-through-models/object-relational-mapping/#columns-and-properties","title":"Columns and Properties","text":"<p>Objects in Wheels have properties that correspond to the columns in the table that it maps to. The first time you call a method on a model, Wheels will reflect on the schema inside the database for the table the class maps to and extract all the column information.</p> <p>{% hint style=\"warning\" %}</p>"},{"location":"database-interaction-through-models/object-relational-mapping/#note-about-database-permissions","title":"Note about database permissions","text":"<p>In order for Wheels to successfully read all schema data from your database be sure the data source user has the required access for your DBMS. For example, Microsoft SQL Server requires the \"ddl_admin\" permission for some meta data such as column defaults. {% endhint %}</p> <p>To keep things as simple as possible, there are no getters or setters in Wheels. Instead, all the properties are made available in the <code>this</code> scope.</p> <p>If you want to map a specific property to a column with a different name, you can override the Wheels mapping by using the property() method like this:</p> <pre><code>component extends=\"Model\" {\n    function config() {\n    property(name=\"firstName\", column=\"tbl_auth_f_name\");\n  }\n}\n</code></pre>"},{"location":"database-interaction-through-models/object-relational-mapping/#blank-strings-and-null-values","title":"Blank Strings and NULL Values","text":"<p>Since there is no concept of <code>null</code> / <code>nil</code> in CFML, Wheels will assume that when you save a blank string to the database it should be converted to <code>NULL</code>.</p> <p>For this reason we recommend that you avoid having blank strings stored in the database (since there is no way to distinguish them from <code>NULL</code> values once they've been mapped to a Wheels object / result set).</p>"},{"location":"database-interaction-through-models/object-validation/","title":"Object Validation","text":""},{"location":"database-interaction-through-models/object-validation/#basic-setup","title":"Basic Setup","text":"<p>In order to establish the full cycle of validation, 3 elements need to be in place:</p> <ul> <li>Model file containing business logic for the database table. Example: <code>app/models/User.cfc</code></li> <li>Controller file for creating, saving or updating a model instance. Example: <code>app/controllers/Users.cfc</code></li> <li>View file for displaying the original data inputs and an error list. Example: <code>app/views/users/index.cfm</code></li> </ul> <p>Note: Saving, creating, and updating model objects can also be done from the model file itself (or even in the view file if you want to veer completely off into the wild). But to keep things simple, all examples in this chapter will revolve around code in the controller files.</p>"},{"location":"database-interaction-through-models/object-validation/#the-model","title":"The Model","text":"<p>Validations are always defined in the <code>config()</code> method of your model. This keeps everything nice and tidy because another developer can check <code>config()</code> to get a quick idea on how your model behaves.</p> <p>Let's dive right into a somewhat comprehensive example:</p> <pre><code>component extends=\"Model\" output=\"false\" {\n\n function config() {\n        validatesPresenceOf(\n            properties=\"firstName,lastName,email,age,password\"\n        );\n        validatesLengthOf(properties=\"firstName,lastName\", maximum=50);\n        validatesUniquenessOf(property=\"email\");\n        validatesNumericalityOf(property=\"age\", onlyInteger=true);\n        validatesConfirmationOf(property=\"password\");\n    }\n\n}\n</code></pre> <p>This is fairly readable on its own, but this example defines the following rules that will be run before a create, update, or save is called:</p> <ul> <li>The <code>firstName</code>, <code>lastName</code>, <code>email</code>, <code>age</code>, and <code>password</code> fields must be provided, and they can't be blank.</li> <li>At maximum, <code>firstName</code> and <code>lastName</code> can each be up to 50 characters long.</li> <li>The value provided for <code>email</code> cannot already be used in the database.</li> <li>The value for <code>age</code> can only be an integer.</li> <li><code>password</code> must be provided twice, the second time via a field called <code>passwordConfirmation</code>.</li> </ul> <p>If any of these validations fail, Wheels will not commit the create or update to the database. As you'll see later in this chapter, the controller should check for this and react accordingly by showing error messages generated by the model.</p>"},{"location":"database-interaction-through-models/object-validation/#listing-of-validation-functions","title":"Listing of Validation Functions","text":"<ul> <li>validatesConfirmationOf()</li> <li>validatesExclusionOf()</li> <li>validatesFormatOf()</li> <li>validatesInclusionOf()</li> <li>validatesLengthOf()</li> <li>validatesNumericalityOf()</li> <li>validatesPresenceOf()</li> <li>validatesUniquenessOf()</li> <li>validate()</li> <li>validateOnCreate()</li> <li>validateOnUpdate()</li> </ul>"},{"location":"database-interaction-through-models/object-validation/#automatic-validations","title":"Automatic Validations","text":"<p>Now that you have a good understanding of how validations work in the model, here is a piece of good news. By default, Wheels will perform many of these validations for you based on how you have your fields set up in the database.</p> <p>By default, these validations will run without your needing to set up anything in the model:</p> <ul> <li>Fields set to <code>NOT NULL</code> will automatically trigger validatesPresenceOf().</li> <li>Numeric fields will automatically trigger validatesNumericalityOf().</li> <li>Date or time fields will be checked for the appropriate format.</li> <li>Fields that have a maximum length will automatically trigger validatesLengthOf().</li> </ul> <p>Note these extra behaviors as well:</p> <ul> <li>Automatic validations will not run for Automatic Time Stamps.</li> <li>If you've already set a validation on a particular property in your model, the automatic validations will be overridden by your settings.</li> <li>If your database column provides a default value for a given field, Wheels will not enforce a validatesPresenceOf()rule on that property.</li> </ul> <p>To disable automatic validations in your Wheels application, change this setting in <code>/config/settings.cfm:</code></p> <pre><code>set(automaticValidations=false);\n</code></pre> <p>You can also turn on or off the automatic validations on a per model basis by calling the automaticValidations() method from a model's <code>config()</code> method.</p> <p>See the chapter on Configuration and Defaults for more information on available Wheels ORM settings.</p>"},{"location":"database-interaction-through-models/object-validation/#use-when-condition-or-unless-to-limit-the-scope-of-validation","title":"Use when, condition, or unless to Limit the Scope of Validation","text":"<p>If you want to limit the scope of the validation, you have 3 arguments at your disposal: <code>when</code>, <code>condition</code>, and <code>unless</code>.</p>"},{"location":"database-interaction-through-models/object-validation/#when-argument","title":"when Argument","text":"<p>The <code>when</code> argument accepts 3 possible values.</p> <ul> <li><code>onSave</code> (the default)</li> <li><code>onCreate</code></li> <li><code>onUpdate</code></li> </ul> <p>To limit our email validation to run only on create, we would change that line to this:</p> <pre><code>validatesUniquenessOf(property=\"email\", when=\"onCreate\");\n</code></pre>"},{"location":"database-interaction-through-models/object-validation/#condition-and-unless-arguments","title":"condition and unless Arguments","text":"<p><code>condition</code> and <code>unless</code> provide even more flexibility when the <code>when</code> argument isn't specific enough for your validation's needs.</p> <p>Each argument accepts a string containing an expression to evaluate. <code>condition</code> specifies when the validation should be run. <code>unless</code> specifies when the validation should not be run.</p> <p>As an example, let's say that the model should only verify a CAPTCHA if the user is logged out, but not when they enter their name as \"Ben Forta\":</p> <pre><code>validate(\n    method=\"validateCaptcha\",\n    condition=\"not isLoggedIn()\",\n    unless=\"this.name is 'Ben Forta'\"\n);\n</code></pre>"},{"location":"database-interaction-through-models/object-validation/#custom-validations","title":"Custom Validations","text":"<p>At the end of the listing above are 3 custom validation functions: validate(), validateOnCreate(), and validateOnUpdate(). These functions allow you to create your own validation rules that aren't covered by Wheels's out-of-the-box functions.</p> <p>There is only one difference between how the different functions work:</p> <ul> <li>validate() runs on the save event, which happens on both create and update.</li> <li>validateOnCreate() runs on create.</li> <li>validateOnUpdate() runs on update.</li> </ul> <p>To use a custom validation, we pass one of these functions a method or set of methods to run:</p> <pre><code>validate(method=\"validateEmailFormat\");\n</code></pre> <p>We then should create a method called <code>validateEmailFormat</code>, which in this case would verify that the value set for <code>this.email</code> is in the proper format. If not, then the method sets an error message for that field using the addError()function.</p> <pre><code>private function validateEmailFormat() {\n    if ( !IsValid(\"email\", this.email) ) {\n        addError(property=\"email\", message=\"Email address != in a valid format.\");\n    }\n}\n</code></pre> <p>Note that <code>IsValid()</code> is a function build into your CFML engine.</p> <p>This is a simple rule, but you can surmise that this functionality can be used to do more complex validations as well. It's a great way to isolate complex validation rules into separate methods of your model.</p>"},{"location":"database-interaction-through-models/object-validation/#adding-errors-to-the-model-object-as-a-whole","title":"Adding Errors to the Model Object as a Whole","text":"<p>We've mainly focused on adding error messages at a property level, which admittedly is what you'll be doing 80% of the time. But we can also add messages at the model object level with the addErrorToBase() function.</p> <p>As an example, here's a custom validation method that doesn't allow the user to sign up for an account between the hours of 3:00 and 4:00 am in the server's time zone:</p> <pre><code>private function disallowMaintenanceWindowRegistrations() {\n    local.hourNow = DatePart(\"h\", Now());\n    if ( local.hourNow &gt;= 3 &amp;&amp; local.hourNow &lt; 4 ) {\n        local.timeZone = CreateObject(\"java\", \"java.util.TimeZone\").getDefault();\n        addErrorToBase(\n                message=\"We're sorry, but we don't allow new registrations between\n                the hours of 3:00 &amp;&amp; 4:00 am #local.timeZone#.\"\n            );\n    }\n}\n</code></pre> <p>Sure, we could add logic to the view to also not show the registration form, but this validation in the model would make sure that data couldn't be posted via a script between those hours as well. Better safe than sorry if you're running a public-facing application!</p>"},{"location":"database-interaction-through-models/object-validation/#the-controller","title":"The Controller","text":"<p>The controller continues with the simplicity of validation setup, and at the most basic level requires only 5 lines of code to persist the form data or return to the original form page to display the list of errors.</p> <pre><code>component extends=\"Controller\" {\n\n    public function save() {\n        //  User model from form fields via params\n        newUser = model(\"user\").new(params.newUser);\n        //  Persist new user\n        if ( newUser.save() ) {\n            redirectTo(action=\"success\");\n            //  Handle errors\n        } else {\n            renderView(action=\"index\");\n        }\n    }\n\n}\n</code></pre> <p>The first line of the action creates a <code>newUser</code> based on the <code>user</code> model and the form inputs (via the <code>params</code> struct).</p> <p>Now, to persist the object to the database, the model's save() call can be placed within a <code>&lt;cfif&gt;</code> test. If the save succeeds, the save() method will return <code>true</code>, and the contents of the <code>&lt;cfif&gt;</code> will be executed. But if any of the validations set up in the model fail, the save() method returns <code>false</code>, and the <code>&lt;cfelse&gt;</code> will execute.</p> <p>The important step here is to recognize that the <code>&lt;cfelse&gt;</code> renders the original form input page using the renderView() function. When this happens, the view will use the <code>newUser</code> object defined in our save() method. If a redirectTo() were used instead, the validation information loaded in our save() method would be lost.</p>"},{"location":"database-interaction-through-models/object-validation/#the-view","title":"The View","text":"<p>Wheels factors out much of the error display code that you'll ever need. As you can see by this quick example, it appears to mainly be a normal form. But when there are errors in the provided model, Wheels will apply styles to the erroneous fields.</p> <pre><code>&lt;cfoutput&gt;\n\n#errorMessagesFor(\"newUser\")#\n\n#startFormTag(action=\"save\")#\n    #textField(label=\"First Name\", objectName=\"newUser\", property=\"nameFirst\")#\n    #textField(label=\"Last Name\", objectName=\"newUser\", property=\"nameLast\")#\n    #textField(label=\"Email\", objectName=\"newUser\", property=\"email\")#\n    #textField(label=\"Age\", objectName=\"newUser\", property=\"age\")#\n    #passwordField(label=\"Password\", objectName=\"newUser\", property=\"password\")#\n    #passwordField(\n        label=\"Re-type Password to Confirm\", objectName=\"newUser\",\n        property=\"passwordConfirmation\"\n    )#\n    #submitTag()#\n#endFormTag()#\n\n&lt;/cfoutput&gt;\n</code></pre> <p>The biggest thing to note in this example is that a field called <code>passwordConfirmation</code> was provided so that the validatesConfirmationOf() validation in the model can be properly tested.</p> <p>For more information on how this code behaves when there is an error, refer to the Form Helpers and Showing Errors chapter.</p>"},{"location":"database-interaction-through-models/object-validation/#error-messages","title":"Error Messages","text":"<p>For your reference, here are the default error message formats for the different validation functions:</p> Function Format validatesConfirmationOf() [property] should match confirmation validatesExclusionOf() [property] is reserved validatesFormatOf() [property] is invalid validatesInclusionOf() [property] is not included in the list validatesLengthOf() [property] is the wrong length validatesNumericalityOf() [property] is not a number validatesPresenceOf() [property] can't be empty validatesUniquenessOf() [property] has already been taken"},{"location":"database-interaction-through-models/object-validation/#custom-error-messages","title":"Custom Error Messages","text":"<p>Wheels models provide a set of sensible defaults for validation errors. But sometimes you may want to show something different than the default.</p> <p>There are 2 ways to accomplish this: through global defaults in your config files or on a per-property basis.</p>"},{"location":"database-interaction-through-models/object-validation/#setting-global-defaults-for-error-messages","title":"Setting Global Defaults for Error Messages","text":"<p>Using basic global defaults for the validation functions, you can set error messages in your config file at <code>/config/settings.cfm</code>.</p> <pre><code>set(functionName=\"validatesPresenceOf\", message=\"Please provide a value for [property]\");\n</code></pre> <p>As you can see, you can inject the property's name by adding <code>[property]</code> to the message string. Wheels will automatically separate words based on your camelCasing of the variable names.</p>"},{"location":"database-interaction-through-models/object-validation/#setting-an-error-message-for-a-specific-model-property","title":"Setting an Error Message for a Specific Model Property","text":"<p>Another way of adding a custom error message is by going into an individual property in the model and adding an argument named <code>message</code>.</p> <p>Here's a change that we may apply in the <code>config()</code> method of our model:</p> <pre><code>validatesNumericalityOf(\n    property=\"email\",\n    message=\"Email address is already in use in another account\"\n);\n</code></pre>"},{"location":"database-interaction-through-models/reading-records/","title":"Reading Records","text":"<p>Reading records from your database typically involves using one of the 3 finder methods available in Wheels: findByKey(), findOne(), and findAll().</p> <p>The first 2 of these, findByKey() and findOne(), return an object, while the last one, findAll(), returns the result from a <code>cfquery</code> tag.</p>"},{"location":"database-interaction-through-models/reading-records/#fetching-a-row-by-primary-key-value","title":"Fetching a Row by Primary Key Value","text":"<p>Let's start by looking at the simplest of the finder methods, findByKey(). This method takes one argument: the primary key (or several keys if you're using composite keys) of the record you want to get.</p> <p>If the record exists, it is returned to you as an object. If not, Wheels will return the boolean value <code>false</code>.</p> <p>In the following example, we assume that the <code>params.key</code> variable has been created from the URL (for example a URL such as <code>http://localhost/blog/viewauthor/7</code>.)</p> <p>In your controller:</p> <pre><code>author = model(\"author\").findByKey(params.key);\nif(!IsObject(author)){\n    flashInsert(message=\"Author #params.key# was not found\");\n  redirectTo(back=true);\n}\n</code></pre> <p>In your view:</p> <pre><code>&lt;cfoutput&gt;Hello, #author.firstName# #author.lastName#!&lt;/cfoutput&gt;\n</code></pre>"},{"location":"database-interaction-through-models/reading-records/#fetching-a-row-by-a-value-other-than-the-primary-key","title":"Fetching a Row by a Value Other Than the Primary Key","text":"<p>Often, you'll find yourself wanting to get a record (or many) based on a criteria other than just the primary key value.</p> <p>As an example, let's say that you want to get the last order made by a customer. You can achieve this by using the <code>findOne()</code> method like so:</p> <pre><code>anOrder = model(\"order\").findOne(order=\"datePurchased DESC\");\n</code></pre>"},{"location":"database-interaction-through-models/reading-records/#fetching-multiple-rows","title":"Fetching Multiple Rows","text":"<p>You can use findAll() when you are asking to get one or more records from the database. Wheels will return this as a <code>cfquery</code> result (which could be empty if nothing was found based on your criteria).</p>"},{"location":"database-interaction-through-models/reading-records/#arguments-for-findone-and-findall","title":"Arguments for findOne() and findAll()","text":"<p>Besides the difference in the default return type, findOne() and findAll() accept the same arguments. Let's have a closer look at these arguments.</p>"},{"location":"database-interaction-through-models/reading-records/#select-argument","title":"select Argument","text":"<p>This maps to the <code>SELECT</code> clause of the SQL statement.</p> <p>Wheels is pretty smart when it comes to figuring out what to select from the database table(s). For example, if nothing is passed in to the <code>select</code> argument, Wheels will assume that you want all columns returned and create a <code>SELECT</code>clause looking something like this:</p> <pre><code>artists.id,artists.name\n</code></pre> <p>As you can see, Wheels knows that the <code>artist</code> model is mapped to the <code>artists</code> table and will prepend the table name to the column names accordingly.</p> <p>If you have mapped columns to a different property name in your application, Wheels will take this into account as well. The end result then could look like this:</p> <pre><code>artists.id,artists.fname AS firstName\n</code></pre> <p>If you select from more than one table (see the <code>include</code> argument below) and there are ambiguous column names, Wheels will sort this out for you by prepending the model name to the column name.</p> <p>Let's say you have a column called <code>name</code> in both the <code>artists</code> and <code>albums</code> tables. The <code>SELECT</code> clause will be created like this:</p> <pre><code>artists.name,albums.name AS albumName\n</code></pre> <p>If you use the include argument a lot, you will love this feature as it saves a lot of typing.</p> <p>If you don't want to return all properties, you can override this behavior by passing in a list of the properties you want returned.</p> <p>If you want to take full control over the <code>SELECT</code> clause, you can do so by specifying the table names (i.e. <code>author.firstName</code>) in the <code>select</code> argument or by using alias names (i.e., <code>firstname AS firstName</code>). If Wheels comes across the use of any of these techniques, it will assume you know what you're doing and pass on the select argument straight to the <code>SELECT</code> clause with no changes.</p> <p>A tip is to turn on debugging when you're learning Wheels so you can get a good understanding of how Wheels creates the SQL statements.</p>"},{"location":"database-interaction-through-models/reading-records/#where-argument","title":"where Argument","text":"<p>This maps to the <code>WHERE</code> clause of the SQL statement. Wheels will also convert all your input to <code>cfqueryparam</code> tags for you automatically.</p> <p>There are some limitations to what you can use in the <code>where</code> argument, but the following SQL will work: <code>=, !=, &lt;&gt;, &lt;, &lt;=, &gt;, &gt;=, LIKE, NOT LIKE, IN, NOT IN, IS NULL, IS NOT NULL, AND,</code> and <code>OR</code>. (Note that it's a requirement to write SQL keywords in upper case.) In addition to this, you can use parentheses to group conditional SQL statements together.</p> <p>It's worth mentioning that although Wheels does not support the <code>BETWEEN</code> operator, you can get around this by using <code>&gt;=</code> and <code>&lt;=</code>.</p> <p>Example with numeric value:</p> <pre><code>items = model(\"item\").findAll(where=\"price &gt;= 100 AND price &lt;= 500\");\n</code></pre> <p>The same goes for <code>NOT BETWEEN</code>:</p> <pre><code>items = model(\"item\").findAll(where=\"price &lt;= 100 OR price &gt;= 500\");\n</code></pre> <p>In Wheels ORM queries, you need to surround strings with single quotes or leave the quotes out if you're passing in a number or boolean. </p> <p>Example with non-numeric value:</p> <pre><code>bobsArticles = model(\"author\").findAll(where=\"firstName='Bob'\");\n</code></pre>"},{"location":"database-interaction-through-models/reading-records/#order-argument","title":"order Argument","text":"<p>This maps to the <code>ORDER</code> clause of the SQL statement. If you don't specify an order at all, none will be used. (Makes sense, eh?) So in those cases, the database engine will decide in what order to return the records. Note that it's a requirement to write the SQL keywords <code>ASC</code> and <code>DESC</code> in upper case.</p> <p>There is one exception to this. If you paginate the records (by passing in the <code>page</code> argument) without specifying the order, Wheels will order the results by the primary key column. This is because pagination relies on having unique records to order by.</p>"},{"location":"database-interaction-through-models/reading-records/#include-argument","title":"include Argument","text":"<p>This is a powerful feature that you can use if you have set up associations in your models.</p> <p>If, for example, you have specified that one <code>Author</code> has many <code>Articles</code>, then you can return all authors and articles in the same call by doing this:</p> <pre><code>bobsArticles = model(\"author\").findAll(where=\"firstName='Bob'\", include=\"Articles\");\n</code></pre>"},{"location":"database-interaction-through-models/reading-records/#maxrows-argument","title":"maxRows Argument","text":"<p>This limits the number of records to return. Please note that if you call findAll() with <code>maxRows=1</code>, you will still get a <code>cfquery</code> result back and not an object. (We recommend using findOne() in this case if you want for an object to be returned.)</p>"},{"location":"database-interaction-through-models/reading-records/#page-and-perpage-arguments","title":"page and perPage Arguments","text":"<p>Set these if you want to get paginated data back.</p> <p>So if you wanted records 11-20, for example, you write this code:</p> <pre><code>bobsArticles = model(\"author\").findAll(\n        where=\"firstName='Bob'\", include=\"Articles\", page=2, perPage=10\n);\n</code></pre>"},{"location":"database-interaction-through-models/reading-records/#cache-argument","title":"cache Argument","text":"<p>This is the number of minutes to cache the query for. This is eventually passed on to the <code>cachedwithin</code> attribute of the <code>cfquery</code> tag.</p>"},{"location":"database-interaction-through-models/reading-records/#returnas-argument","title":"returnAs Argument","text":"<p>In the beginning of this chapter, we said that you either get a query or an object back depending on the method that you call. But you can actually specify the return type so that you get either an object, a query, or an array of objects back.</p> <p>To do this, you use the <code>returnAs</code> argument. If you want an array of objects back from a findAll() call, for example, you can do this:</p> <pre><code>users = model(\"user\").findAll(returnAs=\"objects\");\n</code></pre> <p>On findOne() and findByKey(), you can set this argument to either <code>object</code> or <code>query</code>. On the findAll() method, you can set it to <code>objects</code> (note the plural) or <code>query</code>.</p> <p>We recommend sticking to this convention as much as possible because of the CFML engines' slow <code>CreateObject()</code> function. Be careful when setting <code>returnAs</code> to <code>objects</code>. You won't want to create a lot of objects in your array and slow down your application unless you absolutely need to.</p>"},{"location":"database-interaction-through-models/reading-records/#useindex-argument","title":"useIndex Argument","text":"<p>If you have a specific index setup on a table that you'd like the <code>findAll()</code> call to use, you can specify a structure of arguments for each model/index you'd like to use. Only MySQL and SQLServer support index hints.</p> <pre><code>model(\"author\").findAll(\n    include=\"posts\",\n    useIndex={\n        author=\"idx_authors_123\",\n        post=\"idx_posts_123\"\n        }\n);\n</code></pre>"},{"location":"database-interaction-through-models/reading-records/#ignoring-columns","title":"Ignoring Column(s)","text":"<p>For the above finder methods you are able to ignore specified column(s). For instance this can be useful when working with an existing database that has many irrelevant columns. Ignoring column(s) is achieved by adjusting the desired model's config function like below.</p> <p>Ignoring one column:</p> <pre><code>component extends=\"Model\" {\n        function config() {\n            ignoredColumns(columns = [\"column1\"]);\n        }\n}\n</code></pre> <p>Ignoring multiple columns:</p> <pre><code>component extends=\"Model\" {\n        function config() {\n            ignoredColumns(columns = [\"column1\",\"column2\"]);\n        }\n}\n</code></pre>"},{"location":"database-interaction-through-models/soft-delete/","title":"Soft Delete","text":"<p>\"Soft delete\" in database lingo means that you set a flag on an existing table which indicates that a record has been deleted, instead of actually deleting the record.</p>"},{"location":"database-interaction-through-models/soft-delete/#how-to-use-soft-deletion","title":"How to Use Soft Deletion","text":"<p>If you create a new date column (the column type will depend on your database vendor, but usually you want to use <code>date, datetime</code>, or <code>timestamp</code>) on a table and name it <code>deletedAt</code>, Wheels will automagically start using it to record soft deletes.</p> <p>Without the soft delete in place, a <code>delete()</code> call on an object will delete the record from the table using a <code>DELETE</code> statement. With the soft delete in place, an <code>UPDATE</code> statement is sent instead (that sets the <code>deletedAt</code> field to the current time).</p> <p>Of course, all other Wheels functions are smart enough to respect this. So if you use a <code>findAll()</code> function, for example, it will not return any record that has a value set in the <code>deletedAt</code> field.</p> <p>What this all means is that you're given a convenient way to keep deleted data in your database forever, while having your application function as if the data is not there.</p>"},{"location":"database-interaction-through-models/soft-delete/#getting-data-including-soft-deletes","title":"Getting data including Soft Deletes","text":"<p>Occasionally you might want to include data which has been flagged for deletion. You can do this easily by adding <code>includeSoftDeletes=true</code> to any <code>findAll</code> type call.</p> <p>Obviously, if you have any manual queries in your application, you'll need to remember to add <code>deletedAt IS NULL</code> to the <code>WHERE</code> part of your SQL statements instead.</p>"},{"location":"database-interaction-through-models/transactions/","title":"Transactions","text":"<p>Database transactions are a way of grouping multiple queries together. They are useful in case the outcome of one query depends on the completion of another. For example, if you want to take money from one person's bank account, and transfer it into someone else's, you probably want to make sure the debit completes before running the credit.</p> <p>You'll be pleased to know that Wheels makes using database transactions easy. In fact, the vast majority of the time, you won't need to think about using them at all because Wheels automatically runs all queries within the callback chain as a single transaction for creates, updates, and deletes.</p> <p>If any of the callbacks within the chain return false, none of the queries will commit.</p> <p>For example, say you want to automatically create the first post when a new author subscribes to a blog.</p> <p>In your <code>Author</code> model, you would add the following code:</p> <p>{% code title=\"Author.cfc\" %} <pre><code>component extends=\"Model\" {\n  function config(){\n    afterCreate(\"createFirstPost\");\n  }\n\n  function createFirstPost(){\n    var post = model(\"post\").new(\n        authorId=this.id,\n        text=\"This is my first post!\";\n        post.save();\n  }\n}\n</code></pre> {% endcode %}</p> <p>In this example, if the post doesn't save (perhaps due to a validation problem), the author doesn't get created either. This helps to maintain database integrity.</p>"},{"location":"database-interaction-through-models/transactions/#disabling-transactions","title":"Disabling Transactions","text":"<p>If you want to manage transactions yourself using the <code>&lt;cftransaction&gt;</code> tag, you can simply add <code>transaction=false</code>to any CRUD method.</p> <pre><code>model(\"author\").create(name=\"John\", transaction=false);\n</code></pre> <p>Another option is to disable transactions across your entire application using the <code>transactionMode</code> configuration:</p> <p>{% code title=\"/config/settings.cfm\" %} <pre><code>set(transactionMode=false);\n</code></pre> {% endcode %}</p> <p>See the chapter about Configuration and Defaults for more details.</p>"},{"location":"database-interaction-through-models/transactions/#using-rollbacks","title":"Using Rollbacks","text":"<p>Sometimes it's useful to use a rollback to test a process without making any permanent changes to the database. To do this, add <code>transaction=\"rollback\"</code> to any CRUD method.</p> <pre><code>model(\"author\").create(name=\"John\", transaction=\"rollback\");\n</code></pre> <p>Again, to configure your entire application to rollback all transactions, you can set the <code>transactionMode</code> configuration to <code>rollback</code>.</p> <p>{% code title=\"/config/settings.cfm\" %} <pre><code>set(transactionMode=\"rollback\");\n</code></pre> {% endcode %}</p>"},{"location":"database-interaction-through-models/transactions/#nesting-transactions-with-invokewithtransaction","title":"Nesting Transactions with invokeWithTransaction","text":"<p>One issue with ColdFusion is that you cannot nest <code>&lt;cftransaction&gt;</code> tags. In this case, Wheels provides a workaround. If you wish to run a method within a transaction, use invokeWithTransaction(), as below.</p> <pre><code>invokeWithTransaction(\n    method=\"transferFunds\",\n    personFrom=david,\n    personTo=mary,\n    amount=100\n);\n</code></pre>"},{"location":"database-interaction-through-models/updating-records/","title":"Updating Records","text":"<p>When you have created or retrieved an object, you can save it to the database by calling its save() method. This method returns <code>true</code> if the object passes all validations and the object was saved to the database. Otherwise, it returns <code>false</code>.</p> <p>This chapter will focus on how to update records. Read the Creating Records chapter for more information about how to create new records.</p>"},{"location":"database-interaction-through-models/updating-records/#a-practical-example","title":"A Practical Example","text":"<p>Let's start with an example of getting a blog post from the database, updating its title, and saving it back:</p> <pre><code>post = model(\"post\").findByKey(33);\npost.title = \"New version of Wheels just released\";\npost.save();\n</code></pre> <p>You can also change the values of one or more properties and save them to the database in one single call using the <code>update()</code> method, like this:</p> <pre><code>post = model(\"post\").findByKey(33);\npost.update(title=\"New version of Wheels just released\");\n</code></pre>"},{"location":"database-interaction-through-models/updating-records/#updating-via-struct-values","title":"Updating Via struct Values","text":"<p>You can also pass in name/value pairs to <code>update()</code> as a struct. The main reason this method accepts a struct is to allow you to easily use it with forms.</p> <p>This is how it would look if you wanted to update the properties for a post based on a submitted form.</p> <pre><code>post = model(\"post\").findByKey(params.key);\npost.update(params.post);\n</code></pre> <p>It's also possible to combine named arguments with a struct, but then you need to name the struct argument as <code>properties</code>.</p> <p>Example:</p> <pre><code>post = model(\"post\").findByKey(params.key);\npost.update(title=\"New version of Wheels just released\", properties=params.post);\n</code></pre>"},{"location":"database-interaction-through-models/updating-records/#combine-reading-and-updating-into-a-single-call","title":"Combine Reading and Updating into a Single Call","text":"<p>To cut down even more on lines of code, you can also combine the reading and saving of the objects by using the class-level methods updateByKey() and updateAll().</p>"},{"location":"database-interaction-through-models/updating-records/#the-updatebykey-method","title":"The updateByKey() Method","text":"<p>Give the updateByKey() method a primary key value (or several if you use composite keys) in the <code>key</code> argument, and it will update the corresponding record in your table with the properties you give it. You can pass in the properties either as named arguments or as a struct to the <code>properties</code> argument.</p> <p>This method returns the object with the primary key value you specified. If the object does not pass validation, it will be returned anyway, but nothing will be saved to the database.</p> <p>By default, updateByKey() will fetch the object first and call the <code>update()</code> method on it, thus invoking any callbacks and validations you have specified for the model. You can change this behavior by passing in <code>instantiate=false</code>. Then it will just update the record from the table using a simple UPDATE query.</p> <p>An example of using updateByKey() by passing a struct:</p> <pre><code>result = model(\"post\").updateByKey(33, params.post);\n</code></pre> <p>And an example of using updateByKey() by passing named arguments:</p> <pre><code>result = model(\"post\").updateByKey(id=33, title=\"New version of Wheels just released\", published=1);\n</code></pre>"},{"location":"database-interaction-through-models/updating-records/#updating-multiple-rows-with-updateall","title":"Updating Multiple Rows with updateAll()","text":"<p>The updateAll() method allows you to update more than one record in a single call. You specify what records to update with the <code>where</code> argument and tell Wheels what updates to make using named arguments for the properties.</p> <p>The <code>where</code> argument is used exactly as you specify it in the <code>WHERE</code> clause of the query (with the exception that Wheels automatically wraps everything properly in <code>cfqueryparam</code> tags). So make sure that you place those commas and quotes correctly!</p> <p>An example:</p> <pre><code>recordsReturned = model(\"post\").updateAll(\n        published=1, publishedAt=Now(), where=\"published=0\"\n);\n</code></pre> <p>Unlike updateByKey(), the updateAll() method will not instantiate the objects by default. That could be really slow if you wanted to update a lot of records at once.</p>"},{"location":"database-interaction-through-models/using-multiple-data-sources/","title":"Using Multiple Data Sources","text":"<p>Sometimes you need to pull data from more than one database, whether it's by choice (for performance or security reasons, perhaps) or because that's the way your infrastructure is set up. It's something you have to find a way to deal with.</p> <p>Wheels has built-in functionality for this so that you don't have to revert back to writing the queries and setting the data source manually whenever you need to use a data source other than the default one. In order accomplish this, you will use the dataSource() function.</p>"},{"location":"database-interaction-through-models/using-multiple-data-sources/#using-the-datasource-function","title":"Using the dataSource() Function","text":"<p>Overriding the default data source is done on a per model basis in Wheels by calling the dataSource()function from within your model's <code>config()</code> method. By doing this, you instruct wheels to use that data source whenever it interacts with that model.</p> <p>Here's an example of a model file:</p> <pre><code>component extends=\"Model\" {\n\n  function config(){\n    dataSource(\"mySecondDatabase\");\n  }\n\n}\n</code></pre> <p>It's important to note that in order for Wheels to use the data source, it must first be configured in your respective CFML engine (i.e. in the Adobe ColdFusion, Lucee Admin etc).</p>"},{"location":"database-interaction-through-models/using-multiple-data-sources/#does-not-work-with-associations","title":"Does Not Work with Associations","text":"<p>One thing to keep in mind when using multiple data sources with Wheels is that it doesn't work across associations. When including another model within a query, Wheels will use the calling model's data source for the context of the query.</p> <p>Let's say you have the following models set up:</p> <p>{% code title=\"app/models/Photo.cfc\" %} <pre><code>component extends=\"Model\" {\n\n  function config(){\n    dataSource(\"myFirstDatabase\");\n    hasMany(\"photoGalleries\");\n  }\n\n}\n</code></pre> {% endcode %}</p> <p>{% code title=\"app/models/PhotoGallery.cfc\" %} <pre><code>component extends=\"Model\" {\n\n  function config(){\n    dataSource(\"mySecondDatabase\");\n  }\n\n}\n</code></pre> {% endcode %}</p> <p>Because the <code>photo</code> model is the main model being used in the following example, its data source (<code>myFirstDatabase</code>) will be the one used in the query that findAll() ends up executing.</p> <p>{% code title=\"FindAll Call\" %} <pre><code>myPhotos = model(\"photo\").findAll(include=\"photoGalleries\");\n</code></pre> {% endcode %}</p>"},{"location":"database-interaction-through-models/database-migrations/","title":"Database Migrations","text":"<p>With Wheels 2.x, you can now create, alter and populate your database via cfscript in an organized manner. Using custom CFC files, you can create an organized database schema, and move between versions easily, either programmatically, via the provided GUI, or via the CLI. </p>"},{"location":"database-interaction-through-models/database-migrations/#getting-started","title":"Getting Started","text":"<p>If you're new to this concept, the best way to get going is by following the <code>[Migrator]</code> link in the debug footer to load the built in GUI. Naturally, you will need your application's datasource setup and ready to go to get started.</p> <p></p> <p>You can go to the <code>info</code> tab in the navbar and you will see a <code>Database</code> section, just so you can check you're running against the correct datasource. We're going to start by creating a simple template.</p>"},{"location":"database-interaction-through-models/database-migrations/#creating-your-first-template","title":"Creating your First Template","text":"<p>The Templating tab allows for creation of either a blank CFC file, or from a selection of pre-populated templates. Whilst none of these templates will provide all the information required for a complete database migration, they are a good starting point and fairly heavily commented.</p> <p></p> <p>As we've not setup any migrations before, the system needs to know what prefix we want to use for our migration files. Each approach - <code>Timestamp</code> and <code>Numeric</code> is perfectly valid, but we recommend the <code>Timestamp</code> prefix if you're just starting out. Once you have a migration file, this section will disappear as it will get that info from the existing files.</p> <p>For this tutorial, we're going to create the <code>users</code> table. So under <code>Create a Template</code>, we will select <code>Create table</code> and add a description of <code>Create User Table</code>.</p> <p>Clicking on <code>Create Migration File</code> will then create a CFC at <code>/app/migrator/migrations/20170420100502_Create_User_Table.cfc</code>. The system will also display all messages at the bottom of the GUI whenever it does something - so for this command, we see <code>The migration 20170420100502_Create_User_Table.cfc file was created</code></p>"},{"location":"database-interaction-through-models/database-migrations/#populating-the-create-user-table-template","title":"Populating the Create User Table Template","text":"<p>Next, open up the <code>Create_User_Table.cfc</code> template we just created. There are two functions to any migration file: <code>up()</code> and <code>down()</code>.</p> <p><code>up()</code> will be executed when migrating your schema forward, and <code>down()</code> when you're rolling back.</p> <p>The important concept to grasp is that anything which up() does, down() must undo.</p> <p>{% code title=\"up()\" %} <pre><code>function up() {\n    transaction {\n        try {\n            t = createTable(name = 'tableName');\n            t.timestamps();\n            t.create();\n        } catch (any e) {\n            local.exception = e;\n        }\n\n        if (StructKeyExists(local, \"exception\")) {\n            transaction action=\"rollback\";\n            Throw(errorCode = \"1\", detail = local.exception.detail, message = local.exception.message, type = \"any\");\n        } else {\n            transaction action=\"commit\";\n        }\n    }\n}\n</code></pre> {% endcode %}</p> <p>Our default <code>up()</code> function will look something like this. Most of it you can actually ignore, as it's just wrapped in a transaction with some error handling. The important lines to look at are:</p> <p>{% code title=\"up()\" %} <pre><code>t = createTable(name='tableName');\nt.timestamps();\nt.create();\n</code></pre> {% endcode %}</p> <p><code>createTable()</code> is the command to actually make the table: so we need to change this to <code>users</code>.</p> <p>{% code title=\"up()\" %} <pre><code>t = createTable(name='users');\nt.timestamps();\nt.create();\n</code></pre> {% endcode %}</p> <p><code>t.timestamps();</code> creates Wheels automatic timestamp columns of <code>createdAt</code>,<code>updatedAt</code> and <code>deletedAt</code>.</p> <p>The <code>t.create();</code> is the final statement which executes the actual action.</p>"},{"location":"database-interaction-through-models/database-migrations/#what-goes-up","title":"What goes up...","text":"<p>Remember, the <code>down()</code> function needs to reverse these changes. so in our <code>down()</code> code block, we're going to change the <code>dropTable('tableName');</code> to `dropTable('users');</p>"},{"location":"database-interaction-through-models/database-migrations/#adding-additional-columns","title":"Adding additional columns","text":"<p>Whilst we could execute this template in it's current state (we have an up function which creates, and a down function which drops) we wouldn't get much in the actual table. We can use the same migration file to add additional lines to create some columns to store things like <code>firstname</code>. Here's an example of a slightly more fleshed out migration file to give you some inspiration:</p> <p>{% code title=\"up()\" %} <pre><code>t = createTable(name='users');\nt.string(\n columnNames='firstname,lastname,password',\n default='', null=false, limit='60');\n\nt.string(\n columnNames='username,passwordresettoken,apikey',\n default='', null=true, limit='60');\n\nt.string(\n columnNames='email,address1,address2,city,county,country,tel,www',\n default='', null=true, limit='255');\n\nt.string(\n columnNames='title,postcode,lang,locale,timezone',\n default='', null=true, limit='15');\n\nt.integer(columnNames='roleid', default='0', null=false, limit='11');\nt.datetime(columnNames='pwresettokenat', default='', null=true);\nt.datetime(columnNames='pwlastresetat', default='', null=true);\n\nt.timestamps();\nt.create();\n</code></pre> {% endcode %}</p> <p>As you can see, you can create multiple columns in a single call, set default values, whether to allow null values, and so on.</p> <p>At this point, we can get going on actually creating this table</p> <ul> <li>Make sure that multiple column names in \"columnNames\" are only separated with \",\". Don't use spaces like \", \" as that space becomes part of a column name which will cause problems. </li> </ul>"},{"location":"database-interaction-through-models/database-migrations/#creating-tables-with-composite-primary-keys","title":"Creating Tables with composite primary keys","text":"<p>While <code>t = createTable(name='users');</code> will create a standard auto-increment numeric ID, sometimes you need to create a table which has a composite, or non standard primary key. In this example, we're setting <code>id=false</code> on the <code>createTable()</code> call to bypass the default behavior, then specifying our primarykeys separately via <code>primaryKey()</code>:</p> <pre><code>t = createTable(name='rolepermissions', id=false);\nt.primaryKey(name=\"roleid\", null=false, limit=11);\nt.primaryKey(name=\"permissionid\", null=false, limit=11);\nt.create();\n</code></pre> <p>This would be a typical setup for a join table where you have a many to many relationship. Alternatively this can be useful if you need to specify a UUID as a primarykey.</p>"},{"location":"database-interaction-through-models/database-migrations/#running-a-migration","title":"Running a migration","text":"<p>Returning to our migration GUI, we can now see some options under the Migrations tab.</p> <p></p> <p>Simply click the button to migrate the database to our new version. From this screen we can also roll back to previous schema versions, or even reset the database back to <code>0</code>.</p> <p></p>"},{"location":"database-interaction-through-models/database-migrations/#migrator-configuration-settings","title":"Migrator Configuration Settings","text":"Setting Type Default Description autoMigrateDatabase Boolean false Automatically runs available migration on applicationstart. migratorTableName String migratorversions The name of the table that stores the versions migrated. createMigratorTable Boolean true Create the migratorversions database table. writeMigratorSQLFiles Boolean false Writes the executed SQL to a .sql file in the app/migrator/sql directory. migratorObjectCase String lower Specifies the case of created database object. Options are 'lower', 'upper' and 'none' (which uses the given value unmodified) allowMigrationDown Boolean false (true in development mode) Prevents 'down' migrations (rollbacks)"},{"location":"database-interaction-through-models/database-migrations/#setting-column-types","title":"Setting Column Types","text":"<p>The Migrator needs to run across multiple DB engines, it avoids direct use of varchar, as different adapters will need to use different column types etc. Therefore string translates to VARCHAR.</p> <p>For instance, here's the mySQL variants:</p> <ul> <li>biginteger = BIGINT UNSIGNED </li> <li>binary = BLOB boolean = TINYINT',limit=1 </li> <li>date = DATE datetime = DATETIME </li> <li>decimal = DECIMAL </li> <li>float = FLOAT </li> <li>integer = INT </li> <li>string = VARCHAR',limit=255 </li> <li>text = TEXT </li> <li>text (size=\"mediumtext\") = MEDIUMTEXT (16MB) </li> <li>text (size=\"longtext\") = LONGTEXT (4GB) </li> <li>time = TIME </li> <li>timestamp = TIMESTAMP </li> <li>uuid = VARBINARY', limit=16</li> </ul> <p>Whereas SQL Server would use:</p> <ul> <li>primaryKey = \"int NOT NULL IDENTITY (1, 1) </li> <li>binary = IMAGE </li> <li>boolean = BIT </li> <li>date = DATETIME </li> <li>datetime = DATETIME </li> <li>decimal = DECIMAL </li> <li>float = FLOAT </li> <li>integer = INT </li> <li>string = VARCHAR',limit=255 </li> <li>text = TEXT </li> <li>time = DATETIME </li> <li>timestamp = DATETIME </li> <li>uniqueidentifier = UNIQUEIDENTIFIER </li> <li>char = CHAR',limit=10</li> </ul>"},{"location":"database-interaction-through-models/database-migrations/migrations-in-production/","title":"Migrations in Production","text":"<p>Once you've created your migration files and committed your changes (you are all using source control - right?) you might be wondering about the different ways to migrate your database in a production environment.</p>"},{"location":"database-interaction-through-models/database-migrations/migrations-in-production/#manual-migrations-via-gui","title":"Manual Migrations via GUI","text":"<p>Probably one of the most common and basic deployment types is a standalone virtual machine, running ACF or Lucee, with a database server such as MySQL running on the same box. In this scenario, we could probably stick with the simplest option: there is after all, probably only one instance of the site running.</p> <ul> <li>Put the site into maintenance mode (this is always good practice when deploying new code)</li> <li>Load the internal Migration GUI, migrate your database. Note: Ensure your IP address is in the maintenance mode exclusion list: the debug footer may not be available, so make a note of the url string <code>?controller=wheels&amp;action=wheels&amp;view=migrate</code></li> <li>Reload the application back into production mode</li> </ul>"},{"location":"database-interaction-through-models/database-migrations/migrations-in-production/#automatic-migrations","title":"Automatic Migrations","text":"<p>You may well have a more complicated setup, such as being behind a load balancer, or having dynamic instances of your application - such as AWS ElasticBeanstalk - where logging into the same instance isn't practical; it may be your application is an API where a request could get routed to any node in the cluster, or that \"sticky\" sessions aren't enabled.</p> <p>This means running the migrations manually via GUI isn't a practical option - you might accidentally leave a node in the cluster in maintenance mode and not be able to easily return to it etc.</p> <p>In this scenario, you could use the built-in <code>autoMigrateDatabase</code> setting: this will automatically migrate the database to the latest schema version when the application starts.</p> <p>This would fire for each node on a cluster and would fire on each application restart - however, the overhead would be minimal (one additional database call). </p> <p>To activate this feature, just use <code>set(autoMigrateDatabase=true)</code> in your <code>/config/production/settings.cfm</code> settings, to ensure it only fires in production mode.</p>"},{"location":"database-interaction-through-models/database-migrations/migrations-in-production/#programmatic-migrations","title":"Programmatic Migrations","text":"<p>It might be that full automatic migrations aren't necessary, or undesirable for some reason. You could have a script which essentially replaces the GUI functions and call the migration methods manually. </p> <p>Please consult the internal documentation API reference under Configurations &gt; Database Migrations for details of the various functions available to you.</p>"},{"location":"database-interaction-through-models/database-migrations/migrations-in-production/#further-considerations-with-automatic-migrations","title":"Further considerations with automatic migrations","text":"<p>If you are using automatic migrations, then you could lock down production mode even further. With Wheels 2.x there is more data available to development mode, such as the internal documentation, routing GUI and Migration GUI.</p> <p>Turn off environment switching</p> <p>You can force Wheels to remain in production via <code>set(allowEnvironmentSwitchViaUrl=false)</code> - this will disable <code>?reload=maintenance</code> style URLs where there is a configuration change, but simple reloading such as <code>?reload=true</code> will still work. This setting should be approached with caution, as once you've entered into a mode with this setting on, you can't then switch out of it.</p>"},{"location":"displaying-views-to-users/creating-custom-view-helpers/","title":"Creating Custom View Helpers","text":"<p>As you probably know already, Wheels gives you a lot of helper functions that you can use in your view pages.</p> <p>Perhaps what you didn't know was that you can also create your own view helper functions and have Wheels automatically make them available to you. To do this, you store your UDFs (User Defined Functions) in different controller-level helper files.</p>"},{"location":"displaying-views-to-users/creating-custom-view-helpers/#the-appviewshelperscfm-file","title":"The app/views/helpers.cfm File","text":"<p>Once a UDF is placed in this file, it will be available for use in all your views.</p> <p>Alternatively, if you only need a set of functions in a specific controller of your application, you can make them controller-specific. This is done by placing a <code>helpers.cfm</code> file inside the controller's view folder.</p> <p>So if we wanted a set of helpers to generally only be available for your users controller, you would store the UDFs in this file:</p> <pre><code>app/views/users/helpers.cfm\n</code></pre> <p>Any functions in that file will now only be included for the view pages of that specific controller.</p>"},{"location":"displaying-views-to-users/creating-custom-view-helpers/#when-not-to-use-helper-functions","title":"When not to Use Helper Functions","text":"<p>Helper functions, together with the use of Partials, gives you a way to keep your code nice and DRY, but there are a few things to keep in mind as you work with them.</p> <p>The <code>helpers.cfm</code> files are only meant to be used for views, hence the placement in the app/views folder.</p> <p>If you need to share non-view functionality across controllers, then those should be placed in the parent controller file, i.e. <code>app/controllers/Controller.cfc</code>. If you need helper type functionality within a single controller file, you can just add it as a function in that controller and make it private so that it can't be called as an action (and as a reminder to yourself of its general purpose as well).</p> <p>The same applies to reusable model functionality: use the parent file, <code>app/models/Model.cfc</code>. Private functions within your children models work well here, just like with controllers.</p> <p>If you need to share a function globally across your entire application, regardless of which MVC layer that will be accessing it, then you can place it in the <code>app/events/functions.cfm</code> file.</p>"},{"location":"displaying-views-to-users/creating-custom-view-helpers/#the-difference-between-partials-and-helpers","title":"The Difference Between Partials and Helpers","text":"<p>Both partials and helpers are there to assist you in keeping programmatic details out of your views as much as possible. Both do the job well, and which one you choose is just a matter of preference.</p> <p>Generally speaking, it probably makes most sense to use partials when you're generating a lot of HTML and helpers when you're not.</p>"},{"location":"displaying-views-to-users/date-media-and-text-helpers/","title":"Date, Media, and Text Helpers","text":"<p>Wheels's included view helper functions can help you out in those tricky little tasks that need to be performed in the front-end of your web applications. Although they are called miscellaneous, they are in fact categorized into 3 categories:</p> <ul> <li>Date Helpers</li> <li>Media Helpers</li> <li>Text Helpers</li> </ul> <p>We also have separate chapters about Wheels form helpers in Form Helpers and Showing Errors and creating your own helpers in Creating Custom View Helpers.</p>"},{"location":"displaying-views-to-users/date-media-and-text-helpers/#date-helpers","title":"Date Helpers","text":"<p>Wheels does a good job at simplifying the not so fun task of date and time transformations.</p> <p>Let's say that you have a comment section in your application, which shows the title, comment, and date/time of its publication. In the old days, your code would have looked something like this:</p> <pre><code>&lt;cfoutput query=\"comments\"&gt;\n    &lt;div class=\"comment\"&gt;\n        &lt;h2&gt;#comments.title#&lt;/h2&gt;\n\n        &lt;p class=\"timestamp\"&gt;\n            #DateFormat(comments.createdAt, \"mmmm d, yyyy\")#\n            #LCase(TimeFormat(comments.createdAt, \"h:mm tt\"))#&lt;/p&gt;\n        &lt;p&gt;#comments.comment#&lt;/p&gt;\n    &lt;/div&gt;\n&lt;/cfoutput&gt;\n</code></pre> <p>That works, but it's pretty tedious. And if you think about it, the date will be formatted in a way that is not that meaningful to the end user.</p> <p>Instead of \"April 27, 2009 10:10 pm,\" it may be more helpful to display \"a few minutes ago\" or \"2 hours ago.\" This can be accomplished with a Wheels date helper called timeAgoInWords().</p> <pre><code>&lt;cfoutput query=\"comments\"&gt;\n    &lt;div class=\"comment\"&gt;\n        &lt;h2&gt;#comments.title#&lt;/h2&gt;\n\n        &lt;p class=\"timestamp\"&gt;(#timeAgoInWords(comments.createdAt)#)&lt;/p&gt;\n        &lt;p&gt;#comments.comment#&lt;/p&gt;\n    &lt;/div&gt;\n&lt;/cfoutput&gt;\n</code></pre> <p>With that minimal change, you have a prettier presentation for your end users. And most important of all, it didn't require you to do anything fancy in your code.</p>"},{"location":"displaying-views-to-users/date-media-and-text-helpers/#media-helpers","title":"Media Helpers","text":"<p>Working with media is also a walk in the park with Wheels. Let's jump into a few quick examples.</p> <p>Style Sheets</p> <p>First, to include CSS files in your layout, you can use the styleSheetLinkTag() function:</p> <pre><code>&lt;!--- layout.cfm ---&gt;\n&lt;cfoutput&gt;\n    #styleSheetLinkTag(\"main\")#\n&lt;/cfoutput&gt;\n</code></pre> <p>This will generate the <code>&lt;link&gt;</code> tag for you with everything needed to include the file at <code>public/stylesheets/main.css</code>.</p> <p>If you need to include more than one style sheet and change the media type to \"print\" for another, there are arguments for that as well: </p> <pre><code>#styleSheetLinkTag(sources=\"main,blog\")#\n#styleSheetLinkTag(source=\"printer\", media=\"print\")#\n</code></pre> <p>Lastly, you can also link to stylesheets at a different domain or subdomain by specifying the full URL:</p> <pre><code>#styleSheetLinkTag(    source=\"http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.0/themes/cupertino/jquery-ui.css\"\n)#\n</code></pre> <p>JavaScript Files</p> <p>Including JavaScript files is just as simple with the javaScriptIncludeTag() helper. This time, files are referenced from the public/javascripts folder.</p> <pre><code>#javaScriptIncludeTag(\"jquery\")#\n</code></pre> <p>Like with style sheets, you can also specify lists of JavaScript includes as well as full URLs:</p> <pre><code>#javaScriptIncludeTag(\"https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js\")#\n</code></pre> <p>Displaying Images</p> <p>Wheels's imageTag() helper also provides some simple, yet powerful functionality:</p> <pre><code>&lt;cfoutput&gt;\n    #imageTag(\"logo.png\")#\n&lt;/cfoutput&gt;\n</code></pre> <p>With this simple call, Wheels will generate the <code>&lt;img&gt;</code> tag for <code>public/images/logo.png</code> and also set the <code>width</code>, <code>height</code> and <code>alt</code> attributes automatically for you (based on image dimensions and the image file name). Wheels will also cache this information for later use in your application.</p> <p>If you need to override the <code>alt</code> attribute for better accessibility, you can still do that too:</p> <pre><code>#imageTag(source=\"logo.png\", alt=\"ColdFusion on Wheels\")#\n</code></pre>"},{"location":"displaying-views-to-users/date-media-and-text-helpers/#text-helpers","title":"Text Helpers","text":"<p>To illustrate what the text helpers can help you with, let's see a piece of code that includes 2 of the text helpers in a simple search results page.</p> <pre><code>&lt;!--- Query of search results ---&gt;\n&lt;cfparam name=\"searchResults\" type=\"query\"&gt;\n\n&lt;!--- Search query provided by user ---&gt;\n&lt;cfparam name=\"params.q\" type=\"string\"&gt;\n\n&lt;cfoutput&gt;\n    &lt;p&gt;\n       #highlight(text=\"Your search for #params.q#\", phrases=params.q)#\n       returned #searchResults.RecordCount#\n       #pluralize(word=\"result\", count=searchResults.RecordCount)#.\n    &lt;/p&gt;\n&lt;/cfoutput&gt;\n</code></pre> <p>That code will highlight all occurrences of <code>params.q</code> and will pluralize the word \"result\" to \"results\" if the number of records in <code>searchResults</code> is greater than 1. How about them apples? No <code>&lt;cfif&gt;</code> statements, no extra lines, no nothing.</p> <p>The functions we have shown in this chapter are only the tip of the iceberg when it comes to helper functions. There's plenty more, so don't forget to check out the View Helper Functions API.</p>"},{"location":"displaying-views-to-users/displaying-links-for-pagination/","title":"Displaying Links for Pagination","text":"<p>In the chapter titled Getting Paginated Data, we talked about how to get pages of records from the database (records 11-20, for example). Now we'll show you how to create links to the other pages in your view.</p>"},{"location":"displaying-views-to-users/displaying-links-for-pagination/#displaying-paginated-links-with-the-paginationlinks-function","title":"Displaying Paginated Links with the paginationLinks Function","text":"<p>If you have fetched a paginated query in your controller (normally done using findAll() and the page argument), all you have to do to get the page links to show up is this: </p> <pre><code>#paginationLinks()#\n</code></pre> <p>Given that you have only fetched one paginated query in your controller, this will output the links for that query using some sensible defaults.</p> <p>How simple is that? </p>"},{"location":"displaying-views-to-users/displaying-links-for-pagination/#arguments-used-for-customization","title":"Arguments Used for Customization","text":"<p>Simple is good, but sometimes you want a little more control over how the links are displayed. You can control the output of the links in a number of different ways. We'll show you the most important ones here. Please refer to the paginationLinks() documentation for all other uses.</p> <p>The name Argument</p> <p>By default, Wheels will create all links with page as the variable that holds the page numbers. So the HTML code will look something like this:</p> <pre><code>&lt;a href=\"/main/userlisting?page=1\"&gt;\n&lt;a href=\"/main/userlisting?page=2\"&gt;\n&lt;a href=\"/main/userlisting?page=3\"&gt;\n</code></pre> <p>To change page to something else, you use the name argument like so:</p> <pre><code>#paginationLinks(name=\"pgnum\")#\n</code></pre> <p>By the way, perhaps you noticed how Wheels chose to use that hideous question mark in the URL, despite the fact that you have URL rewriting turned on? Because paginationLinks() uses linkTo() in the background, you can easily get rid of it by creating a custom route. You can read more about this in the Routing chapter.</p> <p>The windowSize Argument</p> <p>This controls how many links to show around the current page. If you are currently displaying page 6 and pass in <code>windowSize=3</code>, Wheels will generate links to pages 3, 4, 5, 6, 7, 8, and 9 (three on each side of the current page).</p> <p>The alwaysShowAnchors Argument</p> <p>If you pass in true here, it means that no matter where you currently are in the pagination or how many page numbers exist in total, links to the first and last page will always be visible.</p>"},{"location":"displaying-views-to-users/displaying-links-for-pagination/#managing-more-than-one-paginated-query-per-page","title":"Managing More Than One Paginated Query Per Page","text":"<p>Most of the time, you'll only deal with one paginated query per page. But in those cases where you need to get/show more than one paginated query, you can use the handle argument to tell Wheels which query it is that you are referring to.</p> <p>This argument has to be passed in to both the <code>findAll()</code> function and the <code>paginationLinks()</code> function. (You assign a handle name in the <code>findAll()</code> function and then request the data for it in <code>paginationLinks()</code>.)</p> <p>Here is an example of using handles:</p> <p>In the controller... </p> <pre><code>users = model(\"user\").findAll(handle=\"userQuery\", page=params.page, perPage=25);\nblogs = model(\"blog\").findAll(handle=\"blogQuery\", page=params.page, perPage=25);\n</code></pre> <p>In the view...</p> <pre><code>&lt;ul&gt;\n    &lt;cfoutput query=\"users\"&gt;\n        &lt;li&gt;#users.name#&lt;/li&gt;\n    &lt;/cfoutput&gt;\n&lt;/ul&gt;\n\n&lt;cfoutput&gt;#paginationLinks(handle=\"userQuery\")#&lt;/cfoutput&gt;\n\n&lt;cfoutput query=\"blog\"&gt;\n    #address#&lt;br /&gt;\n&lt;/cfoutput&gt;\n\n&lt;cfoutput&gt;#paginationLinks(handle=\"blogQuery\")#&lt;/cfoutput&gt;\n</code></pre> <p>That's all you need to know about showing pagination links to get you started. As always, the best way to learn how the view functions work is to just play around with the arguments and see what HTML is produced.</p>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/","title":"Form Helpers and Showing Errors","text":"<p>The majority of applications are not all about back-end. There is a great deal of work to perform on the front-end as well. It can be argued that most of your users will think of the interface as the application.</p> <p>Wheels is here to take you to greener pastures with its form helper functions. Let's get visual with some code examples.</p>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#simple-example-the-old-way","title":"Simple Example: The Old Way","text":"<p>Here is a simple form for editing a user profile. Normally, you would code your web form similarly to this:</p> <p>{% code title=\"app/views/profiles/edit.cfm\" %} <pre><code>&lt;cfoutput&gt;\n\n&lt;form action=\"/profile\" method=\"post\"&gt;\n    &lt;div&gt;\n        &lt;label for=\"firstName\"&gt;First Name&lt;/label&gt;\n        &lt;input id=\"firstName\" name=\"firstName\" value=\"#EncodeForHtml(profile.firstName)#\"&gt;\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        &lt;label for=\"lastName\"&gt;Last Name&lt;/label&gt;\n        &lt;input id=\"lastName\" name=\"lastName\" value=\"#EncodeForHtml(profile.lastName)#\"&gt;\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        &lt;label for=\"department\"&gt;Department&lt;/label&gt;\n        &lt;select id=\"department\" name=\"departmentId\"&gt;\n            &lt;cfloop query=\"departments\"&gt;\n                &lt;option\n                    value=\"#EncodeForHtml(departments.id)#\"\n                    &lt;cfif profile.departmentId eq departments.id&gt;\n                        selected\n                    &lt;/cfif&gt;\n                &gt;#EncodeForHtml(departments.name)#&lt;/option&gt;\n            &lt;/cfloop&gt;\n        &lt;/select&gt;\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        &lt;input type=\"submit\" value=\"Save Changes\"&gt;\n    &lt;/div&gt;\n&lt;/form&gt;\n\n&lt;/cfoutput&gt;\n</code></pre> {% endcode %}</p> <p>Then you would write a script for the form that validates the data submitted, handles interactions with the data source(s), and displays the form with errors that may happen as a result of user input. (And most of that code isn't even included in this example.)</p> <p>We know that you are quite familiar with the drudgery of typing this sort of code over and over again. Let's not even mention the pain associated with debugging it or adding new fields and business logic!</p>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#making-life-easier-wheels-form-helpers","title":"Making Life Easier: Wheels Form Helpers","text":"<p>The good news is that Wheels simplifies this quite a bit for you. At first, it looks a little different using these conventions. But you'll quickly see how it all ties together and saves you some serious time.</p>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#rewriting-the-form-with-wheels-conventions","title":"Rewriting the Form with Wheels Conventions","text":"<p>Let's rewrite and then explain.</p> <p>{% code title=\"app/views/profiles/edit.cfm\" %} <pre><code>&lt;cfoutput&gt;\n\n#startFormTag(route=\"profile\", method=\"patch\")#\n    #textField(\n        label=\"First Name\",\n        objectName=\"profile\",\n        property=\"firstName\",\n        prependToLabel=\"&lt;div&gt;\",\n        append=\"&lt;/div&gt;\",\n        labelPlacement=\"before\"\n    )#\n\n    #textField(\n        label=\"Last Name\",\n        objectName=\"profile\",\n        property=\"lastName\",\n        prependToLabel=\"&lt;div&gt;\",\n        append=\"&lt;/div&gt;\",\n        labelPlacement=\"before\"\n    )#\n\n    #select(\n        label=\"Department\",\n        objectName=\"profile\",\n        property=\"departmentId\",\n        options=departments,\n        prependToLabel=\"&lt;div&gt;\",\n        append=\"&lt;/div&gt;\",\n        labelPlacement=\"before\"\n    )#\n\n    &lt;div&gt;\n        #submitTag()#\n    &lt;/div&gt;\n#endFormTag()#\n\n&lt;/cfoutput&gt;\n</code></pre> {% endcode %}</p> <p>I know what you are thinking. 9 lines of code can't replace all that work, right? In fact, they do. The HTML output will be very nearly the same as the previous example. By using Wheels conventions, you are saving yourself a lot of key strokes and a great deal of time.</p>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#linking-up-the-forms-action-with-startformtag","title":"Linking up the Form's Action with startFormTag","text":"<p>The first helper you'll notice in the Wheels-ified version of the form is startFormTag(). This helper allows you to easily link up the form to the action that it's posting to in a secure way.</p> <p>You'll need to configure the <code>route</code> and <code>method</code> arguments, depending on the route that you're sending the form to. Also, if the route expects any parameters, you must pass those in as arguments to startFormTag as well. If you haven't already, read up about routes in the Routing chapter.</p> <p>As we said, when linking a form to a route, there are 3 pieces of information that you will need to work with:</p> <ol> <li>Route name</li> <li>Parameters that the route may expect</li> <li>Request method that the route requires</li> </ol> <p>{% hint style=\"info\" %}</p>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#use-routes-for-form-posts","title":"Use Routes for Form Posts","text":"<p>Wheels's default wildcard <code>controller/action</code>-based URLs will not accept form posts for security reasons. This is due to an attack known as Cross Site Request Forgery (CSRF). We strongly recommend configuring routes to post your forms to. {% endhint %}</p> <p>Most of the time, you'll probably be working with a resource. Your <code>/config/routes.cfm</code> may look something like this:</p> <p>{% code title=\"/config/routes.cfm\" %} <pre><code>mapper()\n    .resources(\"users\")\n.end();\n</code></pre> {% endcode %}</p> <p>If you click the Routes link in the debug footer, you'll be most interested in these types of routes for your forms:</p> Name Method Pattern Controller Action users GET /users users index users POST /users users create user PATCH /users/[key] users update user DELETE /users/[key] users delete <p>Once you get to this list of routes, it really doesn't matter how you authored them in your <code>/config/routes.cfm</code>. What matters is that you know the names, methods, and parameters that the routes expect. (With some practice, you'll probably be able to look at <code>/config/routes.cfm</code> and know exactly what the names, methods, and parameters are though.)</p> <p>If you are creating a record, your route is likely setup to accept a <code>POST</code> method. That happens to be the default for startFormTag(), so you don't even need to include the <code>method</code> argument. You can then pass the <code>users</code> route name to the <code>route</code> argument:</p> <p>{% code title=\"app/views/users/new.cfm\" %} <pre><code>&lt;!--- `method` argument defaults to `post`, so we don't need to pass it in. ---&gt;\n#startFormTag(route=\"users\")#\n#endFormTag()\n</code></pre> {% endcode %}</p> <p>If you need to send the form via another HTTP method, you can pass that in for the <code>method</code> argument as listed in your routes:</p> <pre><code>&lt;!---\n    Search forms typically are done via `get` requests. This one is to\n    the index. ---&gt;\n#startFormTag(route=\"users\", method=\"get\")#\n    #textFieldTag(type=\"search\", name=\"q\")#\n    #submitTag(\"Search\")#\n#endFormTag()#\n\n&lt;!--- Update forms typically are sent via `patch` requests. ---&gt;\n#startFormTag(route=\"user\", key=user.key(), method=\"patch\")#\n    #textField(objectName=\"user\", property=\"firstName\")#\n    #submitTag()#\n#endFormTag()#\n\n&lt;!---\n    Delete requests are best done via a form post, even if you're styling the\n    form to look like a link.\n---&gt;\n#startFormTag(\n    route=\"user\",\n    key=user.key(),\n    method=\"delete\",\n    class=\"inline-form\"\n)#\n    #buttonTag(content=\"Delete User\", class=\"link-button\")#\n#endFormTag()#\n</code></pre> <p>Notice above that the <code>user</code> route expects a <code>key</code> parameter, so that is passed into <code>startFormTag</code> as the <code>key</code>argument.</p> <p>To drive the point home about routing parameters, let's say that we have this route:</p> Name Method Pattern Controller Action productVariation PATCH [language]/products/[productKey]/variations/[key] variations update <p>As you can see, the parameters can be anything, not just primary keys.</p> <p>You would link up the form like so:</p> <pre><code>#startFormTag(\n    route=\"productVariation\",\n    language=\"es\",\n    productKey=product,key(),\n    key=variation.key(),\n    method=\"patch\"\n)#\n    &lt;!--- ... ---&gt;\n#endFormTag()\n</code></pre>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#a-note-about-patch-and-delete-requests","title":"A Note About PATCH and DELETE Requests","text":"<p>Browsers (even the modern ones) tend to only work well with <code>GET</code> and <code>POST</code> requests, so how does Wheels also enable <code>PATCH</code> and <code>DELETE</code> requests?</p> <p>To keep things secure, Wheels will still use <code>method=\"post\"</code> on the form to send <code>PATCH</code> and <code>DELETE</code> requests. But the Wheels router will recognize a <code>PATCH</code> or <code>DELETE</code> request if a form variable called <code>_method</code> is also sent, specifying the <code>PATCH</code> or <code>DELETE</code> method.</p> <p>Under the hood, startFormTag() will also generate a hidden field called <code>_method</code> that passes the request method along with the form <code>POST</code>.</p> <p>So the <code>&lt;form&gt;</code> tag generated along with a <code>method</code> of <code>patch</code> will look something like this:</p> <pre><code>&lt;form action=\"/users/1234\" method=\"post\"&gt;\n    &lt;input type=\"hidden\" name=\"_method\" value=\"patch\"&gt;\n    &lt;input type=\"hidden\" name=\"authenticityToken\" value=\"cxRbrHAnwpG0Ki9vTYW4yg==\"&gt;\n&lt;/form&gt;\n</code></pre> <p>You'll notice that startFormTag() will also add another hidden field along with <code>POST</code>ed requests called <code>authenticityToken</code>, which helps prevent against Cross-Site Request Forgery (CSRF) attacks.</p> <p>The moral of the story: startFormTag() takes care of all of this for you. If you for some reason decide to wire up your own custom <code>&lt;form&gt;</code> tag that must <code>POST</code> data, be sure to add your own hidden fields for <code>_method</code> and use the authenticityTokenField() helper to generate the hidden field for the <code>authenticityToken</code> that Wheels will require on the <code>POST</code>.</p>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#refactoring-common-settings-with-global-defaults","title":"Refactoring Common Settings with Global Defaults","text":"<p>By setting up global defaults (as explained in the Configuration and Defaults) for the <code>prependToLabel</code>, <code>append</code>, and <code>labelPlacement</code> arguments, you can make the form code ever simpler across your whole application.</p> <p>Here are the settings that you would apply in <code>/config/settings.cfm</code>:</p> <p>{% code title=\"/config/settings.cfm\" %} <pre><code>set(\n    functionName=\"textField\",\n    prependToLabel=\"&lt;div&gt;\",\n    append=\"&lt;/div&gt;\",\n    labelPlacement=\"before\"\n);\n\nset(\n    functionName=\"select\",\n    prependToLabel=\"&lt;div&gt;\",\n    append=\"&lt;/div&gt;\",\n    labelPlacement=\"before\"\n);\n</code></pre> {% endcode %}</p> <p>And here's how our example code can be simplified as a result:</p> <p>{% code title=\"app/views/profiles/edit.cfm\" %} <pre><code>&lt;cfoutput&gt;\n\n#startFormTag(route=\"profile\", method=\"patch\")#\n    #textField(label=\"First Name\", objectName=\"profile\", property=\"firstName\")#\n    #textField(label=\"Last Name\", objectName=\"profile\", property=\"lastName\")#\n\n    #select(\n        label=\"Department\",\n        objectName=\"profile\",\n        property=\"departmentId\",\n        options=departments\n    )#\n\n    &lt;div&gt;\n        #submitTag()#\n    &lt;/div&gt;\n#endFormTag()#\n\n&lt;/cfoutput&gt;\n</code></pre> {% endcode %}</p> <p>All that the controller needs to provide at this point is a model object instance named <code>profile</code> that contains <code>firstName</code>, <code>lastName</code>, and <code>departmentId</code> properties and a query object named <code>departments</code> that contains identifier and text values. Note that the instance variable is named <code>profile</code>, though the model itself doesn't necessarily need to be named <code>profile</code>.</p> <p>If you pass the form an empty instance named <code>profile</code> (for example, created by new(), the form will display blank values for all the fields. If you pass it an object created by a finder like findOne() or findByKey(), then the form will display the values provided through the object. This allows for us to potentially use the same view file for both create and update scenarios in our application.</p>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#refactoring-label-names","title":"Refactoring Label Names","text":"<p>If you look at the previous examples, there is one other bit of configuration that we can clean up: the <code>label</code> arguments passed to textField() and select().</p> <p>Because we've named <code>firstName</code>, <code>lastName</code>, and <code>departmentId</code> in conventional ways (camel case), Wheels will generate the labels for us automatically:</p> <p>{% code title=\"app/views/profiles/edit.cfm\" %} <pre><code>&lt;cfoutput&gt;\n\n#startFormTag(route=\"profile\", method=\"patch\")#\n    #textField(objectName=\"profile\", property=\"firstName\")#\n    #textField(objectName=\"profile\", property=\"lastName\")#\n\n    #select(\n        objectName=\"profile\",\n        property=\"departmentId\",\n        options=departments\n    )#\n\n    &lt;div&gt;\n        #submitTag()#\n    &lt;/div&gt;\n#endFormTag()#\n\n&lt;/cfoutput&gt;\n</code></pre> {% endcode %}</p> <p>You'll notice that Wheels is even smart enough to translate the <code>departmentId</code> property to <code>Department</code>.</p> <p>If you ever need to override a label, you can do so in the model's initializer using the <code>label</code> argument of the property()method:</p> <p>{% code title=\"app/models/User.cfc\" %} <pre><code>component extends=\"Model\" {\n    function init() {\n        property(name=\"lastName\", label=\"Surname\");\n    }\n}\n</code></pre> {% endcode %}</p>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#form-error-messages","title":"Form Error Messages","text":"<p>If you really want to secure a form, you need to do it server side. Sure, you can add JavaScript here and there to validate your web form. Unfortunately, disabling JavaScript (and thus your JavaScript-powered form validation) is simple in web browsers, and malicious bots tend not to listen to JavaScript.</p> <p>Securing the integrity of your web forms in Wheels on the server side is very easy. Assuming that you have read the chapter on Object Validation, you can rest assured that your code is a lot more secure now.</p>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#displaying-a-list-of-model-validation-errors","title":"Displaying a List of Model Validation Errors","text":"<p>Wheels provides you with a tool set of Helper Functions just for displaying error messages as well.</p> <p>In the controller, let's say that this just happened. Your model includes validations that require the presence of both <code>firstName</code> and <code>lastName</code>. The user didn't enter either. So in the controller's <code>update</code> action, it loads the model object, sets the values that the user submitted, sees that there was a validation error after calling update(), and displays the form view again.</p> <p>The <code>update</code> action may look something like this:</p> <p>{% code title=\"app/controllers/Profiles.cfc\" %} <pre><code>function update() {\n    // In this example, we're loading an existing object based on the user's\n    // session.\n    profile = model(\"user\").findByKey(session.userId);\n\n    // If everything validated, then send user to success message\n    if (profile.update(params.profile)) {\n        flashInsert(success=\"Profile updated.\");\n    }\n    // If there were errors with the form submission, show the form again\n    // with errors.\n    else {\n        flashInsert(error=\"There was an error with your changes.\");\n        renderView(action=\"edit\");\n    }\n}\n</code></pre> {% endcode %}</p> <p>Notice that the view for the <code>edit</code> action is rendered if the <code>profile</code> object's update() returns <code>false</code>.</p> <p>Let's take the previous form example and add some visual indication to the user about what he did wrong and where, by simply adding the following code on your form page.</p> <p>{% code title=\"app/views/profiles/edit.cfm\" %} <pre><code>&lt;cfoutput&gt;\n\n#errorMessagesFor(\"profile\")#\n\n#startFormTag(route=\"profile\", method=\"patch\")#\n    #textField(objectName=\"profile\", property=\"firstName\")#\n    #textField(objectName=\"profile\", property=\"lastName\")#\n\n    #select(\n        objectName=\"department\",\n        property=\"departmentId\",\n        options=departments\n    )#\n\n    &lt;div&gt;\n        #submitTag()#\n    &lt;/div&gt;\n#endFormTag()#\n\n&lt;/cfoutput&gt;\n</code></pre> {% endcode %}</p> <p>How about that? With just that line of code (and the required validations on your object model), Wheels will do the following:</p> <ul> <li>Generate an HTML unordered list with a HTML class name of <code>errorMessages</code>.</li> <li>Display all the error messages on your <code>profile</code> object as list items in that unordered list.</li> <li>Wrap each of the erroneous fields in your form with a surrounding <code>&lt;div class=\"fieldWithErrors\"&gt;</code> HTML tag for you to enrich with your ninja CSS skills.</li> </ul> <p>There is no longer the need to manually code error logic in your form markup.</p>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#showing-individual-fields-error-messages","title":"Showing Individual Fields' Error Messages","text":"<p>Let's say that would rather display the error messages just below the failed fields (or anywhere else, for that matter). Wheels has that covered too. All that it takes is a simple line of code for each form field that could end up displaying feedback to the user.</p> <p>Let's add some error message handlers for the <code>firstName</code>, <code>lastName</code>, and <code>departmentId</code> fields:</p> <p>{% code title=\"app/views/profiles/edit.cfm\" %} <pre><code>&lt;cfoutput&gt;\n\n#startFormTag(route=\"profile\", method=\"patch\")#\n    #textField(objectName=\"profile\", property=\"firstName\")#\n    #errorMessageOn(objectName=\"profile\", property=\"firstName\")#\n\n    #textField(objectName=\"profile\", property=\"lastName\")#\n    #errorMessageOn(objectName=\"profile\", property=\"lastName\")#\n\n    #selectTag(\n        objectName=\"profile\",\n        property=\"departmentId\",\n        options=departments\n    )#\n    #errorMessageOn(objectName=\"profile\", property=\"departmentId\")#\n\n    &lt;div&gt;\n        #submitTag()#\n    &lt;/div&gt;\n#endFormTag()#\n\n&lt;/cfoutput&gt;\n</code></pre> {% endcode %}</p> <p>Notice the call to the errorMessageOn() function below the <code>firstName</code>, <code>lastName</code>, and <code>departmentId</code> fields. That's all it takes to display the corresponding error messages of each form control on your form.</p> <p>And the error messages won't even display if there aren't any. That way you can yet again use the same form code for error and non-error scenarios alike.</p>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#types-of-form-helpers","title":"Types of Form Helpers","text":"<p>There is a Wheels form helper for basically every type of form element available in HTML. And they all have the ability to be bound to Wheels model instances to make displaying values and errors easier. Here is a brief description of each helper.</p>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#text-password-and-textarea-fields","title":"Text, Password, and TextArea Fields","text":"<p>Text and password fields work similarly to each other. They allow you to show labels and bind to model object instances to determine whether or not a value should be pre-populated.</p> <pre><code>#textField(objectName=\"user\", property=\"username\")#\n#passwordField(objectName=\"user\", property=\"password\")#\n#textArea(objectName=\"user\", property=\"biography\", rows=5, cols=40)#\n</code></pre> <p>May yield the equivalent to this HTML (if we assume the global defaults defined above in the section named Factoring out Common Settings with Global Defaults):</p> <pre><code>&lt;div&gt;\n    &lt;label for=\"user-username\"&gt;Username&lt;/label&gt;\n    &lt;input id=\"user-username\" type=\"text\" name=\"user[username]\" value=\"cfguy\"&gt;\n&lt;/div&gt;\n&lt;div&gt;\n    &lt;label for=\"user-password\"&gt;Password&lt;/label&gt;\n    &lt;input id=\"user-password\" type=\"password\" name=\"user[password]\" value=\"\"&gt;\n&lt;/div&gt;\n&lt;div&gt;\n    &lt;label for=\"user-biography\"&gt;Bio&lt;/label&gt;\n    &lt;textarea id=\"user-biography\" name=\"user[biography]\"&gt;\n        CF Guy really is a great guy. He's much nicer than .NET guy.\n    &lt;/textarea&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#hidden-fields","title":"Hidden Fields","text":"<p>Hidden fields are powered by the hiddenField() form helper, and it also works similarly to textField() and passwordField().</p> <pre><code>#hiddenField(objectName=\"user\", property=\"referralSourceId\")#\n</code></pre> <p>Would yield this type of markup:</p> <pre><code>&lt;input type=\"hidden\" name=\"user[referralSourceId]\" value=\"425\"&gt;\n</code></pre>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#select-fields","title":"Select Fields","text":"<p>As hinted in our first example of form helpers, the select() function builds a <code>&lt;select&gt;</code> list with options. What's really cool about this helper is that it can populate the <code>&lt;option&gt;</code>s with values from a query, struct, or array.</p> <p>Take a look at this line:</p> <pre><code>#select(objectName=\"user\", property=\"departmentId\", options=departments)#\n</code></pre> <p>Assume that the <code>departments</code> variable passed to the options argument contains a query, struct, or array of department data that should be selectable in the drop-down.</p> <p>Each data type has its advantages and disadvantages:</p> <ul> <li>Queries allow you to order your results, but you can only use one column. But this can be overcome using Calculated Properties.</li> <li>Structs allow you to build out static or dynamic values using whatever data that you please, but there is no guarantee that your CFML engine will honor the order in which you add the elements.</li> <li>Arrays also allow you to build out static or dynamic values, and there is a guarantee that your CFML engine will honor the order. But arrays are a tad more verbose to work with.</li> </ul> <p>Wheels will examine the data passed to <code>options</code> and intelligently pick out elements to populate for the <code>&lt;option&gt;</code>s' values and text.</p> <ul> <li>Query: Wheels will try to pick out the first numeric column for <code>value</code> and the first non-numeric column for the display text. The order of the columns is determined how you have them defined in your database.</li> <li>Struct: Wheels will use the keys as the <code>value</code> and the values as the display text.</li> <li>Array: Wheels will react depending on how many dimensions there are. If it's only a single dimension, it will populate both the <code>value</code> and display text with the elements. When it's a 2D array, Wheels will use each item's first element as the <code>value</code> and each element's second element as the display text. For anything larger than 2 dimensions, Wheels only uses the first 2 sub-elements and ignores the rest.</li> </ul> <p>Here's an example of how you might use each option:</p> <pre><code>// Query generated in your controller ---&gt;\ndepartments = findAll(orderBy=\"name\");\n\n// Hard-coded struct set up in app/events/onapplicationstart.cfm\napplication.departments[\"1\"] = \"Sales\";\napplication.departments[\"2\"] = \"Marketing\";\napplication.departments[\"3\"] = \"Information Technology\";\napplication.departments[\"4\"] = \"Human Resources\";\n\n// Array built from query call in model\ndepartments = this.findAll(orderBy=\"lastName,hq\");\n\ndepartmentsArray = [];\n\nfor (department in departments) {\n    ArrayAppend(\n        departmentsArray,\n        [department.id, \"#department.name# - #department.hq#\"]\n    );\n}\n</code></pre> <p>When sending a query, if you need to populate your <code>&lt;option&gt;</code>s' values and display text with specific columns, you should pass the names of the columns to use as the <code>textField</code> and <code>valueField</code> arguments.</p> <p>You can also include a blank option by passing true or the desired text to the <code>includeBlank</code> argument.</p> <p>Here's a full usage with this new knowledge:</p> <pre><code>#select(\n    objectName=\"user\",\n    property=\"departmentId\",\n    options=departments,\n    valueField=\"id\",\n    textField=\"departmentName\",\n    includeBlank=\"Select a Department\"\n)#\n</code></pre>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#multiple-select-fields","title":"Multiple Select Fields","text":"<p>The select() function also supports multiple selections by passing <code>multiple=true</code>. This creates a multi-select box that allows users to select more than one option:</p> <pre><code>#select(\n    objectName=\"user\",\n    property=\"roleIds\",\n    options=roles,\n    valueField=\"id\",\n    textField=\"roleName\",\n    multiple=true\n)#\n</code></pre> <p>When using <code>multiple=true</code>, the property should be able to handle multiple values (typically an array or a list). The rendered HTML will include the <code>multiple=\"multiple\"</code> attribute on the <code>&lt;select&gt;</code> element, allowing users to select multiple options by holding down Ctrl (Windows/Linux) or Cmd (Mac) while clicking.</p>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#radio-buttons","title":"Radio Buttons","text":"<p>Radio buttons via radioButton() also take <code>objectName</code> and <code>property</code> values, and they accept an argument called <code>tagValue</code> that determines what value should be passed based on what the user selects.</p> <p>Here is an example using a query object called <code>eyeColor</code> to power the possible values:</p> <pre><code>&lt;fieldset&gt;\n    &lt;legend&gt;Eye Color&lt;/legend&gt;\n\n    &lt;cfloop query=\"eyeColor\"&gt;\n        #radioButton(\n            label=eyeColor.color,\n            objectName=\"profile\",\n            property=\"eyeColorId\",\n            tagValue=eyeColor.id,\n            labelPlacement=\"after\"\n        )#&lt;br&gt;\n    &lt;/cfloop&gt;\n&lt;/fieldset&gt;\n</code></pre> <p>If the <code>profile</code> object already has a value set for <code>eyeColorId</code>, then radioButton() will make sure that that value is checked on page load.</p> <p>If <code>profile.eyeColorId</code>'s value were already set to <code>1</code>, the rendered HTML would appear similar to this:</p> <pre><code>&lt;fieldset&gt;\n    &lt;legend&gt;Eye Color&lt;/legend&gt;\n\n    &lt;input\n        type=\"radio\"\n        id=\"profile-eyeColorId-2\"\n        name=\"profile[eyeColorId]\"\n        value=\"2\"\n    &gt;\n    &lt;label for=\"profile-eyeColorId-2\"&gt;Blue&lt;/label&gt;&lt;br&gt;\n\n    &lt;input\n        type=\"radio\"\n        id=\"profile-eyeColorId-1\"\n        name=\"profile[eyeColorId]\"\n        value=\"1\"\n        checked=\"checked\"\n    &gt;\n    &lt;label for=\"profile-eyeColorId-1\"&gt;Brown&lt;/label&gt;&lt;br&gt;\n\n    &lt;input\n        type=\"radio\"\n        id=\"profile-eyeColorId-3\"\n        name=\"profile[eyeColorId]\"\n        value=\"3\"\n    &gt;\n    &lt;label for=\"profile-eyeColorId-3\"&gt;Hazel&lt;/label&gt;&lt;br&gt;\n&lt;/fieldset&gt;\n</code></pre> <p>Note that if you don't specify <code>labelPlacement=\"after\"</code> in your calls to radioButton(), Wheels will place the labels before the form controls.</p>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#check-boxes","title":"Check Boxes","text":"<p>Check boxes work similarly to radio buttons, except checkBox() takes parameters called <code>checkedValue</code> and <code>uncheckedValue</code> to determine whether or not the check box should be checked on load.</p> <p>Note that binding check boxes to model objects is best suited for properties in your object that have a <code>yes/no</code> or <code>true/false</code> type value.</p> <pre><code>#checkBox(\n    label=\"Sign me up for the email newsletter.\",\n    objectName=\"customer\",\n    property=\"newsletterSubscription\",\n    labelPlacement=\"after\"\n)#\n</code></pre> <p>Because the concept of check boxes don't tie too well to models (you can select several for the same \"property\"), we recommend using checkBoxTag() instead if you want to use check boxes for more values than just true/false. See the Helpers That Aren't Bound to Model Objects section below.</p>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#file-fields","title":"File Fields","text":"<p>The fileField() helper builds a file field form control based on the supplied <code>objectName</code> and <code>property</code>.</p> <pre><code>#fileField(label=\"Photo\", objectName=\"profile\", property=\"photo\")#\n</code></pre> <p>In order for your form to pass the correct <code>enctype</code>, you can pass <code>multipart=true</code> to startFormTag():</p> <pre><code>#startFormTag(route=\"attachments\", multipart=true)#\n</code></pre>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#setting-a-default-value-on-an-object-bound-field","title":"Setting a Default Value on an Object-bound Field","text":"<p>Looking at this form code, it isn't 100% evident how to set an initial value for the fields:</p> <p>{% code title=\"app/views/accounts/new.cfm\" %} <pre><code>#startFormTag(route=\"accounts\")#\n    #textField(objectName=\"account\", property=\"title\")#\n    #select(objectName=\"account\", property=\"accountTypeId\")#\n    #checkBox(objectName=\"account\", property=\"subscribedToNewsletter\")#\n#endFormTag()#\n</code></pre> {% endcode %}</p> <p>What if we want a random title pre-filled, a certain account type pre-selected, and the check box automatically checked when the form first loads?</p> <p>The answer lies in the <code>account</code> object that the fields are bound to. Let's say that you always wanted this behavior to happen when the form for a new account loads. You can do something like this in the controller:</p> <p>{% code title=\"app/controllers/Accounts.cfc\" %} <pre><code>component extends=\"controllers.Controller\" {\n    function new() {\n        local.defaultAccountType = model(\"accountType\").findOne(\n          where=\"isDefault=1\"\n        );\n\n        account = model(\"account\").new(\n            title=generateRandomTitle(),\n            accountTypeId=local.defaultAccountType.key(),\n            subscribedToNewsletter=true\n        );\n    }\n}\n</code></pre> {% endcode %}</p> <p>Now the initial state of the form will reflect the default values setup on the object in the controller.</p>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#helpers-that-arent-bound-to-model-objects","title":"Helpers That Aren't Bound to Model Objects","text":"<p>Sometimes you'll want to output a form element that isn't bound to a model object.</p> <p>A search form that passes the user's query as a variable in the URL called <code>q</code> is a good example. In this example case, you would use the textFieldTag() function to produce the <code>&lt;input&gt;</code> tag needed.</p> <pre><code>#textFieldTag(label=\"Search\", name=\"q\", value=params.q)#\n</code></pre> <p>There are \"tag\" versions of all of the form helpers that we've listed in this chapter. As a rule of thumb, add <code>Tag</code> to the end of the function name and use the <code>name</code> and <code>value</code>, <code>checked</code>, and <code>selected</code> arguments instead of the <code>objectName</code> and <code>property</code> arguments that you normally use.</p> <p>Here is a list of the \"tag\" helpers for your reference:</p> <ul> <li>checkBoxTag()</li> <li>hiddenFieldTag()</li> <li>passwordFieldTag()</li> <li>radioButtonTag()</li> <li>selectTag()</li> <li>textAreaTag()</li> <li>textFieldTag()</li> </ul>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#passing-extra-arguments-for-html-attributes","title":"Passing Extra Arguments for HTML Attributes","text":"<p>Much like Wheels's linkTo() function, any extra arguments that you pass to form helpers will be passed to the corresponding HTML tag as attributes.</p> <p>For example, if we wanted to define a <code>class</code> on our starting form tag, we just pass that as an extra argument to startFormTag():</p> <pre><code>#startFormTag(route=\"posts\", class=\"login-form\")#\n</code></pre> <p>Which would produce this HTML:</p> <pre><code>&lt;form action=\"/posts\" method=\"post\" class=\"login-form\"&gt;\n</code></pre> <p>When a form helper creates more than one HTML element you can typically pass in extra arguments to be set on that element as well. One common example of this is when you need to set a <code>class</code> for a <code>label</code> element; you can do so by passing in <code>labelClass=\"class-name\"</code>. Wheels will detect that your argument starts with \"label\" and assume it should go on the <code>label</code> element and not the <code>input</code> element (or whatever \"main\" element the form helper creates). This means you could also pass in <code>labelId=\"my-id\"</code> to set the <code>id</code> on the <code>label</code> for example.</p>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#boolean-attributes","title":"Boolean Attributes","text":"<p>HTML includes many boolean attributes like <code>novalidate</code>, <code>disabled</code>, <code>required</code>, etc.</p> <p>If you want for a Wheels view helper to render one of these attributes, just pass the name of the attribute as an extra argument, set it to <code>true</code>, and Wheels will include the boolean attribute:</p> <pre><code>#textField(objectName=\"post\", property=\"title\", required=true)#\n-&gt; &lt;input type=\"text\" name=\"post[title]\" value=\"\" required&gt;\n</code></pre>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#html5-data-attributes","title":"HTML5 data Attributes","text":"<p><code>data</code> attributes in HTML usually look something like this:</p> <pre><code>&lt;input type=\"submit\" value=\"Submit\" data-ajax-url=\"/contacts/send.js\"&gt;\n</code></pre> <p>Because ColdFusion arguments cannot contain any hyphens, we have constructed a workaround for you for Wheels view helpers.</p> <p>Let's say you want a <code>data-ajax-url</code> HTML attribute as depicted above. All you need to do is pass in an argument named <code>dataAjaxUrl</code>, and Wheels will convert that attribute name to the hyphenated version in the HTML output.</p> <pre><code>#submitTag(\n    value=\"Submit\",\n    dataAjaxUrl=urlFor(route=\"contactsSend\", format=\"js\")\n)#\n-&gt; &lt;input type=\"submit\" value=\"Submit\" data-ajax-url=\"/contacts/send.js\"&gt;\n</code></pre> <p>As an alternative, you can pass in <code>data_ajax_url</code> instead if you prefer underscores, and it will produce the same result.</p>"},{"location":"displaying-views-to-users/form-helpers-and-showing-errors/#special-form-helpers","title":"Special Form Helpers","text":"<p>Wheels provides a few extra form helpers that make it easier for you to generate accessible fields for dates and/or times. These also bind to properties that are of type <code>DATE, TIMESTAMP, DATETIME</code>, etc.</p> <p>We won't go over these in detail, but here is a list of the date and time form helpers available:</p> <ul> <li>dateSelect()</li> <li>dateSelectTags()</li> <li>timeSelect()</li> <li>timeSelectTags()</li> <li>dateTimeSelect()</li> <li>dateTimeSelectTags()</li> <li>yearSelectTag()</li> <li>monthSelectTag()</li> <li>daySelectTag()</li> <li>hourSelectTag()</li> <li>minuteSelectTag()</li> <li>secondSelectTag()</li> </ul>"},{"location":"displaying-views-to-users/layouts/","title":"Layouts","text":""},{"location":"displaying-views-to-users/layouts/#introduction","title":"Introduction","text":"<p>As a red-blooded CFML developer, you're used to creating include files like <code>header.cfm</code> and <code>footer.cfm</code>, and then using <code>&lt;cfinclude&gt;</code> on every single page to include them. The popular way to do it looks something like this:</p> <pre><code>&lt;cfinclude template=\"/includes/header.cfm\"&gt;\n\n&lt;p&gt;Some page content&lt;/p&gt;\n\n&lt;cfinclude template=\"/includes/footer.cfm\"&gt;\n</code></pre> <p>Does that mean that you should <code>&lt;cfinclude&gt;</code> your headers and footers in every view in your Wheels app? Heck no! If the structure of your pages ever changed, you would need to edit every single page on your site to make the fix.</p> <p>Layouts to the rescue!</p>"},{"location":"displaying-views-to-users/layouts/#implementing-a-layout","title":"Implementing a Layout","text":"<p>In your Wheels installation, layout files are stored either directly in the <code>app/views</code> folder or contained in one of the controllers' view folders. Let's go over how layouts work, starting with the simplest way and then moving on to more complex setups.</p> <p>Let's say that you want to define one layout to be used by every view in your application. You would accomplish this by editing the default layout. The default layout is the <code>app/views/layout.cfm</code> file. In a fresh install of Wheels, you'll notice that it only contains a few lines of code:</p> <pre><code>&lt;html&gt;\n    &lt;body&gt;\n        &lt;cfoutput&gt;#includeContent()#&lt;/cfoutput&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>The call to includeContent() Simple Example represents the output of your page generated by your view files. Whatever code you put before this snippet will be run before the view. Similarly, whatever code you put after the snippet will be run afterward</p>"},{"location":"displaying-views-to-users/layouts/#simple-example","title":"Simple Example","text":"<p>For most purposes, this means that you could write code for your page header before the snippet, and write code for the footer after. Here is a simple example of wrapping your view's content with a header and footer.</p> <pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;&lt;cfoutput&gt;#title#&lt;/cfoutput&gt;&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n\n&lt;div id=\"container\"&gt;\n    &lt;div id=\"navigation\"&gt;\n        &lt;ul&gt;\n            &lt;cfoutput&gt;\n            &lt;li&gt;#linkTo(text=\"Home\", route=\"main\")#&lt;/li&gt;\n            &lt;li&gt;#linkTo(text=\"About Us\", route=\"about\")#&lt;/li&gt;\n            &lt;li&gt;#linkTo(text=\"Contact Us\", route=\"contact\")#&lt;/li&gt;\n            &lt;/cfoutput&gt;\n        &lt;/ul&gt;\n    &lt;/div&gt;\n    &lt;div id=\"content\"&gt;\n        &lt;cfoutput&gt;#includeContent()#&lt;/cfoutput&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>As you can see, we just wrote code that wraps every view's content with the layout. Pretty cool, huh?</p>"},{"location":"displaying-views-to-users/layouts/#use-of-variables-in-the-layout","title":"Use of Variables in the Layout","text":"<p>Just like views in Wheels, any variable declared by your application's controller can be used within your layouts. In addition to that, any variables that you set in view templates are accessible to the layouts as well.</p> <p>Notice in the above code example that there is a variable called <code>title</code> being output in between the <code>&lt;title&gt;</code> tags. This would require that any controller or view using this particular layout would need to set a variable named <code>title</code>.</p> <p>To help document this, you can use <code>&lt;cfparam&gt;</code> tags at the top of your layout files. That way any developer using your layout in the future could easily see which variables need to be set by the controller.</p> <p>Here's an example:</p> <pre><code>&lt;!--- Title is required ---&gt;\n&lt;cfparam name=\"title\" type=\"string\"&gt;\n\n&lt;cfoutput&gt;\n\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;#title#&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n\n&lt;!--- View's Content ---&gt;\n&lt;h1&gt;#title#&lt;/h1&gt;\n#contentForLayout()#\n\n&lt;/body&gt;\n&lt;/html&gt;\n\n&lt;/cfoutput&gt;\n</code></pre> <p>There's also a different way to set variables that goes hand in hand with the includeContent() function that you may prefer. It's the contentFor() function. We'll dig into how that one works later in this chapter.</p>"},{"location":"displaying-views-to-users/layouts/#the-default-layout","title":"The Default Layout","text":"<p>One layout file that is already created for you is <code>app/views/layout.cfm</code>. Think of it as the default layout to be used by any given controller.</p> <p>If you're writing code for a controller called <code>press</code> and there is no layout created for <code>press</code>, Wheels will automatically use <code>app/views/layout.cfm</code> as the layout.</p> <p>If you implement a layout for the <code>press</code> controller, then that layout will be used instead of the default layout.</p> <p>So, how exactly do you implement a layout meant specifically for just one controller? Well, that's next...</p>"},{"location":"displaying-views-to-users/layouts/#overriding-the-default-layout-with-a-controller-specific-layout","title":"Overriding the Default Layout with a Controller-Specific Layout","text":"<p>Let's pretend that you want to create a layout to be used only in a controller called <code>blog</code>. To do this, you would simply create the layout and save it as <code>app/views/blog/layout.cfm</code>.</p> <p>As you can see, the convention is to place your layout file together with the other view files for the controller.</p>"},{"location":"displaying-views-to-users/layouts/#overriding-the-default-layout-using-the-useslayout-function","title":"Overriding the Default Layout Using the usesLayout() Function","text":"<p>However, if you need to override the name of the layout file or its location in the folder structure, you can specify what layout file to use with the usesLayout() function in the controller's init function instead.</p> <pre><code>function config(){\n  usesLayout(\"blogLayoutOne\");\n}\n</code></pre> <p>With that code placed in the <code>app/controllers/Blog.cfc</code> file, all actions will now wrap their contents with the <code>bloglayoutone.cfm</code> file instead of the <code>layout.cfm</code> file.</p> <p>The usesLayout() function also accepts <code>except, only</code>, and <code>useDefault</code> arguments for further customization.</p> <pre><code>function config(){\n  usesLayout(\"blogLayoutOne\", except=\"home\");\n}\n</code></pre> <p>That code tells Wheels to apply the <code>blogLayoutOne</code> layout for any actions in this controller except for the <code>home</code>action. In the case of the <code>home</code> action, it will fall back to the default behavior (i.e. using the <code>app/views/blog/layout.cfm</code>file).</p> <p>If for some reason you do not want the default behavior to be used when conditions aren't met, you can set the <code>useDefault</code> argument to <code>false</code>.</p> <pre><code>function config(){\n  usesLayout(name=\"blogLayoutOne\", except=\"home\", useDefault=false);\n}\n</code></pre> <p>You can even instruct Wheels to run a specific function that will determine the layout handling.</p> <pre><code>function config(){\n  usesLayout(\"resolveLayout\");\n}\n\nfunction resolveLayout(){\n    switch(chapter){\n    case \"index\":\n    break;\n        return \"index_layout\";\n    case \"show\":\n      return \"show_layout\";\n    break;\n  }\n}\n</code></pre> <p>It's worth repeating here that everything inside the controller's <code>config()</code> function runs only once per application and controller. This is why you can't perform the logic that decides which layout to use directly inside the <code>config()</code>function itself. Instead, you tell Wheels to always run the <code>resolveLayout</code> function on each incoming request.</p>"},{"location":"displaying-views-to-users/layouts/#overriding-the-default-layout-at-the-action-level","title":"Overriding the Default Layout at the Action Level","text":"<p>Another option for overriding layouts is to use the layout argument of the renderView() function.</p> <p>As you may already know, Wheels's renderView() function is the last thing called in your actions. This function is run automatically by Wheels, so most of the time, you won't need to call it explicitly in your code.</p> <p>Take a look at this example action, called display:</p> <pre><code>function display(){\n  renderView(layout=\"visitorLayout\");\n}\n</code></pre> <p>This assumes that you want for your action to use the layout stored at <code>app/views/blog/visitorlayout.cfm</code>.</p> <p>The default behavior for the <code>layout</code> argument is to look for the file in the current controller's view folder, so here we're still assuming that the <code>display</code> action is in the <code>blog</code> controller. The <code>.cfm</code> extension will also be added automatically by Wheels, so you don't need to specifically include that part.</p> <p>If you want Wheels to locate the file in a different folder, you can start the <code>layout</code> argument with a forward slash, <code>/</code>. By doing this, Wheels will know you want to start the search in the <code>app/views</code> folder. Let's say that you're storing all miscellaneous layouts in its own folder, simply called <code>layouts</code>. You would display one of them with the following code:</p> <pre><code>function display(){\n  renderView(layout=\"/layouts/plain\");\n}\n</code></pre> <p>Note that setting the <code>layout</code> argument on renderView() will override any settings you may have made with the usesLayout() function. This gives you finer-grained control.</p>"},{"location":"displaying-views-to-users/layouts/#using-no-layout","title":"Using No Layout","text":"<p>If you don't want for a given template to be wrapped by a layout at all, you may want to consider creating the page as a partial. See the chapter about Partials for more information.</p> <p>Another alternative is to use the renderView() function and set the <code>layout</code> argument to <code>false</code>.</p> <p>You can also create a separate layout that only contains the call to the includeContent() function in it and reference it as described above in Using a Different Layout. This may end up a little ugly though if you start getting a lot of small identical files like this, but the option is there for you at least.</p> <p>Lastly, if your view needs to return XML code or other data for JavaScript calls, then you should reference the renderNothing() and renderText() functions to see which would be best used by your action.</p>"},{"location":"displaying-views-to-users/layouts/#nestedinherited-layouts","title":"Nested/Inherited Layouts","text":"<p>Like many templating languages, Wheels offers the ability to create layout files that can be \"inherited\" by other layout files. The end goal is to create a \"parent\" layout that has missing sections intended to be filled in by \"child\" layouts.</p> <p>Wheels's approach involves the use of includeLayout() and the contentFor() function that we mentioned briefly earlier in this chapter.</p> <p>The includeLayout() function simply includes another layout file. The common usage for this is to include a parent layout from a child layout.</p> <p>So what about the contentFor() function? Well, as you may recall the code in the default layout file in Wheels contains this:</p> <pre><code>&lt;cfoutput&gt;#includeContent()#&lt;/cfoutput&gt;\n</code></pre> <p>The includeContent() function accepts a <code>name</code> argument. The reason we don't have to use it above is because it defaults to <code>body</code>. This <code>body</code> variable has been set internally in the Wheels framework code with the use of the contentFor() function.</p> <p>The point I'm trying to make here is that we can use this same functionality to set any type of content for, as an example, sections in our layout files. So, armed with this new knowledge, let's create some nested layout awesomeness.</p> <p>Say we have a global layout and want to fill out content in it from controller specific layouts, here's how we can do it.</p> <p>The child layout:</p> <pre><code>contentFor(pageTitle=\"My custom title\");\n\n&lt;cfoutput&gt;#includeLayout(\"layout\")#&lt;/cfoutput&gt;\n</code></pre> <p>Note: If your parent file is one of the default ones named <code>layout.cfm</code> you can actually remove the \"layout\" string above since the default for includeLayout() is <code>layout</code> anyway. We're just including it here for completeness and to show that you can of course achieve this regardless of what your parent layout file is named.</p> <p>The parent layout:</p> <pre><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;&lt;cfoutput&gt;#includeContent(\"pageTitle\")#&lt;/cfoutput&gt;&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;cfoutput&gt;#includeContent(\"body\")#&lt;/cfoutput&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>Similar to above, you can remove \"<code>body</code>\" because that is the default on the includeContent() function.</p> <p>That was a fairly basic example of how you can achieve nested layouts in Wheels to DRY up your code. You can of course expand on this by having entire sections of HTML (like a sub menu for example) be created by the child layouts. Also, as a reminder, don't forget that you can use includePartial() from inside your layout files as well to further keep things DRY.</p>"},{"location":"displaying-views-to-users/layouts/#layouts-for-emails-and-partials","title":"Layouts for Emails and Partials","text":"<p>Besides having layouts for view pages in Wheels, you can also have them on emails that you send out and partial files that you include. We have chosen to speak about these in their respective chapters though: Sending Email and Partials.</p>"},{"location":"displaying-views-to-users/linking-pages/","title":"Linking Pages","text":"<p>Wheels's built-in linkTo() function does all of the heavy lifting involved with linking the different pages of your application together. You'll generally be using linkTo() within your view code.</p> <p>As you'll soon realize, the linkTo() function accepts a whole bunch of arguments. We won't go over all of them here, so don't forget to have a look at the documentation for the complete details.</p>"},{"location":"displaying-views-to-users/linking-pages/#default-wildcard-linking","title":"Default Wildcard Linking","text":"<p>When installing Wheels, if you open the file at <code>/config/routes.cfm</code>, you'll see something like this:</p> <p>{% code title=\"/config/routes.cfm\" %} <pre><code>mapper()\n    .wildcard()\n    .root(method = \"get\")\n.end();\n</code></pre> {% endcode %}</p> <p>The call to wildcard() allows a simple linking structure where we can use the linkTo() helper to link to a combination of controller and action.</p> <p>For example, if we had a <code>widgets</code> controller with a <code>new</code> action, we could link to it like this:</p> <pre><code>#linkTo(text=\"New Widget\", controller=\"widgets\", action=\"new\")#\n</code></pre> <p>That would generally produce this HTML markup:</p> <pre><code>&lt;a href=\"/widgets/new\"&gt;New Widget&lt;/a&gt;\n</code></pre>"},{"location":"displaying-views-to-users/linking-pages/#linking-to-routes","title":"Linking to Routes","text":"<p>If you're developing a non-trivial Wheels application, you'll quickly grow out of the wildcard-based routing. You'll likely need to link to URLs containing primary keys, URL-friendly slugged titles, and nested subfolders. Now would be a good time to take a deep dive into the Routing chapter and learn the concepts.</p> <p>When you're using linkTo() to create links to routes, you need to pay attention to 2 pieces of information: the route name and any parameters that the route requires.</p> <p>Let's work with a set of sample routes to practice creating links:</p> <p>{% code title=\"/config/routes.cfm\" %} <pre><code>mapper()\n    .get(name=\"newWidget\", pattern=\"widgets/new\", to=\"widgets##new\")\n    .get(name=\"widget\", pattern=\"widgets/[key]\", to=\"widgets##show\")\n    .get(name=\"widgets\", to=\"widgets##index\")\n    .root(to=\"wheels##wheels\")\n.end();\n</code></pre> {% endcode %}</p> <p>With this in place, we can load the webroot of our application and click the \"Routes\" link in the debugging footer to get a list of our routes. You'll see information presented similarly to this:</p> Name Method Pattern Controller Action newWidget GET /widgets/new widgets new widget GET /widgets/[key] widgets show widgets GET /widgets widgets index <p>(As you become more experienced, you'll be able look at <code>routes.cfm</code> and understand what the names and parameters are. Of course, this Routes functionality is a great tool too.)</p> <p>If we want to link to the routes named <code>newWidget</code> and <code>widgets</code>, it's fairly simple:</p> <pre><code>#linkTo(text=\"All Widgets\", route=\"widgets\")#\n#linkTo(text=\"New Widget\", route=\"newWidget\")#\n</code></pre> <p>As you can see, you create links by calling a method with the route name passed into the <code>route</code> argument. That will generate these links:</p> <pre><code>&lt;a href=\"/widgets\"&gt;All Widgets&lt;/a&gt;\n&lt;a href=\"/widgets/new\"&gt;New Widget&lt;/a&gt;\n</code></pre> <p>The <code>widget</code> route requires an extra step because it has that <code>[key]</code> parameter in its pattern. You can pass that parameter into <code>linkTo</code> as a named argument:</p> <pre><code>#linkTo(text=\"The Fifth Widget\", route=\"widget\", key=5)#\n</code></pre> <p>That will produce this markup:</p> <pre><code>&lt;a href=\"/widgets/5\"&gt;The Fifth Widget&lt;/a&gt;\n</code></pre> <p>If you have a route with multiple parameters, you must pass all of the placeholders as arguments:</p> <p>{% code title=\"Example\" %} <pre><code>&lt;!--- /config/routes.cfm ---&gt;\n&lt;cfscript&gt;\nmapper()\n    .get(\n        name=\"widgetVariation\",\n        pattern=\"widgets/[widgetKey]/variations/[key].[format]\",\n        to=\"widgetVariations##show\"\n    )\n.end();\n&lt;/cfscript&gt;\n\n&lt;!--- View file ---&gt;\n&lt;cfoutput&gt;\n#linkTo(\n    text=\"A fine variation (PDF)\",\n    route=\"widgetVariation\",\n    widgetKey=5,\n    key=20\n    format=\"pdf\"\n)#\n&lt;/cfoutput&gt;\n\n&lt;!--- HTML generated ---&gt;\n&lt;a href=\"/widgets/5/variations/20.pdf\"&gt;A fine variation (PDF)&lt;/a&gt;\n</code></pre> {% endcode %}</p>"},{"location":"displaying-views-to-users/linking-pages/#linking-to-resources","title":"Linking to Resources","text":"<p>Resources are the encouraged routing pattern in Wheels, and you will likely find yourself using this type of route most often.</p> <p>Once you setup a resource in <code>/config/routes.cfm</code>, the key is to inspect the routes generated and get a feel for the names and parameters that are expected.</p> <p>Consider this sample <code>posts</code> resource:</p> <p>{% code title=\"/config/routes.cfm\" %} <pre><code>mapper()\n    .resources(\"posts\")\n.end();\n</code></pre> {% endcode %}</p> <p>We would see these linkable routes generated related to the posts. (See the chapter on Form Helpers and Showing Errors for information about posting forms to the rest of the routes.)</p> Name Method Pattern Controller Action posts GET /posts posts index newPost GET /posts/new posts new editPost GET /posts/[key]/edit posts edit post GET /posts/[key] posts show <p>If we wanted to link to the various pages within that resource, we may write something like this on the index:</p> <p>{% code title=\"app/views/posts/index.cfm\" %} <pre><code>&lt;nav class=\"global-nav\"&gt;\n    #linkTo(text=\"All Posts\", route=\"posts\")#\n&lt;/nav&gt;\n\n&lt;h1&gt;Posts&lt;/h1&gt;\n&lt;p&gt;\n    #linkTo(text=\"New Post\", route=\"newPost\")#\n&lt;/p&gt;\n\n&lt;ul&gt;\n    &lt;cfloop query=\"posts\"&gt;\n        &lt;li&gt;\n            #linkTo(text=posts.title, route=\"post\", key=posts.id)#\n            [#linkTo(text=\"Edit\", route=\"editPost\", key=posts.id)#]\n        &lt;/li&gt;\n    &lt;/cfloop&gt;\n&lt;/ul&gt;\n</code></pre> {% endcode %}</p> <p>The above code would generate markup like this:</p> <pre><code>&lt;nav class=\"global-nav\"&gt;\n    &lt;a href=\"/posts\"&gt;All Posts&lt;/a&gt;\n&lt;/nav&gt;\n\n&lt;h1&gt;Posts&lt;/h1&gt;\n&lt;p&gt;\n    &lt;a href=\"/posts/new\"&gt;New Post&lt;/a&gt;\n&lt;/p&gt;\n\n&lt;ul&gt;\n    &lt;li&gt;\n        &lt;a href=\"/posts/1\"&gt;Some Title&lt;/a&gt;\n        [&lt;a href=\"/posts/1/edit\"&gt;Edit&lt;/a&gt;]\n    &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>"},{"location":"displaying-views-to-users/linking-pages/#a-deep-dive-into-linking-and-routing","title":"A Deep Dive into Linking and Routing","text":"<p>The Routing chapter lists your options for generating URLs that are available in your application. Following is an explanation of how to link to the various types of routes available.</p>"},{"location":"displaying-views-to-users/linking-pages/#namespaces","title":"Namespaces","text":"<p>Namespaces will generally add the namespace name to the beginning of the route.</p> <p>Consider this namespace:</p> <pre><code>mapper()\n    .namespace(\"admin\")\n        .resources(\"roles\")\n    .end()\n.end();\n</code></pre> <p>To link to the <code>roles</code> resource, you would prefix it with the namespace name:</p> <pre><code>#linkTo(name=\"List Roles\", route=\"adminRoles\")#\n\n#linkTo(text=role.title, route=\"adminRole\", key=role.key())#\n</code></pre> <p>However, <code>new</code> and <code>edit</code> routes add the action name to the beginning of the route name:</p> <pre><code>#linkTo(text=\"New Role\", route=\"newAdminRole\")#\n#linkTo(text=\"Edit Role\", route=\"editAdminRole\", key=role.key())#\n</code></pre>"},{"location":"displaying-views-to-users/linking-pages/#nested-resources","title":"Nested Resources","text":"<p>You have the ability to nest a resource within a resource like so:</p> <pre><code>mapper()\n    .resources(name=\"websites\", nested=true)\n        .resources(\"pages\")\n    .end()\n.end();\n</code></pre> <p>To link to the <code>pages</code> resource, you add the parent resource's singular name first (e.g., the parent <code>website</code> is added, making the route name <code>websitePage</code>):</p> <pre><code>&lt;!---\n    Also notice that the parent route's primary key parameter is\n    `websiteKey`:\n---&gt;\n#linkTo(text=\"All Pages\", route=\"websitePages\", websiteKey=website.key())#\n\n#linkTo(text=\"New Page\", route=\"newWebsitePage\", websiteKey=website.key())#\n\n&lt;!--- And the child resource's primary key parameter is `key`: ---&gt;\n#linkTo(\n    text=\"Show Page\",\n    route=\"websitePage\",\n    websiteKey=website.key(),\n    key=page.key()\n)#\n\n#linkTo(\n    text=\"Edit Page\",\n    route=\"editWebsitePage\",\n    websiteKey=website.key(),\n    key=page.key()\n)#\n</code></pre>"},{"location":"displaying-views-to-users/linking-pages/#linking-to-a-delete-action","title":"Linking to a Delete Action","text":"<p>Wheels 2.0 introduced security improvements for actions that change data in your applications (i.e., creating, updating, and deleting database records). Wheels protects these actions by requiring that they happen along with a form <code>POST</code> in the browser.</p> <p>A common UI pattern is to have a link to delete a record, usually in an admin area. Unfortunately, links can only trigger <code>GET</code> requests, so we need to work around this.</p> <p>To link to a delete request's required <code>DELETE</code> method, we need to code the link up as a simple form with submit button:</p> <pre><code>#buttonTo(\n    text=\"Delete\",\n    route=\"category\",\n    key=category.key(),\n    method=\"delete\",\n    inputClass=\"button-as-link\"\n)#\n</code></pre> <p>The buttonTo() helper generates a form with submit button. As you can see from the example, you can style the submit button itself by prepending any arguments with <code>input</code> (e.g., <code>inputClass</code>).</p> <p>Then it is up to you to style the form and submit button to look like a link or button using CSS (using whatever <code>class</code>es that you prefer in your markup, of course).</p> <p>If you need even more control, you can code up your own startFormTag() with whatever markup that you like. Just be sure to pass <code>method=\"delete\"</code> to the call to <code>startFormTag</code>.</p> <p>By the way, this will work with any request method that you please: <code>post</code>, <code>patch</code>, and <code>put</code> as well as <code>delete</code>.</p>"},{"location":"displaying-views-to-users/linking-pages/#extreme-example","title":"Extreme Example","text":"<p>If we were to use all of the parameters for linkTo(), our code may look something like this:</p> <pre><code>#linkTo(\n    text='&lt;i class=\"rock-fist\"&gt;&lt;/i&gt; Wheels Rocks!',\n    route=\"wheelsRocks\",\n    key=55,\n    params=\"rocks=yes&amp;referral=wheels.dev\",\n    anchor=\"rockin\",\n    host=\"www.example.co.uk\",\n    protocol=\"https\",\n    onlyPath=false,\n    encode=\"attributes\"\n)#\n</code></pre> <p>Which would generate this HTML (or something like it):</p> <pre><code>&lt;a href=\"https://www.example.co.uk/wheels/rocks/55?rocks=yes&amp;amp;amp;referral=wheels.dev#rockin\"&gt;&lt;i class=\"rock-fist\"&gt;&lt;/i&gt; Wheels Rocks!&lt;/a&gt;\n</code></pre>"},{"location":"displaying-views-to-users/linking-pages/#images-and-other-embedded-html-in-link-texts","title":"Images and Other Embedded HTML in Link Texts","text":"<p>If you'd like to use an image as a link to another page, pass the output of imageTag() to the <code>text</code> argument of linkTo()and use the <code>encode</code> argument to instruct <code>linkTo</code> to only encode <code>attributes</code>:</p> <pre><code>#linkTo(\n    text=imageTag(source=\"authors.jpg\"),\n    route=\"blogAuthors\",\n    encode=\"attributes\"\n)#\n</code></pre> <p>You can also use your CFML engine's built-in string interpolation to embed other HTML into the link text in a fairly readable manner:</p> <pre><code>#linkTo(\n    text='&lt;i class=\"fa fa-user\"&gt;&lt;/i&gt; #EncodeForHtml(employees.fullName)#',\n    route=\"employee\",\n    key=employees.id,\n    encode=\"attributes\"\n)#\n</code></pre> <p>{% hint style=\"danger\" %}</p>"},{"location":"displaying-views-to-users/linking-pages/#security-notice","title":"Security Notice","text":"<p>If you decide to opt out of encoding, be careful. Any dynamic data passed in to un-encoded values should be escaped manually using your CFML engine's <code>EncodeForHtml()</code> function. {% endhint %}</p>"},{"location":"displaying-views-to-users/linking-pages/#adding-additional-attributes-like-class-rel-and-id","title":"Adding Additional Attributes Like class, rel, and id","text":"<p>Like many of the other Wheels view helpers, any additional arguments that you pass to linkTo() will be added to the generated <code>&lt;a&gt;</code> tag as attributes.</p> <p>For example, if you'd like to add a <code>class</code> attribute value of button to your link, here's what the call to linkTo() would look like:</p> <pre><code>#linkTo(text=\"Check Out\", route=\"checkout\", class=\"button\")#\n</code></pre> <p>The same goes for any other argument that you pass, including but not limited to <code>id, rel, onclick</code>, etc.</p>"},{"location":"displaying-views-to-users/linking-pages/#what-if-i-dont-have-url-rewriting-enabled","title":"What If I Don't Have URL Rewriting Enabled?","text":"<p>Wheels will handle linking to pages without URL rewriting for you automatically. Let's pretend that you still have Wheels installed in your site root, but you do not have URL rewriting on. How you write your linkTo() call will not change:</p> <pre><code>#linkTo(\n    text=\"This link isn't as pretty, but it still works\",\n    route=\"product\",\n    key=product.key()\n)#\n</code></pre> <p>Wheels will still correctly build the link markup:</p> <pre><code>&lt;a href=\"/index.cfm/products/3\"&gt;This link isn't as pretty, but it still works&lt;/a&gt;\n</code></pre>"},{"location":"displaying-views-to-users/linking-pages/#linking-in-a-subfolder-deployment-of-wheels","title":"Linking in a Subfolder Deployment of Wheels","text":"<p>The same would be true if you had Wheels installed in a subfolder, thus perhaps eliminating your ability to use URL Rewriting (depending on what web server you have). The same linkTo() code above may generate this HTML if you had Wheels installed in a subfolder called <code>foo</code>:</p> <pre><code>&lt;a\n    href=\"/foo/index.cfm?route=product&amp;amp;key=3\"&gt;\n    This link isn't as pretty, but it still works\n&lt;/a&gt;\n</code></pre>"},{"location":"displaying-views-to-users/linking-pages/#use-the-linkto-function-for-portability","title":"Use the linkTo() Function for Portability","text":"<p>An <code>&lt;a&gt;</code> tag is easy enough, isn't it? Why would we need to use a function to do this mundane task? It turns out that there are some advantages. Here's the deal.</p> <p>Wheels gives you a good amount of structure for your applications. With this, instead of thinking of URLs in the \"old way,\" we think in terms of what route we're sending the user to.</p> <p>What's more, Wheels is smart enough to build URLs for you. And it'll do this for you based on your situation with URL rewriting. Are you using URL rewriting in your app? Great. Wheels will build your URLs accordingly. Not fortunate enough to have URL rewriting capabilities in your development or production environments? That's fine too because Wheels will handle that automatically. Are you using Wheels in a subfolder on your site, thus eliminating your ability to use URL rewriting? Wheels handles that for you too.</p> <p>If you see the pattern, this gives your application a good deal of portability. For example, you could later enable URL rewriting or move your application to a different subfolder. As long as you're using linkTo() to build your links, you won't need to change anything extra to your code in order to accommodate this change.</p> <p>Lastly, if you later install a plugin that needs to modify link markup, that plugin's hook is the linkTo() helper.</p> <p>Oh, and another reason is that it's just plain cool too. ;)</p>"},{"location":"displaying-views-to-users/localization/","title":"Localization","text":"<p>{% hint style=\"info\" %}</p>"},{"location":"displaying-views-to-users/localization/#work-in-progress","title":"Work in progress","text":"<p>This chapter is still being constructed... {% endhint %}</p>"},{"location":"displaying-views-to-users/localization/#page-encoding-issues","title":"Page Encoding Issues","text":"<p>Generally speaking, if you try and add Unicode characters such as umlauts into templates, you may well come across display issues. This is easily fixable, but requires one of the following:</p> <ul> <li>For the template.cfm file to be saved in the correct encoding for the language being displayed</li> <li>Or use of the <code>cfprocessingdirective</code> tag to set <code>pageEncoding</code></li> </ul>"},{"location":"displaying-views-to-users/localization/#using-cfprocessingdirective","title":"Using cfprocessingdirective","text":"<p>{% code title=\"/app/views/main/example.cfm\" %} <pre><code>&lt;h1&gt;\u00dcber uns&lt;/h1&gt;\n</code></pre> {% endcode %}</p> <p></p> <p>Incorrect encoding example</p> <p>{% code title=\"/app/views/main/example.cfm\" %} <pre><code>&lt;cfprocessingdirective pageEncoding=\"utf-8\"&gt;\n&lt;h1&gt;\u00dcber uns&lt;/h1&gt;\n</code></pre> {% endcode %}</p> <p></p> <p>Correct encoding</p> <p>Likewise, umlauts in routes would need for the <code>/config/routes.cfm</code> file to have the correct encoding:</p> <p>{% code title=\"/config/routes.cfm\" %} <pre><code>&lt;cfprocessingdirective pageEncoding=\"utf-8\"&gt;\n&lt;cfscript&gt;\n    mapper()\n        .get(name=\"about\", pattern=\"/\u00fcber-uns\", to=\"pages##about\")\n        .root(to=\"wheels##wheels\", method=\"get\")\n    .end();\n&lt;/cfscript&gt;\n</code></pre> {% endcode %}</p>"},{"location":"displaying-views-to-users/localization/#using-file-encoding","title":"Using file encoding","text":"<p>If you're actively trying to avoid the use of <code>cfprocessingdirective</code>, you can resave the template or route file with <code>UTF-8-BOM</code>. Your local text editor should provide this facility; here's an example in Notepad++ (windows)</p> <p></p>"},{"location":"displaying-views-to-users/localization/#localizing-wheels-helpers","title":"Localizing Wheels Helpers","text":"<p>// Example using monthNames args in dateSelect()\\ Coming soon</p>"},{"location":"displaying-views-to-users/pages/","title":"Pages","text":"<p>We've talked previously about how the controller is responsible for deciding which view files to render to the user. Read the Rendering Content chapter if you need to refresh your memory about that topic.</p> <p>In this chapter, we'll explain exactly where to place these files and what to put in them.</p>"},{"location":"displaying-views-to-users/pages/#where-to-place-the-files","title":"Where to Place the Files","text":"<p>In the simplest case, your controller action (typically a function inside your controller CFC file) will have a view file associated with it. As explained in the Rendering Content chapter, this file will be included automatically at the end of the controller action code. So if you're running the <code>show</code> action in the <code>blog</code> controller, for example, Wheels will include the <code>app/views/blog/show.cfm</code> file.</p> <p>Some rules can be spotted here:</p> <ul> <li>All view files live in the <code>app/views</code> folder.</li> <li>Each controller gets a subfolder named after it in the <code>app/views</code> folder.</li> <li>The view file to include is just a regular <code>.cfm</code> file named after the action.</li> </ul> <p>For creating standard pages, your work process will likely consist of the following steps:</p> <ol> <li>Create the controller action (a function in the controller CFC file).</li> <li>Create the corresponding view file for it (a <code>.cfm</code> file in the controller's view folder).</li> </ol> <p>There can be some exceptions to this process though, so let's go through some possible scenarios.</p>"},{"location":"displaying-views-to-users/pages/#controller-actions-without-associated-view-files","title":"Controller Actions Without Associated View Files","text":"<p>Not all controller actions need a corresponding view file. Consider the case where you process a form submission. To make sure it's not possible for the user to refresh the page and cause multiple submissions, you may choose to perform the form processing and then send the user directly to another page using the redirectTo() function.</p>"},{"location":"displaying-views-to-users/pages/#rendering-the-view-file-for-another-action","title":"Rendering the View File for Another Action","text":"<p>Sometimes you want the controller action to render the view file for a different action than the one currently executing. This is especially common when your application processes a form and the user makes an input error. In this case, you'll probably choose to have your application display the same form again for correction.</p> <p>In this case, you can use the renderView() function and specify a different action in the <code>action</code> argument (which will include the view page for that action but not run the controller code for it).</p>"},{"location":"displaying-views-to-users/pages/#sharing-a-view-file-between-actions","title":"Sharing a View File Between Actions","text":"<p>Sometimes it's useful to have a view file that can be called from several controller actions. For these cases, you'll typically call renderView() with the <code>template</code> argument.</p> <p>When using the <code>template</code> argument, there are specific rules that Wheels will follow in order to locate the file you want to include:</p> <ul> <li>If the template argument starts with the <code>/</code> character, Wheels will start searching from the <code>app/views</code> folder. Example: <code>renderView(template=\"/common/page\")</code> will include the <code>app/views/common/page.cfm</code> file.</li> <li>If it contains the <code>/</code> character elsewhere in the string, the search will start from the controller's view folder. Example: <code>renderView(template=\"misc/page\")</code> will include the <code>app/views/blog/misc/page.cfm</code> file if we're currently in the <code>blog</code> controller.</li> <li>In all other cases (i.e. when the template argument does not contain the <code>/</code> character at all), Wheels will just assume the file is in the controller's view folder and try to include it. Example: <code>renderView(template=\"something\")</code> will include the <code>app/views/blog/something.cfm</code> file if we're currently in the <code>blog</code> controller.</li> </ul> <p>Also note that both <code>renderView(template=\"thepage\")</code> and <code>renderView(template=\"thepage.cfm\")</code> work fine. But most of the time, Wheels developers will tend to leave out the <code>.cfm</code> part.</p>"},{"location":"displaying-views-to-users/pages/#what-goes-in-the-files","title":"What Goes in the Files?","text":"<p>This is the output of your application: what the users will see in their browsers. Most often this will consist of HTML, but it can also be JavaScript, CSS, XML, etc. You are of course free to use any CFML tags and functions that you want to in the file as well. (This is a CFML application, right?)</p> <p>In addition to this normal code that you'll see in most ColdFusion applications\u2014whether they are made for a framework or not\u2014Wheels also gives you some nice constructs to help keep your code clean. The most important ones of these are Layouts , Partials, and Helpers.</p> <p>When writing your view code, you will have access to the variables you have set up in the controller file. The idea is that the variables you want to access in the view should be set unscoped (or in the <code>variables</code> scope if you prefer to set it explicitly) in the controller so that they are available to the view template.</p> <p>In addition to the variables you have set yourself, you can also access the <code>params</code> struct. This contains anything passed in through the URL or with a form. If you want to follow MVC rules more closely though, we recommend only accessing the <code>params</code> struct in the controller and then setting new variables for the information you need access to in the view.</p> <p>The most important thing to remember when creating your view is to be careful not to put too much code in there. Avoid code dealing with the incoming request (this can be moved to the controller) and code containing business logic (consider moving this to a model). If you have view-related code but too much of it, it may be beneficial to break it out into a helper or a partial.</p>"},{"location":"displaying-views-to-users/pages/#cleaning-up-output","title":"Cleaning Up Output","text":"<p>A view's job is also to clean up and format the values provided by the controller before being displayed. This is especially important when content from a data source is not HTML-encoded.</p> <p>For example, if the view is to display the <code>title</code> column from a query object called <code>posts</code>, it should encode HTML special characters:</p> <pre><code>&lt;ul&gt;\n    &lt;cfoutput query=\"posts\"&gt;\n        &lt;li&gt;#EncodeForHtml(posts.title)#&lt;/li&gt;\n    &lt;/cfoutput&gt;\n&lt;/ul&gt;\n</code></pre> <p>Please note that you do not need to do this when passing in data to Wheels view helpers. The view helpers themselves will handle calling <code>EncodeForUrl</code>, <code>EncodeForHtml</code> and <code>EncodeForHtmlAttribute</code> internally as needed.</p> <p>By \"view helpers\" we mean everything listed as such in the API reference, so be aware that global helpers, such as capitalize, humanize etc, do not encode the content you pass in. When in doubt, simply test by passing in a string and check the HTML source of the output to see whether Wheels encoded it or not.</p> <p>To control encoding in general you have three global settings at your disposal (they all default to <code>true</code>):</p> <ul> <li><code>encodeURLs</code>: When <code>true</code>, calls <code>EncodeForUrl</code> to encode parameter name and values in URLFor.</li> <li><code>encodeHtmlTags</code>: When <code>true</code>, calls <code>EncodeForHtml</code> to encode tag content in linkTo, textAreaTag etc.</li> <li><code>encodeHtmlAttributes</code>: When <code>true</code>, calls <code>EncodeForHtmlAttribute</code> to encode attribute values in linkTo, textAreaTag etc.</li> </ul> <p>All individual functions also have their own <code>encode</code> argument (can be set to <code>true</code> / <code>false</code> or <code>attributes</code>) that overrides the global setting. Setting it to <code>attributes</code> will only encode HTML attribute values but leave tag content as is. Note that the <code>attributes</code> option is not available on functions that don't produce any tag content (such as imageTag for example), in those cases it's enough to pass in either <code>true</code> or <code>false</code>.</p>"},{"location":"displaying-views-to-users/partials/","title":"Partials","text":"<p>Partials in Wheels act as a wrapper around the good old <code>&lt;cfinclude&gt;</code> tag. By calling includePartial() or renderPartial(), you can include other view files in a page, just like <code>&lt;cfinclude&gt;</code> would. But at the same time, partials make use of common Wheels features like layouts, caching, model objects, and so on.</p> <p>These functions also add a few cool things to your development arsenal like the ability to pass in a query or array of objects and have the partial file called on each iteration (to name one).</p>"},{"location":"displaying-views-to-users/partials/#why-use-a-partial","title":"Why Use a Partial?","text":"<p>Websites often display the same thing on multiple pages. It could be an advertisement area that should be displayed in an entire section of a website or a shopping cart that is displayed while browsing products in a shop. You get the idea. To avoid duplicating code, you can place it in a file (the \"partial\" in Wheels terms) and include that file using includePartial() on the pages that need it.</p> <p>Even when there is no risk of code duplication, it can still make sense to use a partial. Breaking up a large page into smaller, more manageable chunks will help you focus on each part individually.</p> <p>If you've used <code>&lt;cfinclude&gt;</code> a lot in the past (and who hasn't?!), you probably already knew all of this though, right?</p>"},{"location":"displaying-views-to-users/partials/#storing-your-partial-files","title":"Storing Your Partial Files","text":"<p>To make it clear that a file is a partial and not a full page, we start the filename with an underscore character. You can place the partial file anywhere in the <code>app/views</code> folder. When locating partials, Wheels will use the same rules as it does for the <code>template</code> argument to renderView(). This means that if you save the partial in the current controller's view folder, you reference it simply by its name.</p> <p>For example, if you wanted to have a partial for a comment in your <code>blog</code> controller, you would save the file at <code>app/views/blog/_comment.cfm</code> and reference it (in includePartial() and renderPartial()) with just \"<code>comment</code>\" as the first argument.</p> <p>Sometimes it's useful to share partials between controllers though. Perhaps you have a banner ad that should be displayed across several controllers. One common approach then is to save them in a dedicated folder for this at the root of the <code>app/views</code> folder. To reference partials in this folder, in this case named shared, you would then pass in <code>\"/shared/banner\"</code> to includePartial() instead.</p>"},{"location":"displaying-views-to-users/partials/#making-the-call","title":"Making the Call","text":"<p>Now that we know why we should use partials and where to store them, let's make a call to includePartial() from a view page to have Wheels display a partial's output.</p> <pre><code>#includePartial(\"banner\")#\n</code></pre> <p>That code will look for a file named <code>_banner.cfm</code> in the current controller's view folder and include it.</p> <p>Let's say we're in the <code>blog</code> controller. Then the file that will be included is <code>app/views/blog/_banner.cfm</code>.</p> <p>As you can see, you don't need to specify the <code>.cfm</code> part or the underscore when referencing a partial.</p>"},{"location":"displaying-views-to-users/partials/#passing-in-data","title":"Passing in Data","text":"<p>You can pass in data by adding named arguments on the includePartial() call. Because we use the <code>partial</code> argument to determine what file to include, you can't pass in a variable named partial though. The same goes for the other arguments as well, like <code>layout</code>, <code>spacer</code>, and <code>cache</code>.</p> <p>Here is an example of passing in a title to a partial for a form:</p> <pre><code>#includePartial(partial=\"loginRegisterForm\", title=\"Please log in here\")#\n</code></pre> <p>Now you can reference the title variable as <code>arguments.title</code> inside the <code>_loginregisterform.cfm</code> file.</p> <p>If you prefer, you can still access the view variables that are set outside of the partial. The advantage with specifically passing them in instead is that they are then scoped in the <code>arguments</code> struct (which means less chance of strange bugs occurring due to variable conflicts). It also makes for more readable and maintainable code. (You can see the intent of the partial better when you see what is passed in to it).</p> <p>{% hint style=\"info\" %}</p>"},{"location":"displaying-views-to-users/partials/#special-arguments","title":"Special arguments","text":"<p>The <code>query</code>, <code>object</code> and <code>objects</code> arguments are special arguments and should not be used for other purposes than what's documented in the sections further down on this page. {% endhint %}</p>"},{"location":"displaying-views-to-users/partials/#automatic-calls-to-a-data-function","title":"Automatic Calls to a Data Function","text":"<p>There is an even more elegant way of passing data to a partial though. When you start using a partial on several pages on a site spread across multiple controllers, it can get quite cumbersome to remember to first load the data in an appropriate function in the controller, setup a before filter for it, pass that data in to the partial, and so on.</p> <p>Wheels can automate this process for you. The convention is that a partial will always check if a function exists on the controller with the same name as the partial itself (and that it's set to <code>private</code> and will return a struct). If so, the partial will call the function and add the output returned to its <code>arguments</code> struct.</p> <p>This way, the partial can be called from anywhere and acts more like a \"black box.\" All communication with the model is kept in the controller as it should be for example.</p> <p>If you don't want to load the data from a function with the same name as the partial (perhaps due to it clashing with another function name), you can specify the function to load data from with the <code>dataFunction</code> argument to includePartial() and renderPartial().</p>"},{"location":"displaying-views-to-users/partials/#partials-with-layouts","title":"Partials with Layouts","text":"<p>Just like a regular page, Wheels partials also understand the concept of layouts. To use this feature, simply pass in the name of the layout file you want to wrap the partial in with the <code>layout</code> argument, like this:</p> <pre><code>#includePartial(partial=\"newsItem\", layout=\"/boxes/blue\")#\n</code></pre> <p>This will wrap the partial with the code found in <code>app/views/boxes/_blue.cfm</code>. Just like with other layouts, you use includeContent() to represent the partial's content.</p> <p>That said, your <code>_blue.cfm</code> file could end up looking something like this:</p> <pre><code>&lt;div class=\"news\"&gt;\n    #includeContent()#\n&lt;/div&gt;\n</code></pre> <p>One difference from page layouts is that the layout file for partials has to start with the underscore character.</p> <p>It's also worth noting that it's perfectly acceptable to include partials inside layout files as well. This opens up the possibility to nest layouts in complex ways.</p>"},{"location":"displaying-views-to-users/partials/#caching-a-partial","title":"Caching a Partial","text":"<p>Caching a partial is done the same way as caching a page. Pass in the number of minutes you want to cache the partial for to the <code>cache</code> argument.</p> <p>Here's an example where we cache a partial for 15 minutes:</p> <pre><code>#includePartial(partial=\"userListing\", cache=15)#\n</code></pre>"},{"location":"displaying-views-to-users/partials/#using-partials-with-an-object","title":"Using Partials with an Object","text":"<p>Because it's quite common to use partials in conjunction with objects and queries, Wheels has built-in support for this too. Have a look at the code below, which passes in an object to a partial:</p> <pre><code>cust = model(\"customer\").findByKey(params.key);\n#includePartial(cust)#\n</code></pre> <p>That code will figure out that the <code>cust</code> variable contains a <code>customer</code> model object. It will then try to include a partial named <code>_customer.cfm</code> and pass in the object's properties as arguments to the partial. There will also be an <code>object</code>variable available in the <code>arguments</code> struct if you prefer to reference the object directly.</p> <p>Try that code and <code>&lt;cfdump&gt;</code> the <code>arguments</code> struct inside the partial file, and you'll see what's going on. Pretty cool stuff, huh?</p>"},{"location":"displaying-views-to-users/partials/#using-partials-with-a-query","title":"Using Partials with a Query","text":"<p>Similar to passing in an object, you can also pass in a query result set to includePartial(). Here's how that looks:</p> <pre><code>customers = model(\"customer\").findAll();\n#includePartial(partial=\"customers\", query=customers)#\n</code></pre> <p>In this case, Wheels will iterate through the query and call the <code>_customer.cfm</code> partial on each iteration. Similar to the example with the object above, Wheels will pass in the objects' properties (in this case represented by records in the query) to the partial.</p> <p>In addition to that, you will also see that a counter variable is available. It's named <code>current</code> and is available when passing in queries or arrays of objects to a partial.</p> <p>The way partials handle objects and queries makes it possible to use the exact same code inside the partial regardless of whether we're dealing with an object or query record at the time.</p> <p>If you need to display some HTML in between each iteration (maybe each iteration should be a list item for example), then you can make use of the <code>spacer</code> argument. Anything passed in to that will be inserted between iterations. Here's an example:</p> <pre><code>&lt;ul&gt;\n    &lt;li&gt;#includePartial(partial=customers, query=customers, spacer=\"&lt;/li&gt;&lt;li&gt;\")#&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>"},{"location":"displaying-views-to-users/partials/#partials-and-grouping","title":"Partials and Grouping","text":"<p>There is a feature of CFML that is very handy: the ability to output a query with the group attribute. Here's an example of how this can be done with a query that contains artists and albums (with the artist potentially being duplicated since they can have more than one album):</p> <pre><code>&lt;cfoutput query=\"artistsAndAlbums\" group=\"artistid\"&gt;\n    &lt;!--- Artist info is displayed just once for each artist here ---&gt;\n    &lt;cfoutput&gt;\n        &lt;!--- Each album is looped here ---&gt;\n    &lt;/cfoutput&gt;\n&lt;/cfoutput&gt;\n</code></pre> <p>We have ported this great functionality into calling partials with queries as well. Here's how you can achieve it:</p> <pre><code>#includePartial(partial=artistsAndAlbums, query=artistsAndAlbums, group=\"artistId\")#\n</code></pre> <p>When inside the partial file, you'll have an additional subquery made available to you named <code>group</code>, which contains the albums for the current artist in the loop.</p>"},{"location":"displaying-views-to-users/partials/#using-partials-with-an-array-of-objects","title":"Using Partials with an Array of Objects","text":"<p>As we've hinted previously in this chapter, it's also possible to pass in an array of objects to a partial. It works very similar to passing in a query in that the partial is called on each iteration.</p>"},{"location":"displaying-views-to-users/partials/#rendering-or-including","title":"Rendering or Including?","text":"<p>So far we've only talked about includePartial(), which is what you use from within your views to include other files. There is another similar function as well: renderPartial(). This one is used from your controller files when you want to render a partial instead of a full page. At first glance, this might not make much sense to do. There is one common usage of this though\u2014AJAX requests.</p> <p>Let's say that you want to submit comments on your blog using AJAX. For example, the user will see all comments, enter their comment, submit it, and the comment will show up below the existing ones without a new page being loaded.</p> <p>In this case, it's useful to use a partial to display each comment (using includePartial() as outlined above) and use the same partial when rendering the result of the AJAX request.</p> <p>Here's what your controller action that receives the AJAX form submission would look like:</p> <pre><code>comment = model(\"comment\").create(params.newComment);\nrenderPartial(comment);\n</code></pre> <p>Please note that there currently is no support for creating the AJAX form directly with Wheels. This can easily be implemented using a JavaScript library such as jQuery or Prototype though.</p>"},{"location":"handling-requests-with-controllers/caching/","title":"Caching","text":"<p>If your website doesn't get a whole lot of traffic, then you can probably skip this chapter completely. Just remember that it's here, waiting for your triumphant return.</p> <p>On the other hand, you're probably hoping for massive amounts of traffic to reach your website very soon, an imminent sell-out to Google, and a good life drinking Margaritas in the Caribbean. Knowing a little bit about the Wheels caching concepts will prepare you for this. (Except for the Margaritas... You're on your own with those ;).)</p> <p>Consider a typical page on a Wheels website. It will likely call a controller action, get some data from your database using a finder method, and render the view for the user using some of the handy built-in functions.</p> <p>All this takes time and resources on your web and database servers. Let's assume this page is accessed frequently, rarely changes, and looks the same for all users. Then you have a perfect candidate for caching.</p>"},{"location":"handling-requests-with-controllers/caching/#configuring-the-cache","title":"Configuring the Cache","text":"<p>Wheels will configure all caching parameters behind the scenes for you based on what environment mode you are currently in. If you leave everything to Wheels, caching will be optimized for the different environment modes (and set to have reasonable settings for cache size and culling). This means that all caching is off when working in Development mode but on when in Production mode, for example.</p> <p>Here are the global caching parameters you can set, their default values, and a description of what they do. Because these are not meant to be set differently based on the environment mode, you would usually set these in the <code>/config/settings.cfm</code> file:</p> <pre><code>set(maximumItemsToCache=5000);\nset(cacheCullPercentage=10);\nset(cacheCullIntervalMinutes=5);\nset(cacheDatePart=\"n\");\nset(defaultCacheTime=60);\nset(cacheQueriesDuringRequest=true);\nset(clearQueryCacheOnReload=true);\nset(cachePlugins=true);\n</code></pre>"},{"location":"handling-requests-with-controllers/caching/#maximumitemstocache-setting","title":"maximumItemsToCache Setting","text":"<p>The total amount of items the cache can hold. When the cache is full, items will be deleted automatically at a regular interval based on the other settings below.</p> <p>Note that the cache is stored in ColdFusion's <code>application</code> scope, so take this into consideration when deciding the number of items to store.</p>"},{"location":"handling-requests-with-controllers/caching/#cachecullpercentage-setting","title":"cacheCullPercentage Setting","text":"<p>This is the percentage of items that are culled from the cache when <code>maximumItemsToCache</code> has been reached.</p> <p>For example, if you set this value to 10, then at most, 10% of expired items will be deleted from the cache.</p> <p>If you set this to 100, then all expired items will be deleted. Setting it to 100 is perfectly fine for small caches but can be problematic if the cache is very large.</p>"},{"location":"handling-requests-with-controllers/caching/#cachecullinterval-setting","title":"cacheCullInterval Setting","text":"<p>This is the number of minutes between each culling action. The reason the cache is not culled during each request is to keep performance as high as possible.</p>"},{"location":"handling-requests-with-controllers/caching/#cachedatepart-setting","title":"cacheDatePart Setting","text":"<p>The measurement unit to use during caching. The default is minutes (\"<code>n</code>\"), but you can set it to seconds (\"<code>s</code>\") for example if you want more precise control over when a cached item should expire. For the rest of this chapter, we'll assume you've left it at the default setting.</p>"},{"location":"handling-requests-with-controllers/caching/#defaultcachetime-setting","title":"defaultCacheTime Setting","text":"<p>The number of minutes an item should be cached when it has not been specifically set through one of the functions that perform the caching in Wheels (i.e., <code>caches()</code>, <code>findAll()</code>, <code>includePartial()</code>, etc).</p>"},{"location":"handling-requests-with-controllers/caching/#cachequeriesduringrequest-setting","title":"cacheQueriesDuringRequest Setting","text":"<p>When set to <code>true</code>, Wheels caches identical queries during a request. See the section titled Automatic Caching of Identical Queries below for more information about this setting.</p>"},{"location":"handling-requests-with-controllers/caching/#clearquerycacheonreload-setting","title":"clearQueryCacheOnReload Setting","text":"<p>When set to <code>true</code>, Wheels will clear out all cached queries when doing a <code>reload=true</code> request. This is usually a good idea, but if you want to avoid hitting the database too hard on application reloads, you can set this to <code>false</code> to keep queries cached and ease the load on the database.</p>"},{"location":"handling-requests-with-controllers/caching/#cacheplugins-setting","title":"cachePlugins Setting","text":"<p>If you set this to <code>false</code>, all plugins will reload on each request (as opposed to during <code>reload=true</code> requests only). Setting this is only recommended if you are developing a plugin yourself and need to see the impact of your changes as you develop it on a per-request basis.</p>"},{"location":"handling-requests-with-controllers/caching/#environment-level-caching","title":"Environment-Level Caching","text":"<p>The following cache variables are usually set per environment mode:</p> <pre><code>// always turned on regardless of mode setting.\nset(cacheControllerConfig = true);\nset(cacheDatabaseSchema = true);\nset(cacheModelConfig = true);\nset(cachePlugins = true);\n\n// Development mode example\nset(cacheActions = false);\nset(cacheFileChecking = false);\nset(cacheImages = false);\nset(cachePages = false);\nset(cachePartials = false);\nset(cacheQueries = false);\n</code></pre> <p>The settings shown above are what's in use in the Development mode. As you can see, when running in that mode, very little is cached. This makes it possible to do extensive changes without having to issue a <code>reload=true</code> request or restart the ColdFusion server, for example. The downside is that it makes for slightly slower development because the pages will not load as fast in this environment.</p> <p>The variables themselves are fairly self-explanatory. When <code>cacheDatabaseSchema</code> is set to <code>false</code>, you can add a field to the database, and Wheels will pick that up right away. When <code>cacheModelConfig</code> is false, any changes you make to the <code>config()</code> function in the model file will be picked up. And so on.</p> <p>{% hint style=\"info\" %}</p>"},{"location":"handling-requests-with-controllers/caching/#no-more-design-mode","title":"No more Design mode","text":"<p>Note that \"Design\" mode has been removed in Wheels 2.x: please use development mode instead. {% endhint %}</p> <p>Please refer to the Configuration and Defaults chapter for a complete listing of all the variables you can set and their default values.</p>"},{"location":"handling-requests-with-controllers/caching/#4-ways-to-cache","title":"4 Ways to Cache","text":"<p>In Wheels, you can cache data in 4 different ways:</p> <ul> <li>Action caching is the most effective of these methods because it caches the entire resulting HTML for the user.</li> <li>Page caching is similar to action caching, but it will only cache the view page itself and in reality, this caching method is rarely used.</li> <li>Partial caching is used when you only want to cache specific parts of pages. One reason for this could be that the page is personalized for a specific user, and you can only cache the sections that are not personalized.</li> <li>Query caching is the least effective of the 4 caching options because it only caches result sets that you get back from the database. But if you have a busy database and you're not too concerned with leaving pages/partials uncached, this could be a good option for you.</li> </ul>"},{"location":"handling-requests-with-controllers/caching/#action-caching","title":"Action Caching","text":"<p>This code specifies that you want to cache the <code>browseByUser</code> and <code>browseByTitle</code> actions for 30 minutes:</p> <p>{% code title=\"Caches Example\" %} <pre><code>component extends=\"Controller\" {\n\n   function config(){\n     caches(actions=\"browseByUser,browseByTitle\", time=30);\n   }\n\n   function browseByUser(){\n     }\n\n   function browseByTitle(){\n     }\n}\n</code></pre> {% endcode %}</p> <p>As you can see, the <code>caches()</code> function call goes inside the <code>config()</code> function at the top of your controller file and accepts a list of action names and the number of minutes the actions should be cached for.</p> <p>So what happens when users request the <code>browseByUser</code> page?</p> <p>When Wheels receives the first request for this page, it will handle everything as it normally would, with the exception that it also adds a copy of the resulting HTML to the cache before ending the processing.</p> <p>Wheels creates an internal key for use in the cache as well. This key is created from the <code>controller, action, key</code>, and <code>params</code> variables. This means, for example, that paginated pages are all stored individually in the cache (because the URL variable for the page to display would be different on each request).</p> <p>When the second user requests the same page, Wheels will serve the HTML directly from the cache.</p> <p>All subsequent requests now get the cached page until it expires.</p> <p>But there are 2 exceptions to this (which you can make good use of in your code to have the cache re-created at the right times). If the request is a post request (normally coming from a form submission) or if the Flash (you can read everything about the Flash in the Using the Flash chapter) is not empty, then the cache won't be used. Instead, a new fresh page will be created.</p> <p>One way to use this feature is to submit your forms to the same page to have it re-created or redirect to the cached page with a message in the Flash.</p> <p>Here is some code that shows this technique with using the Flash to expire the cache. (Imagine that the <code>showArticle</code>page is cached and a user is adding a new comment to it.)</p> <p>{% code title=\"Expire with Flash\" %} <pre><code>flashInsert(message=\"Your comment was added\");\nredirectTo(action=\"showArticle\", key=params.key);\n</code></pre> {% endcode %}</p> <p>Note that by default, any filters set for the action are being run as normal. This means that if you do authentication in the filter (which is a common technique for sites with content where you have to login first to see it), you can still cache those pages safely using the caches() function.</p> <p>However, to achieve the fastest possible cache, you can override this default and tell Wheels to cache the HTML and serve that exactly as it is to all subsequent requests without running any filters. To do this, set the <code>static</code> argument on caches() to <code>true</code>. This will cache your content using the <code>cfcache</code> tag behind the scenes. This means that the Wheels framework won't even get involved with the subsequent requests until they expire from the cache again (please note that application events like <code>onSessionStart</code>, <code>onRequestStart</code>, etc. will run though).</p>"},{"location":"handling-requests-with-controllers/caching/#page-caching","title":"Page Caching","text":"<p>This code specifies that you want to cache the view page for the <code>browseByUser</code> action for 1 hour:</p> <p>{% code title=\"browseByUser caches\" %} <pre><code>component extends=\"Controller\" {\n\n   function browseByUser(){\n     renderView(cache=60);\n     }\n\n   function browseByTitle(){\n     }\n}\n</code></pre> {% endcode %}</p> <p>The difference between action caching and page caching is that page caching will run the action and then only cache the view page itself. Action caching, as explained above, does not run the action code at all (but it does run filters and verifications).</p>"},{"location":"handling-requests-with-controllers/caching/#partial-caching","title":"Partial Caching","text":"<p>When your site contains personalized information (maybe some text specifying who you are logged in as, a list of items in your shopping cart, etc.), then action caching is not an option, and you need to cache at a lower level. This is where being able to cache only specific parts of pages comes in handy.</p> <p>In Wheels, this is done by using the <code>cache</code> argument in a call to includePartial() or renderPartial(). You can pass in <code>cache=true</code> or <code>cache=x</code> where <code>x</code> is the number of minutes you want to cache the partial for.</p> <p>If you just pass in <code>true</code>, the default cache expiration time will be used.</p> <p>So, for example, if you have an e-commerce site that lists products with a shopping cart in the sidebar, then you'd create a partial for the list of products and cache only that.</p> <p>Example code:</p> <p>{% code title=\"IncludePartial\" %} <pre><code>#includePartial(partial=\"listing\", cache=true)#\n</code></pre> {% endcode %}</p> <p>Behind the scenes Wheels creates the cache key based on the name of the partial plus all of the arguments passed in to it. This means that if you pass in a <code>userId</code> variable for example, they will be cached separately.</p> <p>You can also use this to your advantage when it comes to expiring cached content. You could, for example, update an <code>updatedAt</code> property on a user object and pass that in to <code>includePartial</code>. As soon as it changes, Wheels will recreate the cached content (since the cache key is now different).</p>"},{"location":"handling-requests-with-controllers/caching/#query-caching","title":"Query Caching","text":"<p>You can cache result sets returned by your queries too. As a ColdFusion developer, this probably won't be new to you because you've always been able to use the <code>cachedwithin</code> attribute in the <code>&lt;cfquery&gt;</code> tag. The query caching in Wheels is very similar to this.</p> <p>You can use query caching on all finder methods, and it looks like this:</p> <pre><code>users = model(\"user\").findAll(where=\"name LIKE 'a%'\", cache=10);\n</code></pre> <p>So there you have it: 4 easy ways to speed up your website!</p>"},{"location":"handling-requests-with-controllers/caching/#automatic-caching-of-identical-queries","title":"Automatic Caching of Identical Queries","text":"<p>When working with objects in Wheels, you'll likely find yourself using all of the convenient association functions Wheels makes available to you.</p> <p>For example, if you have set up a <code>belongsTo</code> association from <code>article</code> to <code>author</code>, then you will likely write a lot of <code>article.author().name()</code> calls. In this case, Wheels is smart enough to only call the database once per request if the queries are identical. So don't worry about adding performance hits when making multiple calls like that in your code.</p> <p>You can turn off this functionality either by using the <code>reload</code> argument to findAll() (or any of the dynamic methods that end up calling findAll() behind the scenes) or globally by adding <code>set(cacheQueriesDuringRequest=false)</code> to your configuration files.</p> <p>The caching of these queries are stored on a per-model basis and Wheels will conveniently clear the cache for a model whenever anything changes in the database for a model (e.g. you call something that creates, updates or deletes records).</p>"},{"location":"handling-requests-with-controllers/cors-requests/","title":"CORS Requests","text":"<p>Wheels can often act as the \"backend\" in a modern web application, serving data to multiple types of frontend clients. Typically this would be in the form of (but not limited to) JSON served as an API, with something like VueJS or React on the front end, possibly served under a different domain.</p> <p>When we separate our systems in such a manner, we need to consider CORS (Cross Origin Resource Sharing) and how to properly serve requests which modern browsers will allow.</p>"},{"location":"handling-requests-with-controllers/cors-requests/#the-quick-and-dirty-approach","title":"The \"Quick and Dirty\" approach","text":"<p>If you just need to satisfy your CORS requirement quickly, you can do so from Wheels 2.0 onwards with a simple configuration switch in your <code>/config/settings.cfm</code> file: <code>set(allowCorsRequests=true);</code>.</p> <p>By default, this will enable the following CORS headers:</p> <pre><code>Access-Control-Allow-Origin \n*\n\nAccess-Control-Allow-Methods \nGET, POST, PATCH, PUT, DELETE, OPTIONS\n\nAccess-Control-Allow-Headers\nOrigin, Content-Type, X-Auth-Token, X-Requested-By, X-Requested-With\n</code></pre> <p>This will satisfy most requirements to get going quickly, but is more of a blanket \"catch all\" configuration which doesn't really restrict anything, or provide much information to the API consumer about your available resources.</p>"},{"location":"handling-requests-with-controllers/cors-requests/#custom-cors-headers","title":"Custom CORS Headers","text":"<p>{% hint style=\"info\" %}</p>"},{"location":"handling-requests-with-controllers/cors-requests/#from-wheels-21","title":"From Wheels 2.1","text":"<p>The options below were introduced in Wheels 2.1 {% endhint %}</p> <p>From Wheels 2.1, we can be more specific. We still need to specify <code>set(allowCorsRequests=true);</code> in our <code>/config/settings.cfm</code> to turn on the main CORS functionality, but we can now provide some additional configuration options to fine tune our responses.</p>"},{"location":"handling-requests-with-controllers/cors-requests/#access-control-allow-origin","title":"Access Control Allow Origin","text":"<p>The Access Control Allow Origin header tells the browser whether the domain they are connecting from can access the requested resource.</p> <p>By default, this header is set to a wildcard allowing connection from any domain. But it might be your VueJS app lives at <code>app.domain.com</code> and we only want to allow access from that domain to our API.</p> <pre><code>// Wildcard\nset(accessControlAllowOrigin=\"*\")\n\n// Specify a domain\nset(accessControlAllowOrigin=\"https://app.domain.com\");\n\n// Specify multiple domains in a list\nset(accessControlAllowOrigin=\"https://app.domain.com,https://staging-app.domain.com\");\n</code></pre> <p>You can also take advantage of the environment specific configurations, such as only allowing access to <code>localhost:8080</code> in <code>/config/development/settings.cfm</code> for example.</p> <p>Wheels 2.2 allows for subdomain wildcard matching for CORS permitted origins:</p> <pre><code>// Match https://foo.domain.com or https://bar.domain.com or https://www.mydomain.com\nset(accessControlAllowOrigin = [\n  \"https://*.domain.com\",\n  \"https://www.mydomain.com\"\n]);\n</code></pre> <p>The CORS spec specifies that you are only allowed either a * wildcard, or a specific URL , i.e https://www.foo.com:8080- it doesn't in itself allow for wildcard subdomains. However in this scenario Wheels will attempt to match the wildcard and return the full matched domain.</p>"},{"location":"handling-requests-with-controllers/cors-requests/#access-control-allow-methods","title":"Access Control Allow Methods","text":"<p>The Access Control Allow Methods tells the browser what HTTP Methods (Verbs) are allowed to be performed against the requested resource.</p> <p>By default these are set to be all possible Methods, <code>GET, POST, PATCH, PUT, DELETE, OPTIONS</code>. If our API only allows specific methods, we can specify them: note that this is application-wide and not dependent on route.</p> <p>cfscript</p> <pre><code>// Only ever allow GET requests to this API\nset(accessControlAllowMethods=\"GET\");\n\n// Only ever allow GET, POST and OPTIONS\nset(accessControlAllowMethods=\"GET,POST,OPTIONS\");\n</code></pre>"},{"location":"handling-requests-with-controllers/cors-requests/#access-control-allow-methods-by-route","title":"Access Control Allow Methods (By Route)","text":"<p>Whilst setting Access Control Allow Methods site-wide is fine, it doesn't actually fulfill the CORS requirement properly - the value returned by this header should indicate what methods are available at that url. For instance, <code>/cats</code> might only allow <code>GET,POST</code> requests, and <code>/cats/1/</code> might only allow <code>GET,PUT,PATCH,DELETE</code> requests.</p> <p>Thankfully, we can pull this information in from the routing system automatically! Note, <code>set(accessControlAllowMethodsByRoute=true)</code> will override <code>set(accessControlAllowMethods())</code></p> <pre><code>// automatically look up the available routes in application.wheels.routes and return the valid methods for the requested route\nset(accessControlAllowMethodsByRoute=true);\n</code></pre>"},{"location":"handling-requests-with-controllers/cors-requests/#access-control-allow-credentials","title":"Access Control Allow Credentials","text":"<p>If you're sending credentials such as a cookie from your front end application, you may need to turn this header on.</p> <pre><code>// if set to true, include the Access-Control-Allow-Credentials header\nset(accessControlAllowCredentials=true);\n</code></pre>"},{"location":"handling-requests-with-controllers/cors-requests/#access-control-allow-headers","title":"Access Control Allow Headers","text":"<p>If you need to specify a specific list of allowed headers, you can simply pass them into this configuration setting</p> <pre><code>// Set site wide allowed headers\nset(accessControlAllowHeaders = \"Origin, Content-Type, X-Auth-Token, X-Requested-By, X-Requested-With, X-MyHeader\")\n</code></pre>"},{"location":"handling-requests-with-controllers/event-handlers/","title":"Event Handlers","text":"<p>Because the <code>Application.cfc</code> file is in the <code>public</code> folder of your Wheels site and it has the necessary framework initialization like <code>onApplicationStart</code>, <code>onRequestStart</code>, It uses Wirebox to initiailize the <code>vendor/wheels/Global.cfc</code>, which contains the initialization for controller and global functions like model(), you may wonder what the best way is to use CFML's onApplicationStart, onRequestStart, etc. functions.</p> <p>While it's perfectly possible to add your code directly to the <code>public/Application.cfc</code> or <code>vendor/wheels/Global.cfc</code> file, we certainly don't recommend it. If you add code in there, you both increase the risk of accidentally modifying how the framework functions, and you also make it a lot harder to upgrade to future versions of Wheels.</p>"},{"location":"handling-requests-with-controllers/event-handlers/#use-the-events-folder-for-standard-cfml-events","title":"Use the events Folder for Standard CFML Events","text":"<p>The general recommendation is to never touch any files in the wheels folder. OK, with that little warning out of the way, how does one go about using the CFML events?</p> <p>The answer is to use the <code>app/events</code> folder. There is a file in there for every single event that CFML triggers. So if you want some code executed on application start for example, just place your code in <code>onapplicationstart.cfm</code>, and Wheels will run it when your application starts.</p>"},{"location":"handling-requests-with-controllers/event-handlers/#wheels-includes-some-extra-bonus-events","title":"Wheels Includes Some Extra Bonus Events","text":"<p>If you look closely in the <code>events</code> folder, you will also notice that there are some custom files in there that do not match up with standard CFML events. The <code>onmaintenance.cfm</code> file is one example. Let's have a closer look at these.</p> <p>On Maintenance</p> <p>The <code>onmaintenance.cfm</code> file is included when Wheels is set to maintenance mode. After the file is included, <code>cfabort</code>is called by Wheels so no other code runs in this mode.</p> <p>On Error</p> <p>You can place a generic error message in the <code>onerror.cfm</code> file to be displayed to the users whenever your site throws an error.</p> <p>If you need to access the error information here (for logging purposes, for example) it is available at <code>arguments.exception</code>.</p> <p>On Missing Template</p> <p>The <code>onmissingtemplate.cfm</code> file works in a similar way as the error file above, but it gets called when a controller or action in your application could not be found.</p> <p>Note: If you want to make sure that all browsers show your custom 404 page you need to make it larger than 512 bytes in size. Google Chrome, for example, will display a friendly help page of its own when the 404 page is less than 512 bytes.</p>"},{"location":"handling-requests-with-controllers/event-handlers/#adding-functions","title":"Adding Functions","text":"<p>Sometimes it's useful to add functions right in the <code>Application.cfc</code> file to make them available to all templates. To achieve the same thing in Wheels, you can place your functions in <code>/app/global/functions.cfm</code>.</p>"},{"location":"handling-requests-with-controllers/event-handlers/#application-settings","title":"Application Settings","text":"<p>Again, because there is no <code>Application.cfc</code> file for you to work with in Wheels, you have to find a suitable place to set application settings such as <code>SessionManagement</code>, <code>SessionTimeout, ScriptProtect, SetClientCookies</code>, and so on. These are usually set in the constructor area of an <code>Application.cfc</code> file. We recommend that you set them in the <code>/config/app.cfm</code> file instead.</p>"},{"location":"handling-requests-with-controllers/nesting-controllers/","title":"Nesting Controllers","text":"<p>With the new routing system in Wheels 2.x, there are lots of nice features which allow for better code organization. One of these is the ability to nest controllers into folders using the <code>namespace()</code> method in our <code>mapper()</code> call.</p> <p>For example, we may have a whole \"Admin\" section, where for each endpoint, we need to check some permissions, and possibly load some default data. Let's say we have a <code>Users</code> controller which provides standard CRUD operations.</p> <p>{% code title=\"/config/routes.cfm\" %} <pre><code>.mapper()\n  .namespace(\"admin\")\n    .resources(\"users\")\n  .end()\n.end()\n</code></pre> {% endcode %}</p> <p>This will automatically look for the <code>Users.cfc</code> controller in <code>app/controllers/admin/</code>.</p> <p>By default, all your controllers <code>extend=\"Controller\"</code>, but with a nested controller, we need to change this, as the main <code>Controller.cfc</code> isn't at the same folder level.</p>"},{"location":"handling-requests-with-controllers/nesting-controllers/#a-handy-mapping","title":"A Handy Mapping","text":"<p>We've added a new mapping in 3.x, called <code>app</code>; This mapping will correspond to the <code>app</code> folder, so in our <code>Users.cfc</code> we now have two options - extend the core <code>Controller.cfc</code> via the app mapping, or perhaps extend another component (possibly <code>Admin.cfc</code>) which extends the core Controller instead.</p> <p>{% code title=\"app/controllers/admin/Users.cfc\" %} <pre><code>component extends=\"app.controllers.Controller\" {\n\n  function config(){\n    super.config();\n  }\n\n}\n</code></pre> {% endcode %}</p> <p>In the above example, we're using the <code>app</code> mapping to \"go to\" the <code>app</code> folder, and then look for a folder called <code>controllers</code>, and within that, our main <code>Controller.cfc</code>.</p> <p>Our <code>super.config()</code> call will then run the <code>config()</code> function in our base Controller.</p> <p>We could of course have the following too (just for completeness sake):</p> <p>{% code title=\"File system\" %} <pre><code>/app/\n  /controllers/\n    /admin/\n      - Admin.cfc\n      - Users.cfc\n    /public/\n      - etc.\n</code></pre> {% endcode %}</p> <p>And then add the <code>app.controllers.Controller</code> mapping to <code>Admin.cfc</code>, and the <code>extends=\"Admin\"</code> in the <code>Users.cfc</code>.</p>"},{"location":"handling-requests-with-controllers/nesting-controllers/#not-just-controllers","title":"Not just controllers...","text":"<p>Of course, we can extend this concept (ha!) to Models too. However, this is either limited to tableless models, or models where you implicitly specify the <code>table()</code> call. As Wheels will look for the tablename dependent on the model file location, it'll get confused if in a sub-directory.</p> <p>{% code title=\"app/models/auth/LDAP.cfc\" %} <pre><code>component extends=\"app.models.Model\"\n{\n    function config() {\n        table(false);\n    }\n    function save(){\n    }\n}\n</code></pre> {% endcode %}</p> <p>It also potentially makes your <code>model()</code> calls more complex, as you need to specify the model name in dot notation:</p> <p>{% code title=\"Example nested model call\" %} <pre><code>// Example for \"LDAP.cfc\" in \"/models/auth\"\nmyNewLDAPModel=model(\"auth.LDAP\").new();\n</code></pre> {% endcode %}</p>"},{"location":"handling-requests-with-controllers/obfuscating-urls/","title":"Obfuscating URLs","text":"<p>The Wheels convention of using an auto-incrementing integer value as the primary key in your database tables will lead to a lot of URLs on your website exposing this value. Using the built-in URL obfuscation functionality in Wheels, you can hide this value from nosy users.</p>"},{"location":"handling-requests-with-controllers/obfuscating-urls/#what-url-obfuscation-does","title":"What URL Obfuscation Does","text":"<p>When URL obfuscation is turned off (which is the default setting in Wheels), this is how a lot of your URLs will end up looking:</p> <p>{% code title=\"HTTP\" %} <pre><code>http://localhost/user/profile/99\n</code></pre> {% endcode %}</p> <p>Here, <code>99</code> is the primary key value of a record in your users table.</p> <p>After enabling URL obfuscation, this is how those URLs will look instead:</p> <p>{% code title=\"HTTP\" %} <pre><code>http://localhost/user/profile/b7ab9a50\n</code></pre> {% endcode %}</p> <p>The value <code>99</code> has now been obfuscated by Wheels to <code>b7ab9a50</code>. This makes it harder for nosy users to substitute the value to see how many records are in your users table, to name just one example.</p>"},{"location":"handling-requests-with-controllers/obfuscating-urls/#how-to-use-it","title":"How to Use It","text":"<p>To turn on URL obfuscation, all you have to do is call <code>set(obfuscateURLs=true)</code> in the <code>/config/settings.cfm</code> file.</p> <p>Once you do that, Wheels will handle everything else. Obviously, the main things Wheels does is obfuscate the primary key value when using the linkTo() function and deobfuscate it on the receiving end. Wheels will also obfuscate all other params sent in to linkTo() as well as any value in a form sent using a get request.</p> <p>In some circumstances, you will need to obfuscate and deobfuscate values yourself if you link to pages without using the linkTo() function, for example. In these cases, you can use the <code>obfuscateParam()</code> and <code>deObfuscateParam()</code>functions to do the job for you.</p>"},{"location":"handling-requests-with-controllers/obfuscating-urls/#is-this-really-secure","title":"Is This Really Secure?","text":"<p>No, this is not meant to add a high level of security to your application. It just obfuscates the values, making casual observation harder. It does not encrypt values, so keep that in mind when using this approach.</p> <p>For instance, unless you specify it in your <code>/config/routes.cfm</code> file, you can still directly access numeric keys in the URL, e.g. <code>/users/view/99</code>; However, there is a small work around you can implement to prevent this at least, using the routes <code>constraints</code> argument.</p> <pre><code>mapper()\n  .resources(name = \"users\", constraints = { key = \"\\w+\\d+\" } )\n  .root( to=\"home##index\", method=\"get\")\n.end();\n</code></pre> <p>This uses Regex to ensure the <code>params.key</code> argument is an alpha numeric key and not just purely numeric: otherwise the route won't match.</p>"},{"location":"handling-requests-with-controllers/redirecting-users/","title":"Redirecting Users","text":"<p>When a user submits a form, you do not want to show any content on the page that handles the form submission! Why? Because if you do, and the user hits refresh in their browser, the form handling code could be triggered again, possibly causing duplicate entries in your database, multiple emails being sent, etc.</p>"},{"location":"handling-requests-with-controllers/redirecting-users/#remember-to-redirect","title":"Remember to Redirect","text":"<p>To avoid the above problem, it is recommended to always redirect the user after submitting a form. In Wheels this is done with the redirectTo() function. It is basically a wrapper around the <code>cflocation</code> tag in CFML.</p> <p>Being that redirectTo() is a Wheels function, it can accept the <code>route, controller, action</code>, and <code>key</code> arguments so that you can easily redirect\\ to other actions in your application.</p>"},{"location":"handling-requests-with-controllers/redirecting-users/#three-ways-to-redirect","title":"Three Ways to Redirect","text":"<p>Let's look at the three ways you can redirect in Wheels.</p>"},{"location":"handling-requests-with-controllers/redirecting-users/#1-redirecting-to-another-action","title":"1. Redirecting to Another Action","text":"<p>You can redirect the user to another action in your application simply by passing in the <code>controller, action</code>, and <code>key</code> arguments. You can also pass in any other arguments that are accepted by the URLFor() function, like host, params, etc. (The URLFor() function is what Wheels uses internally to produce the URL to redirect to.)</p>"},{"location":"handling-requests-with-controllers/redirecting-users/#2-redirection-using-routes","title":"2. Redirection Using Routes","text":"<p>If you have configured any routes in <code>/config/routes.cfm</code>, you can use them when redirecting as well. Just pass in the route's name to the route argument together with any additional arguments needed for the route in question. You can read more about routing in the Routing chapter.</p>"},{"location":"handling-requests-with-controllers/redirecting-users/#3-redirecting-to-the-referring-url","title":"3. Redirecting to the Referring URL","text":"<p>It's very common that all you want to do when a user submits a form is send them back to where they came from. (Think of a user posting a comment on a blog post and then being redirected back to view the post with their new comment visible as well.) For this, we have the <code>back</code> argument. Simply pass in <code>back=true</code> to redirectTo(), and the user will be redirected back to the page they came from.</p>"},{"location":"handling-requests-with-controllers/redirecting-users/#handling-an-invalid-referrer","title":"Handling an Invalid Referrer","text":"<p>The referring URL is retrieved from the <code>cgi.http_referer</code> value. If this value is blank or comes from a different domain than the current one, Wheels will redirect the visitor to the root of your website instead.</p> <p>If you want to specify exactly where to send the visitor when the referring domain is blank/foreign, you can pass in the normal URLFor() arguments like <code>route, controller, action</code>, etc. These will be used only when Wheels can't redirect to the referrer because it's invalid.</p>"},{"location":"handling-requests-with-controllers/redirecting-users/#appending-params","title":"Appending Params","text":"<p>Sometimes it's useful to be able to send the visitor back to the same URL they came from but with extra parameters added to it. You can do this by using the <code>params</code> argument. Note that Wheels will append to the URL and not replace it in this case.</p>"},{"location":"handling-requests-with-controllers/redirecting-users/#the-addtoken-and-statuscode-arguments","title":"The <code>addToken</code> and <code>statusCode</code> Arguments","text":"<p>The redirectTo() function uses <code>&lt;cflocation&gt;</code> under the hood; if you need to pass client variable information automatically in the URL for client management purposes, simply set <code>addToken=true</code>. </p> <p>You can also set the type of redirect to something other than the default <code>302</code> redirect, by passing in <code>statusCode=3xx</code>. For example, <code>301</code> indicates a permanent redirect.</p>"},{"location":"handling-requests-with-controllers/rendering-content/","title":"Rendering Content","text":"<p>A big part of a controller's task is to respond to the user. In Wheels you can\\ respond to the user in three different ways:</p> <ul> <li>Displaying content</li> <li>Redirecting to another URL</li> <li>Sending a file</li> </ul> <p>You can only respond once per request. If you do not explicitly call any of the\\ response functions ( renderView(), sendFile() etc) then Wheels will\\ assume that you want to show the view for the current controller and action and\\ do it for you.</p> <p>This chapter covers the first method listed above\u2014displaying content. The\\ chapters about Redirecting Users and Sending Files cover the other two\\ response methods.</p>"},{"location":"handling-requests-with-controllers/rendering-content/#rendering-a-page","title":"Rendering a Page","text":"<p>This is the most common way of responding to the user. It's done with the\\ renderView() function, but most often you probably won't call it\\ yourself and instead let Wheels do it for you.</p> <p>Sometimes you will want to call it though and specify to show a view page for a\\ controller/action other than the current one. One common technique for handling\\ a form submission, for example, is to show the view page for the\\ controller/action that contains the form (as opposed to the one that just\\ handles the form submission and redirects the user afterwards). When doing this,\\ it's very important to keep in mind that renderView() will\\ not run the code for the controller's action\u2014all it does is process the view\\ page for it.</p> <p>You can also call renderView() explicitly if you wish to cache the response\\ or use a different layout than the default one.</p> <p>If the <code>controller</code> and <code>action</code> arguments do not give you enough flexibility,\\ you can use the <code>template</code> argument that is available for renderView().</p> <p>Refer to the Pages chapter for more details about rendering content. More\\ specifically, that chapter describes where to place those files and what goes in\\ them.</p>"},{"location":"handling-requests-with-controllers/rendering-content/#rendering-a-partial","title":"Rendering a Partial","text":"<p>This is done with the renderPartial() function. It's most often used with\\ AJAX requests that are meant to update only parts of a page.</p>"},{"location":"handling-requests-with-controllers/rendering-content/#rendering-nothing-at-all","title":"Rendering Nothing at All","text":"<p>Sometimes you don't need to return anything at all to the browser. Perhaps\\ you've made an AJAX request that does not require a response or executed a\\ scheduled task that no end user sees the results of. In these cases you can use\\ the renderNothing() function to tell Wheels to just render an empty page to\\ the browser.</p>"},{"location":"handling-requests-with-controllers/rendering-content/#rendering-text","title":"Rendering Text","text":"<p>This is done with the renderText() function. It just returns the text you\\ specify. In reality it is rarely used but could be useful as a response to AJAX\\ requests sometimes.</p>"},{"location":"handling-requests-with-controllers/rendering-content/#rendering-to-a-variable","title":"Rendering to a Variable","text":"<p>Normally when you call any of the rendering functions, the result is stored\\ inside an internal Wheels variable. This value is then output to the browser\\ at the end of the request.</p> <p>Sometimes you may want to do some additional processing on the rendering result\\ before outputting it though. This is where the <code>returnAs</code> argument comes in\\ handy. It's available on both renderView() and renderPartial().\\ Setting <code>returnAs</code> to <code>string</code> will return the result to you instead of placing\\ it in the internal Wheels variable.</p>"},{"location":"handling-requests-with-controllers/rendering-content/#caching-the-response","title":"Caching the Response","text":"<p>Two of the functions listed above are capable of caching the content for you;\\ renderView() and renderPartial(). Just pass in <code>cache=true</code> (to use\\ the default cache time set in <code>/config/settings.cfm</code>) or <code>cache=x</code> where <code>x</code> is\\ the number of minutes you want to cache the content for. Keep in mind that this\\ caching respects the global setting set for it in your configuration files so\\ normally no pages will be cached when in Design or Development mode.</p> <p>We cover caching in greater detail in the Caching chapter.</p>"},{"location":"handling-requests-with-controllers/rendering-content/#using-a-layout","title":"Using a Layout","text":"<p>The renderView() function accepts an argument named <code>layout</code>. Using this\\ you can wrap your content with common header/footer style code. This is such an\\ important concept though so we'll cover all the details of it in the chapter\\ called Using Layouts.</p>"},{"location":"handling-requests-with-controllers/request-handling/","title":"Request Handling","text":"<p>Wheels is quite simple when it comes to figuring out how incoming requests map\\ to code in your application. Let's look at a URL for an e-commerce website and\\ dissect it a little.</p> <p>But before we do that, a quick introduction to URLs in Wheels is in order.</p>"},{"location":"handling-requests-with-controllers/request-handling/#a-wheels-url","title":"A Wheels URL","text":"<p>URLs in Wheels generally look something like this:</p> <pre><code>http://localhost/index.cfm/shop/products\n</code></pre> <p>It's also possible that the URLs will look like this in your application:</p> <pre><code>http://localhost/index.cfm?controller=shop&amp;action=products\n</code></pre> <p>This happens when your web server does not support the <code>cgi.path_info</code> variable.</p> <p>Regardless of your specific setup, Wheels will try to figure out how to handle\\ the URLs. If Wheels fails to do this properly (i.e. you know that your web\\ server supports <code>cgi.path_info</code>, but Wheels insists on creating the URLs with\\ the query string format), you can override it by setting <code>URLRewriting</code> in\\ <code>/config/settings.cfm</code> to either <code>On, Partial</code>, or <code>Off</code>. The line of code should\\ look something like this:</p> <pre><code>set(URLRewriting=\"Partial\");\n</code></pre> <p>\"Partial URL Rewriting\" is what we call that first URL up there with the\\ <code>/index.cfm/</code> format.</p> <p>In the example URLs used above, <code>shop</code> is the name of the controller to call,\\ and <code>products</code> is the name of the action to call on that controller.</p>"},{"location":"handling-requests-with-controllers/request-handling/#model-view-controller-explained","title":"Model-View-Controller Explained","text":"<p>Unless you're familiar with the Model-View-Controller pattern, you're probably\\ wondering what controllers and actions are.</p> <p>Put very simply, a controller takes an incoming request and, based on the\\ parameters in the URL, decides what (if any) data to get from the model (which\\ in most cases means your database), and decides which view (which in most cases\\ means a CFML file producing HTML output) to display to the user.</p> <p>An action is an entire process of executing code in the controller, including\\ a view file and rendering the result to the browser. As you will see in the\\ example below, an action usually maps directly to one specific function with the\\ same name in the controller file.</p>"},{"location":"handling-requests-with-controllers/request-handling/#creating-urls","title":"Creating URLs","text":"<p>Mapping an incoming URL to code is only one side of the equation. You will also\\ need a way to create these URLs. This is done through a variety of different\\ functions like linkTo() (for creating links), startFormTag() (for\\ creating forms), and redirectTo() (for redirecting users), to name a few.</p> <p>Internally, all of these functions use the same code to create the URL, namely\\ the URLFor() function. The URLFor() function accepts a controller and\\ an action argument, which are what you will use most of the time. It has a lot\\ of other arguments and does some neat stuff (like defaulting to the current\\ controller when you don't specifically pass one in). So check out the\\ documentation for the URLFor() function for all the details.</p> <p>By the way, by using URL rewriting in Apache or IIS, you can completely get rid\\ of the <code>index.cfm</code> part of the URL so that\\ <code>http://localhost/index.cfm/shop/products</code> becomes\\ <code>http://localhost/shop/products</code>. You can read more about this in the\\ URL Rewriting chapter.</p> <p>For the remainder of this chapter, we'll type out the URLs in this shorter and\\ prettier way.</p>"},{"location":"handling-requests-with-controllers/request-handling/#a-wheels-page","title":"A Wheels Page","text":"<p>Let's look a little closer at what happens when Wheels receives this example\\ incoming request.</p> <p>First, it will create an instance of the <code>shop</code> controller\\ (<code>app/controllers/Shop.cfc</code>) and call the function inside it named <code>products</code>.</p> <p>Let's show how the code for the <code>products</code> function could look to make it more\\ clear what goes on:</p> <p>{% code title=\"Shop.cfc\" %} <pre><code>component extends=\"Controller\" {\n\n    function products() {\n        renderView(controller=\"shop\", action=\"products\");\n    }\n\n}\n</code></pre> {% endcode %}</p> <p>The only thing this does is specify the view page to render using the\\ renderView() function.</p> <p>The renderView() function is available to you because the <code>shop</code> controller extends the main Wheels <code>Controller</code>component. Don't forget to include that <code>extends</code> attribute in your <code>cfcomponent</code> call as you build your controllers!</p> <p>So, how does renderView() work? Well, it accepts the arguments <code>controller</code> and <code>action</code> (among others, such as <code>route</code>), and, based on these, it will try to include a view file. In our case, the view file is stored at <code>app/views/shop/products.cfm</code>.</p> <p>You can read the chapter about Rendering Content for more information about the renderView() function.</p> <p>It's important to note that the renderView() function does not cause any controller actions or functions to be executed. It just specifies what view\\ files to get content from. Keep this in mind going forward because it's a common assumption that it does. (Especially when you want to include the view page for another action, it's easy to jump to the incorrect conclusion that the code for that action would also get executed.)</p>"},{"location":"handling-requests-with-controllers/request-handling/#wheels-conventions","title":"Wheels Conventions","text":"<p>Because Wheels favors convention over configuration, we can remove a lot of the\\ code in the example above, and it will still work because Wheels will just guess\\ what your intention is. Let's have a quick look at exactly what code can be\\ removed and why.</p> <p>The first thing Wheels assumes is that if you call renderView() without\\ arguments, you want to include the view page for the current controller and\\ action.</p> <p>Therefore, the code above can be changed to:</p> <p>{% code title=\"Shop.cfc\" %} <pre><code>component extends=\"Controller\" {\n\n    function products() {\n        renderView();\n    }\n\n}\n</code></pre> {% endcode %}</p> <p>\u2026 and it will still work just fine.</p> <p>Does Wheels assume anything else? Sure it does. You can actually remove the\\ entire renderView() call because Wheels will assume that you always want to call a view page when the processing in the controller is done. Wheels will call\\ it for you behind the scenes.</p> <p>That leaves you with this code:</p> <p>{% code title=\"Shop.cfc\" %} <pre><code>component extends=\"Controller\" {\n\n    function products() { \n    }\n\n}\n</code></pre> {% endcode %}</p> <p>That looks rather silly, a <code>products</code> function with no code whatsoever. What do\\ you think will happen if you just remove that entire function, leaving you with\\ this code?</p> <p>{% code title=\"Shop.cfc\" %} <pre><code>component extends=\"Controller\" { \n\n}\n</code></pre> {% endcode %}</p> <p>\u2026If you guessed that Wheels will just assume you don't need any code for the\\ <code>products</code> action and just want the view rendered directly, then you are correct.</p> <p>In fact, if you have a completely blank controller like the one above, you can\\ delete it from the file system altogether!</p> <p>This is quite useful when you're just adding simple pages to a website and you\\ don't need the controller and model to be involved at all. For example, you can\\ create a file named <code>about.cfm</code> in the <code>app/views/home</code> folder and access it at\\ <code>http://localhost/home/about</code> without having to create a specific controller\\ and/or action for it, assuming you're still using wildcard routing.</p> <p>This also highlights the fact that Wheels is a very easy framework to get\\ started in because you can basically program just as you normally would by\\ creating simple pages like this and then gradually \"Wheelsifying\" your code as\\ you learn the framework.</p>"},{"location":"handling-requests-with-controllers/request-handling/#the-params-struct","title":"The <code>params</code> Struct","text":"<p>Besides making sure the correct code is executed, Wheels also does something\\ else to simplify request handling for you. It combines the <code>url</code> and <code>form</code>\\ scopes into one. This is something that most CFML frameworks do as well. In\\ Wheels, it is done in the <code>params</code> struct.</p> <p>The <code>params</code> struct is available to you in the controller and view files but\\ not in the model files. (It's considered a best practice to not mix your request\\ handling with your business logic.) Besides the <code>form</code> and <code>url</code> scope\\ variables, the <code>params</code> struct also contains the current controller and action\\ name for easy reference.</p> <p>If the same variable exists in both the <code>url</code> and <code>form</code> scopes, the value in\\ the form scope will take precedence.</p> <p>To make this concept easier to grasp, imagine a login form on your website that\\ submits to <code>http://localhost/account/login?sendTo=dashboard</code> with the variables\\ <code>username</code> and <code>password</code> present in the form. Your <code>params</code> struct would look\\ like this:</p> Name Value params.controller account params.action login params.sendTo dashboard params.username joe params.password 1234 <p>Now instead of accessing the variables as <code>url.sendTo</code>, <code>form.username</code>, etc.,\\ you can just use the <code>params</code> struct for all of them instead.</p> <p>This concept becomes even more useful once we start getting into creating forms\\ specifically meant for accessing object properties. But let's save the details\\ of all that for the Form Helpers and Showing Errors chapter.</p>"},{"location":"handling-requests-with-controllers/request-handling/#json-as-part-of-the-request-body","title":"JSON as part of the request body","text":"<p>If you're constructing a JSON API, you're inevitably going to come across how to deal with \"incoming\" json packets to your routing endpoints. Instead of having to test each request with whether it's valid json etc, Wheels will automatically map the JSON body in a request to the params struct, as long as it has <code>application/json</code> as it's mime type.</p> <p>So in the same way that the <code>url</code> and <code>form</code> scopes are merged, so a valid <code>json</code> body would be. The exception to the rule is when a javascript array is the root element, where it's then added to <code>params._json</code> to follow Rails conventions. (For obvious reasons, we can't merge an array into a struct!)</p> <p>{% hint style=\"info\" %}</p>"},{"location":"handling-requests-with-controllers/request-handling/#note","title":"NOTE","text":"<p>The mapping of a json array to params._json was introduced in Wheels 2.1 {% endhint %}</p>"},{"location":"handling-requests-with-controllers/request-handling/#routing","title":"Routing","text":"<p>For more advanced URL-to-code mappings, you are encourage to use a concept called routing.\\ It allows for you to fully customize every URL in your application, including which HTTP verb can be used. You can read more about this in the chapter called Routing.</p>"},{"location":"handling-requests-with-controllers/responding-with-multiple-formats/","title":"Responding with Multiple Formats","text":"<p>If you've ever needed to create an XML or JSON API for your Wheels application,\\ you may have needed to go down the path of creating a separate controller or\\ separate actions for the new format. This introduces the need to duplicate model\\ calls or even break them out into a super long list of before filters. With\\ this, your controllers can get pretty hairy pretty fast.</p> <p>Using a few Wheels functions, you can easily respond to requests for HTML, XML,\\ JSON, and PDF formats without adding unnecessary bloat to your controllers.</p>"},{"location":"handling-requests-with-controllers/responding-with-multiple-formats/#requesting-different-formats","title":"Requesting Different Formats","text":"<p>With Wheels Provides functionality in place, you can request different formats\\ using the following methods:</p> <ol> <li>URL Variable</li> <li>URL Extension</li> <li>Request Header</li> </ol> <p>Which formats you can request is determined by what you configure in the\\ controller. See the section below on Responding to Different Formats in the\\ &amp;#xNAN;Controller for more details.</p>"},{"location":"handling-requests-with-controllers/responding-with-multiple-formats/#url-variable","title":"URL Variable","text":"<p>Wheels will accept a URL variable called <code>format</code>. If you wanted to request the\\ XML version of an action, for example, your URL call would look something like\\ this:</p> <pre><code>http://www.example.com/products?format=xml\n</code></pre> <p>The same would go for JSON:</p> <pre><code>http://www.example.com/products?format=json\n</code></pre>"},{"location":"handling-requests-with-controllers/responding-with-multiple-formats/#url-extension","title":"URL Extension","text":"<p>Perhaps a cleaner way is to request the format as a \"file\" extension. Here are\\ the XML and JSON examples, respectively:</p> <pre><code>http://www.example.com/products.xml\nhttp://www.example.com/products.json\n</code></pre> <p>This works similarly to the URL variable approach mentioned above in that\\ there will now be a key in the <code>params</code> struct set to the <code>format</code> requested.\\ With the XML example, there will be a variable at <code>params.format</code> with a value\\ of <code>xml</code>.</p>"},{"location":"handling-requests-with-controllers/responding-with-multiple-formats/#request-header","title":"Request Header","text":"<p>If you are calling the Wheels application as a web service, you can also request\\ a given format via the HTTP <code>Accept</code> header.</p> <p>If you are consuming the service with another Wheels application, your\\ <code>&lt;cfhttp&gt;</code> call would look something like this:</p> <p>In this example, we are sending an <code>Accept</code> header with the value for the <code>xml</code>\\ format.</p> <pre><code>&lt;cfhttp url=\"http://www.example.com/products\"&gt;\n    &lt;cfhttpparam type=\"header\" name=\"Accept\" value=\"application/octet-stream\"&gt;\n&lt;/cfhttp&gt;\n</code></pre> <p>Here is a list of values that you can grab from mimeTypes() with Wheels out\\ of the box.</p> <ul> <li><code>html</code></li> <li><code>xml</code></li> <li><code>json</code></li> <li><code>csv</code></li> <li><code>pdf</code></li> <li><code>xls</code></li> </ul> <p>You can use addFormat() to set more types to the appropriate MIME type for reference. For example, we could set a Microsoft Word MIME type in\\ <code>/config/settings.cfm</code> like so:</p> <pre><code>addFormat(extension=\"doc\", mimeType=\"application/msword\");\n</code></pre>"},{"location":"handling-requests-with-controllers/responding-with-multiple-formats/#responding-to-different-formats-in-the-controller","title":"Responding to Different Formats in the Controller","text":"<p>The fastest way to get going with creating your new API and formats is to call\\ provides() from within your controller's <code>config()</code> method.</p> <p>Take a look at this example:</p> <pre><code>component extends=\"Controller\" {\n\n  function config(){\n    provides(\"html,json,xml\");\n  }\n\n  function index(){\n    products = model(\"product\").findAll(order=\"title\");\n    renderWith(products);\n  }\n}\n</code></pre> <p>By calling the provides() function in <code>config()</code>, you are instructing the Wheels controller to be ready to provide content in a number of formats.\\ Possible choices to add to the list are <code>html</code> (which runs by default), <code>xml</code>,\\ <code>json</code>, <code>csv</code>, <code>pdf</code>, and <code>xls</code>.</p> <p>This is coupled with a call to renderwith() in the following actions. In the example above, we are setting a query result of products and passing it\\ to renderwith(). By passing our data to this function, Wheels gives us the ability to respond to requests for different formats, and it even gives us the option to just let Wheels handle the generation of certain formats automatically.</p> <p>You can also use the onlyProvides() call in an individual controller action to define which formats the action will respond with. This can be used to define behavior in individual actions or to override the controller's <code>config()</code>.</p> <p>When Wheels handles this response, it will set the appropriate MIME type in the\\ <code>Content-Type</code> HTTP header as well.</p>"},{"location":"handling-requests-with-controllers/responding-with-multiple-formats/#providing-the-html-format","title":"Providing the HTML Format","text":"<p>Responding to requests for the HTML version is the same as you're already used to with Rendering Content. renderwith() will accept the same arguments as renderView(), and you create just a view template in the <code>views</code> folder like normal.</p>"},{"location":"handling-requests-with-controllers/responding-with-multiple-formats/#automatic-generation-of-xml-and-json-formats","title":"Automatic Generation of XML and JSON Formats","text":"<p>If the requested format is <code>xml</code> or <code>json</code>, the renderwith() function will automatically transform the data that you provide it. If you're fine with what the function produces, then you're done!</p> <p>Best Practices for Providing JSON</p> <p>Unfortunately there have been a lot of JSON related issues in CFML over the years. To avoid as many of these problems as possible we thought we'd outline some best practices for you to follow.</p> <p>First of all, always return data as an array of structs. This is done by using the <code>returnAs</code> argument (on findAll() for example), like this:</p> <pre><code>authors = model(\"author\").findAll(returnAs=\"structs\");\n</code></pre> <p>The reason for doing it this way is that it will preserve the case for the struct / JSON keys.</p> <p>Secondly, make use of Wheels ability to return the JSON values in a specified type. This is done in the renderWith()function, like this:</p> <pre><code>renderWith(data=authors, firstName=\"string\", booksForSale=\"integer\");\n</code></pre> <p>With that in place you can be sure that <code>firstName</code> will always be treated as a string (i.e. wrap in double quotes) and <code>booksForSale</code> as an integer (i.e. no decimal places) when producing the JSON output. Without this, your CFML engine might guess what the data type is, and it wouldn't always be correct unfortunately.</p>"},{"location":"handling-requests-with-controllers/responding-with-multiple-formats/#providing-your-own-custom-responses","title":"Providing Your Own Custom Responses","text":"<p>If you need to provide content for another type than <code>xml</code> or <code>json</code>, or if you\\ need to customize what your Wheels application generates, you have that option.</p> <p>In your controller's corresponding folder in <code>app/views</code>, all you need to do is\\ implement a view file like so:</p> Type Example html app/views/products/index.cfm xml app/views/products/index.xml.cfm json app/views/products/index.json.cfm csv app/views/products/index.csv.cfm pdf app/views/products/index.pdf.cfm xls app/views/products/index.xls.cfm <p>If you need to implement your own XML-based or JSON-based output, the presence of\\ your new custom view file will override the automatic generation that Wheels\\ normally performs.</p> <p>Example: PDF Generation</p> <p>If you need to provide a PDF version of the product catalog, the view file at\\ <code>app/views/products/index.pdf.cfm</code> may look something like this:</p> <p>HTML</p> <pre><code>&lt;cfdocument format=\"pdf\"&gt;\n    &lt;h1&gt;Products&lt;/h1&gt;\n    &lt;table&gt;\n        &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;th&gt;Name&lt;/th&gt;\n                &lt;th&gt;Description&lt;/th&gt;\n                &lt;th&gt;Price&lt;/th&gt;\n            &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n            #includePartial(products)#\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n&lt;/cfdocument&gt;\n</code></pre>"},{"location":"handling-requests-with-controllers/routing/","title":"Routing","text":"<p>The Wheels routing system inspects a request's HTTP verb and URL and decides which controller and action to run.</p> <p>Consider the following request:</p> <p>{% code title=\"HTTP\" %} <pre><code>GET /products/5\n</code></pre> {% endcode %}</p> <p>The routing system may match the request to a route like this, which tells Wheels to load the <code>show</code> action on the <code>Products</code> controller:</p> <pre><code>.get(name=\"product\", pattern=\"products/[key]\", to=\"products##show\")\n</code></pre>"},{"location":"handling-requests-with-controllers/routing/#configuring-routes","title":"Configuring Routes","text":"<p>To configure routes, open the file at <code>/config/routes.cfm</code>.</p> <p>The Wheels router begins with a call to mapper(), various methods chained from that, and lastly ends with a call to <code>end()</code>.</p> <p>In many cases, if you need to know where to go in the code to work with existing functionality in an application, the <code>routes.cfm</code> file can be a handy map, telling you which controller and action to start looking in.</p>"},{"location":"handling-requests-with-controllers/routing/#how-routes-work","title":"How Routes Work","text":"<p>The various route mapping methods that we'll introduce in this chapter basically set up a list of routes, matching URL paths to a controllers and actions within your application.</p> <p>The terminology goes like this:</p>"},{"location":"handling-requests-with-controllers/routing/#name","title":"Name","text":"<p>A route name is set up for reference in your CFML code for building links, forms, and such. To build URLs, you'll use this name along with helpers like linkTo(), startFormTag(), urlFor(), and so on.</p>"},{"location":"handling-requests-with-controllers/routing/#method","title":"Method","text":"<p>A HTTP request method must be defined: <code>GET</code>, <code>POST</code>, <code>PATCH</code>, or <code>DELETE</code>.</p> <p>You typically want to require <code>POST</code>, <code>PATCH</code>, or <code>DELETE</code> when a given action changes the state of your application's data:</p> <ul> <li>Creating record(s): <code>POST</code></li> <li>Updating record(s): <code>PATCH</code></li> <li>Deleting record(s): <code>DELETE</code></li> </ul> <p>You can permit listing and showing records behind a normal HTTP <code>GET</code> request method.</p>"},{"location":"handling-requests-with-controllers/routing/#pattern-and-parameters","title":"Pattern and Parameters","text":"<p>A pattern is a URL path, sometimes with parameters in <code>[squareBrackets]</code>. Parameter values get sent to the controller in the <code>params</code> struct.</p> <p>You'll see patterns like these in routes:</p> <p>{% code title=\"Example Route Patterns\" %} <pre><code>posts/[key]/[slug]\nposts/[key]\nposts\n</code></pre> {% endcode %}</p> <p>In this example, <code>key</code> and <code>slug</code> are parameters that must be present in the URL for the first route to match, and they are required when linking to the route. In the controller, these parameters will be available at <code>params.key</code> and <code>params.slug</code>, respectively. </p> <p>When a request is made to Wheels, the router will look for the first route that matches the requested URL. As an example, this means that if <code>key</code> is present in the URL but not <code>slug</code>, then it's the second route above that will match.</p> <p>{% hint style=\"warning\" %} Please note that <code>.</code> is treated as a special characters in patterns and should generally not be used (one exception being when you are responding with multiple formats). If your parameters may have <code>.</code> in their value, please use the long form URL format: <code>/?controller=[controller_name]&amp;action=[action_name]&amp;[parameter_name]=[parameter_value]</code> {% endhint %}</p>"},{"location":"handling-requests-with-controllers/routing/#viewing-a-list-of-routes","title":"Viewing a List of Routes","text":"<p>In the debugging footer, you'll see a Routes link:</p> <p>[info, View Routes, Docs, Tests, Migrator, Plugins]</p> <p>Clicking that will load a filterable list of routes drawn in the <code>config/routes.cfm</code> file, including name, method, pattern, controller, and action.</p> <p>If you don't see debugging information at the bottom of the page, see the docs for the <code>showDebugInformation</code> setting in the Configuration and Defaults chapter.</p>"},{"location":"handling-requests-with-controllers/routing/#resource-routing","title":"Resource Routing","text":"<p>Many parts of your application will likely be CRUD-based (create, read, update, delete) for specific types of records (users, products, categories). Resources allow you to define a conventional routing structure for this common use case.</p> <p>{% hint style=\"warning\" %}</p>"},{"location":"handling-requests-with-controllers/routing/#resources-are-important","title":"Resources are important","text":"<p>You'll want to pay close attention to how resource-based routing works because this is considered an important convention in Wheels applications. {% endhint %}</p> <p>If we have a <code>products</code> table and want to have a section of our application for managing the products, we can set up the routes using the resources() method like this in <code>config/routes.cfm</code>:</p> <p>{% code title=\"/config/routes.cfm\" %} <pre><code>mapper()\n    .resources(\"products\")\n.end();\n</code></pre> {% endcode %}</p> <p>This will set up the following routes, pointing to specific actions within the <code>products</code> controller:</p> Name HTTP Verb Path Controller &amp; Action Description products GET /products products.index Display a list of all products product GET /products/[key] products.show Display a specific product newProduct GET /products/new products.new Display a form for creating a new product products POST /products products.create Create a new product record editProduct GET /products/[key]/edit products.edit Display a form for editing an existing product product PATCH/PUT /products/[key] products.update Update an existing product record product DELETE /products/[key] products.delete Delete an existing product record <p>Because the router uses a combination of HTTP verb and path, we only need 4 different URL paths to connect to 7 different actions on the controller.</p> <p>{% hint style=\"info\" %}</p>"},{"location":"handling-requests-with-controllers/routing/#whats-with-the-put","title":"What's with the <code>PUT</code>?","text":"<p>There has been some confusion in the web community on whether requests to update data should happen along with a <code>PUT</code> or <code>PATCH</code> HTTP verb. It has been settled mostly that <code>PATCH</code> is the way to go for most situations. Wheels resources set up both <code>PUT</code> and <code>PATCH</code> to address this confusion, but you should probably prefer linking up <code>PATCH</code> when you are able. {% endhint %}</p>"},{"location":"handling-requests-with-controllers/routing/#singular-resources","title":"Singular Resources","text":"<p>Standard resources using the resources() method assume that there is a primary key associated with the resource. (Notice the <code>[key]</code> placeholder in the paths listed above in the Strongly Encouraged: Resource Routing section.)</p> <p>Wheels also provides a singular resource for routing that will not expose a primary key through the URL.</p> <pre><code>mapper()\n    .resource(\"cart\")\n.end();\n</code></pre> <p>This is handy especially when you're manipulating records related directly to the user's session (e.g., a profile or a cart can be managed by the user without exposing the primary key of the underlying database records).</p> <p>Calling resource() (notice that there's no \"s\" on the end) then exposes the following routes:</p> Name HTTP Verb Path Controller &amp; Action Description cart GET /cart carts.show Display the cart newCart GET /cart/new carts.new Display a form for creating a new cart cart POST /cart carts.create Create a new cart record editCart GET /cart/edit carts.edit Display a form for editing the cart cart PATCH/PUT /cart carts.update Update the cart record cart DELETE /cart carts.delete Delete the cart <p>Note that even though the resource path is singular, the name of the controller is plural by convention.</p> <p>Also, this example is slightly contrived because it doesn't make much sense to create a \"new\" cart as a user typically just has one and only one cart tied to their session.</p>"},{"location":"handling-requests-with-controllers/routing/#defining-individual-url-endpoints","title":"Defining Individual URL Endpoints","text":"<p>As you've seen, defining a resource creates several routes for you automatically, and it is great for setting up groupings of routes for managing resources within your application.</p> <p>But sometimes you just need to define a single one-off route pattern. For this case, you have a method for each HTTP verb: get(), post(), patch(), put(), and delete().</p> <p>As a refresher, these are the intended purpose for each HTTP verb:</p> HTTP Verb Meaning GET Display a list or record POST Create a record PATCH/PUT Update a record or set of records DELETE Delete a record <p>{% hint style=\"danger\" %}</p>"},{"location":"handling-requests-with-controllers/routing/#security-warning","title":"Security Warning","text":"<p>We strongly recommend that you not allow any <code>GET</code> requests to modify resources in your database (i.e., creating, updating, or deleting records). Always require <code>POST</code>, <code>PUT</code>, <code>PATCH</code>, or <code>DELETE</code> verbs for those sorts of routing endpoints. {% endhint %}</p> <p>Consider a few examples:</p> <p>{% code title=\"/config/routes.cfm\" %} <pre><code>mapper()\n    .patch(name=\"heartbeat\", to=\"sessions##update\")\n\n    .patch(\n        name=\"usersActivate\",\n        pattern=\"users/[userKey]/activations\",\n        to=\"activations##update\"\n    )\n\n    .resources(\"users\")\n\n    .get(name=\"privacy\", controller=\"pages\", action=\"privacy\")\n    .get(name=\"dashboard\", controller=\"dashboards\", action=\"show\")\n.end();\n</code></pre> {% endcode %}</p> <p>Rather than creating a whole resource for simple one-off actions or pages, you can create individual endpoints for them.</p> <p>Notice that you can use the <code>to=\"controller##action\"</code> or use separate <code>controller</code>/<code>action</code> arguments. The <code>to</code>argument allows you to delineate <code>controller</code> and <code>action</code> within a single string using a <code>#</code> separator (which must be escaped as a double <code>##</code> because of CFML's special usage of that symbol within string syntax).</p> <p>In fact, you could mock a <code>users</code> resource using these methods like so (though obviously there is little practical reason for doing so):</p> <p>{% code title=\"/config/routes.cfm\" %} <pre><code>mapper()\n    // The following is roughly equivalent to .resources(\"users\")\n    .get(name=\"newUser\", pattern=\"users/new\", to=\"users##new\")\n    .get(name=\"editUser\", pattern=\"users/[key]/edit\", to=\"users##edit\")\n    .get(name=\"user\", pattern=\"users/[key]\", to=\"users##show\")\n    .patch(name=\"user\", pattern=\"users/[key]\", to=\"users##update\")\n    .put(name=\"user\", pattern=\"users/[key]\", to=\"users##update\")\n    .delete(name=\"user\", pattern=\"users/[key]\", to=\"users##delete\")\n    .post(name=\"users\", to=\"users##create\")\n    .get(name=\"users\", to=\"users##index\")\n.end();\n</code></pre> {% endcode %}</p> <p>If you need to limit the actions that are exposed by resources() and resource(), you can also pass in <code>only</code> or <code>except</code>arguments:</p> <p>{% code title=\"/config/routes.cfm\" %} <pre><code>mapper()\n    // Only offer endpoints for cart show, update, and delete:\n    // -  GET /cart\n    // -  PATCH /cart\n    // -  DELETE /cart\n    .resource(name=\"cart\", only=\"show,update,delete\")\n\n    // Offer all endpoints for wishlists, except for delete:\n    // -  GET /wishlists\n    // -  GET /wishlists/new\n    // -  GET /wishlists/[key]\n    // -  GET /wishlists/[key]/edit\n    // -  POST /wishlists\n    // -  PATCH /wishlists/[key]\n    .resources(name=\"wishlists\", except=\"delete\")\n.end();\n</code></pre> {% endcode %}</p>"},{"location":"handling-requests-with-controllers/routing/#browser-support-for-put-patch-and-delete","title":"Browser Support for PUT, PATCH, and DELETE","text":"<p>While web standards advocate for usage of these specific HTTP verbs for requests, web browsers don't do a particularly good job of supporting verbs other than <code>GET</code> or <code>POST</code>.</p> <p>To get around this, the Wheels router recognizes the specialized verbs from browsers (<code>PUT</code>, <code>PATCH</code>, and <code>DELETE</code>) in this way:</p> <ul> <li>Via a <code>POST</code> request with a</li> <li><code>POST</code> variable named <code>_method</code> specifying the specific HTTP verb (e.g., <code>_method=delete</code>)</li> </ul> <p>See the chapter on Linking Pages for strategies for working with this constraint.</p> <p>Note that using Wheels to write a REST API doesn't typically have this constraint. You should confidently require API clients to use the specific verbs like <code>PATCH</code> and <code>DELETE</code>.</p>"},{"location":"handling-requests-with-controllers/routing/#namespaces","title":"Namespaces","text":"<p>The Wheels router allows for namespaces: the ability to add a route to a \"subfolder\" in the URL as well as within the <code>controllers</code> folder of your application.</p> <p>Let's say that we want to have an \"admin\" section of the application that is separate from other \"public\" sections. We'd want for all of the \"admin\" controllers to be within an admin subfolder both in the URL and our application.</p> <p>That's what the namespace() method is for:</p> <pre><code>mapper()\n    .namespace(\"admin\")\n        .resources(\"products\")\n    .end()\n.end();\n</code></pre> <p>In this example, we have an admin section that will allow the user to manage products. The URL would expose the products section at <code>/admin/products</code>, and the controller would be stored at <code>app/controllers/admin/Products.cfc</code>.</p>"},{"location":"handling-requests-with-controllers/routing/#packages","title":"Packages","text":"<p>Let's say that you want to group a set of controllers together in a subfolder (aka package) in your application but don't want to affect a URL. You can do so using the <code>package</code> mapper method: </p> <pre><code>mapper()\n    .package(\"public\")\n        .resources(\"articles\")\n        .resource(\"profile\")\n    .end()\n.end();\n</code></pre> <p>With this setup, end users will see <code>/articles</code> and <code>/profile</code> in the URL, but the controllers will be located at <code>app/controllers/public/Articles.cfc</code> and <code>controllers/public/Profiles.cfc</code>, respectively.</p>"},{"location":"handling-requests-with-controllers/routing/#nested-resources","title":"Nested Resources","text":"<p>You'll often find yourself implementing a UI where you need to manipulate data scoped to a parent record. Creating nested resources allows you to reflect this nesting relationship in the URL.</p> <p>Let's consider an example where we want to enable CRUD for a <code>customer</code> and its children <code>appointment</code> records.</p> <p>In this situation, we'd perhaps want for our URL to look like this for editing a specific customer's appointment:</p> <p>{% code title=\"HTTP\" %} <pre><code>GET /customers/489/appointments/1909/edit\n</code></pre> {% endcode %}</p> <p>To code up this nested resource, we'd write this code in <code>config/routes.cfm</code>:</p> <pre><code>mapper()\n    .resources(name=\"customers\", nested=true)\n        .resources(\"appointments\")\n    .end()\n.end();\n</code></pre> <p>That will create the following routes:</p> HTTP Verb Path Controller &amp; Action Description newCustomerAppointment GET /customers/[customerKey]/appointments/new appointments.new Display a form for creating a new appointment for a specific customer customerAppointment GET /customers/[customerKey]/appointments/[key] appointments.show Display an existing appointment for a specific customer editCustomerAppointment GET /customers/[customerKey]/appointments/[key]/edit appointments.edit Display a form for editing an existing appointment for a specific customer customerAppointment PATCH/PUT /customers/[customerKey]/appointments/[key] appointments.update Update an existing appointment record for a specific customer customerAppointment DELETE /customers/[customerKey]/appointments/[key] appointments.delete Delete an existing appointment record for an specific customer customerAppointments GET /customers/[customerKey]/appointments appointments.index List appointments for a specific customer customerAppointments POST /customers/[customerKey]/appointments appointments.create Create an appointment record for a specific customer newCustomer GET /customers/new customers.new Display a form for creating a customer customer GET /customers/[key] customers.show Display an existing customer editCustomer GET /customers/[key]/edit customers.edit Display a form for editing an existing customer customer PATCH/PUT /customers/[key] customers.update Update an existing customer customer DELETE /customers/[key] customers.delete Delete an existing customer customers GET /customers customers.index Display a list of all customers customers POST /customers customers.create Create a customer <p>Notice that the routes for the <code>appointments</code> resource contain a parameter named <code>customerKey</code>. The parent resource's ID will always be represented by its name appended with <code>Key</code>. The child will retain the standard <code>key</code> ID.</p> <p>You can nest resources and routes as deep as you want, though we recommend considering making the nesting shallower after you get to a few levels deep.</p> <p>Here's an example of how nesting can be used with different route mapping methods:</p> <pre><code>mapper()\n    // /products/[key]\n    .resources(name=\"products\", nested=true)\n        // /products/[productKey]/promote\n        .patch(name=\"promote\", to=\"promotions##create\")\n        // /products/[productKey]/expire\n        .delete(name=\"expire\", to=\"expirations##create\")\n\n        // A 2nd-level resource\n        // /products/[productKey]/variations/[key]\n        .resources(name=\"variations\", nested=true)\n            // A 3rd-level resource\n            // /products/[productKey]/variations/[variationKey]/primary\n            .resource(\"primary\")\n        .end()\n    .end()\n.end();\n</code></pre>"},{"location":"handling-requests-with-controllers/routing/#wildcard-routes","title":"Wildcard Routes","text":"<p>Wheels 1.x had a default routing pattern: <code>[controller]/[action]/[key]</code>. The convention for URLs was as follows:</p> <p>{% code title=\"HTTP\" %} <pre><code>GET /news/show/5\n</code></pre> {% endcode %}</p> <p>With this convention, the URL above told Wheels to invoke the <code>show</code> action in the <code>news</code> controller. It also passed a parameter called <code>key</code> to the action, with a value of <code>5</code>.</p> <p>If you're upgrading from 1.x or still prefer this style of routing for your Wheels 2+ application, you can use the wildcard() method to enable it part of it: </p> <pre><code>mapper()\n    .wildcard()\n.end();\n</code></pre> <p>Wheels 2 will only generate routes for <code>[controller]/[action]</code>, however, because resources and the other routing methods are more appropriate for working with records identified by primary keys.</p> <p>Here is a sample of the patterns that <code>wildcard</code> generates:</p> <pre><code>/news/new\n/news/create\n/news/index\n/news\n</code></pre> <p>The <code>wildcard</code> method by default will only generate routes for the <code>GET</code> request method. If you would like to enable other request methods on the wildcard, you can pass in the <code>method</code> or <code>methods</code> argument:</p> <pre><code>mapper()\n    .wildcard(methods=\"get,post\")\n.end();\n</code></pre> <p>{% hint style=\"danger\" %}</p>"},{"location":"handling-requests-with-controllers/routing/#security-warning_1","title":"Security Warning","text":"<p>Specifying a <code>method</code> argument to <code>wildcard</code> with anything other than <code>get</code> gives you the potential to accidentally expose a route that could change data in your application with a <code>GET</code> request. This opens your application to Cross Site Request Forgery (CSRF) vulnerabilities.</p> <p><code>wildcard</code> is provided for convenience. Once you're comfortable with routing concepts in Wheels, we strongly recommend that you use resources (<code>resources</code>, <code>resource</code>) and the other verb-based helpers (<code>get</code>, <code>post</code>, <code>patch</code>, <code>put</code>, and <code>delete</code>) listed above instead. {% endhint %}</p>"},{"location":"handling-requests-with-controllers/routing/#order-of-precedence","title":"Order of Precedence","text":"<p>Wheels gives precedence to the first listed custom route in your <code>config/routes.cfm</code> file.</p> <p>Consider this example to demonstrate when this can create unexpected issues:</p> <pre><code>mapper()\n    .resources(\"users\")\n\n    .get(\n        name=\"usersPromoted\",\n        pattern=\"users/promoted\",\n        to=\"userPromotions##index\"\n    )\n.end();\n</code></pre> <p>In this case, when the user visits <code>/users/promoted</code>, this will load the <code>show</code> action of the <code>users</code> controller because that was the first pattern that was matched by the Wheels router.</p> <p>To fix this, you need the more specific route listed first, leaving the dynamic routing to pick up the less specific pattern:</p> <pre><code>mapper()\n    .get(\n        name=\"usersPromoted\",\n        pattern=\"users/promoted\",\n        to=\"userPromotions##index\"\n    )\n\n    .resources(\"users\")\n.end();\n</code></pre>"},{"location":"handling-requests-with-controllers/routing/#making-a-catch-all-route","title":"Making a Catch-All Route","text":"<p>Sometimes you need a catch-all route in Wheels to support highly dynamic websites (like a content management system, for example), where all requests that are not matched by an existing route get passed to a controller/action that can deal with it.</p> <p>Let's say you want to have both <code>/welcome-to-the-site</code> and <code>/terms-of-use</code> handled by the same controller and action. Here's what you can do to achieve this.</p> <p>First, add a new route to <code>config/routes.cfm</code> that catches all pages like this:</p> <pre><code>mapper()\n    .get(name=\"page\", pattern=\"[title]\", to=\"pages##show\")\n.end();\n</code></pre> <p>Now when you access <code>/welcome-to-the-site</code>, this route will be triggered and the <code>show</code> action will be called on the <code>pages</code> controller with <code>params.title</code> set to <code>welcome-to-the-site</code>.</p> <p>The problem with this is that this will break any of your normal controllers though, so you'll need to add them specifically before this route. (Remember the order of precedence explained above.)</p> <p>You'll end up with a <code>config/routes.cfm</code> file looking something like this:</p> <pre><code>mapper()\n    .resources(\"products\")\n    .get(name=\"logout\", to=\"sessions#delete\")\n    .get(name=\"page\", pattern=\"[title]\", to=\"pages##show\")\n    .root(to=\"dashboards##show\")\n.end();\n</code></pre> <p><code>products</code> and <code>sessions</code> are your normal controllers. By adding them to the top of the routes file, Wheels looks for them first. But your catch-all route is more specific than the site root (<code>/</code>), so your catch-all should be listed before the call to root().</p>"},{"location":"handling-requests-with-controllers/routing/#constraints","title":"Constraints","text":"<p>The constraints feature can be added either at an argument level directly into a <code>resources()</code> or other individual route call, or can be added as a chained function in it's own right. Constraints allow you to add regex to a route matching pattern, so you could for instance, have <code>/users/1/</code> and <code>/users/bob/</code> go to different controller actions.</p> <pre><code>mapper()\n   // users/1234\n  .resources(name = \"users\", constraints = { key = \"\\d+\" })\n   // users/abc123\n  .resources(name = \"users\", constraints = { key = \"\\w+\\d+\" })\n.end();\n</code></pre> <p>Constraints can also be used as a wrapping function:</p> <pre><code>mapper()\n    .constraints( key = \"\\d+\")\n        .resources(\"users\")\n        .resources(\"cats\")\n        .resources(\"dogs\")\n    .end()\n.end()\n</code></pre> <p>In this example, the <code>key</code> argument being made of digits only will apply to all the nested resources</p>"},{"location":"handling-requests-with-controllers/routing/#wildcard-segments","title":"Wildcard Segments","text":"<p>Wildcard segments allow for wildcards to be used at any point in the URL pattern.</p> <pre><code>mapper()\n  // Match /user/anything/you/want\n  .get(name=\"user/*[username]\", to=\"users##search\")\n  // Match /user/anything/you/want/search/\n  .get(name=\"user/*[username]/search\", to=\"users##search\")\n.end()\n</code></pre> <p>In the above example, <code>anything/you/want</code> you gets set to the <code>params.username</code> including the <code>/</code>'s. The second example would require <code>/search/</code> to be on the end of the URL</p>"},{"location":"handling-requests-with-controllers/routing/#shallow-resources","title":"Shallow Resources","text":"<p>If you have a nested resource where you want to enforce the presence of the parent resource, but only on creation of that resource, then shallow routes can give you a bit of a short cut. An example might be Blog Articles, which have Comments. If we're thinking in terms of our models, let's say that Articles Have Many Comments.</p> <pre><code>mapper()\n    .resources(name=\"articles\", nested=true, shallow=true)\n        .resources(\"comments\")\n        .resources(\"quotes\")\n        .resources(\"drafts\")\n    .end()\n.end()\n</code></pre> <p>Without shallow routes, this block would create RESTful actions for all the nested resources, for example <code>/articles/[articleKey]/comments/[key]</code></p> <p>With Shallow resources, we can automatically put the <code>index</code>, <code>create</code> and <code>new</code> RESTful actions with the <code>ArticleKey</code> in the URL, but then separate out <code>edit</code>, <code>show</code>, <code>update</code> and <code>delete</code> actions into their own, and simpler URL path; When we edit or update a comment, we're doing it on that object as it's own entity, and the relationship to the parent article already exists.</p> <p>So in this case, we get <code>index</code>, <code>new</code> and <code>create</code> with the <code>/articles/[articleKey]/</code> part in the URL, but to <code>show</code>, <code>edit</code>, <code>update</code> or <code>delete</code> a comment, we can just fall back to <code>/comments/</code></p>"},{"location":"handling-requests-with-controllers/routing/#member-and-collection-blocks","title":"Member and Collection Blocks","text":"<p>A <code>member()</code> block is used within a nested resource to create routes which act 'on an object'; A member route will require an ID, because it acts on a member. <code>photos/1/preview</code> is an example of a member route, because it acts on (and displays) a single object.</p> <pre><code>mapper()\n    // Create a route like `photos/1/preview`\n    .resources(name=\"photos\", nested=true)\n        .member()\n            .get(\"preview\")\n        .end()\n    .end()\n.end();\n</code></pre> <p>A collection route doesn't require an id because it acts on a collection of objects. <code>photos/search</code> is an example of a collection route, because it acts on (and displays) a collection of objects.</p> <pre><code>mapper()\n    // Create a route like `photos/search`\n    .resources(name=\"photos\", nested=true)\n        .collection()\n            .get(\"search\")\n        .end()\n    .end()\n.end();\n</code></pre>"},{"location":"handling-requests-with-controllers/routing/#redirection","title":"Redirection","text":"<p>As of Wheels 2.1, you can now use a <code>redirect</code> argument on <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>PATCH</code>, and <code>DELETE</code> requests. This will execute before reaching any controllers, and perform a <code>302</code> redirect immediately after the route is matched.</p> <p>CFScript</p> <pre><code>mapper()\n  .get(name=\"foo\", redirect=\"https://www.google.com\")\n  .post(name=\"foo\", redirect=\"https://www.google.com\")\n  .put(name=\"foo\", redirect=\"https://www.google.com\")\n  .patch(name=\"foo\", redirect=\"https://www.google.com\")\n  .delete(name=\"foo\", redirect=\"https://www.google.com\")\n.end()\n</code></pre> <p>This is useful for the occasional redirect, and saves you having to create a dedicated controller filter or action just to perform a simple task. For large amounts of redirects, you may want to look into adding them at a higher level - e.g in an Apache VirtualHost configuration, as that will be more performant.</p>"},{"location":"handling-requests-with-controllers/routing/#disabling-automatic-format-routes","title":"Disabling automatic [format] routes","text":"<p>{% hint style=\"info\" %}</p>"},{"location":"handling-requests-with-controllers/routing/#note","title":"Note","text":"<p>Introduced in Wheels 2.1 {% endhint %}</p> <p>By default, Wheels will add <code>.[format]</code> routes when using <code>resources()</code>. You may wish to disable this behavior to trim down the number of generated routes for clarity and performance reasons (or you just don't use this feature!).</p> <p>You can either disable this via <code>mapFormat = false</code> on a per resource basis, or more widely, on a mapper basis:</p> <pre><code>// For all chained calls\nmapper(mapFormat=false)\n.resources(\"users\")\n.end()\n\n// or just for this resource\nmapper()\n.resources(mapFormat=false, name=\"users)\n.end()\n</code></pre> <p>\\ \\</p>"},{"location":"handling-requests-with-controllers/sending-email/","title":"Sending Email","text":"<p>Sending emails in Wheels is done from your controller files with the sendEmail() function. It's basically a wrapper around <code>cfmail</code>, but it has some smart functionality and a more Wheels-like approach in general.</p> <p>Getting this to work in Wheels can be broken down in 3 steps. We'll walk you through them.</p>"},{"location":"handling-requests-with-controllers/sending-email/#establishing-mail-server-and-account-information","title":"Establishing Mail Server and Account Information","text":"<p>We recommend using Wheels ability to set global defaults for sendEmail() so that you don't have to specify more arguments than necessary in your controller files. Because it's likely that you will use the same mail server across your application, this makes it worthwhile to set a global default for it.</p> <p>This setting should be done in the <code>config/settings.cfm</code> file and can look something like this:</p> <p>{% code title=\"Example\" %} <pre><code>set(\n    functionName=\"sendEmail\",\n    server=\"yourServer\",\n    username=\"yourUsername\",\n    password=\"yourPassword\"\n);\n</code></pre> {% endcode %}</p> <p>By specifying these values here, these arguments can be omitted from all sendEmail() function calls, thus providing cleaner, less cluttered code.</p> <p>But you are not limited to setting only these 3 variables. In fact, you can set a global default for any optional argument to  sendEmail() and since it accepts the same arguments that <code>cfmail</code> does. That's quite a few.</p> <p>Alternatively, most modern CFML engines allow setting SMTP information directly within the application configuration. So you can actually add this in <code>/config/app.cfm</code>: here's an example configuration:</p> <p>{% code title=\"/config/app.cfm\" %} <pre><code>// Lucee:\nthis.tag.mail.server=\"smtp.mydomain.com\";\nthis.tag.mail.username=\"mySMTPUsername\";\nthis.tag.mail.password=\"mySMTPPassword\";\nthis.tag.mail.port=587; // Optional port\nthis.tag.mail.usetls=true; // Optional TLS\n\n// Adobe ColdFusion\nthis.smtpServersettings = {\n    'server' : 'smtp.thedomain.com:2525',\n    'username' : 'xxxxxxxx',\n    'password' : 'xxxxxxx'\n};\n</code></pre> {% endcode %}</p>"},{"location":"handling-requests-with-controllers/sending-email/#create-an-email-template","title":"Create an Email Template","text":"<p>An email template is required for sendEmail() to work and forms the basis for the mail message content. Think of an email template as the content of your email.</p> <p>Templates may be stored anywhere within the <code>/app/views/</code> folder, but we recommend a structured, logical approach. If different controllers utilize sendEmail()\\ and each require a unique template, place each email template within the <code>app/views/controllername</code> folder structure.</p> <p>Consider this example scenario:</p> Controller: Email Template: <code>Membership</code> <code>/app/views/membership/myemailtemplate.cfm</code> <p>Multiple templates may be stored within this directory should there be a need.</p> <p>The content of the template is simple: simply output the content and any expected variables.</p> <p>Here's an example for <code>myemailtemplate.cfm</code>, which will contain HTML content.</p> <p>{% code title=\"Example\" %} <pre><code>&lt;cfoutput&gt;\n&lt;p&gt;Hi #recipientName#,&lt;/p&gt;\n&lt;p&gt;\n    We wanted to take a moment to thank you for joining our service\n    and to confirm your start date.\n&lt;/p&gt;\n&lt;p&gt;\n    Our records indicate that your membership will begin on\n    &lt;strong&gt;#DateFormat(startDate, \"dddd, mmmm, d, yyyy\")#&lt;/strong&gt;.\n&lt;/p&gt;\n&lt;/cfoutput&gt;\n</code></pre> {% endcode %}</p>"},{"location":"handling-requests-with-controllers/sending-email/#sending-the-email","title":"Sending the Email","text":"<p>As we've said before, sendEmail() accepts all attribute of CFML's <code>cfmail</code> tag as arguments. But it also accepts any variables that you need to pass to the email template itself.</p> <p>Consider the following example:</p> <p>{% code title=\"Example\" %} <pre><code>member = model(\"member\").findByKey(newMember.id);\nsendEmail(\n    from=\"service@yourwebsite.com\",\n    to=member.email,\n    template=\"myemailtemplate\",\n    subject=\"Thank You for Becoming a Member\",\n    recipientName=member.name,\n    startDate=member.startDate\n);\n</code></pre> {% endcode %}</p> <p>Here we are sending an email by including the <code>myemailtemplate</code> template and passing values for <code>recipientName</code>and <code>startDate</code> to it.</p> <p>Note that the <code>template</code> argument should be the path to the view's folder name and template file name without the extension. If the template is in the current controller, then you don't need to specify a folder path to the template file. In that case, just be sure to store the template file in the folder with the rest of the views for that controller.</p> <p>The logic for which template file to include follows the same logic as the <code>template</code> argument to renderView().</p> <p>Did you notice that we did not have to specify the <code>type</code> attribute of <code>cfmail</code>? Wheels is smart enough to figure out that you want to send as HTML since you have tags in the email body. (You can override this behavior if necessary though by passing in the <code>type</code> argument.)</p>"},{"location":"handling-requests-with-controllers/sending-email/#multipart-emails","title":"Multipart Emails","text":"<p>The intelligence doesn't end there though. You can have Wheels send a multipart email by passing in a list of templates to the <code>templates</code> argument (notice the plural), and Wheels will automatically figure out which one is text and which one is HTML.</p> <p>Like the <code>template</code> argument, the logic for which file to include follows the same logic as the <code>template</code> argument to renderView().</p>"},{"location":"handling-requests-with-controllers/sending-email/#attaching-files","title":"Attaching Files","text":"<p>You can attach files to your emails as well by using the <code>file</code> argument (or <code>files</code> argument if you want multiple attachments). Simply pass in the name of a file that exists in the <code>public/files</code> folder (or a subfolder of it) of your application.</p> <pre><code>// Send public/files/termsAndConditions.pdf\nsendEmail(\n    to=\"tom@domain.com\",\n    from=\"tom@domain.com\",\n    template=\"/email/exampletemplate\",\n    subject=\"Test\",\n    files=\"termsAndConditions.pdf\"\n);\n</code></pre> <p>Alternatively you can pass in mail parameters directly if you require more control (such as sending a dynamically generated PDF which isn't written to disk):</p> <p>{% code title=\"Mail Example\" %} <pre><code>// Create PDF\ncfdocument(name=\"PDFContent\", format=\"pdf\"){\n  writeOutput(\"&lt;h1&gt;Cats are better than dogz!&lt;/h1&gt;\");\n};\n\n// Setup Mail Params\nmailParams[1][\"file\"]= \"Test.pdf\";\nmailParams[1][\"type\"]= \"application/pdf\";\nmailParams[1][\"content\"]= PDFContent;\n\nsendEmail(\n    to=\"tom@domain.com\",\n    from=\"tom@domain.com\",\n    template=\"/email/exampletemplate\",\n    subject=\"Test\",\n    mailParams=mailParams\n);\n</code></pre> {% endcode %}</p>"},{"location":"handling-requests-with-controllers/sending-email/#using-email-layouts","title":"Using Email Layouts","text":"<p>Much like the layouts outlined in the Layouts chapter, you can also create layouts for your emails.</p> <p>A layout should be used just as the name implies: for layout and stylistic aspects of the email body. Based on the example given above, let's assume that the same email content needs to be sent twice.</p> <ul> <li>Message is sent to a new member with a stylized header and footer.</li> <li>A copy of message is sent to an admin at your company with a generic header\\   and footer.</li> </ul> <p>Best practice is that variables (such as <code>recipientName</code> and <code>startDate</code>, in the example above) be placed as outputs in the template file.</p> <p>In this case, the two calls to sendEmail() would be nearly identical, with the exception of the <code>layout</code> argument.</p> <p>{% code title=\"Example\" %} <pre><code>// Get new member.\nmember = model(\"member\").findByKey(params.key);\n\n// Customer email with customized header/footer.\nsendEmail(\n    from=\"service@yourwebsite.com\",\n    template=\"myemailtemplate\",\n    layout=\"customer\",\n    to=member.email,\n    subject=\"Thank You for Becoming a Member\",\n    recipientName=member.name,\n    startDate=member.startDate\n);\n\n// Plain text message with \"admin\" layout.\nsendEmail(\n    from=\"service@yourwebsite.com\",\n    template=\"myemailtemplate\",\n    layout=\"admin\",\n    to=\"admin@domain.com\",\n    subject=\"Membership Verification: #member.name#\",\n    recipientName=member.name,\n    startDate=member.startDate\n);\n</code></pre> {% endcode %}</p>"},{"location":"handling-requests-with-controllers/sending-email/#multipart-email-layouts","title":"Multipart Email Layouts","text":"<p>Wheels also lets you set up layouts for the HTML and plain text parts in a multipart email.</p> <p>If we set up generic email layouts at <code>app/views/plainemaillayout.cfm</code> and <code>app/views/htmlemaillayout.cfm</code>, we would call sendEmail() like so:</p> <p>{% code title=\"Example\" %} <pre><code>// Multipart customer email.\nsendEmail(\n    from=\"service@yourwebsite.com\",\n    templates=\"/myemailtemplateplain,/myemailtemplatehtml\",\n    layouts=\"customerPlain,customerHtml\",\n    to=member.email,\n    subject=\"Thank You for Becoming a Member\",\n    recipientName=member.name,\n    startDate=member.startDate\n);\n</code></pre> {% endcode %}</p> <p>For both the <code>templates</code> and <code>layouts</code> arguments (again, notice the plurals), we provide a list of view files to use. Wheels will figure out which of the templates and layouts are the HTML versions and separate out the MIME parts for you automatically.</p>"},{"location":"handling-requests-with-controllers/sending-email/#go-send-some-emails","title":"Go Send Some Emails","text":"<p>Now you're all set to send emails the Wheels way. Just don't be a spammer, please!</p>"},{"location":"handling-requests-with-controllers/sending-files/","title":"Sending Files","text":"<p>Sending files?! Is that really a necessary feature of Wheels? Can't I just place the file on my web server and link to it? You are correct, there is absolutely no need to use Wheels to send files. Your web server will do a fine job of sending out files to your users.</p> <p>However, if you want a little more control over the way the user's browser handles the download or be able to secure access to your files then you might find the sendFile() function useful.</p>"},{"location":"handling-requests-with-controllers/sending-files/#sending-files-with-the-sendfile-function","title":"Sending Files with the sendFile() Function","text":"<p>The convention in Wheels is to place all files you want users to be able to download in the <code>public/files</code> folder.</p> <p>Assuming you've placed a file named <code>wheels_tutorial_20081028_J657D6HX.pdf</code> in that folder, here is a quick example of how you can deliver that file to the user. Let's start with creating a link to the action that will handle the sending of the file first.</p> <pre><code>&lt;p&gt;\n  #linkTo(text=\"Download Tutorial\", action=\"sendTutorial\")#\n&lt;/p&gt;\n</code></pre> <p>Now let's send the file to the user in the <code>sendTutorial</code> controller action. Just like the rendering functions in Wheels, the sendFile() function should be placed as the very last thing you do in your action code.</p> <p>In this case, that's the only thing we are doing, but perhaps you want to track how many times the file is being downloaded, for example. In that case, the tracking code needs to be placed before the sendFile() function.</p> <p>Also, remember that the sendFile() function replaces any rendering. You cannot send a file and render a page. (This will be quite obvious once you try this code because you'll see that the browser will give you a dialog box, and you won't actually leave the page that you're viewing at the time.)</p> <p>Here's the <code>sendTutorial</code> action:</p> <p>{% code title=\"Example\" %} <pre><code>function sendTutorial() {\n    sendFile(file=\"wheels_tutorial_20081028_J657D6HX.pdf\");\n}\n</code></pre> {% endcode %}</p> <p>That's one ugly file name though, eh? Let's present it to the user in a nicer way by suggesting a different name to the browser:</p> <p>{% code title=\"Example\" %} <pre><code>function sendTutorial() {\n    sendFile(file=\"wheels_tutorial_20081028_J657D6HX.pdf\", name=\"Tutorial.pdf\");\n}\n</code></pre> {% endcode %}</p> <p>Much better! :)</p> <p>By default, the sendFile() function will try and force a download dialog box to be shown to the user. The purpose of this is to make it easy for the user\\ to save the file to their computer. If you want the file to be shown inside the browser instead (when possible as decided by the browser in question), you can set the <code>disposition</code> argument to <code>inline</code>.</p> <p>Here's an example:</p> <p>Example</p> <pre><code>function sendTutorial() {\n    sendFile(file=\"wheels_tutorial_20081028_J657D6HX.pdf\", disposition=\"inline\");\n}\n</code></pre> <p>You can also specify what HTTP content type to use when delivering the file by using the <code>type</code> argument. Please refer to the API for the sendFile()\\ function for complete details.</p>"},{"location":"handling-requests-with-controllers/sending-files/#sending-files-via-ram","title":"Sending Files via ram://","text":"<p>You can even send files which are stored in <code>ram://</code> - this is particularly useful when you're dynamically creating files (such as PDF reports) which don't need to be written to the file system.</p> <p>{% code title=\"Example\" %} <pre><code>// Create the PDF.\nwheels = cfdocument(format='pdf') {\n writeOutput(Now());\n}; \n\n// Write the file to RAM.\nfileWrite(\"ram://wheels.pdf\", wheels);\n\n// Send it.\nsendFile(file=\"ram://wheels.pdf\");\n</code></pre> {% endcode %}</p>"},{"location":"handling-requests-with-controllers/sending-files/#securing-access-to-files","title":"Securing Access to Files","text":"<p>Perhaps the main reason to use the sendFile() function is that it gives you an easy way to secure access to your files. Maybe the tutorial file used in the above example is something the user paid for, and you only want for that user to be able to download it (and no one else). To accomplish this, you can just add some code to authenticate the user right before the sendFile() call in your action.</p> <p>However, there is a security flaw here. Can you figure out what it is?</p> <p>You may have guessed that the files folder is placed in your web root, so anyone can download files from it by typing <code>http://www.domain.com/files/wheels_tutorial_20081028_J657D6HX.pdf</code> in their\\ browser. Although users would need to guess the file names to be able to access the files, we would still need something more robust as far as security goes.</p> <p>There are two solutions to this.</p> <p>The easiest one is to just lock down access to the folder using your web server. Wheels won't be affected by it since it gets the file from the file system.</p> <p>If that is not an option, the other option is simply to move the files folder out of the web root, thus making it inaccessible. If you move the folder, you'll need to accommodate for this in your code by changing your sendFile() calls to specify the path as well, like this:</p> <p>{% code title=\"Example\" %} <pre><code>function sendTutorial() {\n    sendFile(file=\"../../tutorials/wheels_tutorial_20081028_J657D6HX.pdf\");\n}\n</code></pre> {% endcode %}</p> <p>This assumes you've moved the folder two levels up in your file system and into\\ a folder named \"tutorials\".</p>"},{"location":"handling-requests-with-controllers/sending-files/#dont-open-any-holes-with-url-parameters","title":"Don't Open Any Holes with URL Parameters","text":"<p>A final note of warning: Be careful to not allow just any parameters from the URL to get passed through to the sendFile() because then a user would be able to download any file from your server by playing around with the URL. Be wary of how you're using the <code>params</code> struct in this context!</p>"},{"location":"handling-requests-with-controllers/using-filters/","title":"Using Filters","text":"<p>If you find the need to run a piece of code before or after several controller actions, then you can use filters to accomplish this without needing to explicitly call the code inside each action in question.</p> <p>This is similar to using the <code>onRequestStart</code> / <code>onRequestEnd</code> functions in CFML's <code>Application.cfc</code> file, with the difference being that filters tie in better with your Wheels controller setup.</p>"},{"location":"handling-requests-with-controllers/using-filters/#an-example-authenticating-users","title":"An Example: Authenticating Users","text":"<p>One common thing you might find yourself doing is authenticating users before allowing them to see your content. Let's use this scenario to show how to use filters properly.</p> <p>You might start out with something like this:</p> <pre><code>component extends=\"Controller\" {\n\n  function secretStuff() {\n        if ( !StructKeyExists(session, \"userId\") ) {\n            abort;\n        }\n    }\n\n    function evenMoreSecretStuff() {\n        if ( !StructKeyExists(session, \"userId\") ) {\n            abort;\n        }\n    }\n\n}\n</code></pre> <p>Sure, that works. But you're already starting to repeat yourself in the code. What if the logic of your application grows bigger? It could end up looking like this:</p> <pre><code>component extends=\"Controller\" {\n\n    function secretStuff() {\n        if ( !find(\"212.55\", cgi.remote_addr) ) {\n            flashInsert(alert=\"Sorry, we're !open in that area.\");\n            redirectTo(action=\"sorry\");\n        } else if ( !StructKeyExists(session, \"userId\") ) {\n            flashInsert(alert=\"Please login first.\");\n            redirectTo(action=\"login\");\n        }\n    }\n\n    function evenMoreSecretStuff() {\n        if ( !find(\"212.55\", cgi.remote_addr) ) {\n            flashInsert(msg=\"Sorry, we're !open in that area.\");\n            redirectTo(action=\"sorry\");\n        } else if ( !StructKeyExists(session, \"userId\") ) {\n            flashInsert(msg=\"Please login first.\");\n            redirectTo(action=\"login\");\n        }\n    }\n\n}\n</code></pre> <p>Ouch! You're now setting yourself up for a maintenance nightmare when you need to update that IP range, the messages given to the user, etc. One day, you are bound to miss updating it in one of the places.</p> <p>As the smart coder that you are, you re-factor this to another function so your code ends up like this:</p> <pre><code>component extends=\"Controller\" {\n\n    function secretStuff() {\n        restrictAccess();\n    }\n\n    function evenMoreSecretStuff() {\n        restrictAccess();\n    }\n\n    function restrictAccess() {\n        if ( !find(\"212.55\", cgi.remote_addr) ) {\n            flashInsert(msg=\"Sorry, we're !open in that area.\");\n            redirectTo(action=\"sorry\");\n        } else if ( !StructKeyExists(session, \"userId\") ) {\n            flashInsert(msg=\"Please login first!\");\n            redirectTo(action=\"login\");\n        }\n    }\n\n}\n</code></pre> <p>Much better! But Wheels can take this process of avoiding repetition one step further. By placing a filters() call in the <code>config()</code> function of the controller, you can tell Wheels what function to run before any desired action(s).</p> <pre><code>component extends=\"Controller\" {\n\n    function config() {\n        filters(\"restrictAccess\");\n    }\n\n    private function restrictAccess() {\n        if ( !find(\"212.55\", cgi.remote_addr) ) {\n            flashInsert(msg=\"Sorry, we're !open in that area.\");\n            redirectTo(action=\"sorry\");\n        } else if ( !StructKeyExists(session, \"userId\") ) {\n            flashInsert(msg=\"Please login first!\");\n            redirectTo(action=\"login\");\n        }\n    }\n\n    function secretStuff() {\n    }\n\n    function evenMoreSecretStuff() {\n    }\n\n}\n</code></pre> <p>Besides the advantage of not having to call <code>restrictAccess()</code> twice, you have also gained two other things:</p> <ul> <li>The developer coding <code>secretStuff()</code> and <code>evenMoreSecretStuff()</code> can now focus on the main tasks of those two actions without having to worry about repetitive logic like authentication.</li> <li>The <code>config()</code> function is now starting to act like an overview for the entire controller.</li> </ul> <p>All of these advantages will become much more obvious as your applications grow in size and complexity. This was just a simple example to put filters into context.</p>"},{"location":"handling-requests-with-controllers/using-filters/#sharing-filters-between-controllers","title":"Sharing Filters Between Controllers","text":"<p>So far, we've only been dealing with one controller. Unless you're building a very simple website, you'll end up with a lot more.</p> <p>The question then becomes, \"Where do I place the <code>restrictAccess()</code> function so I can call it from any one of my controllers?\" The answer is that because all controllers extend <code>Controller.cfc</code>, you should probably put it there. The <code>config()</code> function itself with the call to filters() should remain inside your individual controllers though.</p> <p>If you actually want to set the same filters to be run for all controllers, you can go ahead and move it to the <code>Controller.cfc</code> file's <code>config()</code> function as well. Keep in mind that if you want to run the <code>config()</code> function in the individual controller and in <code>Controller.cfc</code>, you will need to call <code>super.config()</code> from the <code>config()</code> function of your individual controller.</p>"},{"location":"handling-requests-with-controllers/using-filters/#two-types-of-filters","title":"Two Types of Filters","text":"<p>You specify if you want to run the filter function before or after the controller action with the <code>type</code> argument to the filters() function. It defaults to running it before the action.</p> <p>The previous example with authentication showed a \"before filter\" in action. The other type of filter you can run is an \"after filter.\" As you can tell from the name, an after filter executes code after the action has been completed.</p> <p>This can be used to make some last minute modifications to the HTML before it is sent to the browser (think translation, compression, etc.), for example.</p> <p>If you want to get a copy of the content that will be rendered to the browser from an after filter, you can use the response() function. To set your changes to the response afterward, use the setResponse() function.</p> <p>As an example, let's say that you want to translate the content to Gibberish before sending it to your visitor. You can do something like this:</p> <pre><code>function config() {\n    filters(through=\"translate\", type=\"after\");\n}\n\nprivate function translate() {\n    setResponse(gibberify(response()));\n}\n</code></pre>"},{"location":"handling-requests-with-controllers/using-filters/#including-and-excluding-actions-from-executing-filters","title":"Including and Excluding Actions From Executing Filters","text":"<p>By default, filters apply to all actions in a controller. If that's not what you want, you can tell Wheels to only run the filter on the actions you specify with the <code>only</code> argument. Or you can tell it to run the filter on all actions except the ones you specify with the <code>except</code> argument.</p> <p>Here are some examples showing how to setup filtering in your controllers. Remember, these calls go inside the <code>config()</code> function of your controller file.</p> <pre><code>filters(through=\"isLoggedIn,checkIPAddress\", except=\"home,login\");\nfilters(through=\"translateText\", only=\"termsOfUse\", type=\"after\");\n</code></pre>"},{"location":"handling-requests-with-controllers/using-filters/#passing-arguments-to-filter-functions","title":"Passing Arguments to Filter Functions","text":"<p>Sometimes it's useful to be able to pass through arguments to the filters. For one, it can help you reduce the amount of functions you need to write. Here's the easy way to pass through an argument:</p> <pre><code>filters(through=\"authorize\", byIP=true);\n</code></pre> <p>Now the <code>byIP</code> argument will be available in the <code>authorize</code> function.</p> <p>To help you avoid any clashing of argument names, Wheels also supports passing in the arguments in a struct as well:</p> <pre><code>// The `through` argument would clash here if it wasn't stored within a struct\nargs.byIP = true;\nargs.through = true;\nfilters(through=\"authorize\", authorizeArguments=args);\n</code></pre>"},{"location":"handling-requests-with-controllers/using-filters/#evaluating-filter-arguments-at-runtime","title":"Evaluating Filter Arguments at Runtime","text":"<p>Because your controller's <code>config()</code> function only runs once per application start, the passing of arguments can also be written as expressions to be evaluated at runtime. This is helpful if you need for the value to be dynamic from request to request.</p> <p>For example, this code would only evaluate the value for <code>request.region</code> on the very first request, and Wheels will store that particular value in memory for all subsequent requests:</p> <pre><code>// This is probably not what you intended\nfilters(through=\"authorize\", byIP=true, region=request.region);\n</code></pre> <p>To avoid this hard-coding of values from request to request, you can instead pass an expression. (The double pound signs are necessary to escape dynamic values within the string. We only want to store a string representation of the expression to be evaluated.)</p> <pre><code>// This is probably more along the lines of what you intended\nfilters(through=\"authorize\", byIP=true, region=\"##request.region##\");\n</code></pre> <p>Now instead of evaluating <code>request.region</code> inside the <code>config()</code> function, it will be done on each individual request.</p>"},{"location":"handling-requests-with-controllers/using-filters/#securing-your-filters","title":"Securing Your Filters","text":"<p>You probably don't want anyone to be able to run your filters directly (by modifying a URL on your website for example). To make sure that isn't possible we recommend that you always make them private. As you can see in all examples on this page we make sure that we always have <code>access=\"private\"</code> in the function declaration for the filter.</p>"},{"location":"handling-requests-with-controllers/using-filters/#low-level-access","title":"Low Level Access","text":"<p>If you need to access your filters on a lower level, you can do so by using the filterChain() and setFilterChain()functions. Typically, you'll want to call  filterChain() to return an array of all the filters set on the current controller, make your desired changes, and save it back using the setFilterChain() function.</p>"},{"location":"handling-requests-with-controllers/using-the-flash/","title":"Using the Flash","text":"<p>The Flash is actually a very simple concept. And no, it has nothing to do with\\ Adobe's Flash Player.</p> <p>The Flash is just a struct in the <code>session</code> or <code>cookie</code> scope with some added\\ functionality. It is cleared at the end of the next page that the user views.\\ This means that it's a good fit for storing messages or variables temporarily\\ from one request to the next.</p> <p>By the way, the name \"Flash\" comes from Ruby on Rails, like so many other cool\\ things in Wheels.</p>"},{"location":"handling-requests-with-controllers/using-the-flash/#an-example-of-using-the-flash","title":"An Example of Using the Flash","text":"<p>The code below is commonly used in Wheels applications to store a message about\\ an error in the Flash and then redirect to another URL, which then displays the message in its view page.</p> <p>The following example shows how code dealing with the Flash can look in an\\ action that handles a form submission.</p> <pre><code>function update() {\n    if ( user.update(params.user) ) {\n        flashInsert(success=\"The user was updated successfully.\");\n        redirectTo(action=\"edit\");\n    } else {\n        renderView(action=\"edit\");\n    }\n}\n</code></pre> <p>Here's an example of how we then display the Flash message we just set in the\\ view page for the <code>edit</code> action. Please note that this is done on the next\\ request since we performed a redirect after setting the Flash.</p> <pre><code>&lt;cfoutput&gt;\n&lt;p class=\"success-message\"&gt;\n    #flash(\"success\")#\n&lt;/p&gt;\n&lt;/cfoutput&gt;\n</code></pre> <p>As you can see above, you use the flashInsert() function with a named argument when you want to store data in the Flash and the flash() function when you want to display the data in a view.</p> <p>The key chosen above is <code>success</code>, but it could have been anything that we wanted. Just like with a normal struct, the naming of the keys is your job.</p> <p>As an example, you may choose to use one key for storing messages after the user made an error, called <code>error</code>, and another one for storing messages after a successful user operation, called <code>success</code>.</p>"},{"location":"handling-requests-with-controllers/using-the-flash/#shortcut-for-setting-the-flash-and-redirecting","title":"Shortcut for Setting the Flash and Redirecting","text":"<p>The more you work with Wheels and the Flash, the more that you're going to find\\ that you keep repeating that flashInsert()/ redirectTo() combo all\\ the time. Wheels has a solution for that within the redirectTo() function\\ itself: </p> <pre><code>redirectTo(action=\"edit\", success=\"The user was updated successfully.\");\n</code></pre> <p>That piece of code does exactly the same thing as the example shown previously\\ in this chapter. The Wheels redirectTo() function sees the <code>success</code>\\ argument coming in and knows that it's not part of its own declared arguments.</p> <p>Therefore, you (the developer) must intend for it to be stored in the Flash,\\ so Wheels goes ahead and calls <code>flashInsert(success=\"The user was updated successfully.\")</code>\\ for you behind the scenes.</p>"},{"location":"handling-requests-with-controllers/using-the-flash/#prepend-with-flash-for-argument-names-that-collide-with-redirecttos","title":"Prepend with flash for Argument Names that Collide with redirectTos","text":"<p>So what if you want to redirect to the <code>edit</code> action and set a key in the Flash\\ named <code>action</code> as well? Simply prepend the key with <code>flash</code> to tell Wheels to\\ avoid the argument naming collision.</p> <p>CFScript</p> <pre><code>redirectTo(action=\"edit\", flashAction=\"The user was updated successfully.\");\n</code></pre> <p>We don't recommend naming the keys in your Flash <code>action</code>, but these naming\\ collisions can potentially happen when you want to redirect to a route that\\ takes custom arguments, so remember this workaround.</p>"},{"location":"handling-requests-with-controllers/using-the-flash/#more-flashy-functions","title":"More Flashy Functions","text":"<p>Besides flash() and flashInsert() that are used to read\\ from/insert to the Flash, there are a few other functions worth mentioning.</p> <p>flashCount() is used to count how many key/value pairs there are in the\\ Flash.</p> <p>flashClear() and flashDelete() do exactly the same as their\\ counterparts in the struct world, <code>StructClear</code> and <code>StructDelete</code>\u2014they clear\\ the entire Flash and delete a specific key/value from it, respectively.</p> <p>flashKeyExists() is used to check if a specific key exists. So it would\\ make sense to make use of that function in the code listed above to avoid\\ outputting an empty <code>&lt;p&gt;</code> tag on requests where the Flash is empty.\\ ( flash() will return an empty string when the specified key does not\\ exist.)</p> <p>Check out the Controller &gt; Flash Functions section in the API listing of all the functions that deal with the Flash.</p>"},{"location":"handling-requests-with-controllers/using-the-flash/#wholesale-flash-handling-with-flashmessages","title":"Wholesale Flash Handling with flashMessages()","text":"<p>Throw the flashIsEmpty() function into the mix, and you might find\\ yourself writing code across your Wheels projects that looks something like\\ this: </p> <pre><code>&lt;cfoutput&gt;\n\n&lt;cfif NOT flashIsEmpty()&gt;\n    &lt;div id=\"flash-messages\"&gt;\n        &lt;cfif flashKeyExists(\"error\")&gt;\n            &lt;p class=\"errorMessage\"&gt;\n                #flash(\"error\")#\n            &lt;/p&gt;\n        &lt;/cfif&gt;\n        &lt;cfif flashKeyExists(\"success\")&gt;\n            &lt;p class=\"successMessage\"&gt;\n                #flash(\"success\")#\n            &lt;/p&gt;\n        &lt;/cfif&gt;\n    &lt;/div&gt;\n&lt;/cfif&gt;\n\n&lt;/cfoutput&gt;\n</code></pre> <p>All of that above code can be replaced with a single call to the flashMessages() function:</p> <pre><code>&lt;cfoutput&gt;\n#flashMessages()#\n&lt;/cfoutput&gt;\n</code></pre> <p>Whenever any value is inserted into the Flash, flashMessages() will\\ display it similarly to the complex example above, with <code>class</code> attributes set\\ similarly (<code>errorMessage</code> for the <code>error</code> key and <code>successMessage</code> for the\\ <code>success</code> key).</p> <p>You can also use flashMessages()'s <code>key/keys</code> argument to limit its reach\\ to a list of given keys. Let's say that we only want our layout to show messages\\ for the <code>alert</code> key but not for the <code>error</code> or <code>success</code> keys (or any other for\\ that matter). We would write our call like so:</p> <pre><code>&lt;cfoutput&gt;\n#flashMessages(key=\"alert\")#\n&lt;/cfoutput&gt;\n</code></pre> <p>Just keep in mind that this approach isn't as flexible, so if you need to\\ customize the markup of the messages beyond flashMessages()'s\\ capabilities, you should revert back to using flashIsEmpty(),\\ flash(), and other related functions manually.</p>"},{"location":"handling-requests-with-controllers/using-the-flash/#flash-storage-options","title":"Flash Storage Options","text":"<p>Earlier, we mentioned that the data for the Flash is stored in either the\\ <code>cookie</code> or the <code>session</code> scope. You can find out where Wheels stores the Flash\\ data in your application by outputting <code>get(\"flashStorage\")</code>. If you have\\ session management enabled in your application, Wheels will default to storing\\ the Flash in the <code>session</code> scope. Otherwise, it will store it in a cookie on the\\ user's computer.</p> <p>You can override this setting in the same way that you override other Wheels\\ settings by running the set() function like this:</p> <pre><code>// In `config/settings.cfm` or another `settings.cfm` file within the `config` subfolders\nset(flashStorage=\"session\");\n</code></pre> <p>Note: Before you set Wheels to use the <code>session</code> scope, you need to make sure\\ that session management is enabled. To enable it, all you need to do is add\\ <code>this.SessionManagement = true</code> to the <code>/config/app.cfm</code> file.</p>"},{"location":"handling-requests-with-controllers/using-the-flash/#changing-flash-storage-dynamically-during-a-request","title":"Changing Flash Storage Dynamically During a Request","text":"<p>From Wheels 3.0, you now have the ability to dynamically change the flash storage\\ during the lifecycle of a controller or request or the complete application using\\ the <code>setFlashStorage()</code> function.</p> <p>This can be helpful if you need to switch between using session-based or\\ cookie-based flash storage at runtime depending on the context of the request.</p> <pre><code>// Inside your controller action\nsetFlashStorage(\"cookie\");\n</code></pre> <p>By default, it changes the storage for the current controller only. However,\\ if you want to change it globally for all subsequent requests (until changed\\ again), you can pass a second argument <code>setGlobally=true</code>:</p> <pre><code>// Change globally for the entire application\nsetFlashStorage(\"session\", true);\n</code></pre> <p>The storage argument accepts only <code>session</code> or <code>cookie</code>. If any other value is\\ passed, Wheels will simply ignore the change (no error will be thrown). Always make sure to pass a valid storage type to avoid unexpected behavior.</p> <p>Note: Be careful when changing flash storage dynamically during requests,\\ as it will change the entire application's flash scope depending on the settings\\ and this may result in logical errors depending on your flash settings,\\ especially if your application relies heavily on a consistent flash\\ storage mechanism across multiple requests or clusters.</p>"},{"location":"handling-requests-with-controllers/using-the-flash/#choosing-a-storage-method","title":"Choosing a Storage Method","text":"<p>So what storage option should you choose? Well, to be honest, it doesn't really\\ matter that much, so we recommend you just go with the default setting. If\\ you're a control freak and always want to use the optimal setting, here are some\\ considerations.</p> <ul> <li>Although the Flash data is deserialized before stored in a cookie (making it\\   possible to store complex values), you need to remember that a cookie is not the\\   best place to store data that requires a lot of space.</li> <li>If you run multiple ColdFusion servers in a clustered environment and use\\   session-based Flash storage, users might experience a loss of their Flash\\   variables as their request gets passed to other servers.</li> <li>Using cookies is, generally speaking, less secure than using the <code>session</code>\\   scope. Users could open their cookie file up and manually change its value.\\   Sessions are stored on the server, out of users' reach.</li> </ul>"},{"location":"handling-requests-with-controllers/using-the-flash/#appending-to-rather-than-replacing-the-flash","title":"Appending to, rather than replacing the flash","text":"<p>From Wheels 2.1, you can now change the default flash behavior to append to an existing key, rather than directly replacing it. To turn on this behavior, add <code>set(flashAppend=true)</code> to you <code>/config/settings.cfm</code> file.</p> <p>An example of where this might be useful:</p> <pre><code>// In your controller\nif( thingOneHappened ){\n  flashInsert(info=\"Thing One Happened\");\n}\nif( thingTwoHappened ){\n  flashInsert(info=\"Thing Two Happened\");\n}\n</code></pre> <p>Which, when output via <code>flashMessages()</code> would render:</p> <pre><code>&lt;div class=\"\"flash-messages\"\"&gt;\n  &lt;p class=\"\"info-message\"\"&gt;Thing One Happened&lt;/p&gt;\n  &lt;p class=\"\"info-message\"\"&gt;Thing Two Happened&lt;/p&gt;\n&lt;/div&gt;\n</code></pre> <p>With <code>set(flashAppend=true)</code>, you can also directly pass in an array of strings like so:</p> <pre><code>msgs=[\n   \"Thing One Happened\", \"Thing Two Happened\"\n];\nflashInsert(info=msgs);\n</code></pre>"},{"location":"handling-requests-with-controllers/using-the-flash/#disabling-the-flash-cookie","title":"Disabling the Flash Cookie","text":"<p>In <code>2.2</code> upwards:</p> <p>There are certain circumstances where you might not be using the flash: for example, if you have wheels setup as a stateless API (perhaps in a cluster behind a load balancer) where you're using tokens vs sessions. In this circumstance, you've probably turned off session management, which only leaves <code>cookie</code> as a viable route. But if set to <code>cookie</code>, you always get <code>Set-Cookie</code> being returned, which is unnecessary.</p> <p>In wheels 2.2 you can now <code>set(flashStorage = \"none\")</code> which will prevent the creation of the cookie, and also not try and write to a session.</p>"},{"location":"handling-requests-with-controllers/verification/","title":"Verification","text":"<p>Verification, through the verifies() function, is just a special type of filter that runs before actions. With verifications defined in your controller, you can eliminate the need for wrapping your entire actions in <code>&lt;cfif&gt;</code> blocks checking for the existence and types of variables. You also can limit your actions' scopes to specific request types like <code>post, get</code>, and AJAX requests.</p>"},{"location":"handling-requests-with-controllers/verification/#using-verifies-to-enforce-request-types","title":"Using verifies() to Enforce Request Types","text":"<p>Let's say that you want to make sure that all requests coming to a page that handles form submissions are <code>post</code>requests. While you can do this with a filter and the isPost() function, it is more convenient and DRY to do it with the verifies() function.</p> <p>All that you need to do is add this line to your controller's <code>config()</code> function:</p> <pre><code>// In the controller\nfunction config(){\n    verifies(only=\"create,update\", post=true);\n}\n</code></pre> <p>The code above will ensure that all requests coming to the <code>create</code> and <code>update</code> actions are from form submissions. All other requests will be aborted.</p> <p>There are also boolean arguments for <code>get</code> and <code>ajax</code> request types.</p>"},{"location":"handling-requests-with-controllers/verification/#defining-a-handler-for-failed-verifications","title":"Defining a Handler for Failed Verifications","text":"<p>You can also specify different behavior for when the verification fails in a special <code>handler</code> function registered with the handler argument.</p> <p>In this example, we register the <code>incorrectRequestType()</code> function as the handler:</p> <pre><code>// In the controller\nfunction config(){\n    verifies(\n        only=\"create,update\",\n        post=true,\n        handler=\"incorrectRequestType\";\n}  \n\nfunction incorrectRequestType(){\n    redirectTo(action=\"accessDenied\");\n}\n</code></pre> <p>Note that you have to either do a redirectTo() call or abort the request completely after you've done what you wanted to do inside your handler function. If you don't do anything at all and just let the function exit on its own, Wheels will redirect the user back to the page they came from. In other words, you cannot render any content from inside this function but you can let another function handle that part by redirecting to it.</p>"},{"location":"handling-requests-with-controllers/verification/#enforcing-the-existence-and-type-of-variables","title":"Enforcing the Existence and Type of Variables","text":"<p>A very convenient and common use of verifies() is when you want to make sure that a variables exists and is of a certain type; otherwise, you would like for your controller to redirect the user to a different page.</p> <p>Step back in time for a moment and remember how you used to code websites before Wheels. (Yes I know those were dark days, but stay with me.)</p> <p>On your <code>edit.cfm</code> page, what you probably did was write some code at the top of that looked like this:</p> <pre><code>&lt;cfif !StructKeyExists(form, \"userId\") OR !IsValid(\"guid\", form.userId)&gt;\n    &lt;cflocation url=\"index.cfm\" addToken=\"false\"&gt;\n&lt;/cfif&gt;\n</code></pre> <p>With this snippet of code, you could ensure that any request to the <code>edit.cfm</code> had to have the <code>userId</code> in the form scope and that <code>userId</code> had to be of type <code>guid</code>. If these conditions weren't met, the request was redirected to the <code>index.cfm</code> page. This was a very tedious but necessary task.</p> <p>Now let's see how using the verifies() function within Wheels improves this:</p> <pre><code>// In the controller \nfunction config(){\n   verifies(\n        only=\"edit\",\n        post=true,\n        params=\"userId\",\n        paramsTypes=\"guid\",\n        action=\"index\",\n        error=\"Invalid user ID.\"\n    );\n}\n</code></pre> <p>With that one line of code, Wheels will perform the following checks when a request is made to the controller's <code>edit</code>action:</p> <ul> <li>Make sure that the request is a <code>post</code> request.</li> <li>Make sure that the <code>userId</code> variable exists in the <code>params</code> struct.</li> <li>Make sure that the <code>params.userId</code> is of type<code>guid</code>.</li> <li>If any of those checks fail, redirect the request to the <code>index</code> action and place an error key in the Flash containing the message \"Invalid user ID.\"</li> </ul> <p>All that functionality in only one line of code!</p> <p>What if you wanted do this for two or more variables? The <code>params</code> and <code>paramsTypes</code> each accept a list so you can include as many variables to check against as you want.</p> <p>The only thing you need to make sure of is that the number of variables in the <code>params</code> list matches the number types to check against in the <code>paramsTypes</code> list. This also goes for the <code>session/sessionTypes</code> and <code>cookie/cookieTypes</code>arguments, which check for existence and type in the <code>session</code> and <code>cookie</code> scopes, respectively.</p>"},{"location":"handling-requests-with-controllers/verification/#controller-verification-vs-model-object-validation","title":"Controller Verification vs. Model Object Validation","text":"<p>verifies() exists solely to validate controller and environment level variables and is not a substitute for Object Validationin your model.</p> <p>A basic example of this is to validate params passed through to your controller from routes. Suppose we have the following route in our application:</p> <pre><code>.post(name=\"usersAddressesSave\",\n      pattern=\"admin/users/[userid]/addresses/save\",\n      to=\"UserAddresses##save\")\n</code></pre> <p>In this example, we will want to verify that the <code>userId</code> integer and <code>address</code> struct are both present in the <code>params</code>struct and also that <code>userId</code> is of a certain type:</p> <pre><code>verifies(\n    only=\"save\",\n    post=true,\n    params=\"userId,address\",\n    paramsTypes=\"integer,struct\"\n)&gt;\n</code></pre> <p>However, verifies() should not be used to make sure that values within the address struct themselves are valid (such as making sure that <code>address.zipCode</code> is correct). Because the <code>address</code> struct will be passed in to the model, the validation will be performed there.</p>"},{"location":"handling-requests-with-controllers/url-rewriting/","title":"URL Rewriting","text":"<p>URL rewriting is a completely optional feature of Wheels, and all it does is get rid of the <code>index.cfm</code> part of the URL.</p> <p>For example, with no URL rewriting, a URL in your application could look like this:</p> <p>{% code title=\"HTTP\" %} <pre><code>http://localhost/index.cfm/blog/new\n</code></pre> {% endcode %}</p> <p>After turning on URL rewriting, it would look like this:</p> <p>{% code title=\"HTTP\" %} <pre><code>http://localhost/blog/new\n</code></pre> {% endcode %}</p> <p>Combine this with the routing functionality of Wheels, and you get the capability of creating some really human-friendly (easier to remember, say over the phone, etc.) and search engine friendly (easier to crawl, higher PageRank, etc.) URLs.</p> <p>Once you have added the rewrite rules (usually in either <code>.htaccess</code>, <code>web.config</code> or <code>urlrewrite.xml</code>), Wheels will try and determine if your web server is capable of rewriting URLs and turn it on for you automatically. Depending on what web server you have and what folder you run Wheels from, you may need to tweak things a little though. Follow these instructions below for details on how to set up your web server and customize the rewrite rules when necessary.</p> <p>{% hint style=\"info\" %}</p>"},{"location":"handling-requests-with-controllers/url-rewriting/#heads-up","title":"Head's Up!","text":"<p>Since 2.x, engine specific URL rewrite files are not included in the default distribution. Don't worry - we've got you covered though! {% endhint %}</p> <p>For webserver specific instructions look at the following pages:</p> <ul> <li>Apache</li> <li>IIS</li> <li>Tomcat</li> <li>Nginx</li> </ul>"},{"location":"handling-requests-with-controllers/url-rewriting/#dont-forget-to-restart","title":"Don't Forget to Restart","text":"<p>If you need to make changes to get URL rewriting to work, it's important to remember to always restart the web server and the ColdFusion server to make sure the changes are picked up by Wheels.</p> <p>If you don't have access to restart services on your server, you can issue a <code>reload=true</code> request. It's often enough.</p>"},{"location":"handling-requests-with-controllers/url-rewriting/apache/","title":"Apache","text":""},{"location":"handling-requests-with-controllers/url-rewriting/apache/#instructions-for-apache","title":"Instructions for Apache","text":"<p>First in your web.xml add the following servlet mapping above the default servlet mapping:</p> <p>{% code title=\"web.xml\" %} <pre><code> &lt;!-- The mapping for rewriting --&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;CFMLServlet&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/rewrite.cfm/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n</code></pre> {% endcode %}</p> <p>For this you can use the global web.xml that for instance can be found at: /opt/lucee/tomcat/conf/web.xml. Or, if you are on shared hosting, use a local web.xml that for instance can be found at: yourwebroot/WEB-INF/web.xml.</p> <p>After that use the following <code>.htaccess</code> file and Apache will pick up and use them automatically on server start-up.</p> <p>Most of the time this will work. There are some exceptions though...</p> <p>If you have installed Apache yourself you may need to turn on the rewrite module and/or change the security settings before URL rewriting will work:</p> <ul> <li>Check that the Apache <code>rewrite_module</code> has been loaded by ensuring there are no pound signs before the line that says <code>LoadModule rewrite_module modules/mod_rewrite.so</code> in the <code>httpd.conf</code> file.</li> <li>Make sure that Apache has permission to load the rewrite rules from the <code>.htaccess</code> file. This is done by setting <code>AllowOverride</code> to <code>All</code> under the Directory section corresponding to the website you plan on using Wheels on (still inside the <code>httpd.conf</code> file).</li> </ul> <p>If you have an older version of Apache and you're trying to run your Wheels site in a sub folder of an existing site you may need to hard code the name of this folder in your rewrite rules.</p> <ul> <li>Change the last line of the <code>.htaccess</code> file to the following: <code>RewriteRule ^(.*)$ /sub_folder_name_goes_here/rewrite.cfm/$1 [L]</code>. Don't forget to change <code>sub_folder_name_goes_here</code> to the actual folder name first of course.</li> </ul> <p>{% code title=\".htaccess\" %} <pre><code>Options +FollowSymLinks\nRewriteEngine On\nRewriteCond %{REQUEST_URI} ^.*/index.cfm/(.*)$ [NC]\nRewriteRule ^.*/index.cfm/(.*)$ ./rewrite.cfm/$1 [NS,L]\nRewriteCond %{REQUEST_URI} !^.*/(flex2gateway|jrunscripts|cfide|cf_scripts|cfformgateway|cffileservlet|lucee|files|images|javascripts|miscellaneous|stylesheets|wheels/public/assets|robots.txt|favicon.ico|sitemap.xml|rewrite.cfm)($|/.*$) [NC]\nRewriteRule ^(.*)$ ./rewrite.cfm/$1 [NS,L]\n</code></pre> {% endcode %}</p> <p>Note that it's often considered better practice to include this URL rewriting configuration at the <code>&lt;virtualhost&gt;</code> block level, but get it working with a <code>.htaccess</code> file first.</p>"},{"location":"handling-requests-with-controllers/url-rewriting/iis/","title":"IIS","text":""},{"location":"handling-requests-with-controllers/url-rewriting/iis/#instructions-for-iis-7","title":"Instructions for IIS 7","text":"<p>Similar to Apache, IIS 7 will pick up the rewrite rules from a file located in the Wheels installation. In the case of IIS 7, the rules are picked up by adding the following <code>web.config</code> file. </p> <p>This requires that the URL Rewrite Module is installed. It's an IIS extension from Microsoft that you can download for free.</p> <p>{% code title=\"web.config\" %} <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;configuration&gt;\n    &lt;system.webServer&gt;\n        &lt;rewrite&gt;\n            &lt;rules&gt;\n                &lt;rule name=\"ColdFusion on Wheels URL Rewriting\" enabled=\"true\"&gt;\n                    &lt;match url=\"^(.*)$\" ignoreCase=\"true\" /&gt;\n                    &lt;conditions logicalGrouping=\"MatchAll\"&gt;\n                        &lt;add input=\"{SCRIPT_NAME}\" negate=\"true\" pattern=\"^/(flex2gateway|jrunscripts|cf_scripts|cfide|CFFileServlet|cfformgateway|lucee|files|images|javascripts|miscellaneous|stylesheets|wheels/public/assets|robots.txt|favicon.ico|sitemap.xml|rewrite.cfm)($|/.*$)\" /&gt;\n                    &lt;/conditions&gt;\n                    &lt;action type=\"Rewrite\" url=\"/rewrite.cfm/{R:1}\" /&gt;\n                &lt;/rule&gt;\n            &lt;/rules&gt;\n        &lt;/rewrite&gt;\n    &lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre> {% endcode %}</p> <p>{% hint style=\"info\" %}</p>"},{"location":"handling-requests-with-controllers/url-rewriting/iis/#missing-lucee-assets","title":"Missing Lucee Assets?","text":"<p>If you had an issue with missing Lucee CSS files, try changing<code>{SCRIPT_NAME}</code>to<code>{PATH_INFO}</code>in the code above, as this reportedly can resolve the issue. {% endhint %}</p>"},{"location":"handling-requests-with-controllers/url-rewriting/iis/#instructions-for-iis-6","title":"Instructions for IIS 6","text":"<p>{% hint style=\"danger\" %}</p>"},{"location":"handling-requests-with-controllers/url-rewriting/iis/#deprecated","title":"Deprecated","text":"<p>Please note that IIS6 was official End of Life as of 2015. These notes are included for historical purposes only. {% endhint %}</p> <p>Unfortunately, there is no built-in URL rewriting mechanism in IIS 6, so getting Wheels working with pretty URLs is a little more complicated than with Apache and IIS 7 (which often comes with the official \"URL Rewrite Module\" installed by default). Here's what you need to do:</p> <ul> <li>Download Ionic's ISAPI Rewrite Filter. NOTE: the version must be v1.2.16 or later.</li> <li>Unzip the file, get the <code>IsapiRewrite4.dll</code> file from the lib folder and put it in the root of your website. (It needs to be in the same folder as the <code>IsapiRewrite4.ini</code> file.)</li> <li>To enable the rewrite filter in IIS 6, click on Properties for your website, then go to the ISAPI Filters tab and click the Add... button.</li> <li>Type in anything you want as the Filter Name and point the Executable to the <code>IsapiRewrite4.dll</code> file.</li> <li>Uncomment the rewrite rules in the <code>IsapiRewrite4.ini</code> file.</li> </ul> <p>NOTE: Make sure you have \"Verify that file exists\" disabled for your site.</p> <ul> <li>Right click your website and select Properties.</li> <li>Click Home Directory tab.</li> <li>Click the Configuration button.</li> <li>Under the Wildcard application mapping section, double-click path for the <code>jrun_iis6_wildcard.dll</code>.</li> <li>Uncheck Verify that file exists.</li> <li>Click OK until all property screens are closed.</li> </ul>"},{"location":"handling-requests-with-controllers/url-rewriting/nginx/","title":"Nginx","text":"<p>Example Nginx configuration</p> <pre><code># nginx configuration \nlocation ~ .*/(flex2gateway|jrunscripts|cfide|cf_scripts|cfformgateway|cffileservlet|railo-context|lucee|files|images|javascripts|miscellaneous|stylesheets|robots.txt|favicon.ico|sitemap.xml|rewrite.cfm)($|/.*$) { }\n\nlocation / {\nrewrite ^(.*)$ https://YOURDOMAIN.com/$1 redirect; \nrewrite ^/.*/index.cfm/(.*)$ /rewrite.cfm/$1 break; \nrewrite ^(.*)$ /rewrite.cfm/$1 break; \n}\n</code></pre>"},{"location":"handling-requests-with-controllers/url-rewriting/tomcat/","title":"Tomcat","text":""},{"location":"handling-requests-with-controllers/url-rewriting/tomcat/#using-rewrite-valve","title":"Using rewrite Valve","text":"<p>Tomcat 8 can be configured using <code>RewriteValve</code>. See http://tonyjunkes.com/blog/a-brief-look-at-the-rewrite-valve-in-tomcat-8/ for examples.</p>"},{"location":"handling-requests-with-controllers/url-rewriting/tomcat/#instructions-for-urlrewritefilter","title":"Instructions for UrlRewriteFilter","text":"<p>UrlRewriteFilter (commonly referred to as Tuckey) is a Java web filter for compliant web application servers such as Tomcat, Jetty, Resin and JBoss. Unfortunately UrlRewriteFilter depends on XML with its extremely strict syntax.</p> <ul> <li>First follow the (install instructions on the UrlRewriteFilter website).</li> <li>Append the servlet-mapping markup to the end of the <code>&lt;filter mapping&gt;</code> element in your <code>WEB-INF/web.xml</code></li> <li>Add the pretty urls rule markup to the <code>&lt;urlrewrite&gt;</code> element to your <code>WEB-INF/urlrewrite.xml</code> configuration.</li> <li>Restart the web application server.</li> </ul> <p>Servlet-Mapping markup</p> <p>{% code title=\"servlet-mapping\" %} <pre><code>&lt;servlet-mapping&gt;\n  &lt;servlet-name&gt;CFMLServlet&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/rewrite.cfm/*&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre> {% endcode %}</p> <p>Example markup with UrlRewriteFilter and Wheels pretty URLs for <code>WEB-INF/web.xml</code>.</p> <p>{% code title=\"web.xml\" %} <pre><code>&lt;filter&gt;\n    &lt;filter-name&gt;UrlRewriteFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.tuckey.web.filters.urlrewrite.UrlRewriteFilter&lt;/filter-class&gt;\n&lt;/filter&gt;\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;UrlRewriteFilter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;\n    &lt;dispatcher&gt;FORWARD&lt;/dispatcher&gt;\n&lt;/filter-mapping&gt;\n&lt;servlet-mapping&gt;\n  &lt;servlet-name&gt;CFMLServlet&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/rewrite.cfm/*&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre> {% endcode %}</p> <p>Pretty URLs Rule markup</p> <p>{% code title=\"pretty urls rule\" %} <pre><code>&lt;rule enabled=\"true\"&gt;\n    &lt;name&gt;Wheels pretty URLs&lt;/name&gt;\n    &lt;condition type=\"request-uri\" operator=\"notequal\"&gt;^/(flex2gateway|jrunscripts|cfide|cf_scripts|cfformgateway|cffileservlet|lucee|files|images|javascripts|miscellaneous|stylesheets|wheels/public/assets|robots.txt|favicon.ico|sitemap.xml|rewrite.cfm)&lt;/condition&gt;\n    &lt;from&gt;^/(.*)$&lt;/from&gt;\n    &lt;to type=\"passthrough\"&gt;/rewrite.cfm/$1&lt;/to&gt;\n  &lt;/rule&gt;\n</code></pre> {% endcode %}</p> <p>A complete barebones <code>WEB-INF/urlrewrite.xml</code> configuration example with pretty URLs.</p> <p>{% code title=\"urlrewrite.xml\" %} <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;!DOCTYPE urlrewrite\n    PUBLIC \"-//tuckey.org//DTD UrlRewrite 4.0//EN\"\n    \"http://www.tuckey.org/res/dtds/urlrewrite4.0.dtd\"&gt;\n\n&lt;urlrewrite&gt;\n  &lt;rule enabled=\"true\"&gt;\n    &lt;name&gt;Wheels pretty URLs&lt;/name&gt;\n    &lt;condition type=\"request-uri\" operator=\"notequal\"&gt;^/(flex2gateway|jrunscripts|cfide|cf_scripts|cfformgateway|cffileservlet|lucee|files|images|javascripts|miscellaneous|stylesheets|wheels/public/assets|robots.txt|favicon.ico|sitemap.xml|rewrite.cfm)&lt;/condition&gt;\n    &lt;from&gt;^/(.*)$&lt;/from&gt;\n    &lt;to type=\"passthrough\"&gt;/rewrite.cfm/$1&lt;/to&gt;\n  &lt;/rule&gt;\n&lt;/urlrewrite&gt;\n</code></pre> {% endcode %}</p>"},{"location":"introduction/frameworks-and-wheels/","title":"Frameworks and Wheels","text":"<p>This chapter will introduce you to frameworks in general and later specifically to Wheels. We'll help you decide if you even need a framework at all and what common problems a framework tries to solve. If we're able to convince you that using a framework is the right thing for you, then we'll present our goals with creating Wheels and show you some key Wheels concepts.</p> <p>So let's get started. </p>"},{"location":"introduction/frameworks-and-wheels/#do-i-really-need-to-use-a-framework","title":"Do I Really Need to Use a Framework?","text":"<p>Short answer, no. If you don't mind doing the same thing over and over again and are getting paid by the hour to do so, then by all means keep doing that.</p> <p>Slightly longer answer, no. If you're working on a highly customized project that does not fall within what 9 out of 10 web sites/applications normally do then you likely need a high percentage of custom code, and a framework will not help much.</p> <p>However, if you're like most of us and have noticed that for every new project you start on--or even every new feature you add to an existing project--you waste a lot of time re-creating the wheel, then you should read on because Wheels may just be the solution for you!</p> <p>Wheels will make starting a new project or building a new feature quick and painless. You can get straight to solving business problems on day one! To understand how this is achieved, we figured that a little background info on frameworks in general may help you out.</p> <p>All good frameworks rise from the need to solve real problems in real world situations. Wheels is based heavily on the Rails framework for Ruby and also gets inspiration from Django and, though to a lesser extent, other frameworks in the ColdFusion space (like Fusebox, for example). Over the years the contributors to these frameworks have identified problems and tedious tasks in their own development processes, built a solution for it, and abstracted (made it more generic so it suits any project) the solution into the framework in question. Piggy-backing on what all these great programmers have already created and adding a few nice solutions of our own, Wheels stands on solid ground.</p> <p>OK, so that was the high level overview of what frameworks are meant to do. But let's get a little more specific.</p>"},{"location":"introduction/frameworks-and-wheels/#framework-goals-in-general","title":"Framework Goals in General","text":"<p>Most web development frameworks set out to address some or all of these common concerns:</p> <ul> <li>Map incoming requests to the code that handles them.</li> <li>Separate your business logic from your presentation code.</li> <li>Let you work at a higher level of abstraction, thus making you work faster.</li> <li>Give you a good code organization structure to follow.</li> <li>Encourage clean and pragmatic design.</li> <li>Simplify saving data to a storage layer.</li> </ul> <p>Like all other good frameworks, Wheels does all this. But there are some subtle differences, and certain things are more important in Wheels than in other frameworks and vice versa. Let's have a look at the specific goals with Wheels so you can see how it relates to the overall goals of frameworks in general.</p>"},{"location":"introduction/frameworks-and-wheels/#our-goals-with-wheels","title":"Our Goals With Wheels","text":"<p>As we've said before, Wheels is heavily based on Ruby on Rails, but it's not a direct port, and there are some things that have been changed to better fit the CFML language. Here's a brief overview of the goals we're striving for with Wheels (most of these will be covered in greater detail in later chapters):</p>"},{"location":"introduction/frameworks-and-wheels/#simplicity","title":"Simplicity","text":"<p>We strive for simplicity on a lot of different levels in Wheels. We'll gladly trade code beauty in the framework's internal code for simplicity for the developers who will use it. This goal to keep things simple is evident in a lot of different areas in Wheels. Here are some of the most notable ones:</p> <ul> <li>The concept of object oriented programming is very simple and data-centric in Wheels, rather than 100% \"pure\" at all times.</li> <li>By default, you'll always get a query result set back when dealing with multiple records in Wheels, simply because that is the way we're all used to outputting data.</li> <li>Wheels encourages best practices, but it will never give you an error if you go against any of them.</li> <li>With Wheels, you won't program yourself into a corner. If worse comes to worse, you can always drop right out of the framework and go back to old school code for a while if necessary.</li> <li>Good old CFML code is used for everything, so there is no need to mess with XML for example.</li> </ul> <p>What this means is that you don't have to be a fantastic programmer to use the framework (although it doesn't hurt). It's enough if you're an average programmer. After using Wheels for a while, you'll probably find that you've become a better programmer though!</p>"},{"location":"introduction/frameworks-and-wheels/#documentation","title":"Documentation","text":"<p>If you've ever downloaded a piece of open source software, then you know that most projects lack documentation. Wheels hopes to change that. We're hoping that by putting together complete, up-to-date documentation that this framework will appeal, and be usable, by everyone. Even someone who has little ColdFusion programming background, let alone experience with frameworks.</p>"},{"location":"introduction/frameworks-and-wheels/#key-wheels-concepts","title":"Key Wheels Concepts","text":"<p>Besides what is already mentioned above, there are some key concepts in Wheels that makes sense to familiarize yourself with early on. If you don't feel that these concepts are to your liking, feel free to look for a different framework or stick to using no framework at all. Too often programmers choose a framework and spend weeks trying to bend it to do what they want to do rather than follow the framework conventions.</p> <p>Speaking of conventions, this brings us to the first key concept:</p>"},{"location":"introduction/frameworks-and-wheels/#convention-over-configuration","title":"Convention Over Configuration","text":"<p>Instead of having to set up tons of configuration variables, Wheels will just assume you want to do things a certain way by using default settings. In fact, you can start programming a Wheels application without setting any configuration variables at all!</p> <p>If you find yourself constantly fighting the conventions, then that is a hint that you're not yet ready for Wheels or Wheels is not ready for you.</p>"},{"location":"introduction/frameworks-and-wheels/#beautiful-code","title":"Beautiful Code","text":"<p>Beautiful (for lack of a better word) code is code that you can scan through and immediately see what it's meant to do. It's code that is never repeated anywhere else. And, most of all, it's code that you'll enjoy writing and will enjoy coming back to 6 months from now.</p> <p>Sometimes the Wheels structure itself encourages beautiful code (separating business logic from request handling, for example). Sometimes it's just something that comes naturally after reading documentation, viewing other Wheels applications, and talking to other Wheels developers.</p>"},{"location":"introduction/frameworks-and-wheels/#model-view-controller-mvc","title":"Model-View-Controller (MVC)","text":"<p>If you've investigated frameworks in the past, then you've probably heard this terminology before. Model-View-Controller, or MVC, is a way to structure your code so that it is broken down into three easy-to-manage pieces:</p> <ul> <li>Model: Just another name for the representation of data, usually a database table.</li> <li>View: What the user or their browser sees and interacts with (a web page in most cases).</li> <li>Controller: The behind-the-scenes guy that's coordinating everything.</li> </ul> <p>\"Uh, yeah. So what's this got to do with anything?\" you may ask. MVC is how Wheels structures your code for you. As you start working with Wheels applications, you'll see that most of the code you write (database queries, forms, and data manipulation) are very nicely separated into one of these three categories.</p> <p>The benefits of MVC are limitless, but one of the major ones is that you almost always know right where to go when something needs to change.</p> <p>If you've added a column to the vehicles table in your database and need to give the user the ability to edit that field, all you need to change is your View. That's where the form is presented to the user for editing.</p> <p>If you find yourself constantly getting a list of all the red cars in your inventory, you can add a new method to your model called <code>getRedCars()</code> that does all the work for you. Then when you want that list, just add a call to that method in your controller and you've got 'em!</p>"},{"location":"introduction/frameworks-and-wheels/#object-relational-mapping-orm","title":"Object Relational Mapping (ORM)","text":"<p>The Object Relational Mapping, or ORM, in Wheels is perhaps the one thing that could potentially speed up your development the most. An ORM handles mapping objects in memory to how they are stored in the database. It can replace a lot of your query writing with simple methods such as <code>user.save()</code>, <code>blogPost.comments(order=\"date\")</code>, and so on. We'll talk a lot more about the ORM in Wheels in the chapters about models.</p>"},{"location":"introduction/frameworks-and-wheels/#theres-your-explanation","title":"There's Your Explanation","text":"<p>So there you have it, a completely fair and unbiased introduction to Wheels. ;)</p> <p>If you've been developing ColdFusion applications for a while, then we know this all seems hard to believe. But trust us; it works. And if you're new to ColdFusion or even web development in general, then you probably aren't aware of most of the pains that Wheels was meant to alleviate!</p> <p>That's okay. You're welcome in the Wheels camp just the same.</p>"},{"location":"introduction/manual-installation/","title":"Manual Installation","text":"<p>Installing Wheels is so simple that there is barely a need for a chapter devoted to it. But we figured we'd better make one anyway in case anyone is specifically looking for a chapter about installation.</p> <p>So, here are the simple steps you need to follow to get rolling on Wheels...</p>"},{"location":"introduction/manual-installation/#manual-installation_1","title":"Manual Installation","text":""},{"location":"introduction/manual-installation/#1-download-wheels","title":"1. Download Wheels","text":"<p>You have 2 choices when downloading Wheels. You can either use the latest official release of Wheels, or you can take a walk on the wild side and go with the latest committed source code in our Git repository.</p> <p>The latest official releases can always be found in the Releases section of GitHub, and the Git repository is available at our GitHub repo.</p> <p>In most cases, we recommend going with the official release because it's well documented and has been through a lot of bug testing. Only if you're in desperate need of a feature that has not been released yet would we advise you to go with the version stored in the Git <code>master</code> branch.</p> <p>Let's assume you have downloaded the latest official release. (Really, you should go with this option.) You now have a <code>.zip</code> file saved somewhere on your computer. On to the next step...</p>"},{"location":"introduction/manual-installation/#2-setup-the-website","title":"2. Setup the Website","text":"<p>Getting an empty website running with Wheels installed is an easy process if you already know your way around IIS or Apache. Basically, you need to create a new website in your web server of choice and unzip the contents of the file into the root of it.</p> <p>In case you're not sure, here are the instructions for setting up an empty Wheels site that can be accessed when typing <code>localhost</code> in your browser. The instructions refer to a system running Windows Server 2003 and IIS, but you should be able to follow along and apply the instructions with minor modifications to your system. (See Requirements for a list of tested systems).</p> <ul> <li>Create a new folder under your web root (usually <code>C:\\Inetpub\\wwwroot</code>) named <code>wheels_site</code> and unzip the Wheels <code>.zip</code> file into the root of it.</li> <li>Create a new website using IIS called <code>Wheels Site</code> with <code>localhost</code> as the host header name and <code>C:\\Inetpub\\wwwroot\\mysite</code> as the path to your home directory.</li> </ul> <p>If you want to run a Wheels-powered application from a subfolder in an existing website, this is entirely possible, but you may need to get a little creative with your URL rewrite rules if you want to get pretty URLs--it will only work out of the box on recent versions of Apache. (Read more about this in the URL Rewriting chapter.)</p>"},{"location":"introduction/manual-installation/#3-setup-the-database-optional","title":"3. Setup the Database (Optional)","text":"<p>Create a new database in MySQL, PostgreSQL, Microsoft SQL Server, or H2 and add a new data source for it in the ColdFusion/Lucee Administrator, just as you'd normally do. Now open up <code>/config/settings.cfm</code> and call <code>set(dataSourceName=\"\")</code> with the name you chose for the data source.</p> <p>If you don't want to be bothered by opening up a Wheels configuration file at all, there is a nice convention you can follow for the naming. Just name your data source with the same name as the folder you are running your website from (<code>mysite</code> in the example above), and Wheels will use that when you haven't set the <code>dataSourceName</code> setting using the Set() function.</p>"},{"location":"introduction/manual-installation/#4-test-it","title":"4. Test It","text":"<p>When you've followed the steps above, you can test your installation by typing <code>http://localhost/</code> (or whatever you set as the host header name) in your web browser. You should get a \"Congratulations!\" page.</p> <p>That's it. You're done. This is where the fun begins!</p>"},{"location":"introduction/requirements/","title":"Requirements","text":"<p>We can identify 3 different types of requirements that you should be aware of:</p> <ul> <li>Project Requirements. Is Wheels a good fit for your project?</li> <li>Developer Requirements. Do you have the knowledge and mindset to program effectively in Wheels?</li> <li>System Requirements. Is your server ready for Wheels?</li> </ul>"},{"location":"introduction/requirements/#project-requirements","title":"Project Requirements","text":"<p>Before you start learning Wheels and making sure all the necessary software is installed on your computer, you really need to take a moment and think about the project you intend to use Wheels on. Is it a ten page website that won't be updated very often? Is it a space flight simulator program for NASA? Is it something in between?</p> <p>Most websites are, at their cores, simple data manipulation applications. You fetch a row, make some updates to it, stick it back in the database and so on. This is the \"target market\" for Wheels--simple CRUD (create, read, update, delete) website applications.</p> <p>A simple ten page website won't do much data manipulation, so you don't need Wheels for that (or even ColdFusion in some cases). A flight simulator program will do so much more than simple CRUD work, so in that case, Wheels is a poor match for you (and so perhaps, is ColdFusion).</p> <p>If your website falls somewhere in between these two extreme examples, then read on. If not, go look for another programming language and framework. ;)</p> <p>Another thing worth noting right off the bat (and one that ties in with the simple CRUD reasoning above) is that Wheels takes a very data-centric approach to the development process. What we mean by that is that it should be possible to visualize and implement the database design early on in the project's life cycle. So, if you're about to embark on a project with an extensive period of object oriented analysis and design which, as a last step almost, looks at how to persist objects, then you should probably also look for another framework.</p> <p>Still reading?</p> <p>Good!</p> <p>Moving on...</p>"},{"location":"introduction/requirements/#developer-requirements","title":"Developer Requirements","text":"<p>Yes, there are actually some things you should familiarize yourself with before starting to use Wheels. Don't worry though. You don't need to be an expert on any on of them. A basic understanding is good enough.</p> <ul> <li>CFML. You should know CFML, the ColdFusion programming language. (Surprise!)</li> <li>Object Oriented Programming. You should grasp the concept of object oriented programming and how it applies to CFML.</li> <li>Model-View-Controller. You should know the theory behind the Model-View-Controller development pattern.</li> </ul>"},{"location":"introduction/requirements/#cfml","title":"CFML","text":"<p>Simply the best web development language in the world! The best way to learn it, in our humble opinion, is to get the free developer edition of Adobe ColdFusion, buy Ben Forta's ColdFusion Web Application Construction Kit series, and start coding using your programming editor of choice. Remember it's not just the commercial Adobe offering that's available; Lucee offers an excellent open source alternative. Using CommandBox is a great and simple way to get a local development environment of your choice up and running quickly.</p>"},{"location":"introduction/requirements/#object-oriented-programming-oop","title":"Object Oriented Programming (OOP)","text":"<p>This is a programming methodology that uses constructs called objects to design applications. Objects model real world entities in your application. OOP is based on several techniques including inheritance, modularity, polymorphism, and encapsulation. Most of these techniques are supported in CFML, making it a fairly functional object oriented language. At the most basic level, a <code>.cfc</code> file in CFML is a class, and you create an instance of a class by using the <code>CreateObject</code> function or the <code>&lt;cfobject&gt;</code> tag.</p> <p>Trying to squeeze an explanation of object oriented programming and how it's used in CFML into a few sentences is impossible, and a detailed overview of it is outside the scope of this chapter. There is lots of high quality information online, so go ahead and Google it.</p>"},{"location":"introduction/requirements/#model-view-controller","title":"Model-View-Controller","text":"<p>Model-View-Controller, or MVC for short, is a way to structure your code so that it is broken down into 3 easy-to-manage pieces:</p> <ul> <li>Model. Just another name for the representation of data, usually a database table.</li> <li>View. What the user sees and interacts with (a web page in our case).</li> <li>Controller. The behind-the-scenes guy that's coordinating everything.</li> </ul> <p>MVC is how Wheels structures your code for you. As you start working with Wheels applications, you'll see that most of the code you write is very nicely separated into one of these 3 categories.</p>"},{"location":"introduction/requirements/#system-requirements","title":"System Requirements","text":"<p>Wheels requires that you use one of these CFML engines:</p> <ul> <li>Adobe ColdFusion 2018 / 2021 / 2023 </li> <li>Lucee 5.2.1.9+ / 6</li> </ul>"},{"location":"introduction/requirements/#operating-systems","title":"Operating Systems","text":"<p>Your ColdFusion or Lucee engine can be installed on Windows, Mac, UNIX, or Linux\u2014they all work just fine.</p>"},{"location":"introduction/requirements/#web-servers","title":"Web Servers","text":"<p>You also need a web server. Wheels runs on all popular web servers, including Apache, Microsoft IIS, Jetty, and the JRun or Tomcat web server that ships with Adobe ColdFusion. Some web servers support URL rewriting out of the box, some support the <code>cgi.PATH_INFO</code> variable which is used to achieve partial rewriting, and some don't have support for either. For local development, we strongly encourage the use of CommandBox.</p> <p>Don't worry though. Wheels will adopt to your setup and run just fine, but the URLs that it creates might differ a bit. You can read more about this in the URL Rewriting chapter.</p>"},{"location":"introduction/requirements/#database-engines","title":"Database Engines","text":"<p>Finally, to build any kind of meaningful website application, you will likely interact with a database. These are the currently supported databases:</p> <ul> <li>SQL Server 7+</li> <li>MySQL 5+ *</li> <li>PostgreSQL 8.4+</li> <li>H2 1.4+</li> </ul> <p>{% hint style=\"info\" %} MySQL</p> <ul> <li>Wheels maybe incompatible with newer MySQL JDBC drivers. It is recommended you downgrade the driver to version 5.1.x for full ORM functionality.</li> <li>If you're using MySQL 5.7.5+ you should be aware that the <code>ONLY_FULL_GROUP_BY</code> setting is enabled by default and it's currently not compatible with the Wheels ORM. However, you can work around this by either disabling the <code>ONLY_FULL_GROUP_BY</code> setting or using <code>ANY_VALUE()</code> in a calculated property. You can read more about it here.</li> <li>We also recommend using the InnoDB engine if you want Transactions to work.</li> <li>MySQL 4 is not supported. {% endhint %}</li> </ul> <p>OK, hopefully this chapter didn't scare you too much. You can move on knowing that you have the basic knowledge needed, the software to run Wheels, and a suitable project to start with.</p>"},{"location":"introduction/screencasts/","title":"Screencasts","text":""},{"location":"introduction/screencasts/#wheels-2x","title":"Wheels 2.x","text":"<p>Create a basic CRUD interface in Wheels 2.x\\ https://youtu.be/K5HLItTru1g</p> <p>Create a basic JSON API in Wheels 2.x\\ https://youtu.be/qZr5JzO0vo4</p> <p>Routing in Wheels 2.x - Part 1\\ https://youtu.be/BnPGApAvMVQ</p> <p>Routing in Wheels 2.x - Part 2\\ https://youtu.be/0CiGxJyJEIQ</p> <p>Introduction to Unit Testing in Wheels 2.x\\ https://youtu.be/XgMuzzmBQ98</p> <p>Unit Testing Controllers in Wheels 2.x\\ https://youtu.be/cygj9WDqHjY</p>"},{"location":"introduction/screencasts/#wheels-1x","title":"Wheels 1.x","text":"<p>{% hint style=\"danger\" %} Please note that all the webcasts below were created with Wheels 1.x in mind, and are listed here as they might still be useful to those starting out. {% endhint %}</p> <p>View all screencasts on Vimeo</p>"},{"location":"introduction/screencasts/#crud-series","title":"CRUD series","text":"<p>Episode 1: \"C\" Is for \"Create\" - Basic CRUD\\ Learn about basic create operations when building standard CRUD functionality in Wheels</p> <p>Episode 2: \"R\"; Is for \"Read\" - Basic CRUD\\ Learn about basic read operations when building standard CRUD functionality in Wheels</p> <p>Episode 3: \"U\" Is for \"Update\" - Basic CRUD\\ Chris Peters demonstrates updating data in a simple CRUD Wheels application</p> <p>Episode 4: \"D\" Is for Delete - Basic CRUD\\ Learn how simple it is to delete records in a basic CRUD application using Wheels</p>"},{"location":"introduction/screencasts/#building-a-social-network","title":"\"Building a Social Network\"","text":"<p>Episode 1: Setting up ColdFusion on Wheels\\ Chris Peters starts the webcast series by demonstrating how to set up ColdFusion on Wheels </p> <p>Episode 2: Form Helpers\\ Chris Peters demonstrates how to bind a Wheels model object to a form through the use of form helpers</p> <p>Episode 3: Object Validation and Showing Errors</p> <p>Chris Peters adds data validation to the user registration form</p> <p>Episode 4: Redirects and the Flash\\ Chris Peters finishes the \"success\" portion of the registration functionality by adding a success message to the Flash and redirecting the user to their home screen</p> <p>Episode 5: Object Validation\\ Chris Peters teaches you about more validation options and how you can add them to the registration form quickly and easily</p> <p>Episode 6: Styling Forms\\ Chris Peters stylizes form markup globally using a Wheels feature called global helpers</p> <p>Episode 7: Authentication with Filters\\ Learn how to set up simple user authentication on a website by using a Wheels feature called filters</p> <p>Episode 8: Reading and Displaying a Single Record\\ Learn the mechanics of reading a single record from the database and displaying its data in the view</p> <p>Episode 9: Adding a Route for User Profiles\\ Creating custom URL patterns is a breeze in ColdFusion on Wheels</p> <p>Episode 10: Displaying Sets of Records\\ Learn how to fetch multiple records from your model with findAll() and then display them to the user using ColdFusion on Wheels</p> <p>Episode 11: Custom View Helpers\\ Learn how to factor out logic in your view templates into custom helper functions in ColdFusion on Wheels</p> <p>Episode 12: Joining Models with Associations\\ Chris Peters demonstrates joining data together with model associations using ColdFusion on Wheels</p> <p>Episode 13: Pagination\\ All it takes to offer pagination is two extra arguments to findAll() and a call to a view helper called paginationLinks()</p> <p>Episode 14: Responding with Multiple Formats\\ Learn how to use the provides() and renderWith() functions to automatically serialize data into XML, JSON, and more</p>"},{"location":"introduction/screencasts/#other","title":"Other","text":"<p>Hello World\\ Peter Amiri walks you through setting up a \"Hello World\" application using the ColdFusion on Wheels framework </p> <p>CFUnited 2010: Simplifying Database Code with the ColdFusion on Wheels ORM\\ Chris Peters gives a high level overview of the ORM included with ColdFusion on Wheels</p> <p>ColdRoute Plugin\\ Chris Peters from Liquifusion demonstrates the ColdRoute plugin for Wheels</p> <p>Wirebox Plugin for Wheels\\ Doug Boude demonstrates using his new Wirebox plugin for Wheels</p> <p>Database Migrations\\ Chris Peters from Liquifusion demonstrates creating tables and records using database migrations in ColdFusion on Wheels</p> <p>CF Meetup, March 10 2011\\ Online ColdFusion Meetup (coldfusionmeetup.com) session for March 10 2011, \"What's New in Wheels 1.1\", with Chris Peters:</p> <p>Wheels Textmate Bundle Demo\\ A quick demo of the Wheels Textmate bundle by Russ Johnson</p>"},{"location":"introduction/upgrading/","title":"Upgrading","text":"<p>Wheels follows Semantic Versioning (http://semver.org/) so large version changes (e.g, <code>1.x.x -&gt; 2.x.x</code>) will most likely contain breaking changes which will require evaluation of your codebase. Minor version changes (e.g, <code>1.3.x-&gt;1.4.x</code>) will often contain new functionality, but in a backwards-compatible manner, and maintenance releases (e.g <code>1.4.4 -&gt; 1.4.5</code>) will just be trying to fix bugs.</p> <p>Generally speaking, upgrading Wheels is as easy as replacing the <code>wheels</code> folder, especially for those small maintenance releases: however, there are usually exceptions in minor point releases (i.e, <code>1.1</code> to <code>1.3</code> required replacing other files outside the <code>wheels</code> folder). The notes below detail those changes.</p>"},{"location":"introduction/upgrading/#upgrading-to-300","title":"Upgrading to 3.0.0","text":""},{"location":"introduction/upgrading/#compatibility-changes","title":"Compatibility Changes","text":"<p>Adobe Coldfusion 2016 and below are no longer compatible with Wheels going forward. Consequently, these versions have been removed from the Wheels Internal Test Suites.</p>"},{"location":"introduction/upgrading/#code-changes","title":"Code changes","text":"<ul> <li>Migrate your tests from the <code>tests</code> directory which are written with rocketUnit and rewrite them into Testbox in the <code>tests/Testbox</code> directory. Starting with Wheels 3.x, Testbox will replace RocketUnit as the default testing framework.</li> <li>Starting with Wheels 3.x, Wirebox will be used as the default dependency injector.</li> <li>After installing Wheels 3.x, you'll have to run <code>box install</code> to intall testbox and wirebox in your application as they are not shipped with Wheels but are rather listed in <code>box.json</code> file as dependencies to be installed.</li> <li>Added Mappings for the <code>app</code>, <code>vendor</code>, <code>wheels</code>, <code>wirebox</code>, <code>testbox</code> and <code>tests</code> directories.</li> <li><code>root.cfm</code> and <code>rewrite.cfm</code> have been removed. All the requests are now being redirected only through <code>public/index.cfm</code>.</li> <li>A <code>.env</code> file has been added in the root of the application which adds the H2 database extension for lucee and sets the cfadmin password to <code>commandbox</code> for both Lucee and Adobe ColdFusion.</li> </ul>"},{"location":"introduction/upgrading/#changes-to-the-wheels-folder","title":"Changes to the wheels folder","text":"<ul> <li>Replace the <code>wheels</code> folder with the new one from the 3.0.0 download.</li> <li>Move the <code>wheels</code> folder inside the <code>vendor</code> folder.</li> </ul>"},{"location":"introduction/upgrading/#changes-outside-the-wheels-folder","title":"Changes outside the wheels folder","text":"<ul> <li>Moved the <code>config</code>, <code>controllers</code>, <code>events</code>, <code>global</code>, <code>lib</code>, <code>migrator</code>, <code>models</code>, <code>plugins</code>, <code>snippets</code> and <code>views</code> directories inside the <code>app</code> directory.</li> <li>Moved the <code>files</code>, <code>images</code>, <code>javascripts</code>, <code>miscellaneous</code>, <code>stylesheets</code> directories and <code>Application.cfc</code>, <code>index.cfm</code> and <code>urlrewrite.xml</code> files into the <code>public</code> folder.</li> </ul>"},{"location":"introduction/upgrading/#upgrading-to-23x","title":"Upgrading to 2.3.x","text":"<p>Replace the <code>wheels</code> folder with the new one from the 2.3.0 download.</p>"},{"location":"introduction/upgrading/#upgrading-to-22x","title":"Upgrading to 2.2.x","text":"<p>Replace the <code>wheels</code> folder with the new one from the 2.2.0 download.</p>"},{"location":"introduction/upgrading/#upgrading-to-21x","title":"Upgrading to 2.1.x","text":"<p>Replace the <code>wheels</code> folder with the new one from the 2.1.0 download.</p>"},{"location":"introduction/upgrading/#code-changes_1","title":"Code changes","text":"<ul> <li>Rename any instances of <code>findLast()</code> to <code>findLastOne()</code></li> </ul>"},{"location":"introduction/upgrading/#changes-outside-the-wheels-folder_1","title":"Changes outside the wheels folder","text":"<ul> <li>Create <code>/events/onabort.cfm</code> to support the <code>onAbort</code> method</li> </ul>"},{"location":"introduction/upgrading/#upgrading-to-20x","title":"Upgrading to 2.0.x","text":"<p>As always, the first step is to replace the <code>wheels</code> folder with the new one from the 2.0 download.</p> <p>Other major changes required to upgrade your application are listed in the following sections.</p>"},{"location":"introduction/upgrading/#supported-cfml-engines","title":"Supported CFML Engines","text":"<p>Wheels 2.0 requires one of these CFML engines:</p> <ul> <li>Lucee 4.5.5.006 + / 5.2.1.9+</li> <li>Adobe ColdFusion 10.0.23 / 11.0.12+ / 2016.0.4+</li> </ul> <p>We've updated our minimum requirements to match officially supported versions from the vendors. (For example, Adobe discontinued support for ColdFusion 10 in May 2017, which causes it to be exposed to security exploits in the future. We've included it in 2.0 but it may be discontinued in a future version)</p>"},{"location":"introduction/upgrading/#changes-outside-the-wheels-folder_2","title":"Changes outside the wheels folder","text":"<ul> <li>The <code>events/functions.cfm</code> file has been moved to <code>global/functions.cfm</code>.</li> <li>The <code>models/Model.cfc</code> file should extend <code>wheels.Model</code> instead of <code>Wheels</code> (<code>models/Wheels.cfc</code> can be deleted).</li> <li>The <code>controllers/Controller.cfc</code> file should extend <code>wheels.Controller</code> instead of <code>Wheels</code>(<code>controllers/Wheels.cfc</code> can be deleted).</li> <li>The <code>init</code> function of controllers and models must be renamed to <code>config</code>.</li> <li>The global setting <code>modelRequireInit</code> has been renamed to <code>modelRequireConfig</code>.</li> <li>The global setting <code>cacheControllerInitialization</code> has been renamed to <code>cacheControllerConfig</code>.</li> <li>The global setting <code>cacheModelInitialization</code> has been renamed to <code>cacheModelConfig</code>.</li> <li>The global setting <code>clearServerCache</code> has been renamed to <code>clearTemplateCache</code>.</li> <li>The <code>updateProperties()</code> method has been removed, use <code>update()</code> instead.</li> <li>JavaScript arguments like <code>confirm</code> and <code>disable</code> have been removed from the link and form helper functions (use the JS Confirm and JS Disable plugins to reinstate the old behavior).</li> <li>The <code>renderPage</code> function has been renamed to <code>renderView</code></li> <li><code>includePartial()</code> now requires the <code>partial</code> and <code>query</code> arguments to be set (if using a query)</li> </ul>"},{"location":"introduction/upgrading/#routing","title":"Routing","text":"<p>The addRoute() function has been removed in Wheels 2.0 in favor of a new routing API. See the Routing chapter for information about the new RESTful routing system.</p> <p>A limited version of the \"wildcard\" route (<code>[controller]/[action]/[key]</code>) is available as <code>[controller]/[action]</code>) if you use the new wildcard() mapper method:</p> <p>{% code title=\"/config/routes.cfm\" %} <pre><code>mapper()\n    .wildcard()\n.end();\n</code></pre> {% endcode %}</p> <p>By default, this is limited to <code>GET</code> requests for security reasons.</p>"},{"location":"introduction/upgrading/#cross-site-request-forgery-csrf-protection","title":"Cross-Site Request Forgery (CSRF) Protection","text":"<p>It is strongly recommended that you enable Wheels 2.0's built-in CSRF protection.</p> <p>For many applications, you need to follow these steps:</p> <ol> <li>In <code>controllers/Controller.cfc</code>, add a call to protectsFromForgery() to the <code>config</code> method.</li> <li>Add a call to the csrfMetaTags() helper in your layouts' <code>&lt;head&gt;</code> sections.</li> <li>Configure any AJAX calls that <code>POST</code> data to your application to pass the <code>authenticityToken</code> from the <code>&lt;meta&gt;</code>tags generated by csrfMetaTags() as an <code>X-CSRF-TOKEN</code> HTTP header.</li> <li>Update your route definitions to enforce HTTP verbs on actions that manipulate data (<code>get</code>, <code>post</code>, <code>patch</code>, <code>delete</code>, etc.)</li> <li>Make sure that forms within the application are <code>POST</code>ing data to the actions that require <code>post</code>, <code>patch</code>, and <code>delete</code> verbs.</li> </ol> <p>See documentation for the CSRF Protection Plugin for more information.</p> <p>Note: If you had previously installed the CSRF Protection plugin, you may remove it and rely on the functionality included in the Wheels 2 core.</p>"},{"location":"introduction/upgrading/#database-migrations","title":"Database Migrations","text":"<p>If you have previously been using the dbmigrate plugin, you can now use the inbuilt version within the Wheels 2 core. </p> <p>Database Migration files in <code>/db/migrate/</code> should now be moved to <code>/app/migrator/migrations/</code> and extend <code>wheels.migrator.Migration</code>, not <code>plugins.dbmigrate.Migration</code> which can be changed with a simple find and replace. Note: Oracle is not currently supported for Migrator.</p>"},{"location":"introduction/upgrading/#upgrading-to-14x","title":"Upgrading to 1.4.x","text":"<ol> <li>Replace the <code>wheels</code> folder with the new one from the 1.4 download.</li> <li>Replace URL rewriting rule files \u2013 i.e, <code>.htaccess</code>, <code>web.config</code>, <code>IsapiRewrite.ini</code></li> </ol> <p>In addition, if you're upgrading from an earlier version of Wheels, we recommend reviewing the instructions from earlier reference guides below.</p>"},{"location":"introduction/upgrading/#upgrading-to-13x","title":"Upgrading to 1.3.x","text":"<p>If you are upgrading from Wheels 1.1.0 or newer, follow these steps:</p> <ol> <li>Replace the <code>wheels</code> folder with the new one from the 1.3 download.</li> <li>Replace the root <code>root.cfm</code> file with the new one from the 1.3 download.</li> <li>Remove the <code>&lt;cfheader&gt;</code> calls from the following files:</li> <li><code>events/onerror.cfm</code></li> <li><code>events/onmaintenance.cfm</code></li> <li><code>events/onmissingtemplate.cfm</code></li> </ol> <p>In addition, if you're upgrading from an earlier version of Wheels, we recommend reviewing the instructions from earlier reference guides below.</p> <p>Note: To accompany the newest 1.1.x releases, we've highlighted the changes that are affected by each release in this cycle. </p>"},{"location":"introduction/upgrading/#upgrading-to-11x","title":"Upgrading to 1.1.x","text":"<p>If you are upgrading from Wheels 1.0 or newer, the easiest way to upgrade is to replace the wheels folder with the new one from the 1.1 download. If you are upgrading from an earlier version, we recommend reviewing the steps outlined in Upgrading to Wheels 1.0.</p> <p>Note: To accompany the newest 1.1.x releases, we've highlighted the changes that are affected by each release in this cycle.</p>"},{"location":"introduction/upgrading/#plugin-compatibility","title":"Plugin Compatibility","text":"<p>Be sure to review your plugins and their compatibility with your newly-updated version of Wheels. Some plugins may stop working, throw errors, or cause unexpected behavior in your application.</p>"},{"location":"introduction/upgrading/#supported-system-changes","title":"Supported System Changes","text":"<ul> <li>1.1: The minimum Adobe ColdFusion version required is now 8.0.1.</li> <li>1.1: The minimum Railo version required is now 3.1.2.020.</li> <li>1.1: The H2 database engine is now supported.</li> </ul>"},{"location":"introduction/upgrading/#file-system-changes","title":"File System Changes","text":"<ul> <li>1.1: The .htaccess file has been changed. Be sure to copy over the new one from the new version 1.1 download and copy any addition changes that you may have also made to the original version.</li> </ul>"},{"location":"introduction/upgrading/#database-structure-changes","title":"Database Structure Changes","text":"<ul> <li>1.1: By default, Wheels 1.1 will wrap database queries in transactions. This requires that your database engine supports transactions. For MySQL in particular, you can convert your MyISAM tables to InnoDB to be compatible with this new functionality. Otherwise, to turn off automatic transactions, place a call to set(transactionMode=\"none\").</li> <li>1.1: Binary data types are now supported.</li> </ul>"},{"location":"introduction/upgrading/#cfml-code-changes","title":"CFML Code Changes","text":"<p>Model Code</p> <ul> <li>1.1: Validations will be applied to some model properties automatically. This may cause unintended behavior with your validations. To turn this setting off, call set(automaticValidations=false) in config/settings.cfm.</li> <li>1.1: The class argument in hasOne(), hasMany(), and belongsTo() has been deprecated. Use the modelName argument instead.</li> <li>1.1: afterFind() callbacks no longer require special logic to handle the setting of properties in objects and queries. (The \"query way\" works for both cases now.) Because arguments will always be passed in to the method, you can't rely on StructIsEmpty() to determine if you're dealing with an object or not. In the rare cases that you need to know, you can now call isInstance() or isClass() instead.</li> <li>1.1: On create, a model will now set the updatedAt auto-timestamp to the same value as the createdAt timestamp. To override this behavior, call set(setUpdatedAtOnCreate=false) in config/settings.cfm.</li> </ul> <p>View Code</p> <ul> <li>1.1: Object form helpers (e.g. textField() and radioButton()) now automatically display a label based on the property name. If you left the label argument blank while using an earlier version of Wheels, some labels may start appearing automatically, leaving you with unintended results. To stop a label from appearing, use label=false instead.</li> <li>1.1: The contentForLayout() helper to be used in your layout files has been deprecated. Use the includeContent() helper instead.</li> <li>1.1: In production mode, query strings will automatically be added to the end of all asset URLs (which includes JavaScript includes, stylesheet links, and images). To turn off this setting, call set(assetQueryString=false) in config/settings.cfm.</li> <li>1.1: stylesheetLinkTag() and javaScriptIncludeTag() now accept external URLs for the source/sources argument. If you manually typed out these tags in previous releases, you can now use these helpers instead.</li> <li>1.1: flashMessages(), errorMessageOn(), and errorMessagesFor() now create camelCased class attributes instead (for example error-messages is now errorMessages). The same goes for the class attribute on the tag that wraps form elements with errors: it is now fieldWithErrors.</li> </ul> <p>Controller Code</p> <ul> <li>1.1.1: The if argument in all validation functions is now deprecated. Use the condition argument instead.</li> </ul>"},{"location":"introduction/upgrading/#upgrading-to-10x","title":"Upgrading to 1.0.x","text":"<p>Our listing of steps to take while upgrading your Wheels application from earlier versions to 1.0.x.</p> <p>Upgrading from an earlier version of 1.x? Then the upgrade path is simple. All you need to do is replace the wheels folder with the new wheels folder from the download.</p> <p>The easiest way to upgrade is to setup an empty website, deploy a fresh copy of Wheels 1.0, and then transfer your application code to it. When transferring, please make note of the following changes and make the appropriate changes to your code.</p> <p>Note: To accompany the newest 1.0 release, we've highlighted the changes that are affected by that release.</p>"},{"location":"introduction/upgrading/#supported-system-changes_1","title":"Supported System Changes","text":"<ul> <li>1.0: URL rewriting with IIS 7 is now supported.</li> <li>1.0: URL rewriting in a sub folder on Apache is now supported.</li> <li>ColdFusion 9 is now supported.</li> <li>Oracle 10g or later is now supported.</li> <li>PostgreSQL is now supported.</li> <li>Railo 3.1 is now supported.</li> </ul>"},{"location":"introduction/upgrading/#file-system-changes_1","title":"File System Changes","text":"<ul> <li>1.0: There is now an app.cfm file in the config folder. Use it to set variables that you'd normally set in Application.cfc (i.e., this.name, this.sessionManagement, this.customTagPaths, etc.)</li> <li>1.0: There is now a web.config file in the root.</li> <li>1.0: There is now a Wheels.cfc file in the models folder.</li> <li>1.0: The Wheels.cfc file in the controllers folder has been updated.</li> <li>1.0: The IsapiRewrite4.ini and .htaccess files in the root have both been updated.</li> <li>The controller folder has been changed to controllers.</li> <li>The model folder has been changed to models.</li> <li>The view folder has been changed to views.</li> <li>Rename all of your CFCs in models and controllers to UpperCamelCase. So controller.cfc will become Controller.cfc, adminUser.cfc will become AdminUser.cfc, and so on.</li> <li>All images must now be stored in the images folder, files in the files folder, JavaScript files in the javascripts folder, and CSS files in the stylesheets folder off of the root.</li> </ul>"},{"location":"introduction/upgrading/#database-structure-changes_1","title":"Database Structure Changes","text":"<ul> <li>deletedOn, updatedOn, and createdOn are no longer available as auto-generated fields. Please change the names to deletedAt, updatedAt, and createdAt instead to get similar functionality, and make sure that they are of type datetime, timestamp, or equivalent.</li> </ul>"},{"location":"introduction/upgrading/#cfml-code-changes_1","title":"CFML Code Changes","text":"<p>Config Code</p> <ul> <li>1.0: The action of the default route (home) has changed to wheels. The way configuration settings are done has changed quite a bit. To change a Wheels application setting, use the new set() function with the name of the Wheels property to change. (For example, \\.) To see a list of available Wheels settings, refer to the Configuration and Defaults chapter.\\   Model Code <li>1.0: The extends attribute in models/Model.cfc should now be Wheels.</li> <li>findById() is now called findByKey(). Additionally, its id argument is now named key instead. For composite keys, this argument will accept a comma-delimited list.</li> <li>When using a model's findByKey() or findOne() functions, the found property is no longer available. Instead, the functions return false if the record was not found.</li> <li>A model's errorsOn() function now always returns an array, even if there are no errors on the field. When there are errors for the field, the array elements will contain a struct with name, fieldName, and message elements.</li> <li>The way callbacks are created has changed. There is now a method for each callback event ( beforeValidation(), beforeValidationOnCreate(), etc.) that should be called from your model's init() method. These methods take a single argument: the method within your model that should be invoked during the callback event. See the chapter on Object Callbacks for an example.</li> <p>View Code</p> <ul> <li>1.0: The contents of the views/wheels folder have been changed.</li> <li>The wrapLabel argument in form helpers is now replaced with labelPlacement. Valid values for labelPlacement are before, after, and around.</li> <li>The first argument for includePartial() has changed from name to partial. If you're referring to it through a named argument, you'll need to replace all instances with partial.</li> <li>The variable that keeps a counter of the current record when using includePartial() with a query has been renamed from currentRow to current.</li> <li>There is now an included wheels view folder in views. Be sure to copy that into your existing Wheels application if you're upgrading.</li> <li>The location of the default layout has changed. It is now stored at /views/layout.cfm. Now controller-specific layouts are stored in their respective view folder as layout.cfm. For example, a custom layout for www.domain.com/about would be stored at /views/about/layout.cfm.</li> <li>In linkTo(), the id argument is now called key. It now accepts a comma-delimited list in the case of composite keys.</li> <li>The linkTo() function also accepts an object for the key argument, in which case it will automatically extract the keys from it for use in the hyperlink.</li> <li>The linkTo() function can be used only for controller-, action-, and route-driven links now. * The url argument has been removed, so now all static links should be coded using a standard \"a\" tag.</li> </ul> <p>Controller Code</p> <ul> <li>1.0: The extends attribute in controllers/Controller.cfc should now be Wheels.\\   Multiple-word controllers and actions are now word-delimited by hyphens in the URL. For example, if your controller is called SiteAdmin and the action is called editLayout, the URL to access that action would be http://www.domain.com/site-admin/edit-layout.</li> </ul>"},{"location":"introduction/upgrading/#urlrouting","title":"URL/Routing","text":"<ul> <li>The default route for Wheels has changed from [controller]/[action]/[id] to [controller]/[action]/[key]. This is to support composite keys. The params.id value will now only be available as params.key.</li> <li>You can now pass along composite keys in the URL. Delimit multiple keys with a comma. (If you want to use this feature, then you can't have a comma in the key value itself).</li> </ul>"},{"location":"introduction/getting-started/beginner-tutorial-hello-database/","title":"Beginner Tutorial: Hello Database","text":"<p>Wheels's built in model provides your application with some simple and powerful functionality for interacting with databases. To get started, you will make some simple configurations, call some functions within your controllers, and that's it. Best yet, you will rarely ever need to write SQL code to get those redundant CRUD tasks out of the way.</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-database/#our-sample-application-user-management","title":"Our Sample Application: User Management","text":"<p>We'll learn by building part of a sample user management application. This tutorial will teach you the basics of setting up a resource that interacts with the Wheels ORM.</p> <p>{% hint style=\"info\" %} Download source code</p> <p>You can download all the source code for this sample application from https://github.com/dhgassoc/Wheels-Beginner-Tutorial-Hello-Database {% endhint %}</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-database/#setting-up-the-data-source","title":"Setting up the Data Source","text":"<p>By default, Wheels will connect to a data source <code>wheels.dev</code>. To change this default behavior, open the file at <code>/config/settings.cfm</code>. In a fresh install of Wheels, you'll see the follwing code:</p> <p>{% code title=\"/config/settings.cfm\" %} <pre><code>&lt;cfscript&gt;\n    /*\n        Use this file to configure your application.\n        You can also use the environment specific files (e.g. /config/production/settings.cfm) to override settings set here.\n        Don't forget to issue a reload request (e.g. reload=true) after making changes.\n        See https://wheels.dev/3.0.0/guides/working-with-wheels/configuration-and-defaults for more info.\n    */\n\n    /*\n        You can change the \"wheels.dev\" value from the two functions below to set your datasource.\n        You can change the the value for the \"dataSourceName\" to set a default datasource to be used throughout your application.\n        You can also change the value for the \"coreTestDataSourceName\" to set your testing datasource.\n    */\n    set(coreTestDataSourceName=\"wheels.dev\");\n    set(dataSourceName=\"wheels.dev\");\n    // set(dataSourceUserName=\"\");\n    // set(dataSourcePassword=\"\");\n\n    /*\n        If you comment out the following line, Wheels will try to determine the URL rewrite capabilities automatically.\n        The \"URLRewriting\" setting can bet set to \"on\", \"partial\" or \"off\".\n        To run with \"partial\" rewriting, the \"cgi.path_info\" variable needs to be supported by the web server.\n        To run with rewriting set to \"on\", you need to apply the necessary rewrite rules on the web server first.\n    */\n    set(URLRewriting=\"On\");\n\n    // Reload your application with ?reload=true&amp;password=wheels.dev\n    set(reloadPassword=\"wheels.dev\");\n\n    // CLI-Appends-Here\n&lt;/cfscript&gt;\n</code></pre> {% endcode %}</p> <p>These lines provide Wheels with the necessary information about the data source, URL rewriting, and reload password for your application, and include the appropriate values. This may include values for <code>dataSourceName</code>, <code>dataSourceUserName</code>, and <code>dataSourcePassword</code>. More on URL rewriting and reload password later.</p> <p>{% code title=\"/config/settings.cfm\" %} <pre><code>set(dataSourceName=\"back2thefuture\");\n// set(dataSourceUserName=\"marty\");\n// set(dataSourcePassword=\"mcfly\");\n</code></pre> {% endcode %}</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-database/#our-sample-data-structure","title":"Our Sample Data Structure","text":"<p>Wheels supports MySQL, SQL Server, PostgreSQL, and H2. It doesn't matter which DBMS you use for this tutorial; we will all be writing the same CFML code to interact with the database. Wheels does everything behind the scenes that needs to be done to work with each DBMS.</p> <p>That said, here's a quick look at a table that you'll need in your database, named <code>users</code>:</p> Column Name Data Type Extra id int auto increment username varchar(100) email varchar(255) passwd varchar(15) <p>Note a couple things about this <code>users</code> table:</p> <ol> <li>The table name is plural.</li> <li>The table has an auto-incrementing primary key named <code>id</code>.</li> </ol> <p>These are database conventions used by Wheels. This framework strongly encourages that everyone follow convention over configuration. That way everyone is doing things mostly the same way, leading to less maintenance and training headaches down the road.</p> <p>Fortunately, there are ways of going outside of these conventions when you really need it. But let's learn the conventional way first. Sometimes you need to learn the rules before you can know how to break them.</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-database/#creating-routes-for-the-users-resource","title":"Creating Routes for the users Resource","text":"<p>Next, open the file at <code>/config/routes.cfm</code>. You will see contents similar to this:</p> <p>{% code title=\"/config/routes.cfm\" %} <pre><code>mapper()\n    .wildcard()\n    .root(method = \"get\")\n.end();\n</code></pre> {% endcode %}</p> <p>We are going to create a section of our application for listing, creating, updating, and deleting user records. In Wheels routing, this requires a plural resource, which we'll name <code>users</code>.</p> <p>Because a <code>users</code> resource is more specific than the \"generic\" routes provided by Wheels, we'll list it first in the chain of mapper method calls:</p> <p>{% code title=\"/config/routes.cfm\" %} <pre><code>mapper()\n    .resources(\"users\")\n    .wildcard()\n    .root(method = \"get\")\n.end();\n</code></pre> {% endcode %}</p> <p>This will create URL endpoints for creating, reading, updating, and deleting user records:</p> Name Method URL Path Description users GET /users Lists users newUsers GET /users/new Display a form for creating a user record users POST /users Form posts a new user record to be created editUser GET /users/[id]/edit Displays a form for editing a user record user PATCH /users/[id] Form posts an existing user record to be updated user DELETE /users/[id] Deletes a user record <ul> <li>Name is referenced in your code to tell Wheels where to point forms and links.</li> <li>Method is the HTTP verb that Wheels listens for to match up the request.</li> <li>URL Path is the URL that Wheels listens for to match up the request.</li> </ul> <p>{% hint style=\"info\" %} Don't forget to reload</p> <p>You will need to reload your application after adding new routes! {% endhint %}</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-database/#creating-users","title":"Creating Users","text":"<p>First, let's create a simple form for adding a new user to the <code>users</code> table. To do this, we will use Wheels's form helper functions. Wheels includes a whole range of functions that simplifies all of the tasks that you need to display forms and communicate errors to the user.</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-database/#creating-the-form","title":"Creating the Form","text":"<p>Now create a new file in <code>app/views/users</code> called <code>new.cfm</code>. This will contain the view code for our simple form.</p> <p>Next, add these lines of code to the new file:</p> <p>{% code title=\"app/views/users/new.cfm\" %} <pre><code>&lt;cfoutput&gt;\n\n&lt;h1&gt;New User&lt;/h1&gt;\n\n#startFormTag(route=\"users\")#\n    &lt;div&gt;\n        #textField(objectName=\"user\", property=\"username\", label=\"Username\")#\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        #textField(objectName=\"user\", property=\"email\", label=\"Email\")#\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        #passwordField(\n            objectName=\"user\",\n            property=\"passwd\",\n            label=\"Password\"\n        )#\n    &lt;/div&gt;\n\n    &lt;div&gt;#submitTag()#&lt;/div&gt;\n#endFormTag()#\n\n&lt;/cfoutput&gt;\n</code></pre> {% endcode %}</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-database/#form-helpers","title":"Form Helpers","text":"<p>What we've done here is use form helpers to generate all of the form fields necessary for creating a new user in our database. It may feel a little strange using functions to generate form elements, but it will soon become clear why we're doing this. Trust us on this one\u2026 you'll love it!</p> <p>To generate the form tag's <code>action</code> attribute, the startFormTag() function takes parameters similar to the linkTo()function that we introduced in the Beginner Tutorial: Hello World tutorial. We can pass in <code>controller, action, key</code>, and other route- and parameter-defined URLs just like we do with linkTo().</p> <p>To end the form, we use the endFormTag() function. Easy enough.</p> <p>The textField() and passwordField() helpers are similar. As you probably guessed, they create <code>&lt;input&gt;</code> elements with <code>type=\"text\"</code> and <code>type=\"password\"</code>, respectively. And the submitTag() function creates an <code>&lt;input type=\"submit\" /&gt;</code> element.</p> <p>One thing you'll notice is the textField() and passwordField() functions accept arguments called <code>objectName</code> and <code>property</code>. As it turns out, this particular view code will throw an error because these functions are expecting an object named <code>user</code>. Let's fix that.</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-database/#supplying-the-form-with-data","title":"Supplying the Form with Data","text":"<p>All of the form helper calls in our view specify an <code>objectName</code> argument with a reference to a variable named <code>user</code>. That means that we need to supply our view code with an object called <code>user</code>. Because the controller is responsible for providing the views with data, we'll set it there.</p> <p>Create a new ColdFusion component at <code>app/controllers/Users.cfc</code>.</p> <p>As it turns out, our controller needs to provide the view with a blank <code>user</code> object (whose instance variable will also be called <code>user</code> in this case). In our new action, we will use the model() function to generate a new instance of the user model.</p> <p>To get a blank set of properties in the model, we'll also call the generated model's new() method.</p> <p>{% code title=\"app/controllers/Users.cfc\" %} <pre><code>component extends=\"Controller\" {\n    function config(){}\n\n    function new() {\n        user = model(\"user\").new();\n    }\n}\n</code></pre> {% endcode %}</p> <p>Wheels will automatically know that we're talking about the <code>users</code> database table when we instantiate a <code>user</code> model. The convention: database tables are plural and their corresponding Wheels models are singular.</p> <p>Why is our model name singular instead of plural? When we're talking about a single record in the <code>users</code> database, we represent that with an individual model object. So the <code>users</code> table contains many <code>user</code> objects. It just works better in conversation.</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-database/#the-generated-form","title":"The Generated Form","text":"<p>Now when we run the URL at <code>http://localhost/users/new</code>, we'll see the form with the fields that we defined.</p> <p>The HTML generated by your application will look something like this:</p> <p>{% code title=\"/users/new\" %} <pre><code>&lt;h1&gt;New User&lt;/h1&gt;\n\n&lt;form action=\"/users\" method=\"post\"&gt;\n    &lt;div&gt;\n        &lt;label for=\"user-username\"&gt;\n            Username\n            &lt;input id=\"user-username\" type=\"text\" value=\"\" name=\"user&amp;#x5b;username&amp;#x5d;\"&gt;\n        &lt;/label&gt;\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        &lt;label for=\"user-email\"&gt;\n            Email\n            &lt;input id=\"user-email\" type=\"text\" value=\"\" name=\"user&amp;#x5b;email&amp;#x5d;\"&gt;\n        &lt;/label&gt;\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        &lt;label for=\"user-passwd\"&gt;\n            Password\n            &lt;input id=\"user-passwd\" type=\"password\" value=\"\" name=\"user&amp;#x5b;passwd&amp;#x5d;\"&gt;\n        &lt;/label&gt;\n    &lt;/div&gt;\n\n    &lt;div&gt;&lt;input value=\"Save&amp;#x20;changes\" type=\"submit\"&gt;&lt;/div&gt;\n&lt;/form&gt;\n</code></pre> {% endcode %}</p> <p>So far we have a fairly well-formed, accessible form, without writing a bunch of repetitive markup.</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-database/#handling-the-form-submission","title":"Handling the Form Submission","text":"<p>Next, we'll code the <code>create</code> action in the controller to handle the form submission and save the new user to the database.</p> <p>A basic way of doing this is using the model object's create() method:</p> <p>{% code title=\"app/controllers/Users.cfc\" %} <pre><code>function create() {\n    user = model(\"user\").create(params.user);\n\n    redirectTo(\n        route=\"users\",\n        success=\"User created successfully.\"\n    );\n}\n</code></pre> {% endcode %}</p> <p>Because we used the <code>objectName</code> argument in the fields of our form, we can access the user data as a struct in the <code>params</code> struct.</p> <p>There are more things that we can do in the <code>create</code> action to handle validation, but let's keep it simple in this tutorial.</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-database/#listing-users","title":"Listing Users","text":"<p>Notice that our <code>create</code> action above redirects the user to the <code>users</code> index route using the redirectTo() function. We'll use this action to list all users in the system with \"Edit\" links. We'll also provide a link to the \"New User\" form that we just coded.</p> <p>First, let's get the data that the listing needs. Create an action named <code>index</code> in the <code>users</code> controller like so:</p> <p>{% code title=\"app/controllers/Users.cfc\" %} <pre><code>function index() {\n    users = model(\"user\").findAll(order=\"username\");\n}\n</code></pre> {% endcode %}</p> <p>This call to the model's findAll() method will return a query object of all users in the system. By using the method's <code>order</code> argument, we're also telling the database to order the records by <code>username</code>.</p> <p>In the view at <code>app/views/users/index.cfm</code>, it's as simple as looping through the query and outputting the data</p> <p>{% code title=\"app/views/users/index.cfm\" %} <pre><code>&lt;cfoutput&gt;\n\n&lt;h1&gt;Users&lt;/h1&gt;\n\n&lt;p&gt;#linkTo(text=\"New User\", route=\"newUser\")#&lt;/p&gt;\n\n&lt;table&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt;Username&lt;/th&gt;\n            &lt;th&gt;Email&lt;/th&gt;\n            &lt;th colspan=\"2\"&gt;&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        &lt;cfloop query=\"users\"&gt;\n            &lt;tr&gt;\n                &lt;td&gt;\n                    #EncodeForHtml(users.username)#\n                &lt;/td&gt;\n                &lt;td&gt;\n                    #EncodeForHtml(users.email)#\n                &lt;/td&gt;\n                &lt;td&gt;\n                    #linkTo(\n                        text=\"Edit\",\n                        route=\"editUser\",\n                        key=users.id,\n                        title=\"Edit #users.username#\"\n                    )#\n                &lt;/td&gt;\n                &lt;td&gt;\n                    #buttonTo(\n                        text=\"Delete\",\n                        route=\"user\",\n                        key=users.id,\n                        method=\"delete\",\n                        title=\"Delete #users.username#\"\n                    )#\n                &lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/cfloop&gt;\n    &lt;/tbody&gt;\n&lt;/table&gt;\n\n&lt;/cfoutput&gt;\n</code></pre> {% endcode %}</p> <p>{% hint style=\"info\" %} When to use <code>EncodeForHtml</code></p> <p>You'll see references to <code>EncodeForHtml</code> in some of our examples that output data. This helps escape HTML code in data that attackers could use to embed inject harmful JavaScript. (This is commonly referred to as an \"XSS attack,\" short for \"Cross-site Scripting attack.\")</p> <p>A rule of thumb: you do not need to use <code>EncodeForHtml</code> when passing values into Wheels helpers like <code>linkTo</code>, <code>buttonTo</code>, <code>startFormTag</code>, <code>textField</code>, etc. However, you need to escape data that is displayed directly onto the page without a Wheels helper. {% endhint %}</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-database/#editing-users","title":"Editing Users","text":"<p>We'll now show another cool aspect of form helpers by creating a screen for editing users.</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-database/#coding-the-edit-form","title":"Coding the Edit Form","text":"<p>You probably noticed in the code listed above that we'll have an action for editing a single <code>users</code> record. We used the linkTo() form helper function to add an \"Edit\" button to the form. This action expects a <code>key</code> as well.</p> <p>Because in the linkTo() form helper function we specified the parameter <code>key</code>, Wheels adds this parameter into the URL when generating the route.</p> <p>Wheels will automatically add the provided 'key' from the URL to the params struct in the controllers edit() function.</p> <p>Given the provided <code>key</code>, we'll have the action load the appropriate <code>user</code> object to pass on to the view:</p> <p>{% code title=\"app/controllers/Users.cfc\" %} <pre><code>function edit() {\n    user = model(\"user\").findByKey(params.key);\n}\n</code></pre> {% endcode %}</p> <p>The view at <code>app/views/users/edit.cfm</code> looks almost exactly the same as the view for creating a user:</p> <p>{% code title=\"app/views/users/edit.cfm\" %} <pre><code>&lt;cfoutput&gt;\n\n&lt;h1&gt;Edit User #EncodeForHtml(user.username)#&lt;/h1&gt;\n\n#startFormTag(route=\"user\", key=user.key(), method=\"patch\")#\n    &lt;div&gt;\n        #textField(objectName=\"user\", property=\"username\", label=\"Username\")#\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        #textField(objectName=\"user\", property=\"email\", label=\"Email\")#\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        #passwordField(\n            objectName=\"user\",\n            property=\"passwd\",\n            label=\"Password\"\n        )#\n    &lt;/div&gt;\n\n    &lt;div&gt;#submitTag()#&lt;/div&gt;\n#endFormTag()#\n\n&lt;/cfoutput&gt;\n</code></pre> {% endcode %}</p> <p>But an interesting thing happens. Because the form fields are bound to the <code>user</code> object via the form helpers' <code>objectName</code> arguments, the form will automatically provide default values based on the object's properties.</p> <p>With the <code>user</code> model populated, we'll end up seeing code similar to this:</p> <p>{% code title=\"app/views/users/edit.cfm\" %} <pre><code>&lt;h1&gt;Edit User Homer Simpson&lt;/h1&gt;\n\n&lt;form action=\"/users/1\" method=\"post\"&gt;\n    &lt;input type=\"hidden\" name=\"_method\" value=\"patch\"&gt;\n\n    &lt;div&gt;\n        &lt;input type=\"hidden\" name=\"user&amp;#x5b;id&amp;#x5d;\" value=\"15\"&gt;\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        &lt;label for=\"user-username\"&gt;\n            Name\n            &lt;input\n                id=\"user-username\"\n                type=\"text\"\n                value=\"Homer Simpson\"\n                name=\"user&amp;#x5b;username&amp;#x5d;\"&gt;\n        &lt;/label&gt;\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        &lt;label for=\"user-email\"&gt;\n            Email\n            &lt;input\n                id=\"user-email\"\n                type=\"text\"\n                value=\"homerj@nuclearpower.com\"\n                name=\"user&amp;#x5b;email&amp;#x5d;\"&gt;\n        &lt;/label&gt;\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        &lt;label for=\"user-passwd\"&gt;\n            Password\n            &lt;input\n                id=\"user-passwd\"\n                type=\"password\"\n                value=\"donuts.mmm\"\n                name=\"user&amp;#x5b;passwd&amp;#x5d;\"&gt;\n        &lt;/label&gt;\n    &lt;/div&gt;\n\n    &lt;div&gt;&lt;input value=\"Save&amp;#x20;changes\" type=\"submit\"&gt;&lt;/div&gt;\n&lt;/form&gt;\n</code></pre> {% endcode %}</p> <p>Pretty cool, huh?</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-database/#opportunities-for-refactoring","title":"Opportunities for Refactoring","text":"<p>There's a lot of repetition in the <code>new</code> and <code>edit</code> forms. You'd imagine that we could factor out most of this code into a single view file. To keep this tutorial from becoming a book, we'll just continue on knowing that this could be better.</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-database/#handing-the-edit-form-submission","title":"Handing the Edit Form Submission","text":"<p>Now we'll create the <code>update</code> action. This will be similar to the <code>create</code> action, except it will be updating the user object:</p> <p>{% code title=\"app/controllers/Users.cfc\" %} <pre><code>function update() {\n    user = model(\"user\").findByKey(params.key);\n    user.update(params.user);\n\n    redirectTo(\n        route=\"editUser\",\n        key=user.id,\n        success=\"User updated successfully.\"\n    );\n}\n</code></pre> {% endcode %}</p> <p>To update the <code>user</code>, simply call its update() method with the <code>user</code> struct passed from the form via <code>params</code>. It's that simple.</p> <p>After the update, we'll add a success message using the Flash and send the end user back to the edit form in case they want to make more changes.</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-database/#deleting-users","title":"Deleting Users","text":"<p>Notice in our listing above that we have a <code>delete</code> action. Here's what it would look like:</p> <p>{% code title=\"app/controllers/Users.cfc\" %} <pre><code>function delete() {\n    user = model(\"user\").findByKey(params.key);\n    user.delete();\n\n    redirectTo(\n        route=\"users\",\n        success=\"User deleted successfully.\"\n    );\n}\n</code></pre> {% endcode %}</p> <p>We simply load the user using the model's findByKey() method and then call the object's delete() method. That's all there is to it.</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-database/#database-says-hello","title":"Database Says Hello","text":"<p>We've shown you quite a few of the basics in getting a simple user database up and running. We hope that this has whet your appetite to see some of the power packed into the Wheels framework. There's plenty more.</p> <p>Be sure to read on to some of the related chapters listed below to learn more about working with Wheels's ORM.</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-world/","title":"Beginner Tutorial: Hello World","text":""},{"location":"introduction/getting-started/beginner-tutorial-hello-world/#testing-your-install","title":"Testing Your Install","text":"<p>Let's make sure we're all on the same page. I'm going to assume that you've followed the Getting Started guide and have CommandBox all setup. If you haven't done that, stop and read that guide get everything setup. It's okay, this web page will wait for you.</p> <p>Okay, so you have Wheels installed and can see the Wheels \"Congratulations!\"\\ page as shown below. That wasn't that hard now, was it?</p> <p></p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-world/#hello-world-your-first-wheels-app","title":"Hello World: Your First Wheels App","text":"<p>Okay, let's get to some example code. We know that you've been dying to get your\\ hands on some code!</p> <p>To continue with Programming Tutorial Tradition, we'll create the ubiquitous Hello World! application. But to keep things interesting, let's add a little Wheels magic along the way.</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-world/#setting-up-the-controller","title":"Setting up the Controller","text":"<p>Let's create a controller from scratch to illustrate how easy it is to set up a\\ controller and plug it into the Wheels framework.</p> <p>First, create a file called <code>Say.cfc</code> in the <code>app/controllers</code> directory and add the\\ code below to the file.</p> <p>{% code title=\"app/controllers/Say.cfc\" %} <pre><code>component extends=\"Controller\"{\n}\n</code></pre> {% endcode %}</p> <p>Congratulations, you just created your first Wheels controller! What does this\\ controller do, you might ask? Well, to be honest, not much. It has no methods\\ defined, so it doesn't add any new functionality to our application. But because\\ it extends the base <code>Controller</code> component, it inherits quite a bit of powerful\\ functionality and is now tied into our Wheels application.</p> <p>So what happens if we try to call our new controller right now? Lets take a\\ look. Open your browser and point your browser to the new controller. Because my\\ local server is installed on port 60000, my URL is <code>http://127.0.0.1:60000/say</code>.\\ You may need to enter a different URL, depending on how your web server is\\ configured. In my case, I'm using CommandBox.</p> <p></p> <p>The error says \"Could not find the view page for the 'index' action in the 'say'\\ controller.\" Where did \"index\" come from? The URL we typed in only specified a\\ controller name but no action. When an action is not specified in the URL,\\ Wheels assumes that we want the default action. Out of the box, the default\\ action in Wheels is set to <code>index</code>. So in our example, Wheels tried to find\\ the <code>index</code> action within the <code>say</code> controller, and it threw an error because it\\ couldn't find its view page.</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-world/#setting-up-an-action","title":"Setting up an Action","text":"<p>But let's jump ahead. Now that we have the controller created, let's add an\\ action to it called <code>hello</code>. Change your <code>say</code> controller so it looks like the\\ code block below:</p> <p>{% code title=\"app/controllers/Say.cfc\" %} <pre><code>component extends=\"Controller\" {\n    function hello() {\n    }\n}\n</code></pre> {% endcode %}</p> <p>As you can see, we created an empty method named <code>hello</code>.</p> <p>Now let's call our new action in the browser and see what we get. To call the\\ <code>hello</code> action, we simply add <code>/hello</code> to the end of the previous URL that we\\ used to call our <code>say</code> controller:</p> <p><code>http://127.0.0.1:60000/say/hello</code></p> <p>Once again, we get a ColdFusion error. Although we have created the controller\\ and added the <code>hello</code> action to it, we haven't created the view.</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-world/#setting-up-the-view","title":"Setting up the View","text":"<p>By default, when an action is called, Wheels will look for a view file with\\ the same name as the action. It then hands off the processing to the view to\\ display the user interface. In our case, Wheels tried to find a view file for\\ our <code>say/hello</code> action and couldn't find one.</p> <p>Let's remedy the situation and create a view file. View files are simple CFML\\ pages that handle the output of our application. In most cases, views will\\ return HTML code to the browser. By default, the view files will have the same\\ name as our controller actions and will be grouped into a directory under the\\ view directory. This new directory will have the same name as our controller.</p> <p>Find the <code>views</code> directory inside the <code>app</code> directory, located at the root of your \\ Wheels installation. There will be a few directories in there already. For \\ now, we need to create a new directory in the <code>views</code> directory called <code>say</code>. \\ This is the same name as the controller that we created above.</p> <p>Now inside the <code>say</code> directory, create a file called <code>hello.cfm</code>. In the\\ <code>hello.cfm</code> file, add the following line of code:</p> <p>{% code title=\"app/views/say/hello.cfm\" %} <pre><code>&lt;h1&gt;Hello World!&lt;/h1&gt;\n</code></pre> {% endcode %}</p> <p>Save your <code>hello.cfm</code> file, and let's call our <code>say/hello</code> action once again.\\ You have your first working Wheels page if your browser looks like Figure 3\\ below.</p> <p></p> <p>You have just created your first functional Wheels page, albeit it is a very\\ simple one. Pat yourself on the back, go grab a snack, and when you're ready,\\ let's go on and extend the functionality of our Hello World! application a\\ little more.</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-world/#adding-dynamic-content-to-your-view","title":"Adding Dynamic Content to Your View","text":"<p>We will add some simple dynamic content to our <code>hello</code> action and add a second\\ action to the application. We'll then use some Wheels code to tie the 2\\ actions together. Let's get get to it!</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-world/#the-dynamic-content","title":"The Dynamic Content","text":"<p>The first thing we are going to do is to add some dynamic content to our\\ <code>say/hello</code> action. Modify your <code>say</code> controller so it looks like the code block\\ below:</p> <p>{% code title=\"app/controllers/Say.cfc\" %} <pre><code>component extends=\"Controller\" {\n    function hello() {\n        time = Now();\n    }\n}\n</code></pre> {% endcode %}</p> <p>All we are doing here is creating a variable called <code>time</code> and setting its value\\ to the current server time using the basic ColdFusion <code>Now()</code> function. When we\\ do this, the variable becomes immediately available to our view code.</p> <p>Why not just set up this value directly in the view? If you think about it,\\ maybe the logic behind the value of time may eventually change. What if\\ eventually we want to display its value based on the user's time zone? What if\\ later we decide to pull it from a web service instead? Remember, the controller\\ is supposed to coordinate all of the data and business logic, not the view.</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-world/#displaying-the-dynamic-content","title":"Displaying the Dynamic Content","text":"<p>Next, we will modify our <code>say/hello.cfm</code> view file so that it looks like the\\ code block below. When we do this, the value will be displayed in the browser.</p> <p>{% code title=\"app/views/say/hello.cfm\" %} <pre><code>&lt;h1&gt;Hello World!&lt;/h1&gt;\n&lt;p&gt;Current time: &lt;cfoutput&gt;#time#&lt;/cfoutput&gt;&lt;/p&gt;\n</code></pre> {% endcode %}</p> <p>call your <code>say/hello</code> action again in your browser. Your browser should look\\ like Figure 4 below.</p> <p></p> <p>This simple example showed that any dynamic content created in a controller\\ action is available to the corresponding view file. In our application, we\\ created a <code>time</code> variable in the <code>say/hello</code> controller action and display that\\ variable in our <code>say/hello.cfm</code> view file.</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-world/#adding-a-second-action-goodbye","title":"Adding a Second Action: Goodbye","text":"<p>Now we will expand the functionality of our application once again by adding a\\ second action to our <code>say</code> controller. If you feel adventurous, go ahead and add\\ a <code>goodbye</code> action to the <code>say</code> controller on your own, then create a\\ <code>goodbye.cfm</code> view file that displays a \"Goodbye\" message to the user. If you're\\ not feeling that adventurous, we'll quickly go step by step.</p> <p>First, modify the the <code>say</code> controller file so that it looks like the code block\\ below.</p> <p>{% code title=\"app/controllers/Say.cfc\" %} <pre><code>component extends=\"Controller\" {\n    function hello() {\n        time = Now();\n    }\n\n    function goodbye() {\n    }\n}\n</code></pre> {% endcode %}</p> <p>Now go to the <code>app/views/say</code> directory and create a <code>goodbye.cfm</code> page.</p> <p>Add the following code to the <code>goodbye.cfm</code> page and save it.</p> <p>{% code title=\"app/views/say/goodbye.cfm\" %} <pre><code>Goodbye World!\n</code></pre> {% endcode %}</p> <p>If we did everything right, we should be able to call the new <code>say/goodbye</code>\\ action using the following URL:</p> <p><code>http://127.0.0.1:60000/say/goodbye</code></p> <p>Your browser should look like Figure 5 below:</p> <p></p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-world/#linking-to-other-actions","title":"Linking to Other Actions","text":"<p>Now let's link our two actions together. We will do this by adding a link to the\\ bottom of each page so that it calls the other page.</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-world/#linking-hello-to-goodbye","title":"Linking Hello to Goodbye","text":"<p>Open the <code>say/hello.cfm</code> view file. We are going to add a line of code to the\\ end of this file so our <code>say/hello.cfm</code> view file looks like the code block\\ below:</p> <p>{% code title=\"app/views/say/hello.cfm\" %} <pre><code>&lt;h1&gt;Hello World!&lt;/h1&gt;\n&lt;p&gt;Current time: &lt;cfoutput&gt;#time#&lt;/cfoutput&gt;&lt;/p&gt;\n&lt;p&gt;Time to say &lt;cfoutput&gt;#linkTo(text=\"goodbye\", action=\"goodbye\")#?&lt;/cfoutput&gt;&lt;/p&gt;\n</code></pre> {% endcode %}</p> <p>The linkTo() function is a built-in Wheels function. In this case, we are passing 2 named parameters to it. The first parameter, <code>text</code>, is the text\\ that will be displayed in the hyperlink. The second parameter, <code>action</code>, defines the action to point the link to. By using this built-in function, your application's main URL may change, and even controllers and actions may get shifted around, but you won't suffer from the dreaded dead link. Wheels will\\ always create a valid link for you as long as you configure it correctly when you make infrastructure changes to your application.</p> <p>Once you have added the additional line of code to the end of the\\ <code>say/hello.cfm</code> view file, save your file and call the <code>say/hello</code> action from\\ your browser. Your browser should look like Figure 6 below.</p> <p></p> <p>You can see that Wheels created a link for us and added an appropriate URL for\\ the <code>say/goodbye</code> action to the link.</p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-world/#linking-goodbye-to-hello","title":"Linking Goodbye to Hello","text":"<p>Let's complete our little app and add a corresponding link to the bottom of our\\ <code>say/goodbye.cfm</code> view page.</p> <p>Open your <code>say/goodbye.cfm</code> view page and modify it so it looks like the code\\ block below.</p> <p>CFML: app/views/say/goodbye.cfm</p> <p>{% code title=\"app/views/say/goodbye.cfm\" %} <pre><code>&lt;h1&gt;Goodbye World!&lt;/h1&gt;\n&lt;p&gt;Time to say &lt;cfoutput&gt;#linkTo(text=\"hello\", action=\"hello\")#?&lt;/cfoutput&gt;&lt;/p&gt;\n</code></pre> {% endcode %}</p> <p>If you now call the <code>say/goodbye</code> action in your browser, your browser should\\ look like Figure 7 below.</p> <p></p>"},{"location":"introduction/getting-started/beginner-tutorial-hello-world/#much-more-to-learn","title":"Much More to Learn","text":"<p>You now know enough to be dangerous with Wheels. Look out! But there are many\\ more powerful features to cover. You may have noticed that we haven't even\\ talked about the M in MVC.</p> <p>No worries. We will get there. And we think you will enjoy it.</p>"},{"location":"introduction/getting-started/running-local-development-servers/","title":"Running Local Development Servers","text":""},{"location":"introduction/getting-started/running-local-development-servers/#starting-a-local-development-server","title":"Starting a local development server","text":"<p>With CommandBox, we don't need to have Lucee or Adobe ColdFusion installed locally. With a simple command, we can make CommandBox go and get the CFML engine we've requested, and quickly create a server running on Undertow. Make sure you're in the root of your website, and then run:</p> <p>{% tabs %} {% tab title=\"CommandBox\" %} server start {% endtab %} {% endtabs %}</p> <p>The server will then start on a random port on <code>127.0.0.1</code> based the configuration from the <code>server.json</code> file that is in the root of your application that comes with wheels. We can add various options to <code>server.json</code> to customize our server. Your default <code>server.json</code> will look something like this:</p> <pre><code>{\n    \"name\":\"wheels\",\n    \"web\":{\n        \"host\":\"localhost\",\n        \"webroot\":\"public\",\n        \"rewrites\":{\n            \"enable\":true,\n            \"config\":\"public/urlrewrite.xml\"\n        }\n    },\n    \"app\":{\n        \"cfengine\":\"lucee\"\n    }\n}\n</code></pre> <p>In this <code>server.json</code> file, the server name is set to <code>wheels</code>, meaning I can now start the server from any directory by simply calling <code>start myApp</code>. We don't have any port specified, but you can specify any port you want. Lastly, we have URL rewriting enabled and pointed the URL rewrite configuration file to <code>public/urlrewrite.xml</code>, which is included starting from Wheels 2.x.</p>"},{"location":"introduction/getting-started/running-local-development-servers/#using-custom-host-names","title":"Using custom host names","text":"<p>You can also specify hosts other than localhost: there's a useful CommandBox module to do that (Host updater) which will automatically create entries in your hosts file to allow for domains such as <code>myapp.local</code> running on port 80. You can install it via <code>install commandbox-hostupdater</code> when running the box shell with administrator privileges.</p>"},{"location":"introduction/getting-started/running-local-development-servers/#controlling-local-servers","title":"Controlling local servers","text":"<p>Obviously, anything you start, you might want to stop. Servers can be stopped either via right/ctrl clicking on the icon in the taskbar, or by the <code>stop</code> command. To stop a server running in the current directory issue the following:</p> <p>{% tabs %} {% tab title=\"CommandBox\" %} server stop {% endtab %} {% endtabs %}</p> <p>You can also stop a server from anywhere by using its name:</p> <p>{% tabs %} {% tab title=\"CommandBox\" %} server stop myApp {% endtab %} {% endtabs %}</p> <p>If you want to see what server configurations exist on your system and their current status, simply do <code>server list</code></p> <p>{% tabs %} {% tab title=\"CommandBox\" %} server list {% endtab %} {% endtabs %}</p> <pre><code>myapp (stopped)\n http://127.0.0.1:60000\n Webroot: /Users/wheels/Documents/myapp\n\nmyAPI (stopped)\n http://127.0.0.1:60010\n Webroot: /Users/wheels/Documents/myAPI\n\nmegasite (stopped)\n http://127.0.0.1:61280\n CF Engine: lucee 4.5.4+017\n Webroot: /Users/wheels/Documents/megasite\n\nawesomesite (stopped)\n http://127.0.0.1:60015\n CF Engine: lucee 4.5.4+017\n Webroot: /Users/wheels/Documents/awesomeo\n</code></pre> <p>To remove a server configuration from the list, you can use <code>server forget myapp</code>. Note the status of the servers on the list are somewhat unreliable, as it only remembers the last known state of the server: so if you start a server and then turn off your local machine, it may still remember it as <code>running</code> when you turn your local machine back on, which is why we recommend the use of <code>force: true</code> in the <code>server.json</code> file.</p>"},{"location":"introduction/getting-started/running-local-development-servers/#specifying-different-cf-engines","title":"Specifying different CF engines","text":"<p>By default, CommandBox will run Lucee (version 6.x at time of writing). You may wish to specify an exact version of Lucee, or use Adobe ColdFusion. We can do this via either setting the appropriate <code>cfengine</code> setting in <code>server.json</code>, or at runtime with the <code>cfengine=</code> argument.</p> <p>{% tabs %} {% tab title=\"CommandBox\" %} Start the default engine</p> <p>CommandBox&gt; start</p> <p>__</p> <p>Start the latest stable Lucee 5.x engine</p> <p>CommandBox&gt; start cfengine=lucee5</p> <p>__</p> <p>Start a specific engine and version</p> <p>CommandBox&gt; start cfengine=adobe@10.0.12</p> <p>__</p> <p>Start the most recent Adobe server that starts with version \"11\"</p> <p>CommandBox&gt; start cfengine=adobe@11</p> <p>__</p> <p>Start the most recent adobe engine that matches the range</p> <p>CommandBox&gt; start cfengine=\"adobe@&gt;9.0 &lt;=11\" {% endtab %} {% endtabs %}</p> <p>Or via <code>server.json</code></p> <pre><code>{\n    \"name\":\"myApp\",\n    \"force\":true,\n    \"web\":{\n        \"http\":{\n            \"host\":\"localhost\",\n            \"port\":60000\n        },\n        \"rewrites\":{\n            \"enable\":true,\n            \"config\":\"urlrewrite.xml\"\n        }\n    },\n    \"app\":{\n        \"cfengine\":\"adobe2018\"\n    },\n}\n</code></pre> <p>{% hint style=\"info\" %}</p>"},{"location":"introduction/getting-started/running-local-development-servers/#cfide-lucee-administrators","title":"CFIDE / Lucee administrators","text":"<p>The default username and password for all administrators is <code>admin</code> &amp; <code>commandbox</code> {% endhint %}</p> <p>You can of course run multiple servers, so if you need to test your app on Lucee 5.x, Lucee 6.x and Adobe 2018, you can just start three servers with different <code>cfengine=</code> arguments!</p> <p>{% hint style=\"info\" %}</p>"},{"location":"introduction/getting-started/running-local-development-servers/#watch-out","title":"Watch out","text":"<p>CommandBox 5.1 required to install dependencies easily {% endhint %}</p> <p>By default, the Lucee server that CommandBox starts includes all the essential Lucee extensions you need, but if need to minimize the size of the Lucee instance you launch, then you can use Lucee-Light by specifying <code>cfengine=lucee-light</code> in your <code>server.json</code> file. Wheels can run just fine on lucee-light (which is after all, Lucee, minus all the extensions) but at a minimum, requires the following extensions to be installed as dependencies in your <code>box.json</code>. Please note you may have to add any drivers you need for your database to this list as well.</p> <pre><code>\"dependencies\":{\n    \"lucee-image\":\"lex:https://ext.lucee.org/lucee.image.extension-1.0.0.35.lex\",\n    \"lucee-zip\": \"lex:https://ext.lucee.org/compress-extension-1.0.0.2.lex\",\n    \"lucee-esapi\": \"lex:https://ext.lucee.org/esapi-extension-2.1.0.18.lex\"\n}\n</code></pre> <p>Once added to your box.json file, while the server is running, just do <code>box install</code>, which will install the dependencies, and load them into the running server within 60 seconds.</p> <p>Alternatively you can download the extensions and add them manually to your server root's deploy folder (i.e <code>\\WEB-INF\\lucee-server\\deploy</code>)</p>"},{"location":"introduction/getting-started/tutorial-wheels-ajax-and-you/","title":"Tutorial: Wheels, AJAX, and You","text":"<p>Wheels was designed to be as lightweight as possible, so this keeps your options fairly open for developing AJAX features into your application.</p> <p>While there are several flavors of JavaScript libraries out there with AJAX support, we will be using the jQuery framework in this tutorial. Let's assume that you are fairly familiar with the basics of jQuery and know how to set it up.</p> <p>For this tutorial, let's create the simplest example of all: a link that will render a message back to the user without refreshing the page.</p>"},{"location":"introduction/getting-started/tutorial-wheels-ajax-and-you/#a-simple-example","title":"A Simple Example","text":"<p>In this example, we'll wire up some simple JavaScript code that calls a Wheels action asynchronously. All of this will be done with basic jQuery code and built-in Wheels functionality.</p> <p>First, let's make sure we've got an appropriate route setup. It might be you're still using the default <code>wildcard()</code> route which will create some default <code>GET</code> routes for the <code>controller/action</code> pattern, but we'll add a new route here just for practice. We are going to create a route named <code>sayHello</code> and direct it to the <code>hello</code> action of the <code>say</code> controller. There are two ways you could write this code a long hand method specifying the controller and action separately as well as a short hand method that combines the two into a single parameter.</p> <p>The longhand way would look like: {% code title=\"/config/routes.cfm\" %} <pre><code>mapper()\n  .get(name=\"sayHello\", controller=\"say\", action=\"hello\")\n.end()\n</code></pre> {% endcode %}</p> <p>The shorthand method would look like: {% code title=\"/config/routes.cfm\" %} <pre><code>mapper()\n  .get(name=\"sayHello\", to=\"say##hello\")\n.end()\n</code></pre> {% endcode %}</p> <p>You can decide which method you prefer. Both sets of code above are equivalent.</p> <p>Then, let's create a link to a controller's action in a view file, like so:</p> <p>{% code title=\"app/views/say/hello.cfm\" %} <pre><code>&lt;cfoutput&gt;\n\n&lt;!--- View code ---&gt;\n&lt;h1&gt;&lt;/h1&gt;\n&lt;p&gt;&lt;/p&gt;\n\n#linkTo(text=\"Alert me!\", route=\"sayHello\", id=\"alert-button\")#\n\n&lt;/cfoutput&gt;\n</code></pre> {% endcode %}</p> <p>That piece of code by itself will work just like you expect it to. When you click the link, you will load the <code>hello</code> action inside the <code>say</code> controller.</p> <p>But let's make it into an asynchronous request. Add this JavaScript (either on the page inside <code>script</code> tags or in a separate <code>.js</code> file included via javaScriptIncludeTag() ):</p> <p>{% code title=\"JavaScript\" %} <pre><code>(function($) {\n    // Listen to the \"click\" event of the \"alert-button\" link and make an AJAX request\n    $(\"#alert-button\").on(\"click\", function(event) {\n        $.ajax({\n            type: \"GET\",\n            // References \"/say/hello?format=json\"\n            url: $(this).attr(\"href\") + \"?format=json\",\n            dataType: \"json\",\n            success: function(response) {\n                $(\"h1\").html(response.message);\n                $(\"p\").html(response.time);\n            }\n        });\n\n        event.preventDefault();\n    });\n})(jQuery);\n</code></pre> {% endcode %}</p> <p>With that code, we are listening to the <code>click</code> event of the hyperlink, which will make an asynchronous request to the <code>hello</code> action in the <code>say</code> controller. Additionally, the JavaScript call is passing a URL parameter called <code>format</code> set to <code>json</code>.</p> <p>Note that the <code>success</code> block inserts keys from the response into the empty <code>h1</code> and <code>p</code> blocks in the calling view. (You may have been wondering about those when you saw the first example. Mystery solved.)</p> <p>The last thing that we need to do is implement the <code>say/hello</code> action. Note that the request expects a <code>dataType</code> of <code>JSON</code>. By default, Wheels controllers only generate HTML responses, but there is an easy way to generate JSON instead using Wheels's provides() and renderWith() functions:</p> <p>{% code title=\"app/controllers/Say.cfc\" %} <pre><code>component extends=\"Controller\" {\n    function config() {\n        provides(\"html,json\");\n    }\n\n    function hello() {\n        // Prepare the message for the user.\n        greeting = {};\n        greeting[\"message\"] = \"Hi there\";\n        greeting[\"time\"] = Now();\n\n        // Respond to all requests with `renderWith()`.\n        renderWith(greeting);\n    }\n}\n</code></pre> {% endcode %}</p> <p>In this controller's <code>config()</code> method, we use the provides() function to indicate that we want all actions in the controller to be able to respond with the data in HTML or JSON formats. Note that the client calling the action can request the type by passing a URL parameter named format or by sending the <code>format</code> in the request header.</p> <p>The call to renderWith() in the <code>hello</code> action takes care of the translation to the requested format. Our JavaScript is requesting JSON, so Wheels will format the <code>greeting</code> struct as JSON automatically and send it back to the client. If the client requested HTML or the default of none, Wheels will process and serve the view template at <code>app/views/say/hello.cfm</code>. For more information about  provides() and  renderWith(), reference the chapter on Responding with Multiple Formats.</p> <p>Lastly, notice the lines where we're setting <code>greeting[\"message\"]</code> and <code>greeting[\"time\"]</code>. Due to the case-insensitive nature of ColdFusion, we recommend setting variables to be consumed by JavaScript using bracket notation like that. If you do not use that notation (i.e., <code>greetings.message</code> and <code>greetings.time</code> instead), your JavaScript will need to reference those keys from the JSON as <code>MESSAGE</code> and <code>TIME</code> (all caps). Unless you like turning caps lock on and off, you can see how that would get annoying after some time.</p> <p>Assuming you already included jQuery in your application and you followed the code examples above, you now have a simple AJAX-powered web application built on Wheels. After clicking that <code>Alert me!</code> link, your say controller will respond back to you the serialized message via AJAX. jQuery will parse the JSON object and populate the <code>h1</code> and <code>p</code>with the appropriate data.</p>"},{"location":"introduction/getting-started/tutorial-wheels-ajax-and-you/#ajax-in-wheels-explained","title":"AJAX in Wheels Explained","text":"<p>That is it! Hopefully now you have a clearer picture on how to create AJAX-based features for your web applications.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-database/","title":"Beginner Tutorial: Hello Database","text":"<p>Wheels's built in model provides your application with some simple and powerful functionality for interacting with databases. To get started, you will make some simple configurations, call some functions within your controllers, and that's it. Best yet, you will rarely ever need to write SQL code to get those redundant CRUD tasks out of the way.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-database/#our-sample-application-user-management","title":"Our Sample Application: User Management","text":"<p>We'll learn by building part of a sample user management application. This tutorial will teach you the basics of setting up a resource that interacts with the Wheels ORM.</p> <p>{% hint style=\"info\" %} Download source code</p> <p>You can download all the source code for this sample application from https://github.com/dhgassoc/Wheels-Beginner-Tutorial-Hello-Database {% endhint %}</p>"},{"location":"introduction/readme/beginner-tutorial-hello-database/#setting-up-the-data-source","title":"Setting up the Data Source","text":"<p>By default, Wheels will connect to a data source <code>wheels.dev</code>. To change this default behavior, open the file at <code>/config/settings.cfm</code>. In a fresh install of Wheels, you'll see the follwing code:</p> <p>{% code title=\"/config/settings.cfm\" %} <pre><code>&lt;cfscript&gt;\n    /*\n        Use this file to configure your application.\n        You can also use the environment specific files (e.g. /config/production/settings.cfm) to override settings set here.\n        Don't forget to issue a reload request (e.g. reload=true) after making changes.\n        See https://wheels.dev/3.0.0/guides/working-with-wheels/configuration-and-defaults for more info.\n    */\n\n    /*\n        You can change the \"wheels.dev\" value from the two functions below to set your datasource.\n        You can change the the value for the \"dataSourceName\" to set a default datasource to be used throughout your application.\n        You can also change the value for the \"coreTestDataSourceName\" to set your testing datasource.\n    */\n    set(coreTestDataSourceName=\"wheels.dev\");\n    set(dataSourceName=\"wheels.dev\");\n    // set(dataSourceUserName=\"\");\n    // set(dataSourcePassword=\"\");\n\n    /*\n        If you comment out the following line, Wheels will try to determine the URL rewrite capabilities automatically.\n        The \"URLRewriting\" setting can bet set to \"on\", \"partial\" or \"off\".\n        To run with \"partial\" rewriting, the \"cgi.path_info\" variable needs to be supported by the web server.\n        To run with rewriting set to \"on\", you need to apply the necessary rewrite rules on the web server first.\n    */\n    set(URLRewriting=\"On\");\n\n    // Reload your application with ?reload=true&amp;password=wheels.dev\n    set(reloadPassword=\"wheels.dev\");\n\n    // CLI-Appends-Here\n&lt;/cfscript&gt;\n</code></pre> {% endcode %}</p> <p>These lines provide Wheels with the necessary information about the data source, URL rewriting, and reload password for your application, and include the appropriate values. This may include values for <code>dataSourceName</code>, <code>dataSourceUserName</code>, and <code>dataSourcePassword</code>. More on URL rewriting and reload password later.</p> <p>{% code title=\"/config/settings.cfm\" %} <pre><code>set(dataSourceName=\"back2thefuture\");\n// set(dataSourceUserName=\"marty\");\n// set(dataSourcePassword=\"mcfly\");\n</code></pre> {% endcode %}</p>"},{"location":"introduction/readme/beginner-tutorial-hello-database/#our-sample-data-structure","title":"Our Sample Data Structure","text":"<p>Wheels supports MySQL, SQL Server, PostgreSQL, and H2. It doesn't matter which DBMS you use for this tutorial; we will all be writing the same CFML code to interact with the database. Wheels does everything behind the scenes that needs to be done to work with each DBMS.</p> <p>That said, here's a quick look at a table that you'll need in your database, named <code>users</code>:</p> Column Name Data Type Extra id int auto increment username varchar(100) email varchar(255) passwd varchar(15) <p>Note a couple things about this <code>users</code> table:</p> <ol> <li>The table name is plural.</li> <li>The table has an auto-incrementing primary key named <code>id</code>.</li> </ol> <p>These are database conventions used by Wheels. This framework strongly encourages that everyone follow convention over configuration. That way everyone is doing things mostly the same way, leading to less maintenance and training headaches down the road.</p> <p>Fortunately, there are ways of going outside of these conventions when you really need it. But let's learn the conventional way first. Sometimes you need to learn the rules before you can know how to break them.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-database/#creating-routes-for-the-users-resource","title":"Creating Routes for the users Resource","text":"<p>Next, open the file at <code>/config/routes.cfm</code>. You will see contents similar to this:</p> <p>{% code title=\"/config/routes.cfm\" %} <pre><code>mapper()\n    .wildcard()\n    .root(method = \"get\")\n.end();\n</code></pre> {% endcode %}</p> <p>We are going to create a section of our application for listing, creating, updating, and deleting user records. In Wheels routing, this requires a plural resource, which we'll name <code>users</code>.</p> <p>Because a <code>users</code> resource is more specific than the \"generic\" routes provided by Wheels, we'll list it first in the chain of mapper method calls:</p> <p>{% code title=\"/config/routes.cfm\" %} <pre><code>mapper()\n    .resources(\"users\")\n    .wildcard()\n    .root(method = \"get\")\n.end();\n</code></pre> {% endcode %}</p> <p>This will create URL endpoints for creating, reading, updating, and deleting user records:</p> Name Method URL Path Description users GET /users Lists users newUsers GET /users/new Display a form for creating a user record users POST /users Form posts a new user record to be created editUser GET /users/[id]/edit Displays a form for editing a user record user PATCH /users/[id] Form posts an existing user record to be updated user DELETE /users/[id] Deletes a user record <ul> <li>Name is referenced in your code to tell Wheels where to point forms and links.</li> <li>Method is the HTTP verb that Wheels listens for to match up the request.</li> <li>URL Path is the URL that Wheels listens for to match up the request.</li> </ul> <p>{% hint style=\"info\" %} Don't forget to reload</p> <p>You will need to reload your application after adding new routes! {% endhint %}</p>"},{"location":"introduction/readme/beginner-tutorial-hello-database/#creating-users","title":"Creating Users","text":"<p>First, let's create a simple form for adding a new user to the <code>users</code> table. To do this, we will use Wheels's form helper functions. Wheels includes a whole range of functions that simplifies all of the tasks that you need to display forms and communicate errors to the user.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-database/#creating-the-form","title":"Creating the Form","text":"<p>Now create a new file in <code>app/views/users</code> called <code>new.cfm</code>. This will contain the view code for our simple form.</p> <p>Next, add these lines of code to the new file:</p> <p>{% code title=\"app/views/users/new.cfm\" %} <pre><code>&lt;cfoutput&gt;\n\n&lt;h1&gt;New User&lt;/h1&gt;\n\n#startFormTag(route=\"users\")#\n    &lt;div&gt;\n        #textField(objectName=\"user\", property=\"username\", label=\"Username\")#\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        #textField(objectName=\"user\", property=\"email\", label=\"Email\")#\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        #passwordField(\n            objectName=\"user\",\n            property=\"passwd\",\n            label=\"Password\"\n        )#\n    &lt;/div&gt;\n\n    &lt;div&gt;#submitTag()#&lt;/div&gt;\n#endFormTag()#\n\n&lt;/cfoutput&gt;\n</code></pre> {% endcode %}</p>"},{"location":"introduction/readme/beginner-tutorial-hello-database/#form-helpers","title":"Form Helpers","text":"<p>What we've done here is use form helpers to generate all of the form fields necessary for creating a new user in our database. It may feel a little strange using functions to generate form elements, but it will soon become clear why we're doing this. Trust us on this one\u2026 you'll love it!</p> <p>To generate the form tag's <code>action</code> attribute, the startFormTag() function takes parameters similar to the linkTo()function that we introduced in the Beginner Tutorial: Hello World tutorial. We can pass in <code>controller, action, key</code>, and other route- and parameter-defined URLs just like we do with linkTo().</p> <p>To end the form, we use the endFormTag() function. Easy enough.</p> <p>The textField() and passwordField() helpers are similar. As you probably guessed, they create <code>&lt;input&gt;</code> elements with <code>type=\"text\"</code> and <code>type=\"password\"</code>, respectively. And the submitTag() function creates an <code>&lt;input type=\"submit\" /&gt;</code> element.</p> <p>One thing you'll notice is the textField() and passwordField() functions accept arguments called <code>objectName</code> and <code>property</code>. As it turns out, this particular view code will throw an error because these functions are expecting an object named <code>user</code>. Let's fix that.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-database/#supplying-the-form-with-data","title":"Supplying the Form with Data","text":"<p>All of the form helper calls in our view specify an <code>objectName</code> argument with a reference to a variable named <code>user</code>. That means that we need to supply our view code with an object called <code>user</code>. Because the controller is responsible for providing the views with data, we'll set it there.</p> <p>Create a new ColdFusion component at <code>app/controllers/Users.cfc</code>.</p> <p>As it turns out, our controller needs to provide the view with a blank <code>user</code> object (whose instance variable will also be called <code>user</code> in this case). In our new action, we will use the model() function to generate a new instance of the user model.</p> <p>To get a blank set of properties in the model, we'll also call the generated model's new() method.</p> <p>{% code title=\"app/controllers/Users.cfc\" %} <pre><code>component extends=\"Controller\" {\n    function config(){}\n\n    function new() {\n        user = model(\"user\").new();\n    }\n}\n</code></pre> {% endcode %}</p> <p>Wheels will automatically know that we're talking about the <code>users</code> database table when we instantiate a <code>user</code> model. The convention: database tables are plural and their corresponding Wheels models are singular.</p> <p>Why is our model name singular instead of plural? When we're talking about a single record in the <code>users</code> database, we represent that with an individual model object. So the <code>users</code> table contains many <code>user</code> objects. It just works better in conversation.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-database/#the-generated-form","title":"The Generated Form","text":"<p>Now when we run the URL at <code>http://localhost/users/new</code>, we'll see the form with the fields that we defined.</p> <p>The HTML generated by your application will look something like this:</p> <p>{% code title=\"/users/new\" %} <pre><code>&lt;h1&gt;New User&lt;/h1&gt;\n\n&lt;form action=\"/users\" method=\"post\"&gt;\n    &lt;div&gt;\n        &lt;label for=\"user-username\"&gt;\n            Username\n            &lt;input id=\"user-username\" type=\"text\" value=\"\" name=\"user&amp;#x5b;username&amp;#x5d;\"&gt;\n        &lt;/label&gt;\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        &lt;label for=\"user-email\"&gt;\n            Email\n            &lt;input id=\"user-email\" type=\"text\" value=\"\" name=\"user&amp;#x5b;email&amp;#x5d;\"&gt;\n        &lt;/label&gt;\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        &lt;label for=\"user-passwd\"&gt;\n            Password\n            &lt;input id=\"user-passwd\" type=\"password\" value=\"\" name=\"user&amp;#x5b;passwd&amp;#x5d;\"&gt;\n        &lt;/label&gt;\n    &lt;/div&gt;\n\n    &lt;div&gt;&lt;input value=\"Save&amp;#x20;changes\" type=\"submit\"&gt;&lt;/div&gt;\n&lt;/form&gt;\n</code></pre> {% endcode %}</p> <p>So far we have a fairly well-formed, accessible form, without writing a bunch of repetitive markup.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-database/#handling-the-form-submission","title":"Handling the Form Submission","text":"<p>Next, we'll code the <code>create</code> action in the controller to handle the form submission and save the new user to the database.</p> <p>A basic way of doing this is using the model object's create() method:</p> <p>{% code title=\"app/controllers/Users.cfc\" %} <pre><code>function create() {\n    user = model(\"user\").create(params.user);\n\n    redirectTo(\n        route=\"users\",\n        success=\"User created successfully.\"\n    );\n}\n</code></pre> {% endcode %}</p> <p>Because we used the <code>objectName</code> argument in the fields of our form, we can access the user data as a struct in the <code>params</code> struct.</p> <p>There are more things that we can do in the <code>create</code> action to handle validation, but let's keep it simple in this tutorial.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-database/#listing-users","title":"Listing Users","text":"<p>Notice that our <code>create</code> action above redirects the user to the <code>users</code> index route using the redirectTo() function. We'll use this action to list all users in the system with \"Edit\" links. We'll also provide a link to the \"New User\" form that we just coded.</p> <p>First, let's get the data that the listing needs. Create an action named <code>index</code> in the <code>users</code> controller like so:</p> <p>{% code title=\"app/controllers/Users.cfc\" %} <pre><code>function index() {\n    users = model(\"user\").findAll(order=\"username\");\n}\n</code></pre> {% endcode %}</p> <p>This call to the model's findAll() method will return a query object of all users in the system. By using the method's <code>order</code> argument, we're also telling the database to order the records by <code>username</code>.</p> <p>In the view at <code>app/views/users/index.cfm</code>, it's as simple as looping through the query and outputting the data</p> <p>{% code title=\"app/views/users/index.cfm\" %} <pre><code>&lt;cfoutput&gt;\n\n&lt;h1&gt;Users&lt;/h1&gt;\n\n&lt;p&gt;#linkTo(text=\"New User\", route=\"newUser\")#&lt;/p&gt;\n\n&lt;table&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt;Username&lt;/th&gt;\n            &lt;th&gt;Email&lt;/th&gt;\n            &lt;th colspan=\"2\"&gt;&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        &lt;cfloop query=\"users\"&gt;\n            &lt;tr&gt;\n                &lt;td&gt;\n                    #EncodeForHtml(users.username)#\n                &lt;/td&gt;\n                &lt;td&gt;\n                    #EncodeForHtml(users.email)#\n                &lt;/td&gt;\n                &lt;td&gt;\n                    #linkTo(\n                        text=\"Edit\",\n                        route=\"editUser\",\n                        key=users.id,\n                        title=\"Edit #users.username#\"\n                    )#\n                &lt;/td&gt;\n                &lt;td&gt;\n                    #buttonTo(\n                        text=\"Delete\",\n                        route=\"user\",\n                        key=users.id,\n                        method=\"delete\",\n                        title=\"Delete #users.username#\"\n                    )#\n                &lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/cfloop&gt;\n    &lt;/tbody&gt;\n&lt;/table&gt;\n\n&lt;/cfoutput&gt;\n</code></pre> {% endcode %}</p> <p>{% hint style=\"info\" %} When to use <code>EncodeForHtml</code></p> <p>You'll see references to <code>EncodeForHtml</code> in some of our examples that output data. This helps escape HTML code in data that attackers could use to embed inject harmful JavaScript. (This is commonly referred to as an \"XSS attack,\" short for \"Cross-site Scripting attack.\")</p> <p>A rule of thumb: you do not need to use <code>EncodeForHtml</code> when passing values into Wheels helpers like <code>linkTo</code>, <code>buttonTo</code>, <code>startFormTag</code>, <code>textField</code>, etc. However, you need to escape data that is displayed directly onto the page without a Wheels helper. {% endhint %}</p>"},{"location":"introduction/readme/beginner-tutorial-hello-database/#editing-users","title":"Editing Users","text":"<p>We'll now show another cool aspect of form helpers by creating a screen for editing users.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-database/#coding-the-edit-form","title":"Coding the Edit Form","text":"<p>You probably noticed in the code listed above that we'll have an action for editing a single <code>users</code> record. We used the linkTo() form helper function to add an \"Edit\" button to the form. This action expects a <code>key</code> as well.</p> <p>Because in the linkTo() form helper function we specified the parameter <code>key</code>, Wheels adds this parameter into the URL when generating the route.</p> <p>Wheels will automatically add the provided 'key' from the URL to the params struct in the controllers edit() function.</p> <p>Given the provided <code>key</code>, we'll have the action load the appropriate <code>user</code> object to pass on to the view:</p> <p>{% code title=\"app/controllers/Users.cfc\" %} <pre><code>function edit() {\n    user = model(\"user\").findByKey(params.key);\n}\n</code></pre> {% endcode %}</p> <p>The view at <code>app/views/users/edit.cfm</code> looks almost exactly the same as the view for creating a user:</p> <p>{% code title=\"app/views/users/edit.cfm\" %} <pre><code>&lt;cfoutput&gt;\n\n&lt;h1&gt;Edit User #EncodeForHtml(user.username)#&lt;/h1&gt;\n\n#startFormTag(route=\"user\", key=user.key(), method=\"patch\")#\n    &lt;div&gt;\n        #textField(objectName=\"user\", property=\"username\", label=\"Username\")#\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        #textField(objectName=\"user\", property=\"email\", label=\"Email\")#\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        #passwordField(\n            objectName=\"user\",\n            property=\"passwd\",\n            label=\"Password\"\n        )#\n    &lt;/div&gt;\n\n    &lt;div&gt;#submitTag()#&lt;/div&gt;\n#endFormTag()#\n\n&lt;/cfoutput&gt;\n</code></pre> {% endcode %}</p> <p>But an interesting thing happens. Because the form fields are bound to the <code>user</code> object via the form helpers' <code>objectName</code> arguments, the form will automatically provide default values based on the object's properties.</p> <p>With the <code>user</code> model populated, we'll end up seeing code similar to this:</p> <p>{% code title=\"app/views/users/edit.cfm\" %} <pre><code>&lt;h1&gt;Edit User Homer Simpson&lt;/h1&gt;\n\n&lt;form action=\"/users/1\" method=\"post\"&gt;\n    &lt;input type=\"hidden\" name=\"_method\" value=\"patch\"&gt;\n\n    &lt;div&gt;\n        &lt;input type=\"hidden\" name=\"user&amp;#x5b;id&amp;#x5d;\" value=\"15\"&gt;\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        &lt;label for=\"user-username\"&gt;\n            Name\n            &lt;input\n                id=\"user-username\"\n                type=\"text\"\n                value=\"Homer Simpson\"\n                name=\"user&amp;#x5b;username&amp;#x5d;\"&gt;\n        &lt;/label&gt;\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        &lt;label for=\"user-email\"&gt;\n            Email\n            &lt;input\n                id=\"user-email\"\n                type=\"text\"\n                value=\"homerj@nuclearpower.com\"\n                name=\"user&amp;#x5b;email&amp;#x5d;\"&gt;\n        &lt;/label&gt;\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        &lt;label for=\"user-passwd\"&gt;\n            Password\n            &lt;input\n                id=\"user-passwd\"\n                type=\"password\"\n                value=\"donuts.mmm\"\n                name=\"user&amp;#x5b;passwd&amp;#x5d;\"&gt;\n        &lt;/label&gt;\n    &lt;/div&gt;\n\n    &lt;div&gt;&lt;input value=\"Save&amp;#x20;changes\" type=\"submit\"&gt;&lt;/div&gt;\n&lt;/form&gt;\n</code></pre> {% endcode %}</p> <p>Pretty cool, huh?</p>"},{"location":"introduction/readme/beginner-tutorial-hello-database/#opportunities-for-refactoring","title":"Opportunities for Refactoring","text":"<p>There's a lot of repetition in the <code>new</code> and <code>edit</code> forms. You'd imagine that we could factor out most of this code into a single view file. To keep this tutorial from becoming a book, we'll just continue on knowing that this could be better.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-database/#handing-the-edit-form-submission","title":"Handing the Edit Form Submission","text":"<p>Now we'll create the <code>update</code> action. This will be similar to the <code>create</code> action, except it will be updating the user object:</p> <p>{% code title=\"app/controllers/Users.cfc\" %} <pre><code>function update() {\n    user = model(\"user\").findByKey(params.key);\n    user.update(params.user);\n\n    redirectTo(\n        route=\"editUser\",\n        key=user.id,\n        success=\"User updated successfully.\"\n    );\n}\n</code></pre> {% endcode %}</p> <p>To update the <code>user</code>, simply call its update() method with the <code>user</code> struct passed from the form via <code>params</code>. It's that simple.</p> <p>After the update, we'll add a success message using the Flash and send the end user back to the edit form in case they want to make more changes.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-database/#deleting-users","title":"Deleting Users","text":"<p>Notice in our listing above that we have a <code>delete</code> action. Here's what it would look like:</p> <p>{% code title=\"app/controllers/Users.cfc\" %} <pre><code>function delete() {\n    user = model(\"user\").findByKey(params.key);\n    user.delete();\n\n    redirectTo(\n        route=\"users\",\n        success=\"User deleted successfully.\"\n    );\n}\n</code></pre> {% endcode %}</p> <p>We simply load the user using the model's findByKey() method and then call the object's delete() method. That's all there is to it.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-database/#database-says-hello","title":"Database Says Hello","text":"<p>We've shown you quite a few of the basics in getting a simple user database up and running. We hope that this has whet your appetite to see some of the power packed into the Wheels framework. There's plenty more.</p> <p>Be sure to read on to some of the related chapters listed below to learn more about working with Wheels's ORM.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-world/","title":"Beginner Tutorial: Hello World","text":""},{"location":"introduction/readme/beginner-tutorial-hello-world/#testing-your-install","title":"Testing Your Install","text":"<p>Let's make sure we're all on the same page. I'm going to assume that you've followed the Getting Started guide and have CommandBox all setup. If you haven't done that, stop and read that guide get everything setup. It's okay, this web page will wait for you.</p> <p>Okay, so you have Wheels installed and can see the Wheels \"Congratulations!\"\\ page as shown below. That wasn't that hard now, was it?</p> <p></p>"},{"location":"introduction/readme/beginner-tutorial-hello-world/#hello-world-your-first-wheels-app","title":"Hello World: Your First Wheels App","text":"<p>Okay, let's get to some example code. We know that you've been dying to get your\\ hands on some code!</p> <p>To continue with Programming Tutorial Tradition, we'll create the ubiquitous Hello World! application. But to keep things interesting, let's add a little Wheels magic along the way.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-world/#setting-up-the-controller","title":"Setting up the Controller","text":"<p>Let's create a controller from scratch to illustrate how easy it is to set up a\\ controller and plug it into the Wheels framework.</p> <p>First, create a file called <code>Say.cfc</code> in the <code>app/controllers</code> directory and add the\\ code below to the file.</p> <p>{% code title=\"app/controllers/Say.cfc\" %} <pre><code>component extends=\"Controller\"{\n}\n</code></pre> {% endcode %}</p> <p>Congratulations, you just created your first Wheels controller! What does this\\ controller do, you might ask? Well, to be honest, not much. It has no methods\\ defined, so it doesn't add any new functionality to our application. But because\\ it extends the base <code>Controller</code> component, it inherits quite a bit of powerful\\ functionality and is now tied into our Wheels application.</p> <p>So what happens if we try to call our new controller right now? Lets take a\\ look. Open your browser and point your browser to the new controller. Because my\\ local server is installed on port 60000, my URL is <code>http://127.0.0.1:60000/say</code>.\\ You may need to enter a different URL, depending on how your web server is\\ configured. In my case, I'm using CommandBox.</p> <p></p> <p>The error says \"Could not find the view page for the 'index' action in the 'say'\\ controller.\" Where did \"index\" come from? The URL we typed in only specified a\\ controller name but no action. When an action is not specified in the URL,\\ Wheels assumes that we want the default action. Out of the box, the default\\ action in Wheels is set to <code>index</code>. So in our example, Wheels tried to find\\ the <code>index</code> action within the <code>say</code> controller, and it threw an error because it\\ couldn't find its view page.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-world/#setting-up-an-action","title":"Setting up an Action","text":"<p>But let's jump ahead. Now that we have the controller created, let's add an\\ action to it called <code>hello</code>. Change your <code>say</code> controller so it looks like the\\ code block below:</p> <p>{% code title=\"app/controllers/Say.cfc\" %} <pre><code>component extends=\"Controller\" {\n    function hello() {\n    }\n}\n</code></pre> {% endcode %}</p> <p>As you can see, we created an empty method named <code>hello</code>.</p> <p>Now let's call our new action in the browser and see what we get. To call the\\ <code>hello</code> action, we simply add <code>/hello</code> to the end of the previous URL that we\\ used to call our <code>say</code> controller:</p> <p><code>http://127.0.0.1:60000/say/hello</code></p> <p>Once again, we get a ColdFusion error. Although we have created the controller\\ and added the <code>hello</code> action to it, we haven't created the view.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-world/#setting-up-the-view","title":"Setting up the View","text":"<p>By default, when an action is called, Wheels will look for a view file with\\ the same name as the action. It then hands off the processing to the view to\\ display the user interface. In our case, Wheels tried to find a view file for\\ our <code>say/hello</code> action and couldn't find one.</p> <p>Let's remedy the situation and create a view file. View files are simple CFML\\ pages that handle the output of our application. In most cases, views will\\ return HTML code to the browser. By default, the view files will have the same\\ name as our controller actions and will be grouped into a directory under the\\ view directory. This new directory will have the same name as our controller.</p> <p>Find the <code>views</code> directory inside the <code>app</code> directory, located at the root of your \\ Wheels installation. There will be a few directories in there already. For \\ now, we need to create a new directory in the <code>views</code> directory called <code>say</code>. \\ This is the same name as the controller that we created above.</p> <p>Now inside the <code>say</code> directory, create a file called <code>hello.cfm</code>. In the\\ <code>hello.cfm</code> file, add the following line of code:</p> <p>{% code title=\"app/views/say/hello.cfm\" %} <pre><code>&lt;h1&gt;Hello World!&lt;/h1&gt;\n</code></pre> {% endcode %}</p> <p>Save your <code>hello.cfm</code> file, and let's call our <code>say/hello</code> action once again.\\ You have your first working Wheels page if your browser looks like Figure 3\\ below.</p> <p></p> <p>You have just created your first functional Wheels page, albeit it is a very\\ simple one. Pat yourself on the back, go grab a snack, and when you're ready,\\ let's go on and extend the functionality of our Hello World! application a\\ little more.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-world/#adding-dynamic-content-to-your-view","title":"Adding Dynamic Content to Your View","text":"<p>We will add some simple dynamic content to our <code>hello</code> action and add a second\\ action to the application. We'll then use some Wheels code to tie the 2\\ actions together. Let's get get to it!</p>"},{"location":"introduction/readme/beginner-tutorial-hello-world/#the-dynamic-content","title":"The Dynamic Content","text":"<p>The first thing we are going to do is to add some dynamic content to our\\ <code>say/hello</code> action. Modify your <code>say</code> controller so it looks like the code block\\ below:</p> <p>{% code title=\"app/controllers/Say.cfc\" %} <pre><code>component extends=\"Controller\" {\n    function hello() {\n        time = Now();\n    }\n}\n</code></pre> {% endcode %}</p> <p>All we are doing here is creating a variable called <code>time</code> and setting its value\\ to the current server time using the basic ColdFusion <code>Now()</code> function. When we\\ do this, the variable becomes immediately available to our view code.</p> <p>Why not just set up this value directly in the view? If you think about it,\\ maybe the logic behind the value of time may eventually change. What if\\ eventually we want to display its value based on the user's time zone? What if\\ later we decide to pull it from a web service instead? Remember, the controller\\ is supposed to coordinate all of the data and business logic, not the view.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-world/#displaying-the-dynamic-content","title":"Displaying the Dynamic Content","text":"<p>Next, we will modify our <code>say/hello.cfm</code> view file so that it looks like the\\ code block below. When we do this, the value will be displayed in the browser.</p> <p>{% code title=\"app/views/say/hello.cfm\" %} <pre><code>&lt;h1&gt;Hello World!&lt;/h1&gt;\n&lt;p&gt;Current time: &lt;cfoutput&gt;#time#&lt;/cfoutput&gt;&lt;/p&gt;\n</code></pre> {% endcode %}</p> <p>call your <code>say/hello</code> action again in your browser. Your browser should look\\ like Figure 4 below.</p> <p></p> <p>This simple example showed that any dynamic content created in a controller\\ action is available to the corresponding view file. In our application, we\\ created a <code>time</code> variable in the <code>say/hello</code> controller action and display that\\ variable in our <code>say/hello.cfm</code> view file.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-world/#adding-a-second-action-goodbye","title":"Adding a Second Action: Goodbye","text":"<p>Now we will expand the functionality of our application once again by adding a\\ second action to our <code>say</code> controller. If you feel adventurous, go ahead and add\\ a <code>goodbye</code> action to the <code>say</code> controller on your own, then create a\\ <code>goodbye.cfm</code> view file that displays a \"Goodbye\" message to the user. If you're\\ not feeling that adventurous, we'll quickly go step by step.</p> <p>First, modify the the <code>say</code> controller file so that it looks like the code block\\ below.</p> <p>{% code title=\"app/controllers/Say.cfc\" %} <pre><code>component extends=\"Controller\" {\n    function hello() {\n        time = Now();\n    }\n\n    function goodbye() {\n    }\n}\n</code></pre> {% endcode %}</p> <p>Now go to the <code>app/views/say</code> directory and create a <code>goodbye.cfm</code> page.</p> <p>Add the following code to the <code>goodbye.cfm</code> page and save it.</p> <p>{% code title=\"app/views/say/goodbye.cfm\" %} <pre><code>Goodbye World!\n</code></pre> {% endcode %}</p> <p>If we did everything right, we should be able to call the new <code>say/goodbye</code>\\ action using the following URL:</p> <p><code>http://127.0.0.1:60000/say/goodbye</code></p> <p>Your browser should look like Figure 5 below:</p> <p></p>"},{"location":"introduction/readme/beginner-tutorial-hello-world/#linking-to-other-actions","title":"Linking to Other Actions","text":"<p>Now let's link our two actions together. We will do this by adding a link to the\\ bottom of each page so that it calls the other page.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-world/#linking-hello-to-goodbye","title":"Linking Hello to Goodbye","text":"<p>Open the <code>say/hello.cfm</code> view file. We are going to add a line of code to the\\ end of this file so our <code>say/hello.cfm</code> view file looks like the code block\\ below:</p> <p>{% code title=\"app/views/say/hello.cfm\" %} <pre><code>&lt;h1&gt;Hello World!&lt;/h1&gt;\n&lt;p&gt;Current time: &lt;cfoutput&gt;#time#&lt;/cfoutput&gt;&lt;/p&gt;\n&lt;p&gt;Time to say &lt;cfoutput&gt;#linkTo(text=\"goodbye\", action=\"goodbye\")#?&lt;/cfoutput&gt;&lt;/p&gt;\n</code></pre> {% endcode %}</p> <p>The linkTo() function is a built-in Wheels function. In this case, we are passing 2 named parameters to it. The first parameter, <code>text</code>, is the text\\ that will be displayed in the hyperlink. The second parameter, <code>action</code>, defines the action to point the link to. By using this built-in function, your application's main URL may change, and even controllers and actions may get shifted around, but you won't suffer from the dreaded dead link. Wheels will\\ always create a valid link for you as long as you configure it correctly when you make infrastructure changes to your application.</p> <p>Once you have added the additional line of code to the end of the\\ <code>say/hello.cfm</code> view file, save your file and call the <code>say/hello</code> action from\\ your browser. Your browser should look like Figure 6 below.</p> <p></p> <p>You can see that Wheels created a link for us and added an appropriate URL for\\ the <code>say/goodbye</code> action to the link.</p>"},{"location":"introduction/readme/beginner-tutorial-hello-world/#linking-goodbye-to-hello","title":"Linking Goodbye to Hello","text":"<p>Let's complete our little app and add a corresponding link to the bottom of our\\ <code>say/goodbye.cfm</code> view page.</p> <p>Open your <code>say/goodbye.cfm</code> view page and modify it so it looks like the code\\ block below.</p> <p>CFML: app/views/say/goodbye.cfm</p> <p>{% code title=\"app/views/say/goodbye.cfm\" %} <pre><code>&lt;h1&gt;Goodbye World!&lt;/h1&gt;\n&lt;p&gt;Time to say &lt;cfoutput&gt;#linkTo(text=\"hello\", action=\"hello\")#?&lt;/cfoutput&gt;&lt;/p&gt;\n</code></pre> {% endcode %}</p> <p>If you now call the <code>say/goodbye</code> action in your browser, your browser should\\ look like Figure 7 below.</p> <p></p>"},{"location":"introduction/readme/beginner-tutorial-hello-world/#much-more-to-learn","title":"Much More to Learn","text":"<p>You now know enough to be dangerous with Wheels. Look out! But there are many\\ more powerful features to cover. You may have noticed that we haven't even\\ talked about the M in MVC.</p> <p>No worries. We will get there. And we think you will enjoy it.</p>"},{"location":"introduction/readme/running-local-development-servers/","title":"Running Local Development Servers","text":""},{"location":"introduction/readme/running-local-development-servers/#starting-a-local-development-server","title":"Starting a local development server","text":"<p>With CommandBox, we don't need to have Lucee or Adobe ColdFusion installed locally. With a simple command, we can make CommandBox go and get the CFML engine we've requested, and quickly create a server running on Undertow. Make sure you're in the root of your website, and then run:</p> <p>{% tabs %} {% tab title=\"CommandBox\" %} server start {% endtab %} {% endtabs %}</p> <p>The server will then start on a random port on <code>127.0.0.1</code> based the configuration from the <code>server.json</code> file that is in the root of your application that comes with wheels. We can add various options to <code>server.json</code> to customize our server. Your default <code>server.json</code> will look something like this:</p> <pre><code>{\n    \"name\":\"wheels\",\n    \"web\":{\n        \"host\":\"localhost\",\n        \"webroot\":\"public\",\n        \"rewrites\":{\n            \"enable\":true,\n            \"config\":\"public/urlrewrite.xml\"\n        }\n    },\n    \"app\":{\n        \"cfengine\":\"lucee\"\n    }\n}\n</code></pre> <p>In this <code>server.json</code> file, the server name is set to <code>wheels</code>, meaning I can now start the server from any directory by simply calling <code>start myApp</code>. We don't have any port specified, but you can specify any port you want. Lastly, we have URL rewriting enabled and pointed the URL rewrite configuration file to <code>public/urlrewrite.xml</code>, which is included starting from Wheels 2.x.</p>"},{"location":"introduction/readme/running-local-development-servers/#using-custom-host-names","title":"Using custom host names","text":"<p>You can also specify hosts other than localhost: there's a useful CommandBox module to do that (Host updater) which will automatically create entries in your hosts file to allow for domains such as <code>myapp.local</code> running on port 80. You can install it via <code>install commandbox-hostupdater</code> when running the box shell with administrator privileges.</p>"},{"location":"introduction/readme/running-local-development-servers/#controlling-local-servers","title":"Controlling local servers","text":"<p>Obviously, anything you start, you might want to stop. Servers can be stopped either via right/ctrl clicking on the icon in the taskbar, or by the <code>stop</code> command. To stop a server running in the current directory issue the following:</p> <p>{% tabs %} {% tab title=\"CommandBox\" %} server stop {% endtab %} {% endtabs %}</p> <p>You can also stop a server from anywhere by using its name:</p> <p>{% tabs %} {% tab title=\"CommandBox\" %} server stop myApp {% endtab %} {% endtabs %}</p> <p>If you want to see what server configurations exist on your system and their current status, simply do <code>server list</code></p> <p>{% tabs %} {% tab title=\"CommandBox\" %} server list {% endtab %} {% endtabs %}</p> <pre><code>myapp (stopped)\n http://127.0.0.1:60000\n Webroot: /Users/wheels/Documents/myapp\n\nmyAPI (stopped)\n http://127.0.0.1:60010\n Webroot: /Users/wheels/Documents/myAPI\n\nmegasite (stopped)\n http://127.0.0.1:61280\n CF Engine: lucee 4.5.4+017\n Webroot: /Users/wheels/Documents/megasite\n\nawesomesite (stopped)\n http://127.0.0.1:60015\n CF Engine: lucee 4.5.4+017\n Webroot: /Users/wheels/Documents/awesomeo\n</code></pre> <p>To remove a server configuration from the list, you can use <code>server forget myapp</code>. Note the status of the servers on the list are somewhat unreliable, as it only remembers the last known state of the server: so if you start a server and then turn off your local machine, it may still remember it as <code>running</code> when you turn your local machine back on, which is why we recommend the use of <code>force: true</code> in the <code>server.json</code> file.</p>"},{"location":"introduction/readme/running-local-development-servers/#specifying-different-cf-engines","title":"Specifying different CF engines","text":"<p>By default, CommandBox will run Lucee (version 6.x at time of writing). You may wish to specify an exact version of Lucee, or use Adobe ColdFusion. We can do this via either setting the appropriate <code>cfengine</code> setting in <code>server.json</code>, or at runtime with the <code>cfengine=</code> argument.</p> <p>{% tabs %} {% tab title=\"CommandBox\" %} Start the default engine</p> <p>CommandBox&gt; start</p> <p>__</p> <p>Start the latest stable Lucee 5.x engine</p> <p>CommandBox&gt; start cfengine=lucee5</p> <p>__</p> <p>Start a specific engine and version</p> <p>CommandBox&gt; start cfengine=adobe@10.0.12</p> <p>__</p> <p>Start the most recent Adobe server that starts with version \"11\"</p> <p>CommandBox&gt; start cfengine=adobe@11</p> <p>__</p> <p>Start the most recent adobe engine that matches the range</p> <p>CommandBox&gt; start cfengine=\"adobe@&gt;9.0 &lt;=11\" {% endtab %} {% endtabs %}</p> <p>Or via <code>server.json</code></p> <pre><code>{\n    \"name\":\"myApp\",\n    \"force\":true,\n    \"web\":{\n        \"http\":{\n            \"host\":\"localhost\",\n            \"port\":60000\n        },\n        \"rewrites\":{\n            \"enable\":true,\n            \"config\":\"urlrewrite.xml\"\n        }\n    },\n    \"app\":{\n        \"cfengine\":\"adobe2018\"\n    },\n}\n</code></pre> <p>{% hint style=\"info\" %}</p>"},{"location":"introduction/readme/running-local-development-servers/#cfide-lucee-administrators","title":"CFIDE / Lucee administrators","text":"<p>The default username and password for all administrators is <code>admin</code> &amp; <code>commandbox</code> {% endhint %}</p> <p>You can of course run multiple servers, so if you need to test your app on Lucee 5.x, Lucee 6.x and Adobe 2018, you can just start three servers with different <code>cfengine=</code> arguments!</p> <p>{% hint style=\"info\" %}</p>"},{"location":"introduction/readme/running-local-development-servers/#watch-out","title":"Watch out","text":"<p>CommandBox 5.1 required to install dependencies easily {% endhint %}</p> <p>By default, the Lucee server that CommandBox starts includes all the essential Lucee extensions you need, but if need to minimize the size of the Lucee instance you launch, then you can use Lucee-Light by specifying <code>cfengine=lucee-light</code> in your <code>server.json</code> file. Wheels can run just fine on lucee-light (which is after all, Lucee, minus all the extensions) but at a minimum, requires the following extensions to be installed as dependencies in your <code>box.json</code>. Please note you may have to add any drivers you need for your database to this list as well.</p> <pre><code>\"dependencies\":{\n    \"lucee-image\":\"lex:https://ext.lucee.org/lucee.image.extension-1.0.0.35.lex\",\n    \"lucee-zip\": \"lex:https://ext.lucee.org/compress-extension-1.0.0.2.lex\",\n    \"lucee-esapi\": \"lex:https://ext.lucee.org/esapi-extension-2.1.0.18.lex\"\n}\n</code></pre> <p>Once added to your box.json file, while the server is running, just do <code>box install</code>, which will install the dependencies, and load them into the running server within 60 seconds.</p> <p>Alternatively you can download the extensions and add them manually to your server root's deploy folder (i.e <code>\\WEB-INF\\lucee-server\\deploy</code>)</p>"},{"location":"introduction/readme/tutorial-wheels-ajax-and-you/","title":"Tutorial: Wheels, AJAX, and You","text":"<p>Wheels was designed to be as lightweight as possible, so this keeps your options fairly open for developing AJAX features into your application.</p> <p>While there are several flavors of JavaScript libraries out there with AJAX support, we will be using the jQuery framework in this tutorial. Let's assume that you are fairly familiar with the basics of jQuery and know how to set it up.</p> <p>For this tutorial, let's create the simplest example of all: a link that will render a message back to the user without refreshing the page.</p>"},{"location":"introduction/readme/tutorial-wheels-ajax-and-you/#a-simple-example","title":"A Simple Example","text":"<p>In this example, we'll wire up some simple JavaScript code that calls a Wheels action asynchronously. All of this will be done with basic jQuery code and built-in Wheels functionality.</p> <p>First, let's make sure we've got an appropriate route setup. It might be you're still using the default <code>wildcard()</code> route which will create some default <code>GET</code> routes for the <code>controller/action</code> pattern, but we'll add a new route here just for practice. We are going to create a route named <code>sayHello</code> and direct it to the <code>hello</code> action of the <code>say</code> controller. There are two ways you could write this code a long hand method specifying the controller and action separately as well as a short hand method that combines the two into a single parameter.</p> <p>The longhand way would look like: {% code title=\"/config/routes.cfm\" %} <pre><code>mapper()\n  .get(name=\"sayHello\", controller=\"say\", action=\"hello\")\n.end()\n</code></pre> {% endcode %}</p> <p>The shorthand method would look like: {% code title=\"/config/routes.cfm\" %} <pre><code>mapper()\n  .get(name=\"sayHello\", to=\"say##hello\")\n.end()\n</code></pre> {% endcode %}</p> <p>You can decide which method you prefer. Both sets of code above are equivalent.</p> <p>Then, let's create a link to a controller's action in a view file, like so:</p> <p>{% code title=\"app/views/say/hello.cfm\" %} <pre><code>&lt;cfoutput&gt;\n\n&lt;!--- View code ---&gt;\n&lt;h1&gt;&lt;/h1&gt;\n&lt;p&gt;&lt;/p&gt;\n\n#linkTo(text=\"Alert me!\", route=\"sayHello\", id=\"alert-button\")#\n\n&lt;/cfoutput&gt;\n</code></pre> {% endcode %}</p> <p>That piece of code by itself will work just like you expect it to. When you click the link, you will load the <code>hello</code> action inside the <code>say</code> controller.</p> <p>But let's make it into an asynchronous request. Add this JavaScript (either on the page inside <code>script</code> tags or in a separate <code>.js</code> file included via javaScriptIncludeTag() ):</p> <p>{% code title=\"JavaScript\" %} <pre><code>(function($) {\n    // Listen to the \"click\" event of the \"alert-button\" link and make an AJAX request\n    $(\"#alert-button\").on(\"click\", function(event) {\n        $.ajax({\n            type: \"GET\",\n            // References \"/say/hello?format=json\"\n            url: $(this).attr(\"href\") + \"?format=json\",\n            dataType: \"json\",\n            success: function(response) {\n                $(\"h1\").html(response.message);\n                $(\"p\").html(response.time);\n            }\n        });\n\n        event.preventDefault();\n    });\n})(jQuery);\n</code></pre> {% endcode %}</p> <p>With that code, we are listening to the <code>click</code> event of the hyperlink, which will make an asynchronous request to the <code>hello</code> action in the <code>say</code> controller. Additionally, the JavaScript call is passing a URL parameter called <code>format</code> set to <code>json</code>.</p> <p>Note that the <code>success</code> block inserts keys from the response into the empty <code>h1</code> and <code>p</code> blocks in the calling view. (You may have been wondering about those when you saw the first example. Mystery solved.)</p> <p>The last thing that we need to do is implement the <code>say/hello</code> action. Note that the request expects a <code>dataType</code> of <code>JSON</code>. By default, Wheels controllers only generate HTML responses, but there is an easy way to generate JSON instead using Wheels's provides() and renderWith() functions:</p> <p>{% code title=\"app/controllers/Say.cfc\" %} <pre><code>component extends=\"Controller\" {\n    function config() {\n        provides(\"html,json\");\n    }\n\n    function hello() {\n        // Prepare the message for the user.\n        greeting = {};\n        greeting[\"message\"] = \"Hi there\";\n        greeting[\"time\"] = Now();\n\n        // Respond to all requests with `renderWith()`.\n        renderWith(greeting);\n    }\n}\n</code></pre> {% endcode %}</p> <p>In this controller's <code>config()</code> method, we use the provides() function to indicate that we want all actions in the controller to be able to respond with the data in HTML or JSON formats. Note that the client calling the action can request the type by passing a URL parameter named format or by sending the <code>format</code> in the request header.</p> <p>The call to renderWith() in the <code>hello</code> action takes care of the translation to the requested format. Our JavaScript is requesting JSON, so Wheels will format the <code>greeting</code> struct as JSON automatically and send it back to the client. If the client requested HTML or the default of none, Wheels will process and serve the view template at <code>app/views/say/hello.cfm</code>. For more information about  provides() and  renderWith(), reference the chapter on Responding with Multiple Formats.</p> <p>Lastly, notice the lines where we're setting <code>greeting[\"message\"]</code> and <code>greeting[\"time\"]</code>. Due to the case-insensitive nature of ColdFusion, we recommend setting variables to be consumed by JavaScript using bracket notation like that. If you do not use that notation (i.e., <code>greetings.message</code> and <code>greetings.time</code> instead), your JavaScript will need to reference those keys from the JSON as <code>MESSAGE</code> and <code>TIME</code> (all caps). Unless you like turning caps lock on and off, you can see how that would get annoying after some time.</p> <p>Assuming you already included jQuery in your application and you followed the code examples above, you now have a simple AJAX-powered web application built on Wheels. After clicking that <code>Alert me!</code> link, your say controller will respond back to you the serialized message via AJAX. jQuery will parse the JSON object and populate the <code>h1</code> and <code>p</code>with the appropriate data.</p>"},{"location":"introduction/readme/tutorial-wheels-ajax-and-you/#ajax-in-wheels-explained","title":"AJAX in Wheels Explained","text":"<p>That is it! Hopefully now you have a clearer picture on how to create AJAX-based features for your web applications.</p>"},{"location":"plugins/developing-plugins/","title":"Developing Plugins","text":"<p>Plugins are the recommended way to get new code accepted into Wheels. If you have written code that you think constitutes core functionality and should be added to Wheels, please create a plugin. After the community has used it for a while, it will be a simple task for us to integrate it into the Wheels core.</p> <p>To create a plugin named <code>MyPlugin</code>, you will need to create a <code>MyPlugin.cfc</code> and an <code>index.cfm</code> file. Then zip these together as <code>MyPlugin-x.x.zip</code>, where <code>x.x</code> is the version number of your plugin.</p> <p>The only other requirement to make a plugin work is that <code>MyPlugin.cfc</code> must contain a method named <code>init</code>. This method must set a variable called <code>this.version</code>, specifying the Wheels version the plugin is meant to be used on (or several Wheels version numbers in a list) and then return itself.</p> <p>Here's an example:</p> <p>{% code title=\"ExamplePlugin.cfc\" %} <pre><code>component {\n  function init(){\n    this.version=\"1.4.5,2.0\";\n    return this;\n  }\n}\n</code></pre> {% endcode %}</p> <p>{% hint style=\"info\" %}</p>"},{"location":"plugins/developing-plugins/#init-not-config","title":"Init() not config()","text":"<p>Note that plugins still use <code>init()</code> rather than <code>config()</code> {% endhint %}</p> <p>The <code>index.cfm</code> file is the user interface for your plugin and will be viewable when clicking through to it from the debug area of your application.</p>"},{"location":"plugins/developing-plugins/#using-a-plugin-to-add-or-alter-capabilities","title":"Using a Plugin to Add or Alter Capabilities","text":"<p>A plugin can add brand new functions to Wheels or override existing ones. A plugin can also have a simple one-page user interface so that the users of the plugin can provide input, display content, etc.</p> <p>To add or override a function, you simply add the function to <code>MyPlugin.cfc</code>, and Wheels will inject it into Wheels on application start.</p> <p>Please note that all functions in your plugin need to be public <code>(access=\"public\")</code>. If you have functions that should only be called from the plugin itself, we recommend starting the function name with the <code>$</code>character (this is how many internal Wheels functions are named as well) to avoid any naming collisions.</p> <p>It is also important to note that although you can overwrite functions, they are still available for you to leverage with the use of <code>core.functionName()</code>.</p>"},{"location":"plugins/developing-plugins/#example-overriding-timeagoinwords","title":"Example: Overriding timeAgoInWords()","text":"<p>Let's say that we wanted Wheels's built-in function timeAgoInWords() to return the time followed by the string \" (approximately)\":</p> <p>{% code title=\"timeAgoInWords.cfc\" %} <pre><code>public string function timeAgoInWords(){\n  return core.timeAgoInWords(argumentCollection=arguments) &amp; \" (approximately)\";\n}\n</code></pre> {% endcode %}</p>"},{"location":"plugins/developing-plugins/#plugin-attributes","title":"Plugin Attributes","text":"<p>There are 3 attributes you can set on your plugin to customize its behavior. The first and most important one is the <code>mixin</code> attribute.</p> <p>By default, the functions in your plugins will be injected into all Wheels objects (controller, model, etc.). This is usually not necessary, and to avoid this overhead, you can use the mixin attribute to specify exactly where the functions should be injected. If you have a function that should be available in a controller (or view) this is how it could look:</p> <pre><code>&lt;cfcomponent output=\"false\" mixin=\"controller\"&gt;\n</code></pre> <p>The <code>mixin</code> attribute can be set either on the <code>cfcomponent</code> tag or on the individual <code>cffunction</code> tags.</p> <p>The following values can be used for the mixin attribute: <code>application, global, none, controller, model, dispatch, microsoftsqlserver, mysql, oracle, postgresql</code>.</p> <p>Another useful attribute is the <code>environment</code> attribute. Using this, you can tell Wheels that a plugin should only inject its functions in certain environment modes. Here's an example of that, taken from the Scaffold plugin, which doesn't need to inject any functions to Wheels at all when it's running in production mode.</p> <pre><code>&lt;cfcomponent output=\"false\" mixin=\"controller\" environment=\"development\"&gt;\n</code></pre> <p>Finally, there is a way to specify that your plugin needs another plugin installed in order to work. Here's an example of that:</p> <pre><code>&lt;cfcomponent output=\"false\" dependency=\"someOtherPlugin\"&gt;\n</code></pre>"},{"location":"plugins/developing-plugins/#making-plugin-development-more-convenient-with-wheels-settings","title":"Making Plugin Development More Convenient with Wheels Settings","text":"<p>When your Wheels application first initializes, it will unzip and cache the zip files in the <code>app/plugins</code> folder. Each plugin then has its own expanded subfolder. If a subfolder exists but has no corresponding zip file, Wheels will delete the folder and its contents.</p> <p>This is convenient when you're deploying plugins but can be annoying when you're developing your own plugins. By default, every time you make a change to your plugin, you need to rezip your plugin files and reload the Wheels application by adding <code>?reload=true</code> to the URL.</p>"},{"location":"plugins/developing-plugins/#disabling-plugin-overwriting","title":"Disabling Plugin Overwriting","text":"<p>To force Wheels to skip the unzipping process, set the <code>overwritePlugins</code> setting to <code>false</code> in the development` environment.</p> <p>{% code title=\"/config/development/settings.cfm\" %} <pre><code>set(overwritePlugins=false);\n</code></pre> {% endcode %}</p> <p>With this setting, you'll be able to reload your application without worrying about your file being overwritten by the contents of the corresponding zip file.</p>"},{"location":"plugins/developing-plugins/#disabling-plugin-folder-deletion","title":"Disabling Plugin Folder Deletion","text":"<p>To force Wheels to skip the folder deletion process, set the <code>deletePluginDirectories</code> setting to <code>false</code> for your <code>development</code> environment.</p> <p>{% code title=\"/config/development/settings.cfm\" %} <pre><code>set(deletePluginDirectories=false);\n</code></pre> {% endcode %}</p> <p>With this setting, you can now develop new plugins in your application without worrying about having a corresponding zip file in place.</p> <p>See the chapter on Configuration and Defaults for more details about changing Wheels settings.</p>"},{"location":"plugins/developing-plugins/#stand-alone-plugins","title":"Stand-Alone Plugins","text":"<p>If your plugin is completely stand-alone, you can call it from its view page using just the name of the plugin. This works because Wheels has created a pointer to the plugin object residing in the <code>application scope</code>. One example of a stand-alone plugin is the PluginManager. If you check out its view code, you will see that it calls itself like this:</p> <pre><code>pluginManager.installPlugin(URL.plugin);\n</code></pre>"},{"location":"plugins/developing-plugins/#dont-forget-to-comment","title":"Don't forget to comment!","text":"<p>With Wheels 2.x we can take advantage of the inbuilt documentation generator. Try and tag your public facing functions appropriately.</p> <p>Here's an example from the wheels ical4J plugin:</p> <p>{% code title=\"ical4J\" %} <pre><code>/**\n * Given a iCal style repeat rule, a seed date and a from-to range, get all recurring dates which satisfy those conditions\n *\n * [section: Plugins]\n * [category: Calendaring]\n *\n * @pattern The ical RRULE style string\n * @seed The seed date\n * @from When to generate repeat range from\n * @to When to generate repeat range till\n */\npublic array function getRecurringDates(\n required string pattern,\n required date seed,\n date from,\n date to\n){\n    local.recur = $ical_createRecur(arguments.pattern);\n    return local.recur.getDates($ical_createDate(arguments.seed), $ical_createDate(arguments.from), $ical_createDate(arguments.to), $ical_createValue(\"DATE\"));\n}\n</code></pre> {% endcode %}</p> <p>The javaDoc style comments will automatically show this function under Plugins &gt; Calendaring, rather than in the \"Uncategorized\" functions. The <code>@parameter</code> lines give a helpful hint to the user</p>"},{"location":"plugins/developing-plugins/#boxjson","title":"Box.json","text":"<p>With <code>2.x</code>, a <code>box.json</code> is required for new plugins. Read the Publishing Plugins chapter for more details on that. One advantage is that Wheels now includes the version and meta data for each plugin when there's a <code>box.json</code> file.</p> <pre><code>// Version Number\napplication.wheels.pluginMeta[\"pluginName\"][\"version\"];\n\n// Meta Struct from box.json\napplication.wheels.pluginMeta[\"pluginName\"][\"boxjson\"];\n</code></pre> <p>This saves you having to read in the <code>box.json</code> file, should you wish to use it for storing ancillary data and settings.</p>"},{"location":"plugins/developing-plugins/#automatic-java-lib-mappings","title":"Automatic Java Lib Mappings","text":"<p>If you've ever wanted to do a quick wrapper for a java class/lib, this new feature in <code>2.x</code> means you can add a <code>.class</code> or <code>.jar</code> file, and it will be automatically mapped into the <code>this.javaSettings.loadpaths</code> setting when the application starts.</p> <p>This means you can distribute plugins with Java libs and they'll work properly without additional user intervention!</p>"},{"location":"plugins/developing-plugins/#enabling-travis-ci-testing","title":"Enabling Travis CI Testing","text":"<p>One of the nicest things about <code>2.x</code> is the tighter integration with command-line tools such as CommandBox. We can take advantage of the new testing suite JSON return type and the new Wheels CLI in CommandBox 2.x to easily build a Travis CI test. It's perhaps easiest to just show the <code>.travis.yml</code> file - this goes in the root of your gitHub plugin repository, and once you've turned on testing under Travis.org, will run your test suite on every commit.</p> <p>{% code title=\".travis.yml\" %} <pre><code>language: java\nsudo: required\njdk:\n  - oraclejdk8\nbefore_install:\n  # Get Commandbox\n  - sudo apt-key adv --keyserver keys.gnupg.net --recv 6DA70622\n  - sudo echo \"deb http://downloads.ortussolutions.com/debs/noarch /\" | sudo tee -a /etc/apt/sources.list.d/commandbox.list\ninstall:\n  # Install Commandbox\n  - sudo apt-get update &amp;&amp; sudo apt-get --assume-yes install CommandBox\n  # Check it's working\n  - box version\n  # Install CLI: needed to repackage the plugin to a zip on install\n  - box install wheels-cli\n  # Install Master Branch; nb, installed into folder of the git repo name, i.e neokoenig/wheels-ical4j\n  - box install cfwheels/cfwheels\n  # Install the Plugin: use gitHub path to get the absolute latest rather than the forgebox version\n  - box install neokoenig/wheels-ical4j\nbefore_script:\n  # Master branch has a bunch of server.jsons we can use: lucee4 | lucee5 | cf10 | cf11 | cf2016\n  - box server start lucee5\n# Type should be the name of the plugin | servername should reflect the server we've just started\nscript: &gt;\n  testResults=\"$(box wheels test type=ical4j servername=lucee5)\";\n  echo \"$testResults\";\n  if ! grep -i \"\\Tests Complete: All Good!\" &lt;&lt;&lt; $testResults;  then exit 1; fi\nnotifications:\n    email: true\n</code></pre> {% endcode %}</p> <p>In sum, this:</p> <ul> <li>Installs CommandBox</li> <li>Installs the Wheels CLI</li> <li>Installs the master branch of the Wheels repository</li> <li>Installs your plugin from your repository (rather than the forgebox version which will be the version behind)</li> <li>Starts the local server</li> <li>Runs the test suite, pointing only at your plugin's unit tests</li> </ul> <p>Naturally, you could do more complex things with this, such as multiple CF Engines, but for a quick setup it's a good starting point!</p>"},{"location":"plugins/developing-plugins/#now-go-build-some-plugins","title":"Now Go Build Some Plugins!","text":"<p>Armed with this knowledge about plugins, you can now go and add that feature you've always wanted or change that behavior you've always hated. We've stripped you of any right to blame us for your discontents. :)</p>"},{"location":"plugins/installing-and-using-plugins/","title":"Installing and Using Plugins","text":"<p>Wheels is a fairly lightweight framework, and we like to keep it that way. We won't be adding thousands of various features to Wheels just because a couple of developers find them \"cool.\" ;)</p> <p>Our intention is to only have functionality we consider \"core\" inside of Wheels itself and then encourage the use of plugins for everything else.</p> <p>By using plugins created by the community or yourself, you're able to add brand new functionality to Wheels or completely change existing features. The possibilities are endless.</p>"},{"location":"plugins/installing-and-using-plugins/#manually-installing-and-uninstalling-plugins","title":"Manually Installing and Uninstalling Plugins","text":"<p>This couldn't be any simpler. To install a plugin, just download the plugin's <code>zip</code> file and drop it in the <code>app/plugins</code> folder.</p> <p>If you want to remove it later simply delete the <code>zip</code> file. (Wheels will clean up any leftover folders and files.)</p> <p>Reloading Wheels is required when installing/uninstalling. (Issue a <code>reload=true</code> request.)</p>"},{"location":"plugins/installing-and-using-plugins/#installing-via-commandbox","title":"Installing via Commandbox","text":"<p>With the Wheels CLI installed, you can just do:</p> <p>{% code title=\"CommandBox\" %} <pre><code># List all Wheels plugins on forgebox\n$ wheels plugins list\n</code></pre> {% endcode %}</p> <p>This will present a list of available plugins. To install one, simply take note of the \"Slug\" and run with the <code>install</code> command.</p> <p>{% code title=\"CommandBox\" %} <pre><code># install the Shortcodes plugin which has a slug of shortcodes\n$ install shortcodes\n\n# install the Select String plugin which has a slug of select-string\n$ install select-string\n</code></pre> {% endcode %}</p> <p>When run in the root of a Wheels application, it should automatically add the plugin to <code>/app/plugins</code> and generate a <code>.zip</code> file with the corresponding name and version number.</p>"},{"location":"plugins/installing-and-using-plugins/#file-permissions-on-plugins-folder","title":"File Permissions on plugins Folder","text":"<p>You may need to change access permissions on your application's <code>app/plugins</code> folder so that Wheels can write the subfolders and files that it needs to run. If you get an error when testing out a plugin, you may need to loosen up the permission level.</p>"},{"location":"plugins/installing-and-using-plugins/#plugin-naming-versioning-and-dependencies","title":"Plugin Naming, Versioning, and Dependencies","text":"<p>When you download plugins, you will see that they are named something like this: <code>Scaffold-0.1.zip</code>. In this case, <code>0.1</code> is the version number of the <code>Scaffold</code> plugin. If you drop both <code>Scaffold-0.1.zip</code> and <code>Scaffold-0.2.zip</code> in the plugins folder, Wheels will use the one with the highest version number and ignore any others.</p> <p>If you try to install a plugin that is not compatible with your installed version of Wheels or not compatible with a previously installed plugin (i.e., they try to add/override the same functions), Wheels will throw an error on application start.</p> <p>If you install a plugin that depends on another plugin, you will get a warning message displayed in the debug area. This message will name the plugin that you'll need to download and install to make the originally installed plugin work correctly.</p> <p>The debug area will also show the version number of the plugin if the plugin Author has included a suitable <code>box.json</code> file.</p>"},{"location":"plugins/installing-and-using-plugins/#due-diligence","title":"Due Diligence","text":"<p>Plugins are very powerful, remember, they can completely override other functions, including Wheels core functions and functions of other installed plugins. For this reason we recommend that you take a look at the code itself for the plugins that you intend to use. This is especially important if you have multiple plugins that override the same function. In those cases you'll have to determine if the plugins play well with each other (which they typically do if they run their code and then defer back to the Wheels core function afterwards) or if they clash and cause problems (in which case you can perhaps contribute to the plugin repository in an effort to make the plugins behave better in situations like this).</p>"},{"location":"plugins/installing-and-using-plugins/#available-plugins","title":"Available Plugins","text":"<p>To view all official plugins that are available for Wheels you can go to the Plugins listing on forgebox. Often the community will have a better idea of what plugins work best for your situation, so get on the mailing list and ask if you're in any doubt.</p>"},{"location":"plugins/publishing-plugins/","title":"Publishing Plugins","text":"<p>So, you've created your new magic, world solving plugin, and naturally, you want to share it with the world. Wheels uses forgebox.io as a plugins repository. This enables us to manage our Wheels application's dependencies, install updates easily via CommandBox and more.</p> <p>As a plugin author, it's well worth spending a little time setting yourself up to work with forgebox with the minimum amount of effort. Once done, you'll be able to either publish directly from the commandline, or upload to forgebox manually.</p> <p>This tutorial makes extensive use of CommandBox, GIT and the Wheels CLI.</p>"},{"location":"plugins/publishing-plugins/#requirements","title":"Requirements","text":"<p>We strongly recommend always having the latest version of CommandBox.</p> <p>You'll also want the Wheels CLI. You can install that in CommandBox via <code>install wheels-cli</code>. This will also update it if you've got an older version installed.</p> <p>Some scripted commands also require the git CLI, although these are technically optional.</p>"},{"location":"plugins/publishing-plugins/#setup-a-forgebox-user-account","title":"Setup a forgebox user account","text":"<p>If you've not got a forgebox.io account you can either register directly on forgebox or very quickly via CommandBox itself</p> <p>{% code title=\"CommandBox\" %} <pre><code># Register for an account\n$ forgebox register\n</code></pre> {% endcode %}</p> <p>Once you've got your credentials, you should be good to go.</p> <p>If you've already got an account, you need to login at least once, which will store an API token for future use:</p> <p>{% code title=\"CommandBox\" %} <pre><code># Login\n$ forgebox login\n\n# (optional) Check which account you're logged in with\n$ forgebox whoami\n</code></pre> {% endcode %}</p>"},{"location":"plugins/publishing-plugins/#ensure-youve-got-a-boxjson-in-your-plugin-root","title":"Ensure you've got a box.json in your plugin root","text":"<p>Forgebox uses your local <code>box.json</code> - you'll need one! Critical package information like the name of your plugin and the location are stored here. You can create one manually, or you can run:</p> <p>{% code title=\"Shell\" %} <pre><code># Create a basic box.json\n$ init\n\n# Or pass in parameters at the same time\n$ init name=\"My Funky Plugin\" slug=my-funky-plugin version=1.0.0 type=\"wheels-plugins\"\n\n# Or use the wizard\n$ init --wizard\n</code></pre> {% endcode %}</p>"},{"location":"plugins/publishing-plugins/#ensure-youve-set-some-critical-boxjson-attributes","title":"Ensure you've set some critical box.json attributes","text":"<p>In order for other Wheels users to quickly identify and install your plugin via the Wheels CLI, make sure you set the following <code>box.json</code> attributes - whilst a standard <code>box.json</code> might only have <code>name, version,author</code>, we need a little more information. Here's a template to get you started: (replace the values in CAPS)</p> <p>{% code title=\"box.json\" %} <pre><code>{\n  // Required:\n \"name\":\"PLUGIN-NAME\",\n \"version\":\"0.0.1\",\n \"author\":\"YOURNAME\",\n  // Required: GitHub Repository stub\n \"location\":\"GITHUBUSERNAME/GITHUB-REPONAME#v0.0.1\",\n  // Required: Should always be /app/plugins/\n \"directory\":\"/app/plugins/\",\n  // Required: Should always be true\n \"createPackageDirectory\":true,\n  // Required: Must be the name of your primary CFC File\n \"packageDirectory\":\"PLUGIN-NAME\",\n  // Required: The Forgebox slug, must be unique\n \"slug\":\"FORGEBOX-SLUG\",\n  // Required: Must be wheels-plugins\n \"type\":\"wheels-plugins\",\n  // Required: From here is optional but recommended\n \"homepage\":\"https://github.com/GITHUBUSERNAME/GITHUB-REPONAME\",\n \"shortDescription\":\"PLUGIN DESCRIPTION\",\n \"keywords\":\"KEYWORD\",\n \"private\":false,\n \"scripts\":{\n   \"postVersion\":\"package set location='GITHUBUSERNAME/GITHUB-REPONAME#v`package version`'\",\n \"patch-release\":\"bump --patch\",\n \"minor-release\":\"bump --minor\",\n \"major-release\":\"bump --major\",\n \"postPublish\":\"!git push --follow-tags &amp;&amp; publish\"\n  }\n}\n</code></pre> {% endcode %}</p> <p>Your completed <code>box.json</code> might look something like this:</p> <p>{% code title=\"box.json\" %} <pre><code>{\n  // Required:\n \"name\":\"Shortcodes\",\n \"version\":\"0.0.4\",\n \"author\":\"Tom King\",\n  // Required: GitHub Repository stub, including version hash\n \"location\":\"neokoenig/wheels-shortcodes#v0.0.4\",\n  // Required: Should always be /app/plugins/\n \"directory\":\"/app/plugins/\",\n  // Required: Should always be true\n \"createPackageDirectory\":true,\n  // Required: Must be the name of your primary CFC File\n \"packageDirectory\":\"Shortcodes\",\n  // Required: The Forgebox slug, must be unique\n \"slug\":\"shortcodes\",\n  // Required: Must be wheels-plugins\n \"type\":\"wheels-plugins\",\n  // Required: From here is optional but recommended\n \"homepage\":\"https://github.com/neokoenig/wheels-shortcodes\",\n \"shortDescription\":\"Shortcodes Plugin for Wheels\",\n \"keywords\":\"shortcodes\",\n \"private\":false,\n \"scripts\":{\n   \"postVersion\":\"package set location='neokoenig/wheels-shortcodes#v`package version`'\",\n \"patch-release\":\"bump --patch\",\n \"minor-release\":\"bump --minor\",\n \"major-release\":\"bump --major\",\n \"postPublish\":\"!git push --follow-tags &amp;&amp; publish\"\n  }\n}\n</code></pre> {% endcode %}</p>"},{"location":"plugins/publishing-plugins/#using-the-forgebox-staging-server-optional","title":"Using the forgebox staging server (optional)","text":"<p>If this is the first time you've done this, you might want to try the forgebox staging server. That way you can make sure your publishing process is spot on without having lots of unnecessary versions pushed up. You can view the staging server version at http://forgebox.stg.ortussolutions.com/</p> <p>{% code title=\"CommandBox\" %} <pre><code># Add staging server configuration\n$ config set endpoints.forgebox.APIURL=http://forgebox.stg.ortussolutions.com/api/v1\n\n# Revert back to production configuration\n$ config clear endpoints.forgebox.APIURL\n</code></pre> {% endcode %}</p> <p>Remember this configuration will \"stick\", so make sure you change it back afterwards. (I find once changed, it might not kick in until you reload the CommandBox shell via <code>r</code>).</p>"},{"location":"plugins/publishing-plugins/#publishing-a-plugin-to-forgebox","title":"Publishing a plugin to forgebox","text":"<p>Both Wheels CLI and Forgebox are expecting a tagged release with the plugin contents (e.g. zip). So the best way to publish is to...</p> <ol> <li>Navigate into the plugin directory</li> <li>Ensure that directory is authorized to publish the repo (e.g. <code>git remote -v</code> should list your fetch/push endpoints)</li> </ol> <p>Note: Git dislikes nested repos, so it's best to setup a test wheels site specifically for plugin development/deployment. Then <code>git init</code> within each plugin directory itself, but not at the root. (e.g. <code>/app/plugins/PluginName/</code>)</p> <p>{% code title=\"CommandBox\" %} <pre><code># from CommandBox prompt, within plugin directory\n$ run-script patch-release\n</code></pre> {% endcode %}</p> <p>ForgeBox does not store your actual package files like npm, but points to your download location. </p> <p>The following should happen (again, assuming you have git publish rights from that plugin directory)</p> <ol> <li>Auto increment your version number within box.json</li> <li>Push updated box.json to forgebox (with new version number + location)</li> <li>Create a git \"Tagged Release\" which is basically a zip containing the source files</li> </ol> <p>Once you run this command, you can run <code>forgebox show my-package</code> to confirm it's there. If you change the slug, a new package will be created. If you change the version, a new version will be added to the existing package.</p>"},{"location":"plugins/publishing-plugins/#adding-a-new-version-via-publishing-scripts","title":"Adding a new version via publishing scripts","text":"<p>By adding the following block to our <code>box.json</code>, we can more easily deploy new versions with a single command:</p> <p>{% code title=\"box.json\" %} <pre><code>\"scripts\":{\n   \"postVersion\":\"package set location='GITHUBUSERNAME/GITHUB-REPONAME#v`package version`'\",\n \"patch-release\":\"bump --patch\",\n \"minor-release\":\"bump --minor\",\n \"major-release\":\"bump --major\",\n \"postPublish\":\"!git push --follow-tags &amp;&amp; publish\"\n  }\n</code></pre> {% endcode %}</p> <p>Obviously, you'll need to change <code>location='GITHUBUSERNAME/GITHUB-REPONAME#v</code> to your repo.</p> <p>With these in place, once you've committed your changes to your local repository, you can now do:</p> <p>{% code title=\"CommandBox\" %} <pre><code># Don't forget to commit your changes. You can access git directly from commandbox using !\n$ !git add .\n$ !git commit -m \"my new changes\"\n\n# Move from 1.0.0 -&gt; 1.0.1\n$ run-script patch-release\n\n# Move from 1.0.0 -&gt; 1.1.0\n$ run-script minor-release\n\n# Move from 1.0.0 -&gt; 2.0.0\n$ run-script major-release\n</code></pre> {% endcode %}</p> <p>This will: </p> <ul> <li>Set the package location to include the new version number</li> <li>Publish to forgebox.io</li> <li>Push your changes to gitHub (assuming you've set that up) </li> <li>Publish a gitHub tagged release</li> </ul> <p>This saves you having to manually update the version number too!</p> <p>{% code title=\"Commandbox\" %} <pre><code># Example output of a patch release\n$ run-script patch-release\n\nRunning package script [patch-release].\n&gt; bump --patch &amp;&amp; publish\nSet version = 0.1.7\n\nRunning package script [postVersion].\n&gt; package set location='neokoenig/wheels-cli#v`package version`'\nSet location = neokoenig/wheels-cli#v0.1.7\nPackage is a Git repo.  Tagging...\nTag [v0.1.7] created.\nSending package information to ForgeBox, please wait...\nPackage is alive, you can visit it here: https://www.forgebox.io/view/wheels-cli\n\nRunning package script [postPublish].\n&gt; !git push --follow-tags\nCounting objects: 10, done.\nDelta compression using up to 12 threads.\nCompressing objects: 100% (8/8), done.\nWriting objects: 100% (10/10), 908 bytes | 0 bytes/s, done.\nTotal 10 (delta 5), reused 0 (delta 0)\nremote: Resolving deltas: 100% (5/5), completed with 4 local objects.\nTo https://github.com/neokoenig/wheels-cli.git\n   477648f..400604b  master -&gt; master\n * [new tag]         v0.1.7 -&gt; v0.1.7\n\nPackage published successfully in [forgebox]\n</code></pre> {% endcode %}</p> <p>Lastly, you can double check it's made it into the plugins list via <code>wheels plugins list</code></p>"},{"location":"plugins/publishing-plugins/#removing-a-plugin-from-forgebox","title":"Removing a plugin from forgebox","text":"<p>Likewise, you can unpublish a plugin, but keep in mind people might be relying on your plugin, so don't do this lightly!</p> <p>{% code title=\"CommandBox\" %} <pre><code>// Remove all versions of a package\n$ unpublish\n\n// Remove a specific version of a package\n$ unpublish 1.2.3\n\n// Skip the user confirmation prompt\n$ unpublish 1.2.3 --force\n</code></pre> {% endcode %}</p>"},{"location":"project-documentation/overview/","title":"Overview","text":"<p>The intention of this section is to document the various pieces of the tooling that make the project function. This is not so much about the framework and using the framework as a developer but more for collaborator, contributors, and maintainers of the project.</p>"},{"location":"project-documentation/overview/#wheels-guides","title":"Wheels Guides","text":"<p>The guides are hosted by GitBooks.com and are accessible at https://wheels.dev/guides they are however driven by the guides folder in the Wheels repository on GitHub. This means that making changes to the guides can be accomplished via a Pull Request and code changes and changes to the guides can be submitted in the same PR.</p>"},{"location":"project-documentation/overview/#making-changes-to-the-guides","title":"Making changes to the Guides","text":"<p>Start by cloning the Wheels repository. The guides are contained in the <code>guides</code> folder of the repo. Make your proposed changes and submit a PR. Once the PR is reviewed and merged, the changes will automatically be synced up to GitBook and the changes will be live on the site.</p>"},{"location":"project-documentation/overview/#api-documentation","title":"API Documentation","text":"<p>The API Documentation is comprised of two parts. The first is a json file that contains the data for a particular version of the framework and the second is a small Wheels App that reads that json file and displays the UI you see when you visit https://wheels.dev/api/v3.0.0.</p> <p>We use a javadoc style of notation to document all the public functions of the framework. This system is actually available to you to document your own functions and is documented at Documenting your Code. Additionally the sample code is driven off text files that are located in wheels/public/docs/reference.</p> <p>So the first step in submitting changes to the API Documentation is similar to the Wheels Guides and starts with cloning the repository, making the changes, and submitting a PR.</p> <p>Once approved and merged in, then the json file is generated using a utility embedded in the framework itself. So once a version has been published to ForgeBox (either a SNAPSHOT or a stable release), use command box to install that version of the framework.</p> <p><code>wheels generate app name=json template=wheels-base-template@be cfmlEngine=lucee5</code></p> <p>This will install the Bleeding Edge version of the framework with the Lucee v5 CFML Engine. Once the installation completes start your server.</p> <p><code>server start</code></p> <p>When the Congratulations screen is displayed, click on the Info Tab on the top menu and then the Utils tab from the sub menu.</p> <p>Then click on the Export Docs as JSON link to generate the json file. Save the json file. Typically these files are named based on the version of the framework they represent. i.e. the file for v2.5.0 would be named  v2.5.json.</p> <p>Now that we have generated the JSON data file, we need to add it to the codebase for the API Documentation site. This codebase is driven from the wheels-api repository. A PR can be used to submit the json file to this repository. Currently the core team is manually adding this file to the repository when the API docs need to be updated.</p> <p>The application is then uploaded to the site hosted by Viviotech.</p> <p>At the moment the process of updating the API Documentation is very manual, I hope to be able to extend the CI pipeline and automatically update the API docs with each commit similarly to how the packages on ForgeBox are published automatically on each commit.</p>"},{"location":"upgrading/3.0.0-config-migration/","title":"Config Directory Migration (3.0.0)","text":""},{"location":"upgrading/3.0.0-config-migration/#overview","title":"Overview","text":"<p>In CFWheels 3.0.0, we've made a significant change to improve the framework's structure and make it more intuitive for developers. The configuration directory has been moved from <code>/app/config</code> to <code>/config</code> at the root level of your application.</p>"},{"location":"upgrading/3.0.0-config-migration/#why-this-change","title":"Why This Change?","text":"<ul> <li>Better Organization: Configuration files are now at the same level as the <code>/app</code> directory, making them easier to find and manage</li> <li>Industry Standards: This aligns with common conventions in modern web frameworks</li> <li>Clearer Separation: Application code (<code>/app</code>) is now clearly separated from configuration (<code>/config</code>)</li> </ul>"},{"location":"upgrading/3.0.0-config-migration/#breaking-change","title":"Breaking Change","text":"<p>This is a breaking change that requires action when upgrading to CFWheels 3.0.0. Your application will not work correctly until you complete the migration.</p>"},{"location":"upgrading/3.0.0-config-migration/#whats-changed","title":"What's Changed","text":"<ul> <li><code>/app/config/</code> \u2192 <code>/config/</code></li> <li>All configuration files (settings.cfm, routes.cfm, etc.) must be moved</li> <li>All references to the old path must be updated</li> </ul>"},{"location":"upgrading/3.0.0-config-migration/#migration-methods","title":"Migration Methods","text":""},{"location":"upgrading/3.0.0-config-migration/#method-1-automated-migration-recommended","title":"Method 1: Automated Migration (Recommended)","text":"<p>We provide a CommandBox recipe that automates most of the migration process:</p> <pre><code># From your application root directory\nbox recipe https://raw.githubusercontent.com/cfwheels/cfwheels/develop/cli/recipes/config-migration.boxr\n</code></pre> <p>The recipe will: 1. Back up any existing <code>/config</code> directory 2. Move <code>/app/config</code> to <code>/config</code> 3. Update your <code>Application.cfc</code> 4. Scan for references to the old path 5. Create a migration log</p>"},{"location":"upgrading/3.0.0-config-migration/#method-2-manual-migration","title":"Method 2: Manual Migration","text":"<p>If you prefer to migrate manually:</p> <ol> <li> <p>Move the config directory <pre><code>mv app/config config\n</code></pre></p> </li> <li> <p>Update Application.cfc</p> </li> </ol> <p>Find and replace all occurrences of:    - <code>app/config/</code> with <code>config/</code>    - <code>app\\config\\</code> with <code>config\\</code>    - <code>/app/config</code> with <code>/config</code>    - <code>\\app\\config</code> with <code>\\config</code></p> <ol> <li>Update your code</li> </ol> <p>Search your entire codebase for references to <code>app/config</code> and update them:    <pre><code># Find all files with references\ngrep -r \"app/config\" app/ tests/\n</code></pre></p> <ol> <li>Update any custom scripts or deployment configurations</li> </ol>"},{"location":"upgrading/3.0.0-config-migration/#common-files-to-check","title":"Common Files to Check","text":"<p>Make sure to update references in:</p> <ul> <li><code>Application.cfc</code></li> <li>Custom initialization code</li> <li>Deployment scripts</li> <li>Documentation</li> <li>Test files</li> <li>Any hardcoded paths in your models, controllers, or views</li> </ul>"},{"location":"upgrading/3.0.0-config-migration/#verification","title":"Verification","text":"<p>After migration, verify that:</p> <ol> <li>Your application starts without errors</li> <li>All configuration files are loaded correctly</li> <li>Routes are working as expected</li> <li>Database connections are established</li> <li>All tests pass</li> </ol>"},{"location":"upgrading/3.0.0-config-migration/#rollback","title":"Rollback","text":"<p>If you need to rollback:</p> <ol> <li>The automated recipe creates backups:</li> <li><code>Application.cfc.bak</code> - Your original Application.cfc</li> <li> <p><code>config_backup_[timestamp]</code> - Any existing /config directory</p> </li> <li> <p>To rollback manually:    <pre><code># Move config back\nmv config app/config\n\n# Restore Application.cfc from backup\nmv Application.cfc.bak Application.cfc\n</code></pre></p> </li> </ol>"},{"location":"upgrading/3.0.0-config-migration/#troubleshooting","title":"Troubleshooting","text":""},{"location":"upgrading/3.0.0-config-migration/#application-wont-start","title":"Application Won't Start","text":"<ul> <li>Ensure <code>/config</code> directory exists at the root level</li> <li>Check that all <code>.cfm</code> files were moved from <code>/app/config</code></li> <li>Verify Application.cfc has been updated</li> <li>Check for syntax errors in migrated configuration files</li> </ul>"},{"location":"upgrading/3.0.0-config-migration/#routes-not-working","title":"Routes Not Working","text":"<ul> <li>Confirm <code>/config/routes.cfm</code> exists</li> <li>Check for any hardcoded paths in your route definitions</li> <li>Verify the file permissions are correct (readable by your web server)</li> <li>Clear any route caching: add <code>?reload=true</code> to your URL</li> </ul>"},{"location":"upgrading/3.0.0-config-migration/#missing-configuration","title":"Missing Configuration","text":"<ul> <li>Ensure all files from <code>/app/config</code> were moved, including:</li> <li><code>/config/settings.cfm</code></li> <li><code>/config/routes.cfm</code></li> <li><code>/config/environment.cfm</code></li> <li><code>/config/app.cfm</code></li> <li>All environment-specific folders (<code>development</code>, <code>testing</code>, <code>production</code>, <code>maintenance</code>)</li> <li>Check for any custom configuration files you may have added</li> </ul>"},{"location":"upgrading/3.0.0-config-migration/#tests-failing","title":"Tests Failing","text":"<ul> <li>Update test setup files that reference the old config path</li> <li>Check test fixtures and helpers for hardcoded paths</li> <li>Ensure test database configurations are properly migrated</li> <li>Look for any <code>expandPath()</code> calls that reference the old path</li> </ul>"},{"location":"upgrading/3.0.0-config-migration/#dockercontainer-issues","title":"Docker/Container Issues","text":"<ul> <li>Update any Docker volume mounts from <code>/app/config</code> to <code>/config</code></li> <li>Rebuild containers after making compose.yml changes</li> <li>Check container logs for configuration loading errors</li> </ul>"},{"location":"upgrading/3.0.0-config-migration/#common-error-messages","title":"Common Error Messages","text":"<p>\"Could not find route\" - This usually means <code>/config/routes.cfm</code> is not being loaded - Check the Application.cfc mapping is correct - Verify the file exists and has proper permissions</p> <p>\"Invalid datasource\" - Ensure <code>/config/settings.cfm</code> contains your datasource configuration - Check environment-specific settings files were migrated</p> <p>\"Component not found\" - This may indicate the config mapping in Application.cfc is incorrect - Verify the mapping points to <code>/config</code> not <code>/app/config</code></p>"},{"location":"upgrading/3.0.0-config-migration/#additional-resources","title":"Additional Resources","text":"<ul> <li>Configuration and Defaults</li> <li>CFWheels 3.0.0 Release Notes</li> <li>Community Support</li> </ul>"},{"location":"upgrading/3.0.0-config-migration/#need-help","title":"Need Help?","text":"<p>If you encounter issues during migration:</p> <ol> <li>Check the migration log (<code>config_migration.log</code>)</li> <li>Search existing issues on GitHub</li> <li>Ask for help in the CFWheels Community</li> </ol>"},{"location":"working-with-wheels/configuration-and-defaults/","title":"Configuration and Defaults","text":"<p>We all love the \"Convention over Configuration\" motto of Wheels, but what about those two cases that pop into everyone's head? What if I want to develop in my own way? Or, What about an existing application that I need to port into Wheels? Gladly, that's what configuration and defaults are there for. Let's take a look at exactly how this is performed.</p>"},{"location":"working-with-wheels/configuration-and-defaults/#where-configurations-happen","title":"Where Configurations Happen","text":"<p>You will find configuration files in the <code>config</code> folder at the root of your Wheels application. In general, most of your settings will go in <code>config/settings.cfm</code>.</p> <p>You can also set values based on what environment you have set. For example, you can have different values for your settings depending on whether you're in <code>development</code> mode or <code>production</code> mode. See the chapter on Switching Environments for more details.</p>"},{"location":"working-with-wheels/configuration-and-defaults/#how-to-set-configurations","title":"How to Set Configurations","text":"<p>To change a Wheels application default, you generally use the set() function. With it, you can perform all sorts of tweaks to the framework's default behaviors.</p>"},{"location":"working-with-wheels/configuration-and-defaults/#how-to-access-configuration-values","title":"How to Access Configuration Values","text":"<p>Use the get() function to access the value of a Wheels application setting. Just pass it the name of the setting.</p> <p>{% code title=\"CFScript\" %} <pre><code>if (get(\"environment\") == \"production\") {\n    // Do something for production environment\n}\n</code></pre> {% endcode %}</p>"},{"location":"working-with-wheels/configuration-and-defaults/#setting-cfml-application-configurations","title":"Setting CFML Application Configurations","text":"<p>In CFML's standard <code>Application.cfc</code>, you can normally set values for your application's properties in the <code>this</code>scope. Wheels still provides these options to you in the file at <code>/config/app.cfm</code>.</p> <p>Here is an example of what can go in <code>/config/app.cfm</code>:</p> <p>{% code title=\"/config/app.cfm\" %} <pre><code>this.name = \"TheNextSiteToBeatTwitter\";\nthis.sessionManagement = false;\n\nthis.customTagPaths = ListAppend(\n  this.customTagPaths,\n  ExpandPath(\"../customtags\")\n);\n</code></pre> {% endcode %}</p>"},{"location":"working-with-wheels/configuration-and-defaults/#types-of-configurations-available","title":"Types of Configurations Available","text":"<p>There are several types of configurations that you can perform in Wheels to override all those default behaviors. In Wheels, you can find all these configuration options:</p> <ul> <li>Environment settings</li> <li>URL rewriting settings</li> <li>Data source settings</li> <li>Function settings</li> <li>Debugging and error settings</li> <li>Caching settings</li> <li>ORM settings</li> <li>Plugin settings</li> <li>Media settings</li> <li>Routing settings</li> <li>View helper settings</li> <li>CSRF protection settings</li> <li>Miscellaneous Settings</li> <li>Migrator settings</li> </ul> <p>Let's take a closer look at each of these options.</p>"},{"location":"working-with-wheels/configuration-and-defaults/#environment-settings","title":"Environment Settings","text":"<p>Not only are the environments useful for separating your production settings from your \"under development\" settings, but they are also opportunities for you to override settings that will only take effect in a specified environment.</p> <p>The setting for the current environment can be found in <code>/config/environment.cfm</code> and should look something like this:</p> <p>{% code title=\"/config/environment.cfm\" %} <pre><code>set(environment=\"development\");\n</code></pre> {% endcode %}</p> <p>Full Listing of Environment Settings</p> Name Type Default Description environment string development Environment to load. Set this value in /config/environment.cfm. Valid values are development, testing, maintenance, and production. reloadPassword string [empty string] Password to require when reloading the Wheels application from the URL. Leave empty to require no password. redirectAfterReload boolean Enabled in maintenance and production Whether or not to redirect away from the current URL when it includes a reload request. This hinders accidentally exposing your application's reload URL and password in web analytics software, screenshots of the browser, etc. ipExceptions string [empty string] IP addresses that Wheels will ignore when the environment is set to maintenance. That way administrators can test the site while in maintenance mode, while the rest of users will see the message loaded in app/events/onmaintenance.cfm. allowEnvironmentSwitchViaUrl boolean true Set to false to disable switching of environment configurations via URL. You can still reload the application, but switching environments themselves will be disabled."},{"location":"working-with-wheels/configuration-and-defaults/#url-rewriting-settings","title":"URL Rewriting Settings","text":"<p>Sometimes it is useful for our applications to \"force\" URL rewriting. By default, Wheels will try to determine what type of URL rewriting to perform and set it up for you. But you can force in or out this setting by using the example below:</p> <p>{% code title=\"CFScript\" %} <pre><code>set(urlRewriting=\"Off\");\n</code></pre> {% endcode %}</p> <p>The code above will tell Wheels to skip its automatic detection of the URL Rewriting capabilities and just set it as <code>\"Off\"</code>.</p> <p>You can also set it to \"Partial\" if you believe that your web server is capable of rewriting the URL as folders after <code>index.cfm</code>.</p> <p>For more information, read the chapter about URL Rewriting.</p>"},{"location":"working-with-wheels/configuration-and-defaults/#data-source-settings","title":"Data Source Settings","text":"<p>Probably the most important configuration of them all. What is an application without a database to store all of its precious data?</p> <p>The data source configuration is what tells Wheels which database to use for all of its models. (This can be overridden on a per-model basis, but that will be covered later.) To set this up in Wheels, it's just as easy as the previous example:</p> <p>{% code title=\"CFScript\" %} <pre><code>set(dataSourceName=\"yourDataSourceName\");\nset(dataSourceUserName=\"yourDataSourceUsername\");\nset(dataSourcePassword=\"yourDataSourcePassword\");\n</code></pre> {% endcode %}</p>"},{"location":"working-with-wheels/configuration-and-defaults/#function-settings","title":"Function Settings","text":"<p>OK, here it's where the fun begins! Wheels includes a lot of functions to make your life as a CFML developer easier. A lot of those functions have sensible default argument values to minimize the amount of code that you need to write. And yes, you guessed it, Wheels lets you override those default argument values application-wide.</p> <p>Let's look at a little of example:</p> <p>{% code title=\"CFScript\" %} <pre><code>set(functionName=\"findAll\", perPage=20);\n</code></pre> {% endcode %}</p> <p>That little line of code will make all calls to the findAll() method in Wheels return a maximum number of 20 record per page (if pagination is enabled for that findAll() call). How great is that? You don't need to set the <code>perPage</code> value for every single call to findAll() if you have a different requirement than the Wheels default of 10 records.</p>"},{"location":"working-with-wheels/configuration-and-defaults/#debugging-and-error-settings","title":"Debugging and Error Settings","text":"<p>You'll generally want to configure how Wheels handles errors and debugging information based on your environment. For example, you probably won't want to expose CFML errors in your production environment, whereas you would want to see those errors in your development environment.</p> <p>For example, let's say that we want to enable debugging information in our \"development\" environment temporarily:</p> <p>{% code title=\"CFScript\" %} <pre><code>// /config/development/settings.cfm\nset(showDebugInformation=false);\n</code></pre> {% endcode %}</p> <p>Full Listing of Debugging and Error Settings</p> Name Type Default Description errorEmailServer string [empty string] Server to use to send out error emails. When left blank, this defaults to settings in the ColdFusion Administrator (if set). errorEmailAddress string [empty string] Comma-delimited list of email address to send error notifications to. Only applies if sendEmailOnError is set to true. errorEmailSubject string Error Subject of email that gets sent to administrators on errors. Only applies if sendEmailOnError is set to true. excludeFromErrorEmail string [empty string] List of variables available in the scopes to exclude from the scope dumps included in error emails. Use this to keep sensitive information from being sent in plain text over email. sendEmailOnError boolean Enabled in production environments that have a TLD like .com, .org, etc. When set to true, Wheels will send an email to administrators whenever Wheels throws an error. showDebugInformation boolean Enabled in development mode. When set to true, Wheels will show debugging information in the footers of your pages. showErrorInformation boolean Enabled in development, maintenance, and testing mode. When set to false, Wheels will run and display code stored at app/events/onerror.cfm instead of revealing CFML errors. <p>For more information, refer to the chapter about Switching Environments.</p>"},{"location":"working-with-wheels/configuration-and-defaults/#caching-settings","title":"Caching Settings","text":"<p>Wheels does a pretty good job at caching the framework and its output to speed up your application. But if personalization is key in your application, finer control over caching settings will become more important.</p> <p>Let's say your application generates dynamic routes and you need it to check the routes on each request. This task will be as simple as this line of code:</p> <p>{% code title=\"CFScript\" %} <pre><code>set(cacheRoutes=false);\n</code></pre> {% endcode %}</p> <p>Full Listing of Caching Settings</p> Name Type Default Description cacheActions boolean Enabled in maintenance, testing, and production When set to true, Wheels will cache output generated by actions when specified (in a caches() call, for example). cacheControllerConfig boolean Enabled in development, maintenance, testing, and production When set to false, any changes you make to the config() function in the controller file will be picked up immediately. cacheCullInterval numeric 5 Number of minutes between each culling action. The reason the cache is not culled during each request is to keep performance as high as possible. cacheCullPercentage numeric 10 If you set this value to 10, then at most, 10% of expired items will be deleted from the cache. cacheDatabaseSchema boolean Enabled in development, maintenance, testing, and production When set to false, you can add a field to the database, and Wheels will pick that up right away. cacheFileChecking boolean Enabled in development, maintenance, testing, and production When set to true, Wheels will cache whether or not controller, helper, and layout files exist cacheImages boolean Enabled in development, maintenance, testing, and production When set to true, Wheels will cache general image information used in imageTag() like width and height. cacheModelConfig boolean Enabled in development, maintenance, testing, and production When set to false, any changes you make to the config() function in the model file will be picked up immediately. cachePages boolean Enabled in maintenance, testing, and production When set to true, Wheels will cache output generated by a view page when specified (in a renderView() call, for example). cachePartials boolean Enabled in maintenance, testing, and production When set to true, Wheels will cache output generated by partials when specified (in a includePartial() call for example). cacheQueries boolean Enabled in maintenance, testing, and production When set to true, Wheels will cache SQL queries when specified (in a findAll() call, for example). clearQueryCacheOnReload boolean true Set to true to clear any queries that Wheels has cached on application reload. cacheRoutes boolean Enabled in development, maintenance, testing, and production When set to true, Wheels will cache routes across all page views. defaultCacheTime numeric 60 Number of minutes an item should be cached when it has not been specifically set through one of the functions that perform the caching in Wheels (i.e., caches(), findAll(), includePartial(), etc.) maximumItemsToCache numeric 5000 Maximum number of items to store in Wheels's cache at one time. When the cache is full, items will be deleted automatically at a regular interval based on the other cache settings. <p>For more information, refer to the chapter on Caching.</p>"},{"location":"working-with-wheels/configuration-and-defaults/#orm-settings","title":"ORM Settings","text":"<p>The Wheels ORM provides many sensible conventions and defaults, but sometimes your data structure requires different column naming or behavior than what Wheels expects out of the box. Use these settings to change those naming conventions or behaviors across your entire application.</p> <p>For example, if we wanted to prefix all of the database table names in our application with <code>blog_</code> but didn't want to include that at the beginning of model names, we would do this:</p> <p>{% code title=\"CFScript\" %} <pre><code>set(tableNamePrefix=\"blog_\");\n</code></pre> {% endcode %}</p> <p>Now your <code>post</code> model will map to the <code>blog_posts</code> table, <code>comment</code> model will map to the <code>blog_comments</code> table, etc.</p> <p>Full Listing of ORM Settings</p> Name Type Default Description afterFindCallbackLegacySupport boolean true When this is set to false and you're implementing an afterFind() callback, you need to write the same logic for both the this scope (for objects) and arguments scope (for queries). Setting this to false makes both ways use the arguments scope so you don't need to duplicate logic. Note that the default is true for backwards compatibility. automaticValidations boolean true Set to false to stop Wheels from automatically running object validations based on column settings in your database. setUpdatedAtOnCreate boolean true Set to false to stop Wheels from populating the updatedAt timestamp with the createdAt timestamp's value. softDeleteProperty string deletedAt Name of database column that Wheels will look for in order to enforce soft deletes. tableNamePrefix string [empty string] String to prefix all database tables with so you don't need to define your model objects including it. Useful in environments that have table naming conventions like starting all table names with tbl timeStampOnCreateProperty string createdAt Name of database column that Wheels will look for in order to automatically store a \"created at\" time stamp when records are created. timeStampOnUpdateProperty string updatedAt Name of the database column that Wheels will look for in order to automatically store an \"updated at\" time stamp when records are updated. transactionMode string commit Use commit, rollback, or none to set default transaction handling for creates, updates and deletes. useExpandedColumnAliases boolean false When set to true, Wheels will always prepend children objects' names to columns included via findAll()'s include argument, even if there are no naming conflicts. For example, model(\"post\").findAll(include=\"comment\") in a fictitious blog application would yield these column names: id, title, authorId, body, createdAt, commentID, commentName, commentBody, commentCreatedAt, commentDeletedAt. When this setting is set to false, the returned column list would look like this: id, title, authorId, body, createdAt, commentID, name, commentBody, commentCreatedAt, deletedAt. modelRequireConfig boolean false Set to true to have Wheels throw an error when it can't find a config() method for a model. If you prefer to always use config() methods, this setting could save you some confusion when it appears that your configuration code isn't running due to misspelling \"config\" for example."},{"location":"working-with-wheels/configuration-and-defaults/#plugin-settings","title":"Plugin Settings","text":"<p>There are several settings that make plugin development more convenient. We recommend only changing these settings in <code>development</code> mode so there aren't any deployment issues in <code>production</code>, <code>testing</code>, and <code>maintenance</code>modes. (At that point, your plugin should be properly packaged in a zip file.)</p> <p>If you want to keep what's stored in a plugin's zip file from overwriting changes that you made in its expanded folder, set this in <code>/config/development/settings.cfm</code>:</p> <p>{% code title=\"CFScript\" %} <pre><code>set(overwritePlugins=false);\n</code></pre> {% endcode %}</p> <p>See the chapter on Installing and Using Plugins for more information.</p> Name Type Default Description deletePluginDirectories boolean true When set to true, Wheels will remove subdirectories within the plugins folder that do not contain corresponding plugin zip files. Set to false to add convenience to the process for developing your own plugins. loadIncompatiblePlugins boolean true Set to false to stop Wheels from loading plugins whose supported versions do not match your current version of Wheels. overwritePlugins boolean true When set to true, Wheels will overwrite plugin files based on their source zip files on application reload. Setting this to false makes plugin development easier because you don't need to keep rezipping your plugin files every time you make a change. showIncompatiblePlugins boolean false When set to true, an incompatibility warning will be displayed for plugins that do not specify the current Wheels version."},{"location":"working-with-wheels/configuration-and-defaults/#media-settings","title":"Media Settings","text":"<p>Configure how Wheels handles linking to assets through view helpers like imageTag(), styleSheetLinkTag(), and javaScriptIncludeTag().</p> <p>See the chapter about Date, Media, and Text Helpers for more information.</p> <p>Full Listing of Asset Settings</p> Name Type Default Description assetQueryString boolean false in development mode, true in the other modes Set to true to append a unique query string based on a time stamp to JavaScript, CSS, and image files included with the media view helpers. This helps force local browser caches to refresh when there is an update to your assets. This query string is updated when reloading your Wheels application. You can also hard code it by passing in a string. assetPaths struct false Pass false or a struct with up to 2 different keys to autopopulate the domains of your assets: http (required) and https. For example: {http=\"asset0.domain1.com,asset2.domain1.com,asset3.domain1.com\", https=\"secure.domain1.com\"}"},{"location":"working-with-wheels/configuration-and-defaults/#routing-settings","title":"Routing Settings","text":"<p>Wheels includes a powerful routing system. Parts of it are configurable with the following settings.</p> <p>See the chapters about Using Routes and Obfuscating URLs for more information about how this all works together.</p> <p>Full Listing of Miscellaneous Settings</p> Name Type Default Description loadDefaultRoutes boolean true Set to false to disable Wheels's default route patterns for controller/action/key, etc. obfuscateUrls boolean false Set to true to obfuscate primary keys in URLs."},{"location":"working-with-wheels/configuration-and-defaults/#view-helper-settings","title":"View Helper Settings","text":"<p>Wheels has a multitude of view helpers for building links, forms, form elements, and more. Use these settings to configure global defaults for their behavior.</p> Name Type Default Description booleanAttributes any allowfullscreen, async, autofocus, autoplay, checked, compact, controls, declare, default, defaultchecked, defaultmuted, defaultselected, defer, disabled, draggable, enabled, formnovalidate, hidden, indeterminate, inert, ismap, itemscope, loop, multiple, muted, nohref, noresize, noshade, novalidate, nowrap, open, pauseonexit, readonly, required, reversed, scoped, seamless, selected, sortable, spellcheck, translate, truespeed, typemustmatch, visible A list of HTML attributes that should be allowed to be set as boolean values when added to HTML tags (e.g. <code>disabled</code> instead of <code>disabled=\"disabled\"</code>). You can also pass in <code>true</code>(all attributes will be boolean) or <code>false</code> (no boolean attributes allowed, like in XHTML)."},{"location":"working-with-wheels/configuration-and-defaults/#csrf-protection-settings","title":"CSRF Protection Settings","text":"<p>Wheels includes built-in Cross-Site Request Forgery (CSRF) protection for form posts. Part of the CSRF protection involves storing an authenticity token in the session (default) or within an encrypted cookie. Most of the settings below are for when you've chosen to store the authenticity token within a cookie instead of the server's session store.</p> Name Type Default Description csrfStore string session <p>Which storage strategy to use for storing the CSRF authenticity token. Valid values are <code>session</code> or <code>cookie</code>.Choosing <code>session</code> requires no additional configuration.Choosing <code>cookie</code> for this requires additional configuration listed below.</p> csrfCookieEncryptionAlgorithm string AES Encryption algorithm to use for encrypting the authenticity token cookie contents. This setting is ignored if you're using <code>session</code> storage. See your CF engine's documentation for the <code>Encrypt()</code>function for more information. csrfCookieEncryptionSecretKey string Secret key used to encrypt the authenticity token cookie contents. This value must be configured to a string compatible with the <code>csrfCookieEncryptionAlgorithm</code>setting if you're using <code>cookie</code> storage. This value is ignored if you're using <code>session</code> storage. See your CF engine's documentation for the <code>Encrypt()</code>function for more information. csrfCookieEncryptionEncoding string Base64 Encoding to use to write the encrypted value to the cookie. This value is ignored if you're using <code>session</code> storage. See your CF engine's documentation for the <code>Encrypt()</code> function for more information. csrfCookieName string _wheels_authenticity The name of the cookie to be set to store CSRF token data. This value is ignored if you're using <code>session</code> storage. csrfCookieDomain string Domain to set the cookie on. See your CF engine's documentation for <code>cfcookie</code> for more information. csrfCookieEncodeValue boolean Whether or not to have CF encode the cookie. See your CF engine's documentation for <code>cfcookie</code> for more information. csrfCookieHttpOnly boolean true Whether or not they have CF set the cookie as <code>HTTPOnly</code>. See your CF engine's documentation for <code>cfcookie</code> for more information. csrfCookiePath string / Path to set the cookie on. See your CF engine's documentation for <code>cfcookie</code> for more information. csrfCookiePreserveCase boolean Whether or not to preserve the case of the cookie's name. See your CF engine's documentation for <code>cfcookie</code> for more information. csrfCookieSecure boolean Whether or not to only allow the cookie to be delivered over the HTTPS protocol. See your CF engine's documentation for <code>cfcookie</code> for more information."},{"location":"working-with-wheels/configuration-and-defaults/#cors-protection-settings","title":"CORS Protection Settings","text":"<p>Wheels includes built-in Cross-Origin Resource Sharing (CORS) which allows you to configure which cross-origin requests and methods are allowed. By default, this feature is turned off which will deny cross-origin requests at the browser level. </p> <p>In this first version, the user can enable this feature, which will allow requests from all origins and all methods. </p> Name Type Default allowCorsRequests boolean false"},{"location":"working-with-wheels/configuration-and-defaults/#miscellaneous-settings","title":"Miscellaneous Settings","text":"Name Type Default Description disableEngineCheck boolean false Set to <code>true</code> if you don't want Wheels to block you from using older CFML engines (such as ColdFusion 9, Railo etc). enableMigratorComponent boolean true Set to <code>false</code> to completely disable the migrator component which will prevent any Database migrations enablePluginsComponent boolean true Set to <code>false</code> to completely disable the plugins component which will prevent any plugin loading, and not load the entire plugins system enablePublicComponent boolean true Set to <code>false</code> to completely disable the public component which will disable the GUI even in development mode"},{"location":"working-with-wheels/configuration-and-defaults/#migrator-configuration-settings","title":"Migrator Configuration Settings","text":"Setting Type Default Description autoMigrateDatabase Boolean false Automatically runs available migration on applicationstart. migratorTableName String migratorversions The name of the table that stores the versions migrated. createMigratorTable Boolean true Create the migratorversions database table. writeMigratorSQLFiles Boolean false Writes the executed SQL to a .sql file in the app/migrator/sql directory. migratorObjectCase String lower Specifies the case of created database object. Options are 'lower', 'upper' and 'none' (which uses the given value unmodified) allowMigrationDown Boolean false (true in development mode) Prevents 'down' migrations (rollbacks)"},{"location":"working-with-wheels/contributing-to-wheels/","title":"Contributing to Wheels","text":""},{"location":"working-with-wheels/contributing-to-wheels/#repository","title":"Repository","text":"<p>The official Git repository for Wheels is located at our GitHub repository.</p> <p>Anyone may fork the  <code>wheels</code> repository, make changes, and submit a pull request.</p>"},{"location":"working-with-wheels/contributing-to-wheels/#core-team-has-write-access","title":"Core Team Has Write Access","text":"<p>To make sure that we don't have too many chefs in the kitchen, we will be limiting direct commit access to a core team of developers.</p> <p>At this time, the core team consists of these developers:</p> <ul> <li>Peter Amiri</li> <li>Zain Ul Abideen</li> </ul> <p>This does not restrict you from being able to contribute. See \"Process for Implementing Code Changes\" below for instructions on volunteering. With enough dedication, you can earn a seat on the core team as well!</p>"},{"location":"working-with-wheels/contributing-to-wheels/#process-for-implementing-code-changes","title":"Process for Implementing Code Changes","text":"<p>Here's the process that we'd like for you to follow. This process is in place mainly to encourage everyone to communicate openly. This gives us the opportunity to have a great peer-review process, which will result in quality. Who doesn't like quality?</p> <ol> <li>Open an issue in the issue tracker, outlining the changes or additions that you would like to make.</li> <li>A member of the core team will review your submission and leave feedback if necessary.</li> <li>Once the core team member is satisfied with the scope of the issue, they will indicate so in a comment to the issue. This is your green light to start working. Get to coding, grasshopper!</li> <li>Need help or running across any issues while coding? Start a Discussion.</li> <li>When you have implemented your enhancement or change, use your Git repository to create a pull request with your changes.</li> <li>You should annotate your commits with the issue number as <code>#55</code> if the code issue is <code>55</code></li> <li>A core team member will review it and post any necessary feedback in the issue tracker.</li> <li>Once everything is resolved, a core team member will merge your commit into the Git repository.</li> <li>If needed, open an issue to have the additions and changes in your revision documented in the CHANGELOG. You may claim the issue if you'd like to do this, but it's entirely your choice.</li> </ol>"},{"location":"working-with-wheels/contributing-to-wheels/#developing-with-docker","title":"Developing with Docker","text":"<p>Wheels now includes a comprehensive Docker-based test environment that makes it easy to test your changes against multiple CFML engines and database platforms. For detailed instructions on using this environment, see:</p> <ul> <li>Using the Test Environment - Complete guide to the Docker test environment</li> <li>Submitting Pull Requests - Step-by-step guide to creating and submitting PRs</li> </ul>"},{"location":"working-with-wheels/contributing-to-wheels/#code-style","title":"Code Style","text":"<p>All framework code should use the guidelines at https://github.com/wheels-dev/wheels/wiki/Code-Style-Guide. This will make things more readable and will keep everyone on the same page. If you're working on code and notice any violations of the official style, feel free to correct it!</p> <p>Additionally, we recommend that any applications written using the Wheels framework follow the same style. This is optional, of course, but still strongly recommended.</p>"},{"location":"working-with-wheels/contributing-to-wheels/#supported-cfml-engines","title":"Supported CFML Engines","text":"<p>All code for Wheels should be written for use with both Adobe ColdFusion 2018 upwards, and Lucee 5 upwards.</p>"},{"location":"working-with-wheels/contributing-to-wheels/#naming-conventions","title":"Naming Conventions","text":"<p>To stay true to our ColdFusion and Java roots, all names must be camelCase. In some cases, such as internal CFML functions, the first letter should be capitalized as well. Refer to these examples.</p> Code Element Examples Description CFC Names MyCfc.cfc, BlogEntry.cfc CapitalizedCamelCase Variable Names myVariable, storyId camelCase UDF Names myFunction() camelCase Built-in CF Variables result.recordCount, cfhttp.fileContent camelCase Built-in CF Functions IsNumeric(), Trim() CapitalizedCamelCase Scoped Variables application.myVariable, session.userId lowercase.camelCase CGI Variables cgi.remote_addr, cgi.server_name cgi.lowercase_underscored_name"},{"location":"working-with-wheels/contributing-to-wheels/#cfc-conventions","title":"CFC Conventions","text":""},{"location":"working-with-wheels/contributing-to-wheels/#local-variables","title":"Local Variables","text":"<p>Since moving to Wheels 2.x, the old <code>loc</code> scope has now been deprecated and you should use the function <code>local</code> scope.</p> <p>Code Example</p> <pre><code>// This is just for illustration. It's obviously a silly function.\nfunction returnArrayLengthInWords(required array someArray) {\n  local.rv = \"Unknown\";\n  if (ArrayLen(arguments.someArray) &gt; 50) {\n    local.rv = \"Pretty Long!\";\n  }\n  if (ArrayLen(arguments.someArray) &gt; 100) {\n    local.rv = \"Very Long!\";\n  }\n  return local.rv;\n}\n</code></pre>"},{"location":"working-with-wheels/contributing-to-wheels/#cfc-methods","title":"CFC Methods","text":"<p>All CFC methods should be made public. If a method is meant for internal use only and shouldn't be included in the API, then prefix it with a dollar sign $. An example would be $query().</p>"},{"location":"working-with-wheels/conventions/","title":"Conventions","text":"<p>There is a specific set of standards that Wheels follows when you run it in its default state. This is to save you time. With conventions in place, you can get started coding without worrying about configuring every little detail.</p> <p>But it is important for you to know these conventions, especially if you're running an operating system and/or DBMS configuration that's picky about things like case sensitivity.</p>"},{"location":"working-with-wheels/conventions/#urls","title":"URLs","text":"<p>Wheels uses a very flexible routing system to match your application's URLs to controllers, views, and parameters.</p> <p>Within this routing system is a default route that handles many scenarios that you'll run across as a developer. The default route is mapped using the pattern <code>[controller]/[action]/[key]</code>.</p> <p>Consider this example URL:http://localhost/users/edit/12</p> <p>{% tabs %} {% tab title=\"HTTP\" %} http://localhost/users/edit/12 {% endtab %} {% endtabs %}</p> <p>This maps to the <code>Users</code> controller, <code>edit</code> action, and a key of <code>12</code>. For all intents and purposes, this will load a view for editing a user with a primary key value in the database of <code>12</code>.</p> <p>This URL pattern works up the chain and will also handle the following example URLs:</p> URL Controller Action Key http://localhost/users/edit/12 users edit 12 http://localhost/users/new users new http://localhost/users users index <p>Note that the above conventions are for <code>GET</code> requests and only apply when you have a <code>wildcard()</code> call in <code>/config/routes.cfm</code> (which is the default). See Routing for instructions on overriding this behavior and how to deal with <code>PUT</code>, <code>POST</code> etc.</p>"},{"location":"working-with-wheels/conventions/#naming-conventions-for-controllers-actions-and-views","title":"Naming Conventions for Controllers, Actions, and Views","text":"<p>Controllers, actions, and views are closely linked together by default. And how you name them will influence the URLs that Wheels will generate.</p>"},{"location":"working-with-wheels/conventions/#controllers","title":"Controllers","text":"<p>First, a controller is a CFC file placed in the <code>controllers</code> folder. It should be named in <code>PascalCase</code>. For example, a site map controller would be stored at <code>app/controllers/SiteMap.cfc</code>.</p> <p>Multi-word controllers will be delimited by hyphens in their calling URLs. For example, a URL of <code>/site-map</code> will reference the <code>SiteMap</code> controller.</p> <p>See Routing for instructions on overriding this behavior.</p>"},{"location":"working-with-wheels/conventions/#actions","title":"Actions","text":"<p>Methods within the controllers, known as actions, should be named in <code>camelCase</code>.</p> <p>Like with controllers, any time a capital letter is used in <code>camelCase</code>, a hyphen will be used as a word delimiter in the corresponding URL. For example, a URL of <code>/site-map/search-engines</code> will reference the <code>searchEngines</code> action in the <code>SiteMap</code> controller.</p> <p>See Routing for instructions on overriding this behavior.</p>"},{"location":"working-with-wheels/conventions/#views","title":"Views","text":"<p>By default, view files are named after the action names and are stored in folders that correspond to controller names. Both the folder names and view file names should be all lowercase, and there is no word delimiter.</p> <p>In our <code>/site-map/search-engines</code> URL example, the corresponding view file would be stored at <code>app/views/sitemap/searchengines.cfm</code>.</p> <p>For information on overriding this behavior, refer to documentation for the renderView() function and read the Pages chapter.</p>"},{"location":"working-with-wheels/conventions/#layouts","title":"Layouts","text":"<p>A special type of view file called a layout defines markup that should surround the views loaded by the application. The default layout is stored at <code>app/views/layout.cfm</code> and is automatically used by all views in the application.</p> <p>Controller-level layouts can also be set automatically by creating a file called <code>layout.cfm</code> and storing it in the given controller's view folder. For example, to create a layout for the <code>users</code> controller, the file would be stored at <code>app/views/users/layout.cfm</code>.</p> <p>When a controller-level layout is present, it overrides the default layout stored in the root <code>app/views</code> folder.</p> <p>For information on overriding the layout file to be loaded by an action, see the chapter on Layouts and documentation for the renderView function.</p>"},{"location":"working-with-wheels/conventions/#naming-conventions-for-models-and-databases","title":"Naming Conventions for Models and Databases","text":"<p>By default, the names of Wheels models, model properties, database tables, and database fields all relate to each other. Wheels even sets a sensible default for the CFML data source used for database interactions.</p>"},{"location":"working-with-wheels/conventions/#data-sources","title":"Data Sources","text":"<p>By default, the datasource is set to <code>wheels.dev</code> in the <code>/config/settings.cfm</code> file. You can change the value in the <code>set(dataSourceName=\"wheels.dev\")</code> function to whatever you want the name of the datasource to be.</p> <p>Refer to the Configuration and Defaults chapter for instructions on overriding data source information.</p>"},{"location":"working-with-wheels/conventions/#plural-database-table-names-singular-model-names","title":"Plural Database Table Names, Singular Model Names","text":"<p>Wheels adopts a Rails-style naming conventions for database tables and model files. Think of a database table as a collection of model objects; therefore, it is named with a plural name. Think of a model object as a representation of a single record from the database table; therefore, it is named with a singular word.</p> <p>For example, a <code>user</code> model represents a record from the <code>users</code> database table. Wheels also recognizes plural patterns like <code>binary/binaries</code>, <code>mouse/mice</code>, <code>child/children</code>, etc.</p> <p>Like controller files, models are also CFCs and are named in <code>PascalCase</code>. They are stored in the <code>app/models</code> folder. So the user model would be stored at <code>app/models/User.cfc</code>.</p> <p>For instructions on overriding database naming conventions, refer to documentation for the table() function and the chapter on Object Relational Mapping.</p>"},{"location":"working-with-wheels/conventions/#everything-in-the-database-is-lowercase","title":"Everything in the Database is Lowercase","text":"<p>In your database, both table names and column names should be lowercase. The <code>customersegments</code> table could have fields called <code>title</code>, <code>regionid</code>, and <code>incomelevel</code>, for example.</p> <p>Because of CFML's case-insensitive nature, we recommend that you refer to model names and corresponding properties in <code>camelCase</code>. This makes for easier readability in your application code.</p> <p>In the <code>customersegments</code> example above, you could refer to the properties in your CFML as <code>title</code>, <code>regionId</code>, and <code>incomeLevel</code> to stick to CFML's Java-style roots. (Built-in CFML functions are often written in <code>camelCase</code> and <code>PascalCase</code>, after all.)</p> <p>For information on overriding column and property names, refer to documentation for the property() function and the Object Relational Mapping chapter.</p>"},{"location":"working-with-wheels/conventions/#configuration-and-defaults","title":"Configuration and Defaults","text":"<p>There are many default values and settings that you can tweak in Wheels when you need to. Some of them are conventions and others are just configurations available for you to change. You can even change argument defaults for built-in Wheels functions to keep your code DRYer.</p> <p>For more details on what you can configure, read the Configuration and Defaults chapter.</p>"},{"location":"working-with-wheels/directory-structure/","title":"Directory Structure","text":"<p>After downloading and unzipping Wheels, here's the directory structure that you will see:</p> <p>{% tabs %} {% tab title=\"Directory Structure\" %} app/\\ build/ \\ db/ \\ docker/ \\ guides/ \\ public/ \\ tests/ \\ vendor/ \\ .cfformat.json \\ .editorconfig \\ .env \\ CFConfig.json \\ box.json \\ compose.yml \\ server.json {% endtab %} {% endtabs %}</p>"},{"location":"working-with-wheels/directory-structure/#quick-summary","title":"Quick Summary","text":"<p>Your configuration settings will be done in the /config directory.</p> <p>Your application code will end up in four of the folders, namely app/controllers, app/events, app/models, and app/views.</p> <p>Static media files should be placed in the public/files, public/images, public/javascripts and public/stylesheets folders.</p> <p>Place anything that need to be executed outside of the framework in the public/miscellaneous folder. The framework does not get involved when executing <code>.cfm</code> files in this folder. (The empty <code>Application.cfc</code> takes care of that.) Also, no URL rewriting will be performed in this folder, so it's a good fit for placing CFCs that need to be accessed remotely via <code>&lt;cfajaxproxy&gt;</code> and Flash AMF binding, for example.</p> <p>Place Wheels plugins in the app/plugins folder.</p> <p>And the last directory? That's the framework itself. It exists in the vendor/wheels directory. Please go in there and have a look around. If you find anything you can improve or new features that you want to add, let us know!</p>"},{"location":"working-with-wheels/directory-structure/#detailed-overview","title":"Detailed Overview","text":"<p>Let's go through all the files and directories now, starting with the ones you'll spend most of your time in: the code directories.</p>"},{"location":"working-with-wheels/directory-structure/#appcontrollers","title":"app/controllers","text":"<p>This is where you create your controllers. You'll see a file in here already: <code>Controller.cfc</code>. You can place functions inside this <code>Controller.cfc</code> to have those functions shared between all the controllers you create(This works because all your controllers will extend <code>Controller</code>.).</p>"},{"location":"working-with-wheels/directory-structure/#appmodels","title":"app/models","text":"<p>This is where you create your model files (or classes if you prefer that term). Each model file you create should map to one table in the database.</p> <p>The setup in this directory is similar to the one for controllers, to share methods you can place them in the existing <code>Model.cfc</code> file.</p>"},{"location":"working-with-wheels/directory-structure/#appviews","title":"app/views","text":"<p>This is where you prepare the views for your users. As you work on your website, you will create one view directory for each controller.</p>"},{"location":"working-with-wheels/directory-structure/#appevents","title":"app/events","text":"<p>If you want code executed when ColdFusion triggers an event, you can place it here (rather than directly in <code>Application.cfc</code>).</p>"},{"location":"working-with-wheels/directory-structure/#config","title":"/config","text":"<p>Make all your configuration changes here. You can set the environment, routes, and other settings here. You can also override settings by making changes in the individual settings files that you see in the subdirectories.</p>"},{"location":"working-with-wheels/directory-structure/#publicfiles","title":"public/files","text":"<p>Any files that you intend to deliver to the user using the <code>sendFile()</code> function should be placed here. Even if you don't use that function to deliver files, this folder can still serve as file storage if you like.</p>"},{"location":"working-with-wheels/directory-structure/#appglobal","title":"app/global","text":"<p>For application-wide globally accessible functions</p>"},{"location":"working-with-wheels/directory-structure/#publicimages","title":"public/images","text":"<p>This is a good place to put your images. It's not required to have them here, but all Wheels functions that involve images will, by convention, assume they are stored here.</p>"},{"location":"working-with-wheels/directory-structure/#publicjavascripts","title":"public/javascripts","text":"<p>This is a good place to put your JavaScript files.</p>"},{"location":"working-with-wheels/directory-structure/#publicstylesheets","title":"public/stylesheets","text":"<p>This is a good place to put your CSS files.</p>"},{"location":"working-with-wheels/directory-structure/#teststestbox","title":"tests/Testbox","text":"<p>This is where unit tests for your application should go</p>"},{"location":"working-with-wheels/directory-structure/#publicmiscellaneous","title":"public/miscellaneous","text":"<p>Use this folder for code that you need to run completely outside of the framework. (There is an empty <code>Application.cfc</code> file in here, which will prevent Wheels from taking part in the execution.)</p> <p>This is most useful if you're using Flash to connect directly to a CFC via AMF binding or if you're using <code>&lt;cfajaxproxy&gt;</code>in your views to bind directly to a CFC as well.</p>"},{"location":"working-with-wheels/directory-structure/#appplugins","title":"app/plugins","text":"<p>Place any plugins you have downloaded and want installed here.</p>"},{"location":"working-with-wheels/directory-structure/#appmigrator","title":"app/migrator *","text":"<p>Database Migration CFC files and generated SQL files\\ (This directory will only visible once you start using the migrator)</p>"},{"location":"working-with-wheels/directory-structure/#vendorwheels","title":"vendor/wheels","text":"<p>This is the framework itself. When a new version of Wheels is released it is often enough to just drop it in here (unless there has been changes to the general folder structure).</p>"},{"location":"working-with-wheels/directory-structure/#htaccess","title":".htaccess","text":"<p>This file is used by Apache, and you specifically need it for URL rewriting to work properly. If you're not using Apache, then you can safely delete it. No longer included by default in 2.x</p>"},{"location":"working-with-wheels/directory-structure/#publicurlrewritexml","title":"public/urlrewrite.xml","text":"<p>If you use Tomcat and Tuckey, or CommandBox URL Rewriting, you'll need this file. Otherwise, you can safely delete it.</p>"},{"location":"working-with-wheels/directory-structure/#webconfig","title":"web.config","text":"<p>URL rewriting for version 7 of IIS. If you're not using IIS, then you can safely delete it. No longer included by default in 2.x</p>"},{"location":"working-with-wheels/directory-structure/#applicationcfc-and-indexcfm","title":"Application.cfc and index.cfm","text":"<p>These are needed for the framework to run. No changes should be done to these files.</p> <p>You can add more directories if you want to, of course. Just remember to include a blank <code>Application.cfc</code> in those directories. Otherwise, Wheels will try to get itself involved with those requests as well.</p> <p>\\ \\</p>"},{"location":"working-with-wheels/documenting-your-code/","title":"Documenting your Code","text":"<p>One of a developer\u2019s biggest time sinks is coming up with and writing accurate and engaging documentation. Even if it\u2019s an internal project with.. well, just you\u2026 it\u2019s still incredibly valuable to have: coming back to projects a few months or even years later can often lead to a bit of head scratching and screams of \u201cwhy?\u201d, especially with your own code.</p> <p>Whilst we\u2019re not promising that Wheels will write all your documentation for you, we have put some tools in place to hopefully make the process a little less painful. With a small amount of adjustment in how you document your core functions, documentation doesn\u2019t necessarily have to be such a time consuming process.</p> <p>In the Wheels core, we've adopted javadoc-style syntax (with a few twists of our own) to automatically create our main documentation, and there's nothing stopping you adding to this core set of documentation for your own app. It just needs a bit of markup.</p>"},{"location":"working-with-wheels/documenting-your-code/#browse-the-core-api","title":"Browse the Core API","text":"<p>The first thing to notice is the new \u2018[Docs]\u2019 link in the debug section in the footer:\\ Following that link leads you to the main internal documentation. </p> <p></p> <p>The three-column layout is designed to allow for quick filtering by section or function name. On the right are the main Wheels core categories, such as Controller and Model functions. These categories are further divided into subcategories, such as Flash and Pagination functions. Clicking on a link in the right column will filter the list in the left and middle columns to show all matching functions, including child functions of that category.</p> <p>Filtering by function name is made simple by a \u201cfilter-as-you-type\u201d search field in the left column, making it very quick to find the right function.</p> <p>The middle column contains the main function definition, including tags, parameters and code samples.</p>"},{"location":"working-with-wheels/documenting-your-code/#how-is-it-generated","title":"How is it generated?","text":"<p>Each function in the core is now appropriately marked up with javaDoc style comments. This, combined with <code>getMetaData()</code> allows us to parse the markup into something useful.</p> <p>Example Core Function</p> <p>{% code title=\"Example Core Function\" %} <pre><code>/**\n * Removes all HTML tags from a string.\n *\n * [section: View Helpers]\n * [category: Sanitization Functions]\n *\n * @html The HTML to remove tag markup from.\n */\npublic string function stripTags(required string html) {\n    local.rv = REReplaceNoCase(arguments.html, \"&lt;\\ *[a-z].*?&gt;\", \"\", \"all\");\n    local.rv = REReplaceNoCase(local.rv, \"&lt;\\ */\\ *[a-z].*?&gt;\", \"\", \"all\");\n    return local.rv;\n}\n</code></pre> {% endcode %}</p> <p>The <code>[section]</code> and <code>[category]</code> tags categorise the function as appropriate, and the <code>@html</code> part describes the function\u2019s parameter. The additional parameter data, such as whether it\u2019s required, type and any defaults are automatically parsed too. This results in a display like:</p> <p></p>"},{"location":"working-with-wheels/documenting-your-code/#documenting-your-own-functions","title":"Documenting your own functions","text":"<p>Any function which is available to <code>Controller.cfc</code> or <code>Model.cfc</code> is automatically included; if there\u2019s no javaDoc comment, then they\u2019ll appear in <code>uncategorized</code>. But of course, there\u2019s nothing stopping you creating your own <code>[section]</code> and <code>[category]</code> tags, which will then automatically appear on the left hand column for filtering: you\u2019re not restricted to what we\u2019ve used in the core.</p> <p>As an example, if you wanted to document all your filters, you might want to have a <code>[section: Application]</code> tag, with <code>[category: filters]</code>. This way, your application documentation grows as you create it.</p> <p>Something as simple as a sublime text snippet for a new function which includes the basic javaDoc skeleton can get you in the habit pretty quickly!</p>"},{"location":"working-with-wheels/documenting-your-code/#plugins-too","title":"Plugins too!","text":"<p>We also introspect plugins for the same markup. We encourage plugin authors to adjust their plugin code to include <code>[section: Plugins]</code> at the very least. </p>"},{"location":"working-with-wheels/documenting-your-code/#exports-re-use","title":"Exports &amp; Re-use","text":"<p>You can export the docs via JSON just by changing the URL string:\\ i.e <code>?controller=wheels&amp;action=wheels&amp;view=docs&amp;type=core&amp;format=json</code></p> <p>You could also include the functions used to create the docs and create your own version (perhaps useful for a CMS or other application where you have internal documentation for authenticated users). Whilst this isn\u2019t officially supported (the main functions may be subject to change!) it is technically possible. The best example is the thing itself \u2013 see the main output if you\u2019re interested. Please note that the user interface isn\u2019t available in production mode (for obvious reasons we hope!), so if you wanted to expose this data to an end user, you would probably need to \u201croll your own\u201d with this approach.</p>"},{"location":"working-with-wheels/documenting-your-code/#updating","title":"Updating","text":"<p>Note that the CFC introspection doesn\u2019t automatically happen on every request, so you will need to <code>?reload=true</code> to see changes to your code. Additionally, Adobe ColdFusion is more aggressive in caching CFC metadata, so depending on your settings, you may not see changes until a server restart.</p>"},{"location":"working-with-wheels/documenting-your-code/#code-samples","title":"Code samples","text":"<p>Whilst the core has additional code samples which can be loaded from text files, there\u2019s no support for your application functions to take advantage of this yet.</p>"},{"location":"working-with-wheels/documenting-your-code/#roadmap","title":"Roadmap","text":"<p>Whilst this API/function explorer is a great first step, you\u2019ll notice your controller and model specific functions aren\u2019t included (only those shared amongst controllers, or in the <code>/app/global/functions.cfm</code> file. This is because we\u2019re only looking at the main <code>Model.cfc</code> and <code>Controller.cfc</code> and what it can access.</p> <p>In Wheels 2.1, we\u2019ll look at adding a full Controller and Model metadata explorer using the same techniques, and map functions like <code>show()</code> to their respective routes too.</p>"},{"location":"working-with-wheels/submitting-pull-requests/","title":"Submitting Pull Requests to Wheels","text":"<p>This guide provides a step-by-step process for contributing code to Wheels through pull requests (PRs). It covers the entire workflow from setting up your development environment to getting your PR merged into the project.</p>"},{"location":"working-with-wheels/submitting-pull-requests/#prerequisites","title":"Prerequisites","text":"<p>Before you start contributing, make sure you have:</p> <ol> <li>A GitHub account</li> <li>Git installed on your local machine</li> <li>Docker installed (for running the test environment)</li> <li>Basic knowledge of Git commands and GitHub workflows</li> <li>Familiarity with Wheels and CFML</li> </ol>"},{"location":"working-with-wheels/submitting-pull-requests/#setting-up-your-development-environment","title":"Setting Up Your Development Environment","text":""},{"location":"working-with-wheels/submitting-pull-requests/#1-fork-the-wheels-repository","title":"1. Fork the Wheels Repository","text":"<p>Start by forking the Wheels repository to your own GitHub account:</p> <ol> <li>Visit https://github.com/wheels-dev/wheels</li> <li>Click the \"Fork\" button in the upper right corner</li> <li>Select your GitHub account as the destination</li> </ol>"},{"location":"working-with-wheels/submitting-pull-requests/#2-clone-your-fork-locally","title":"2. Clone Your Fork Locally","text":"<p>Clone your fork to your local machine:</p> <pre><code>git clone https://github.com/YOUR-USERNAME/wheels.git\ncd wheels\n</code></pre>"},{"location":"working-with-wheels/submitting-pull-requests/#3-add-the-upstream-repository","title":"3. Add the Upstream Repository","text":"<p>Add the main Wheels repository as an \"upstream\" remote to keep your fork in sync:</p> <pre><code>git remote add upstream https://github.com/wheels-dev/wheels.git\n</code></pre>"},{"location":"working-with-wheels/submitting-pull-requests/#4-set-up-docker-test-environment","title":"4. Set Up Docker Test Environment","text":"<p>Set up the Docker-based test environment to ensure your changes work across all supported platforms:</p> <pre><code># Start the minimal test environment\ndocker compose --profile quick-test up -d\n</code></pre> <p>See Using the Test Environment for more detailed instructions.</p>"},{"location":"working-with-wheels/submitting-pull-requests/#contribution-workflow","title":"Contribution Workflow","text":""},{"location":"working-with-wheels/submitting-pull-requests/#1-find-or-create-an-issue","title":"1. Find or Create an Issue","text":"<p>Before writing any code, make sure there's an issue in the GitHub issue tracker:</p> <ol> <li>Check if an issue already exists for the bug or feature you want to work on</li> <li>If not, create a new issue describing the bug or feature</li> <li>Wait for feedback from the core team before proceeding</li> </ol>"},{"location":"working-with-wheels/submitting-pull-requests/#2-create-a-feature-branch","title":"2. Create a Feature Branch","text":"<p>Once your issue is approved, create a feature branch in your local repository:</p> <pre><code># First, sync your fork with upstream\ngit fetch upstream\ngit checkout develop\ngit merge upstream/develop\n\n# Create a new branch\ngit checkout -b feature/issue-NUMBER\n</code></pre> <p>Replace <code>NUMBER</code> with the issue number from GitHub. Use descriptive branch names: - <code>feature/issue-123</code> for new features - <code>fix/issue-123</code> for bug fixes - <code>docs/issue-123</code> for documentation updates</p>"},{"location":"working-with-wheels/submitting-pull-requests/#3-make-your-changes","title":"3. Make Your Changes","text":"<p>Now you can start coding! Remember to:</p> <ul> <li>Follow the Code Style Guide</li> <li>Add comments where appropriate</li> <li>Write tests for your changes</li> <li>Keep your changes focused on addressing the specific issue</li> </ul>"},{"location":"working-with-wheels/submitting-pull-requests/#4-test-your-changes","title":"4. Test Your Changes","text":""},{"location":"working-with-wheels/submitting-pull-requests/#using-the-docker-test-environment","title":"Using the Docker Test Environment","text":"<p>The Docker test environment allows you to test your changes against multiple CFML engines and databases:</p> <pre><code># Start the test environment with specific components\ndocker compose --profile lucee --profile mysql --profile ui up -d\n\n# Access the TestUI at http://localhost:3001\n</code></pre>"},{"location":"working-with-wheels/submitting-pull-requests/#running-tests","title":"Running Tests","text":"<p>Use the TestUI or run tests directly:</p> <pre><code># Run all tests across all engines (from TestUI)\n# or run specific tests via command line:\ndocker exec -it cfwheels-test-lucee5 sh -c \"cd /cfwheels-test-suite &amp;&amp; box wheels test app\"\n\n# Run a specific test\ndocker exec -it cfwheels-test-lucee5 sh -c \"cd /cfwheels-test-suite &amp;&amp; box wheels test app TestName\"\n</code></pre> <p>Make sure your changes: 1. Pass all existing tests 2. Include new tests for new functionality 3. Work across all supported CFML engines</p>"},{"location":"working-with-wheels/submitting-pull-requests/#5-commit-your-changes","title":"5. Commit Your Changes","text":"<p>Once your changes are ready and tested:</p> <pre><code>git add .\ngit commit -m \"fix: description of your changes (fixes #123)\"\n</code></pre> <p>Follow these commit message guidelines: - Start with a type: <code>fix:</code>, <code>feat:</code>, <code>docs:</code>, <code>refactor:</code>, etc. - Include a concise description of the changes - Reference the issue number with <code>(fixes #123)</code> or <code>(refs #123)</code> - Keep the subject line under 72 characters - Use the body of the commit message for additional details if needed</p>"},{"location":"working-with-wheels/submitting-pull-requests/#6-push-your-changes","title":"6. Push Your Changes","text":"<p>Push your branch to your fork on GitHub:</p> <pre><code>git push origin feature/issue-123\n</code></pre>"},{"location":"working-with-wheels/submitting-pull-requests/#7-create-a-pull-request","title":"7. Create a Pull Request","text":"<p>Create a pull request from your branch to the Wheels develop branch:</p> <ol> <li>Go to your fork on GitHub</li> <li>Click the \"Compare &amp; Pull Request\" button for your branch</li> <li>Set the base repository to <code>wheels-dev/wheels</code> and the base branch to <code>develop</code></li> <li>Fill out the PR template with:</li> <li>A clear description of the changes</li> <li>Reference to the issue being addressed</li> <li>Any special testing instructions</li> <li>Screenshots if applicable (for UI changes)</li> </ol>"},{"location":"working-with-wheels/submitting-pull-requests/#8-respond-to-review-feedback","title":"8. Respond to Review Feedback","text":"<p>After submitting your PR:</p> <ol> <li>A core team member will review your code</li> <li>They may request changes or clarification</li> <li>Make any requested changes by pushing additional commits to your branch</li> <li>The PR will be automatically updated</li> </ol>"},{"location":"working-with-wheels/submitting-pull-requests/#9-update-your-pr-if-needed","title":"9. Update Your PR if Needed","text":"<p>If the develop branch has been updated since you created your PR, you may need to update your branch:</p> <pre><code>git checkout feature/issue-123\ngit fetch upstream\ngit merge upstream/develop\n# Resolve any conflicts if needed\ngit push origin feature/issue-123\n</code></pre>"},{"location":"working-with-wheels/submitting-pull-requests/#tips-for-successful-pull-requests","title":"Tips for Successful Pull Requests","text":""},{"location":"working-with-wheels/submitting-pull-requests/#keep-changes-focused","title":"Keep Changes Focused","text":"<p>Each PR should address a single issue or implement a single feature. This makes review easier and reduces the chance of conflicts.</p>"},{"location":"working-with-wheels/submitting-pull-requests/#include-tests","title":"Include Tests","text":"<p>Always include tests for your changes: - For bug fixes, add a test that would fail without your fix - For new features, add tests covering all functionality - Make sure all existing tests continue to pass</p>"},{"location":"working-with-wheels/submitting-pull-requests/#update-documentation","title":"Update Documentation","text":"<p>If your changes affect user-facing functionality, update the relevant documentation: - Update guides in the <code>/guides</code> directory - Add inline documentation to code - Update the CHANGELOG.md if requested</p>"},{"location":"working-with-wheels/submitting-pull-requests/#use-the-docker-environment-effectively","title":"Use the Docker Environment Effectively","text":"<p>The Docker test environment is a powerful tool for ensuring your changes work across platforms: - Test on multiple CFML engines (Lucee and Adobe ColdFusion) - Test with different database engines - Use the TestUI to run specific tests and view results</p>"},{"location":"working-with-wheels/submitting-pull-requests/#working-with-the-core-team","title":"Working with the Core Team","text":""},{"location":"working-with-wheels/submitting-pull-requests/#communication-is-key","title":"Communication is Key","text":"<p>Maintain open communication during the PR process: - Respond promptly to review comments - Ask questions if requirements are unclear - Be open to feedback and suggestions</p>"},{"location":"working-with-wheels/submitting-pull-requests/#be-patient","title":"Be Patient","text":"<p>The core team members are volunteers with limited time. Review may take some time, especially for complex changes.</p>"},{"location":"working-with-wheels/submitting-pull-requests/#participate-in-the-community","title":"Participate in the Community","text":"<p>While waiting for review, you can: - Help review other PRs - Answer questions in the discussions - Report bugs or improve documentation</p>"},{"location":"working-with-wheels/submitting-pull-requests/#after-your-pr-is-merged","title":"After Your PR is Merged","text":"<p>Once your PR is merged:</p> <ol> <li> <p>Delete your feature branch    <pre><code>git checkout develop\ngit branch -D feature/issue-123\n</code></pre></p> </li> <li> <p>Sync your fork with the updated upstream    <pre><code>git fetch upstream\ngit merge upstream/develop\ngit push origin develop\n</code></pre></p> </li> <li> <p>Celebrate your contribution to Wheels! \ud83c\udf89</p> </li> </ol>"},{"location":"working-with-wheels/submitting-pull-requests/#special-considerations","title":"Special Considerations","text":""},{"location":"working-with-wheels/submitting-pull-requests/#breaking-changes","title":"Breaking Changes","text":"<p>If your change introduces breaking changes: - Clearly indicate this in the PR description - Explain why the breaking change is necessary - Document migration paths for users</p>"},{"location":"working-with-wheels/submitting-pull-requests/#performance-considerations","title":"Performance Considerations","text":"<p>For changes that might impact performance: - Include before/after benchmarks if possible - Test with different load scenarios - Document any performance implications</p>"},{"location":"working-with-wheels/submitting-pull-requests/#cross-engine-compatibility","title":"Cross-Engine Compatibility","text":"<p>Remember that Wheels supports multiple CFML engines: - Test on both Lucee and Adobe ColdFusion - Avoid engine-specific features or provide alternatives - Use the Docker environment to verify compatibility</p>"},{"location":"working-with-wheels/submitting-pull-requests/#conclusion","title":"Conclusion","text":"<p>Contributing to Wheels through pull requests is a rewarding way to improve the framework and help the CFML community. By following this process, you'll help ensure that your contributions are high-quality, well-tested, and efficiently integrated into the project.</p> <p>For more information on using the test environment, see Using the Test Environment.</p>"},{"location":"working-with-wheels/switching-environments/","title":"Switching Environments","text":"<p>Wheels allows you to set up different environments that match stages in your development cycle. That way you can configure different values that match what services to call and how your app behaves based on where you are in your development.</p> <p>The Development environment is the most convenient one to use as you start building your application because it does not cache any data. Therefore, if you make any changes to your controllers and actions, for example, it will immediately be picked up by Wheels.</p> <p>Other environment modes cache this information in order to speed up your application as much as possible. Making changes to the database in these most modes will cause Wheels to throw an error. (Although that can be avoided with a <code>reload</code> call. More on that later.)</p> <p>The fastest environment mode in terms of page load time is the Production mode. This is what you should set your application to run in before you launch your website.</p> <p>By default, all new applications will start in the Development environment which is middle-of-the-road in terms of convenience versus speed.</p>"},{"location":"working-with-wheels/switching-environments/#the-4-environment-modes","title":"The 4 Environment Modes","text":"<p>Besides the 2 environments mentioned above, there are 2 more. Let's go through them all one by one so you can see the differences between them and choose the most appropriate one given your current stage of development.</p> <p>Development</p> <ul> <li>Shows friendly Wheels specific errors as well as regular ColdFusion errors on screen.</li> <li>Does not email you when an error is encountered.</li> <li>Caches controller and model initialization (the <code>config()</code> methods).</li> <li>Caches the database schema.</li> <li>Caches routes.</li> <li>Caches image information.</li> </ul> <p>Production</p> <ul> <li>Caches everything that the Development mode caches.</li> <li>Activates all developer controlled caching (actions, pages, queries and partials).</li> <li>Shows your custom error page when an error is encountered.</li> <li>Shows your custom 404 page when a controller or action is not found.</li> <li>Sends an email to you when an error is encountered.</li> </ul> <p>Testing</p> <ul> <li>Same caching settings as the Production mode but using the error handling of the Development mode. (Good for testing an application at its true speed while still getting errors reported on screen.)</li> </ul> <p>Maintenance</p> <ul> <li>Shows your custom maintenance page unless the requesting IP address or user agent is in the exception list (set by calling <code>set(ipExceptions=\"127.0.0.1\")</code> in <code>/config/settings.cfm</code> or passed along in the URL as <code>except=127.0.0.1</code>, or as <code>except=myuseragentstring</code> to match against the user agent instead. Please note that if passing an exception on the URL using the <code>except</code> parameter, you must also provide the <code>password</code> parameter if a reload password has been defined. This eliminates the possibility of a rogue actor breaking out of maintenance mode by simply adding an <code>except</code> to the URL.</li> </ul> <p>This environment mode comes in handy when you want to briefly take your website offline to upload changes or modify databases on production servers.</p>"},{"location":"working-with-wheels/switching-environments/#how-to-switch-modes","title":"How to Switch Modes","text":"<p>You can change the current environment by modifying the <code>/config/environment.cfm</code> file. After you've modified it, you need to either restart the ColdFusion service or issue a <code>reload</code> request. (See below for more info.)</p> <p>The reload Request </p> <p>Issuing a reload request is the easiest way to go from one environment to another. It's done by passing in reload as a parameter in the URL, like this:</p> <p>{% code title=\"HTTP\" %} <pre><code>http://www.mysite.com/?reload=true\n</code></pre> {% endcode %}</p> <p>This tells Wheels to reload the entire framework (it will also run your code in the <code>app/events/onapplicationstart.cfm</code>file), thus picking up any changes made in the <code>/config/environment.cfm</code> file.</p> <p>Lazy Reloading </p> <p>There's also a shortcut for lazy developers who don't want to change this file at all. To use it, just issue the reload request like this instead:</p> <p>{% code title=\"HTTP\" %} <pre><code>http://www.mysite.com/?reload=testing\n</code></pre> {% endcode %}</p> <p>This will make Wheels skip your <code>/config/environment.cfm</code> file and just use the URL value instead (<code>testing</code>, in this case).</p> <p>Password-Protected Reloads </p> <p>For added protection, you can set the <code>reloadPassword</code> variable in <code>/config/settings.cfm</code>. When set, a reload request will only be honored when the correct password is also supplied, like this:</p> <p>{% code title=\"HTTP\" %} <pre><code>http://www.mysite.com/?reload=testing&amp;password=mypass\n</code></pre> {% endcode %}</p> <p>{% hint style=\"warning\" %}</p>"},{"location":"working-with-wheels/switching-environments/#dont-forget-your-reload-password-in-production","title":"Don't forget your reload password in production","text":"<p>You really don't want random users hitting ?reload=development on a production server, as it could potentially expose data about your application and error messages. Always set a reload password! {% endhint %}</p>"},{"location":"working-with-wheels/switching-environments/#disabling-environment-switching","title":"Disabling Environment Switching","text":"<p>If you're deploying to a container based environment, or one that you know you'll never want to switch out of production mode, you can disable URL based environment switching completely via:\\ <code>set(allowEnvironmentSwitchViaUrl = false);</code></p> <p>This is just an additional check to ensure that your production mode acts in the way you expect! Application reloading is still allowed, but the configuration can not be altered.</p>"},{"location":"working-with-wheels/switching-environments/#ip-based-debug-access-in-non-development-environments","title":"IP-Based Debug Access in Non-Development Environments","text":"<p>By default, Wheels only enables the debug GUI (wheels interface) and debug information in the development environment. However, there may be situations where you need access to these debugging tools in other environments like testing, production, or maintenance - but only for specific IP addresses.</p> <p>Wheels provides IP-based access control for the debug GUI and debug information through two configuration settings:</p>"},{"location":"working-with-wheels/switching-environments/#configuration-settings","title":"Configuration Settings","text":"<p>Add these settings to your environment-specific configuration files (e.g., <code>/config/production/settings.cfm</code>):</p> <pre><code>// Define allowed IP addresses that can access debug features\nset(debugAccessIPs = [\"203.0.113.45\", \"198.51.100.22\", \"127.0.0.1\"]);\n\n// Enable IP-based debug access control\nset(allowIPBasedDebugAccess = true);\n</code></pre>"},{"location":"working-with-wheels/switching-environments/#how-it-works","title":"How It Works","text":"<p>When these settings are configured:</p> <ol> <li>In the development environment, the debug GUI is always accessible regardless of IP address.</li> <li>In other environments (testing, production), the debug GUI and debug information will only be enabled for requests coming from IP addresses listed in the <code>debugAccessIPs</code> array.</li> <li>If a request comes from an IP address not in the list, the debug GUI and debug information remain disabled, maintaining security in production environments.</li> </ol>"},{"location":"working-with-wheels/switching-environments/#example-configuration","title":"Example Configuration","text":"<p>Here's a typical setup for different environments:</p> <p>Development (<code>/config/development/settings.cfm</code>): <pre><code>// Debug GUI is enabled by default in development, no additional settings needed\n</code></pre></p> <p>Testing (<code>/config/testing/settings.cfm</code>): <pre><code>set(debugAccessIPs = [\"127.0.0.1\", \"192.168.1.100\"]);\nset(allowIPBasedDebugAccess = true);\n</code></pre></p> <p>Production (<code>/config/production/settings.cfm</code>): <pre><code>set(debugAccessIPs = [\"10.0.0.5\"]); // Only specific admin IPs\nset(allowIPBasedDebugAccess = true);\n</code></pre></p> <p>This feature allows administrators to access debugging tools in production or other environments while keeping them secure from regular users, providing a flexible way to troubleshoot issues in all environments without compromising security.</p>"},{"location":"working-with-wheels/testing-your-application/","title":"Testing Your Application","text":""},{"location":"working-with-wheels/testing-your-application/#why-test","title":"Why Test?","text":"<p>At some point, your code is going to break. Upgrades, feature enhancements, and bug fixes are all part of the development lifecycle. Quite often with deadlines, you don't have the time to test the functionality of your entire application with every change you make.</p> <p>The problem is that today's fix could be tomorrow's bug. What if there were an automated way of checking if that change you're making is going to break something? That's where writing tests for your application can be invaluable.</p> <p>For testing your application in Wheels 3.0, we use TestBox as the testing framework. TestBox comes bundled with Wheels and provides a modern BDD (Behavior Driven Development) testing experience.</p>"},{"location":"working-with-wheels/testing-your-application/#the-test-framework","title":"The Test Framework","text":"<p>TestBox is a powerful testing framework that provides: - BDD and xUnit style testing syntax - Built-in assertions and expectations library - MockBox for mocking and stubbing - Code coverage reporting - Parallel test execution - Multiple output formats (HTML, JSON, JUnit, TAP)</p> <p>Wheels extends TestBox with framework-specific features through the <code>BaseSpec.cfc</code> class, providing helpers for testing models, controllers, and views.</p>"},{"location":"working-with-wheels/testing-your-application/#conventions","title":"Conventions","text":"<p>In Wheels 3.0, tests reside in the <code>tests/</code> directory off the root of your application. The recommended directory structure is:</p> <pre><code>tests/\n\u251c\u2500\u2500 BaseSpec.cfc          # Base test class with Wheels helpers\n\u251c\u2500\u2500 runner.cfm            # Web-based test runner\n\u251c\u2500\u2500 specs/                # Test specifications\n\u2502   \u251c\u2500\u2500 unit/            # Isolated unit tests\n\u2502   \u251c\u2500\u2500 integration/     # Integration tests\n\u2502   \u2514\u2500\u2500 functional/      # End-to-end tests\n\u251c\u2500\u2500 fixtures/            # Test data and fixtures\n\u2514\u2500\u2500 support/             # Test utilities\n    \u2514\u2500\u2500 factories/       # Test data factories\n</code></pre> <p>{% hint style=\"info\" %}</p>"},{"location":"working-with-wheels/testing-your-application/#directory-organization","title":"Directory Organization","text":"<ul> <li>unit/: Tests for individual components in isolation (models, helpers)</li> <li>integration/: Tests that verify multiple components work together</li> <li>functional/: End-to-end tests that simulate user interactions</li> <li>fixtures/: Static test data files</li> <li>support/factories/: Dynamic test data generators {% endhint %}</li> </ul> <p>All test components should extend the <code>tests.BaseSpec</code> component (which extends TestBox's BaseSpec):</p> <pre><code>component extends=\"tests.BaseSpec\" {\n    // your tests here\n}\n</code></pre> <p>The Wheels BaseSpec provides additional helpers for testing: - Transaction rollback: All tests run in transactions that automatically roll back - Model helpers: <code>model()</code>, <code>create()</code>, <code>build()</code>, <code>createList()</code> - Controller helpers: <code>controller()</code>, <code>processRequest()</code>, <code>apiRequest()</code> - Authentication helpers: <code>loginAs()</code>, <code>logout()</code>, <code>isLoggedIn()</code> - Assertion helpers: <code>assertHasErrors()</code>, <code>assertFieldValueEquals()</code></p> <p>You can write a test method with the following syntax:</p> <pre><code>it(\"Result is True\", () =&gt; {\n  result = true\n    expect(result).toBeTrue()\n})\n</code></pre> <p>You also have to write your test methods inside the describe method like the following:</p> <pre><code>describe(\"Tests that return True\", () =&gt; {\n  it(\"Result is True\", () =&gt; {\n    result = true\n    expect(result).toBeTrue()\n  })\n})\n</code></pre> <p>Using the <code>describe</code> method lets you bundle your tests inside a file. This way, you can have mutiple bundles inside a single file. You can name your tests and your bundles anything you want inside the \"\" but for convention's sake, you should start your bundles name with \"Tests\".</p> <p>if you want any helper methods for your tests, you can write them outside all the describe methods in your file.</p> <p>Do not <code>var</code>-scope any variables used in your tests. In order for the testing framework to access the variables within the tests that you're writing, all variables need to be within the component's <code>variables</code> scope. The easy way to do this is to just not <code>var</code> variables within your tests, and your CFML engine will automatically assign these variables into the <code>variables</code> scope of the component for you. You'll see this in the examples below.</p>"},{"location":"working-with-wheels/testing-your-application/#setup-teardown","title":"Setup &amp; Teardown","text":"<p>When writing a group of tests, it's common for there to be some duplicate code, global configuration, and/or cleanup needs that need to be run before or after each test. In order to keep things DRY (Don't Repeat Yourself), the TestBox offers 2 special methods that you can optionally use to handle such configuration.</p> <p><code>beforeEach(() =&gt; {})</code>: Used to initialize or override any variables or execute any code that needs to be run before each test.</p> <p><code>afterEach(() =&gt; {})</code>: Used to clean up any variables or execute any code that needs to be ran after each test.</p> <p>Example:</p> <pre><code>beforeEach(() =&gt; {\n  _controller = controller(name=\"dummy\")\n\n  args = {\n    fromTime=Now(),\n    includeSeconds=true;\n  }\n})\n\nit(\"works with seconds below 5 seconds\", () =&gt; {\n    number = 5 - 1\n    args.toTime = DateAdd('s', number, args.fromTime)\n    actual = _controller.distanceOfTimeInWords(argumentCollection = args)\n\n    expect(actual).toBe(\"less than 5 seconds\")\n})\n\nit(\"works with seconds below 10 seconds\", () =&gt; {\n    number = 10 - 1\n    args.toTime = DateAdd('s', number, args.fromTime)\n    actual = _controller.distanceOfTimeInWords(argumentCollection = args)\n\n    expect(actual).toBe(\"less than 10 seconds\")\n})\n</code></pre>"},{"location":"working-with-wheels/testing-your-application/#evaluation","title":"Evaluation","text":"<p><code>expect().toBe()</code>: This is the main method that you will be using when developing tests. You can use this to compare the result of an operation with a value that you expect the operation to return. Let's say you have the result of an operation stored in a variable <code>result</code> and you expect the result to be \"run completed\" then you can check if the result is indeed returning that value by doing <code>expect(result).toBe(\"run completed\")</code>.</p> <p>An example test that checks that two values equal each other:</p> <pre><code>it(\"actual equals expected\", () =&gt; {\n  actual = true\n  expected = true\n  expect(actual).toBe(expected)\n})\n</code></pre> <pre><code>it(\"actual equals expected\", () =&gt; {\n  actual = true\n  expect(actual).toBeTrue()\n})\n</code></pre> <p>Either of the above will work. The <code>toBe()</code> method compares the value in <code>expect()</code> to the expected value, while <code>toBeTrue()</code> checks if the value in <code>expect()</code> is true. Another simple method is <code>toBeFalse()</code>, which checks if the value in <code>expect()</code> is false.</p> <p>An example test that checks that the first value is less then the second value:</p> <pre><code>it(\"one is less than five\", () =&gt; {\n  one = 1\n  five = 5\n  expect(one).toBeLT(five)\n})\n</code></pre> <p>You get the idea since you've used these kinds of expressions a thousand times. You can compare structures, arrays, objects, you name it!</p> <p>An example test that checks that a key exists in a structure:</p> <pre><code>it(\"key exists in structure\", () =&gt; {\n  struct = {\n    foo=\"bar\"\n  }\n  key = \"foo\"\n  expect(struct).toHaveKey(key)\n})\n</code></pre> <p>When you want to test if an exception will be thrown, you can use the <code>try{}catch{}</code> to test for it. An example of raising the <code>Wheels.TableNotFound</code> error when you specify an invalid model name:</p> <pre><code>it(\"Table not found\", () =&gt; {\n    try {\n        model('thisHasNoTable')\n        $assert.fail(\"Wheels.TableNotFound error did not occur.\")\n    } catch (any e) {\n        type = e.Type\n        expect(type).toBe(\"Wheels.TableNotFound\")\n    }\n})\n</code></pre>"},{"location":"working-with-wheels/testing-your-application/#debugging","title":"Debugging","text":"<p><code>debug()</code>: Will display its output after the test result so you can examine an expression more closely.</p> <p><code>expression</code> (string) - a quoted expression to display\\ <code>label</code> (string) - Attach a label to the expression</p> <p>{% hint style=\"info\" %}</p>"},{"location":"working-with-wheels/testing-your-application/#tip","title":"TIP","text":"<p>Overloaded arguments will be passed to the internal <code>cfdump</code> attributeCollection {% endhint %}</p> <pre><code>it(\"key exists in structure\", () =&gt; {\n  struct = {\n    foo=\"bar\"\n  }\n  key = \"foo\"\n\n  // displaying the debug output\n  debug(\"struct\")\n\n  // displaying the output of debug with a label\n  debug(\"struct\", \"my struct\")\n\n  expect(struct).toHaveKey(key)\n})\n</code></pre>"},{"location":"working-with-wheels/testing-your-application/#testing-your-models","title":"Testing Your Models","text":"<p>The first part of your application that you are going to want to test against are your models because this is where all the business logic of your application lives. Suppose that we have the following model:</p> <pre><code>component extends=\"Model\" {\n  public void function config() {\n    // validation\n    validate(\"checkUsernameDoesNotStartWithNumber\")\n    // callbacks\n    beforeSave(\"sanitizeEmail\");\n  }\n\n  /**\n   * Check the username does not start with a number\n   */\n  private void function checkUsernameDoesNotStartWithNumber() {\n    if (IsNumeric(Left(this.username, 1))) {\n        addError(\n        property=\"username\",\n        message=\"Username cannot start with a number.\"\n      );\n    }\n  }\n\n  /**\n   * trim and force email address to lowercase before saving\n   */\n  private void function sanitizeEmail() {\n      this.email = Trim(LCase(this.email));\n  }\n}\n</code></pre> <p>As you can see from the code above, our model has a <code>beforeSave</code> callback that runs whenever we save a user object. Let's get started writing some tests against this model to make sure that our callback works properly.</p> <p>First, create a test component called <code>/tests/Testbox/specs/models/TestUserModel.cfc</code>, and in the <code>beforeEach</code> function, create an instance of the model that we can use in each test that we write. We will also create a structure containing some default properties for the model.</p> <pre><code>beforeEach(() =&gt; {\n  // create an instance of our model\n  user = model(\"user\")\n\n  // a structure containing some default properties for the model\n  properties = {\n      firstName=\"Hugh\",\n      lastName=\"Dunnit\",\n      email=\"hugh@example.com\",\n      username=\"myusername\",\n      password=\"foobar\",\n      passwordConfirmation=\"foobar\"\n  }\n\n  // Alternative: Use factories for test data\n  // user = build(\"user\")  // Creates but doesn't save\n  // user = create(\"user\") // Creates and saves\n})\n</code></pre> <p>As you can see, we invoke our model by using the <code>model()</code> method just like you would normally do in your controllers.</p> <p>The first thing we do is add a simple test to make sure that our custom model validation works.</p> <pre><code>it(\"user model should fail custom validation\", () =&gt; {\n  // set the properties of the model\n  user.setProperties(properties)\n  user.username = \"2theBatmobile!\"\n\n  // run the validation\n  user.valid()\n\n  actual = user.allErrors()[1].message\n  expected = \"Username cannot start with a number.\"\n\n  // check that the expected error message is generated\n  expect(actual).toBe(expected)\n})\n</code></pre> <p>Now that we have tests to make sure that our model validations work, it's time to make sure that the callback works as expected when a valid model is created.</p> <pre><code>it(\"sanitize email callback should return expected value\", () =&gt; {\n  // set the properties of the model\n  user.setProperties(properties)\n  user.email = \" FOO@bar.COM \"\n\n  /*\n    Save the model, but use transactions so we don't actually write to\n    the database. this prevents us from having to have to reload a new\n    copy of the database every time the test runs.\n  */\n  user.save(transaction=\"rollback\")\n\n  // make sure that email address was sanitized\n  expect(user.email).toBe(\"foo@bar.com\")\n})\n</code></pre>"},{"location":"working-with-wheels/testing-your-application/#testing-your-controllers","title":"Testing Your Controllers","text":"<p>The next part of our application that we need to test is our controller. Below is what a typical controller for our user model would contain for creating and displaying a list of users:</p> <pre><code>component extends=\"Controller\" {\n\n  // users/index\n  public void function index() {\n    users = model(\"user\").findAll()\n  }\n\n  // users/new\n  public void function new() {\n    user = model(\"user\").new()\n  }\n\n  // users/create\n  public any function create() {\n    user = model(\"user\").new(params.user)\n\n    // Verify that the user creates successfully\n    if (user.save()) {\n      flashInsert(success=\"The user was created successfully.\")\n      // notice something about this redirectTo?\n      return redirectTo(action=\"index\")\n    }\n    else {\n      flashInsert(error=\"There was a problem creating the user.\")\n      renderView(action=\"new\")\n    }\n  }\n}\n</code></pre> <p>Notice the <code>return</code> in the <code>create</code> action in the <code>redirectTo()</code> method? The reason for this is quite simple, under the covers, when you call <code>redirectTo()</code>, Wheels is using <code>cflocation</code>. As we all know, there is no way to intercept or stop a <code>cflocation</code> from happening. This can cause quite a number of problems when testing out a controller because you would never be able to get back any information about the redirection. </p> <p>To work around this, the Wheels test framework will \"delay\" the execution of a redirect until after the controller has finished processing. This allows Wheels to gather and present some information to you about what redirection will occur. </p> <p>The drawback to this technique is that the controller will continue processing and as such we need to explicitly exit out of the controller action on our own, thus the reason why we use <code>return</code>.</p> <p>Let's create a test package called <code>/tests/Testbox/specs/controllers/TestUsersController.cfc</code> to test that the <code>create</code> action works as expected:</p> <pre><code>it(\"redirect and flash status\", () =&gt; {\n  // define the controller, action and user params we are testing\n  local.params = {\n    controller=\"users\",\n    action=\"create\",\n    user={\n      firstName=\"Hugh\",\n      lastName=\"Dunnit\",\n      email=\"hugh@somedomain.com\",\n      username=\"myusername\",\n      password=\"foobar\",\n      passwordConfirmation=\"foobar\"\n    }\n    }\n\n  // process the create action of the controller\n  result = processRequest(params=local.params, method=\"post\", returnAs=\"struct\")\n\n  // make sure that the expected redirect happened\n  expect(result.status).toBe(302)\n    expect(result.flash.success).toBe('The user was created successfully.')\n    expect(result.redirect).toBe('/users/show/1')\n\n})\n</code></pre> <p>Notice that a lot more goes into testing a controller than a model. The first step is setting up the <code>params</code> that will need to be passed to the controller. We then pass the 'params' to the <code>processRequest()</code> function which returns a structure containing a bunch of useful information.</p> <p>We use this information to make sure that the controller redirected the visitor to the <code>index</code> action once the action was completed.</p> <p>Note: <code>processRequest()</code> is only for use within the test framework.</p> <p>Below are some examples of how a controller can be tested:</p> <pre><code>// checks that a failed user update returns a 302 http response, an error exists in the flash and will be redirected to the error page\nit(\"status flash and redirect\", () =&gt; {\n  local.params = {\n    controller = \"users\",\n    action = \"update\"\n  }\n  result = processRequest(params=local.params, method=\"post\", rollback=true, returnAs=\"struct\")\n  expect(result.status).toBe(302)\n  expect(result.flash).toHaveKey(error)\n  expect(result.redirect).toBe('/common/error')\n})\n\n// checks that expected results are returned. Notice the update transactions is rolled back\nit(\"status database update email and flash\", () =&gt; {\n  local.params = {\n    controller = \"users\",\n    action = \"update\",\n    key = 1,\n    user = {\n      name = \"Hugh\"\n    }\n  }\n  transaction {\n\n    result = processRequest(params=local.params, method=\"post\", returnAs=\"struct\")\n\n    user = model(\"user\").findByKey(1)\n    transaction action=\"rollback\"\n  }\n  expect(result.status).toBe(302)\n  expect(user.name).toBe('Hugh')\n  expect(result.emails[1].subject).toBe('User was updated')\n  expect(result.flash.success).toBe('User was updated')\n})\n\n// checks that an api request returns the expected JSON response\nit(\"Test Json API\", () =&gt; {\n  local.params = {\n    controller = \"countries\",\n    action = \"index\",\n    format = \"json\",\n    route = \"countries\"\n  }\n  result = DeserializeJSON(processRequest(local.params)).data\n  expect(result).toHaveLength(196)\n})\n\n// checks that an API create method returns the expected result\nit(\"Test Json API create\", () =&gt; {\n  local.params = {\n    action = \"create\",\n    controller = \"users\",\n    data = {\n      type = \"users\",\n      attributes = {\n        \"first-name\" = \"Hugh\",\n        \"last-name\" = \"Dunnit\"\n      }\n    },\n    format = \"json\",\n    route = \"users\"\n  }\n  result = processRequest(params=local.params, returnAs=\"struct\").status;\n  expect(result.status).toBe(201)\n})\n</code></pre>"},{"location":"working-with-wheels/testing-your-application/#testing-controller-variables","title":"Testing Controller Variables","text":"<p>If you want to test a variable that's being set on a controller you can make use of the <code>this</code> scope. This way it's available from outside the controller, which makes it testable.</p> <pre><code>this.employeeNumber = params.empNum;\n\n// Then from your test...\n\nlocal.controller = controller(...);\nlocal.controller.processAction();\ntheValue = local.controller.employeeNumber;\n</code></pre> <p>If you think that's too \"ugly\", you can instead make a public function on the controller that returns the value and then call that from your tests.</p>"},{"location":"working-with-wheels/testing-your-application/#testing-partials","title":"Testing Partials","text":"<p>You may at some point want to test a partial (usually called via <code>includePartial()</code>) outside of a request. You'll notice that if you just try and call <code>includePartial()</code> from within the test suite, it won't work. Thankfully there's a fairly easy technique you can use by calling a \"fake\" or \"dummy\" controller.</p> <pre><code>component extends=\"testbox.system.BaseSpec\" {\n    beforeEach(() =&gt; {\n      params = {controller=\"dummy\", action=\"dummy\"}\n      _controller = controller(\"dummy\", params)\n    })\n\n    it(\"Test my partial\", () =&gt; {\n      result = _controller.includePartial(partial=\"/foo/bar/\")\n      expect(result).toInclude('foobar')\n    })\n}\n</code></pre>"},{"location":"working-with-wheels/testing-your-application/#testing-your-views","title":"Testing Your Views","text":"<p>Next we will look at testing the view layer. Below is the code for <code>new.cfm</code>, which is the view file for the controller's <code>new</code> action:</p> <pre><code>&lt;cfoutput&gt;\n\n&lt;h1&gt;Create a New user&lt;/h1&gt;\n\n#flashMessages()#\n\n#errorMessagesFor(\"user\")#\n\n#startFormTag(route=\"users\")#\n    #textField(objectName='user', property='username')#\n    #passwordField(objectName='user', property='password')#\n    #passwordField(objectName='user', property='passwordConfirmation')#\n    #textField(objectName='user', property='firstName')#\n    #textField(objectName='user', property='lastName')#\n    &lt;p&gt;\n      #submitTag()# or\n      #linkTo(text=\"Return to the listing\", route=\"users\")#\n    &lt;/p&gt;\n#endFormTag()#\n\n&lt;/cfoutput&gt;\n</code></pre> <p>Testing the view layer is very similar to testing controllers, we will setup a params structure to pass to the <code>processRequest()</code> function which will return (among other things) the generated view output. </p> <p>Once we have this output, we can then search through it to make sure that whatever we wanted the view to display is presented to our visitor. In the test below, we are simply checking for the heading.</p> <pre><code>it(\"users index contains heading\", () =&gt; {\n\n  local.params = {\n    controller = \"users\",\n    action = \"index\"\n  }\n\n  result = processRequest(params=local.params, returnAs=\"struct\")\n\n  expect(result.status).toBe(200)\n  expect(result.body).toHave('&lt;h1&gt;Create a New user&lt;/h1&gt;')\n})\n</code></pre>"},{"location":"working-with-wheels/testing-your-application/#testing-your-application-helpers","title":"Testing Your Application Helpers","text":"<p>Next up is testing global helper functions. Below is a simple function that removes spaces from a string.</p> <pre><code>// app/global/functions.cfm\n\npublic string function stripSpaces(required string string) {\n    return Replace(arguments.string, \" \", \"\", \"all\");\n}\n</code></pre> <p>Remember to restart your application after adding a helper function to use it afterwards.</p> <p>Testing these helpers is fairly straightforward. All we need to do is compare the function's return value against a value that we expect, using the <code>assert()</code> function.</p> <pre><code>it(\"stripSpaces should return expected result\", () =&gt; {\n    actual = stripSpaces(\" foo   -   bar     \")\n    expected = \"foo-bar\"\n    expect(actual).toBe(expected)\n})\n</code></pre>"},{"location":"working-with-wheels/testing-your-application/#testing-your-view-helpers","title":"Testing Your View Helpers","text":"<p>Testing your view helpers are very similar to testing application helpers except we need to explicitly include the helpers in the <code>beforeEach</code> function so our view functions are available to the test framework.</p> <p>Below is a simple function that returns a string wrapped in <code>h1</code> tags.</p> <pre><code>// app/views/helpers.cfm\n\npublic string function heading(required string text, string class=\"foo\") {\n    return '&lt;h1 class=\"#arguments.class#\"&gt;#arguments.text#&lt;/h1&gt;';\n}\n</code></pre> <p>And in our view test package:</p> <pre><code>beforeEach(() =&gt; {\n  // include our helper functions\n  include \"/app/views/helpers.cfm\"\n  text = \"Why so serious?\"\n})\n\nit(\"heading returns expected markup\", () =&gt; {\n  actual = heading(text=text)\n  expected = '&lt;h1 class=\"foo\"&gt;#text#&lt;/h1&gt;'\n  expect(actual).toBe(expected)\n})\n\nit(\"heading with class returns expected markup\", () =&gt; {\n  actual = heading(text=text, class=\"bar\")\n  expected = '&lt;h1 class=\"bar\"&gt;#text#&lt;/h1&gt;'\n  expect(actual).toBe(expected)\n})\n</code></pre>"},{"location":"working-with-wheels/testing-your-application/#testing-plugins","title":"Testing Plugins","text":"<p>Testing plugins requires slightly different approaches depending on the <code>mixin</code> attribute defined in the plugin's main component.</p> <p>Below is a simple plugin called <code>timeAgo</code> that extends Wheels' <code>timeAgoInWords</code> view helper by appending \"ago\" to the function's return value. Take note of the <code>mixin=\"controller\"</code> argument as this will play a part in how we test the plugin.</p> <pre><code>component mixin=\"controller\" {\n\n    public any function init() {\n        this.version = \"2.0\";\n        return this;\n    }\n\n    /*\n     * Append the term \"ago\" to the timeAgoInWords core function\n     */\n    public string function timeAgo() {\n        return core.timeAgoInWords(argumentCollection=arguments) &amp; \" \" &amp; __timeAgoValueToAppend();\n    }\n\n    /*\n     * Define the term to append to the main function\n     */\n    private string function __timeAgoValueToAppend() {\n        return \"ago\";\n    }\n}\n</code></pre> <p>In order to test our plugin, we'll need to do a little setup. Our plugin's tests will reside in a directory within our plugin package named <code>tests</code>. We'll also need a directory to keep test assets, in this case a dummy controller that we will need to instantiate in our test's <code>beforeEach()</code> function.</p> <pre><code>app/\n\u251c\u2500 plugins/\n   \u2514\u2500 timeago/\n      \u2514\u2500 TimeAgo.cfc\n      \u2514\u2500 index.cfm\n      \u2514\u2500 tests/\n          \u2514\u2500 TestTimeAgo.cfc\n          \u2514\u2500 assets/\n              \u2514\u2500 controllers/\n                  \u2514\u2500 Dummy.cfc\n</code></pre> <p>The <code>/app/plugins/timeago/tests/assets/controllers/Dummy.cfc</code> controller contains the bare minimum for a controller.</p> <pre><code>component extends=\"wheels.Controller\" {\n}\n</code></pre> <p>Firstly, in our <code>/app/plugins/timeago/tests/TestTimeAgo.cfc</code> we'll need to copy the application scope so that we can change some of Wheels' internal paths. Fear not, we'll reinstate any changes after the tests have finished executing using the <code>AfterEach()</code> function. so that if you're running your tests on your local development machine, your application will continue to function as expected after you're done testing.</p> <p>Once the setup is done, we simply execute the plugin functions and check using <code>expect()</code> function that the return values are what we expect. </p> <pre><code>component extends=\"testbox.system.BaseSpec\" {\n\n    function run() {\n        describe(\"Tests that timeAgo\", () =&gt; {\n\n            beforeEach(() =&gt; {\n                // save the original environment\n                applicationScope = Duplicate(application)\n                // a relative path to our plugin's assets folder where we will store any plugin specific components and files\n                assetsPath = \"app/plugins/timeAgo/tests/assets/\"\n                // override wheels' path with our plugin's assets directory\n                application.wheels.controllerPath = assetsPath &amp; \"controllers\"\n                // clear any plugin default values that may have been set\n                StructDelete(application.wheels.functions, \"timeAgo\")\n                // we're always going to need a controller for these tests so we'll just create a dummy\n                _params = {controller=\"foo\", action=\"bar\"}\n                dummyController = controller(\"Dummy\", _params)\n            })\n\n            afterEach(() =&gt; {\n                // reinstate the original application environment\n                application = applicationScope;\n            })\n\n            // testing main public function\n            it(\"timeAgo returns expected value\", () =&gt; {\n                actual = dummyController.timeAgo(fromTime=Now(), toTime=DateAdd(\"h\", -1, Now()))\n                expected = \"About 1 hour ago\"\n                expect(actual).toBe(expected)\n            })\n\n            // testing the 'private' function\n            it(\"timeAgo value to append returns expected value\", () =&gt; {\n                actual = dummyController.__timeAgoValueToAppend()\n                expected = \"ago\"\n                expect(actual).toBe(expected)\n            })\n\n        })\n    }\n}\n</code></pre> <p>If your plugin is uses <code>mixin=\"model\"</code>, you will need to create and instantiate a dummy model component.</p>"},{"location":"working-with-wheels/testing-your-application/#running-your-tests","title":"Running Your Tests","text":"<p>Wheels provides multiple ways to run your tests:</p>"},{"location":"working-with-wheels/testing-your-application/#command-line-recommended","title":"Command Line (Recommended)","text":"<pre><code># Run all tests\nwheels test run\n\n# Run specific directory\nwheels test run --directory=tests/specs/unit\n\n# Watch mode for TDD\nwheels test run --watch\n\n# Run with coverage\nwheels test run --coverage\n\n# Run specific test bundles\nwheels test run --testBundles=models\n\n# Generate coverage report\nwheels test coverage\n</code></pre>"},{"location":"working-with-wheels/testing-your-application/#using-testbox-cli-directly","title":"Using TestBox CLI directly","text":"<pre><code># Run all tests\nbox testbox run\n\n# Run specific directory\nbox testbox run --directory=tests/specs/unit\n\n# Watch mode\nbox testbox watch\n\n# With coverage\nbox testbox run --coverage --coverageReporter=html\n</code></pre>"},{"location":"working-with-wheels/testing-your-application/#web-runner","title":"Web Runner","text":"<p>You can also run tests through the web interface:</p> <ul> <li>Visit <code>/tests/runner.cfm</code> for an interactive HTML interface</li> <li>The test runner supports various URL parameters:</li> <li><code>testBundles=controllers</code> - Run specific test bundles</li> <li><code>testSpecs=testCaseOne</code> - Run specific test specs</li> <li><code>reporter=json</code> - Change output format (html, json, junit, tap, simple, text)</li> <li><code>coverage=true</code> - Enable code coverage</li> </ul>"},{"location":"working-with-wheels/testing-your-application/#legacy-method","title":"Legacy Method","text":"<p>The legacy test runner is still available through the navbar menu for backward compatibility: - Click on the <code>Testbox</code> button in your navbar - Choose between <code>App Tests</code> and <code>Core Tests</code> - Select your desired output format (HTML, JSON, TXT, JUnit)</p> <p>Note: We recommend using the newer CLI commands for better performance and features.</p>"},{"location":"working-with-wheels/testing-your-application/#migrating-from-rocketunit","title":"Migrating from RocketUnit","text":"<p>If you have existing RocketUnit tests, use the migration tool:</p> <pre><code># Migrate a single file\nwheels test migrate path/to/test.cfc\n\n# Migrate all tests\nwheels test migrate tests --recursive\n\n# Preview changes without modifying files\nwheels test migrate tests --dry-run\n</code></pre>"},{"location":"working-with-wheels/testing-your-application/#running-tests-with-docker","title":"Running Tests with Docker","text":"<p>Wheels provides a comprehensive Docker-based testing environment that allows you to run tests across multiple CFML engines and databases simultaneously. This is especially useful for ensuring compatibility across different environments.</p>"},{"location":"working-with-wheels/testing-your-application/#using-the-testui","title":"Using the TestUI","text":"<p>The easiest way to run tests in Docker is through the TestUI, which provides a modern web interface for managing tests:</p> <pre><code># From the Wheels root directory\ndocker compose --profile ui up -d\n</code></pre> <p>Then navigate to http://localhost:3000 to access the TestUI.</p> <p>TestUI Features: - Visual Test Runner: See test results in real-time with detailed error information - Container Management: Start stopped containers directly from the UI by clicking on them - Pre-flight Checks: Automatic verification that required services are running before tests - Multi-Engine Testing: Run tests across Lucee 5/6 and Adobe ColdFusion 2018/2021/2023 - Multi-Database Support: Test against MySQL, PostgreSQL, SQL Server, H2, and Oracle - Test History: View previous test runs and results</p>"},{"location":"working-with-wheels/testing-your-application/#running-tests-across-different-databases","title":"Running Tests Across Different Databases","text":"<p>The Docker setup includes multiple database configurations. You can run tests against different databases by appending the <code>db</code> parameter:</p> <ul> <li><code>db=mysql</code> - MySQL database</li> <li><code>db=postgres</code> - PostgreSQL database  </li> <li><code>db=sqlserver</code> - Microsoft SQL Server</li> <li><code>db=h2</code> - H2 embedded database (Lucee only)</li> <li><code>db=oracle</code> - Oracle database (requires additional setup)</li> </ul> <p>Example URLs: <pre><code>http://localhost:60005/wheels/testbox?format=json&amp;db=mysql\nhttp://localhost:60005/wheels/testbox?format=json&amp;db=postgres\n</code></pre></p>"},{"location":"working-with-wheels/testing-your-application/#docker-profiles","title":"Docker Profiles","text":"<p>The Docker Compose setup uses profiles to organize containers:</p> <ul> <li><code>ui</code>: TestUI and API server</li> <li><code>lucee</code>: All Lucee engines</li> <li><code>adobe</code>: All Adobe ColdFusion engines</li> <li><code>db</code>: All database containers</li> <li><code>quick-test</code>: Minimal setup (Lucee 5 + MySQL)</li> <li><code>all</code>: All containers</li> </ul> <p>Start specific profiles: <pre><code># Just the UI\ndocker compose --profile ui up -d\n\n# Lucee engines with databases\ndocker compose --profile lucee --profile db up -d\n\n# Everything\ndocker compose --profile all up -d\n</code></pre></p>"},{"location":"working-with-wheels/testing-your-application/#container-management-from-testui","title":"Container Management from TestUI","text":"<p>The TestUI includes an API server that allows you to start Docker containers directly from the web interface:</p> <ol> <li>Click on any stopped engine or database in the dashboard</li> <li>Confirm that you want to start the service</li> <li>The container will start automatically</li> <li>Status updates appear in real-time</li> </ol> <p>This eliminates the need to use the terminal for basic container management tasks.</p>"},{"location":"working-with-wheels/testing-your-application/#additional-techniques","title":"Additional Techniques","text":"<p>Whilst best practice recommends that tests should be kept as simple and readable as possible, sometimes moving commonly used code into test suite helpers can greatly improve the simplicity of your tests.</p> <p>Some examples may include, serializing complex values for use in <code>assert()</code> or grouping multiple assertions together. Whatever your requirements, there are a number of ways to use test helpers.</p> <ol> <li>Put your helper functions in your <code>/tests/Testbox/Test.cfc</code>.\\    These will be available to any package that extends this component. Be mindful of\\    functions you put in here, as it's easy to create naming collisions.</li> <li>If you've arranged your tests into subdirectories, you can create a <code>helpers.cfm</code> file in any given\\    directory and simply include it in the package.</li> <li>Put package-specific helper functions in the same package as the tests that use it.\\    These will only be available to the tests in that package. To ensure that these test helpers\\    are not run as tests, use a function name that doesn't start with \"test_\". Eg: <code>$simplify()</code></li> </ol> <pre><code>component extends=\"tests.Testbox.Test\" {\n\n  // 1. All functions in /tests/Testbox/Test.cfc will be available\n\n  // 2. Include a file containing helpers\n  include \"helpers.cfm\";\n\n  // 3. This is only available to this package\n  function $simplify(required string string) {\n    local.rv = Replace(arguments.string, \" \", \"\", \"all\");\n    local.rv = Replace(local.rv, Chr(13), \"\", \"all\");\n    local.rv = Replace(local.rv, Chr(10), \"\", \"all\");\n    return local.rv;\n  }\n\n}\n</code></pre> <ul> <li>Overloading application vars.. Wheels will revert the application scope after all tests have completed.</li> </ul> <p>Caveat: The test suite request must complete without uncaught exceptions. If an uncaught exception occurs, the application scope may stay 'dirty', so it's recommended to reload the application by adding <code>reload=true</code> param to your url whilst developing your test packages.</p>"},{"location":"working-with-wheels/testing-your-application/#learn-by-example-wheels-core","title":"Learn By Example: Wheels Core","text":"<p>The Wheels core uses TestBox for its unit test suite and contains a wealth of useful examples. They can all be found in the <code>tests</code> folder of the Wheels git repo.</p>"},{"location":"working-with-wheels/testing-your-application/#video-tutorials","title":"Video Tutorials","text":"<p>\ud83d\udcf9 Coming Soon: Video tutorials for visual learners - Getting Started with TestBox in Wheels - Migrating from RocketUnit to TestBox - Writing Effective Tests with TDD - Advanced Testing Techniques</p> <p>Check the complete testing guide for updates</p>"},{"location":"working-with-wheels/testing-your-application/#additional-resources","title":"Additional Resources","text":"<ul> <li>Complete TestBox Testing Guide - Comprehensive guide with advanced topics</li> <li>TestBox Documentation - Official TestBox docs</li> <li>Test Quick Start - Quick reference for common patterns</li> <li>Migration Cheat Sheet - Quick reference for RocketUnit to TestBox</li> </ul>"},{"location":"working-with-wheels/using-the-test-environment/","title":"Using the Wheels Test Environment","text":"<p>Wheels includes a comprehensive test environment specifically designed for testing the core framework itself. This environment is crucial for contributors to ensure their changes pass all tests across multiple platforms before submitting pull requests. This guide covers how to use the Docker-based test environment effectively.</p>"},{"location":"working-with-wheels/using-the-test-environment/#overview","title":"Overview","text":"<p>The Wheels test environment uses Docker containers to provide a standardized setup for testing core framework functionality across:</p> <ul> <li>Multiple CFML engines (Lucee 5/6, Adobe ColdFusion 2018/2021/2023)</li> <li>Multiple database platforms (MySQL, SQL Server, PostgreSQL, H2)</li> <li>A modern test user interface (TestUI)</li> <li>Automated test execution capabilities</li> </ul> <p>This containerized approach ensures that all core framework tests run consistently across platforms, helping maintain compatibility across all supported environments.</p> <p>Important: This test environment is specifically for running the core framework tests to validate contributions to the Wheels project. If you're looking to test your own Wheels-based application, please refer to Testing Your Application for guidance on setting up tests within your application.</p>"},{"location":"working-with-wheels/using-the-test-environment/#prerequisites","title":"Prerequisites","text":"<p>To use the Wheels core test environment, you'll need:</p> <ol> <li>Docker installed and running</li> <li>Git to clone the Wheels repository</li> <li>CommandBox installed to manage dependencies and run commands</li> <li>Basic familiarity with command-line operations</li> </ol>"},{"location":"working-with-wheels/using-the-test-environment/#setting-up-the-test-environment","title":"Setting Up the Test Environment","text":""},{"location":"working-with-wheels/using-the-test-environment/#1-clone-the-wheels-repository","title":"1. Clone the Wheels Repository","text":"<p>If you haven't already done so, clone the Wheels repository:</p> <pre><code>git clone https://github.com/wheels-dev/wheels.git\ncd wheels\n</code></pre>"},{"location":"working-with-wheels/using-the-test-environment/#2-install-dependencies-with-commandbox","title":"2. Install Dependencies with CommandBox","text":"<p>Before running tests, you need to install dependencies using CommandBox:</p> <pre><code># Start CommandBox (if not using the globally installed version)\nbox\n\n# Install dependencies\ninstall\n\n# Exit CommandBox shell (if you entered it)\nexit\n</code></pre> <p>Alternatively, you can run the install command directly:</p> <pre><code>box install\n</code></pre> <p>This will install all the necessary dependencies specified in the <code>box.json</code> file.</p>"},{"location":"working-with-wheels/using-the-test-environment/#3-start-the-test-environment","title":"3. Start the Test Environment","text":"<p>The test environment uses Docker Compose profiles to selectively start components. Use one of the following commands based on your needs:</p> <pre><code># Start everything (all engines, databases, and test UI)\ndocker compose --profile all up -d\n\n# Start just the test UI\ndocker compose --profile ui up -d\n\n# Start a specific CFML engine and database\ndocker compose --profile lucee --profile mysql up -d\n\n# Start a minimum testing setup\ndocker compose --profile quick-test up -d\n</code></pre> <p>The first time you run these commands, Docker will build or download the necessary images, which may take several minutes.</p>"},{"location":"working-with-wheels/using-the-test-environment/#4-access-the-test-user-interface","title":"4. Access the Test User Interface","text":"<p>Once the containers are running, access the TestUI by navigating to:</p> <pre><code>http://localhost:3001\n</code></pre> <p>This web interface allows you to: - Select CFML engines and databases for testing - Run specific test suites or individual tests - View test results and error details - Manage Docker containers directly from the UI</p>"},{"location":"working-with-wheels/using-the-test-environment/#available-docker-profiles","title":"Available Docker Profiles","text":"<p>The test environment includes several profiles you can use with <code>docker compose --profile [profile] up -d</code>:</p> Profile Description <code>all</code> All CFML engines, databases, and the TestUI <code>ui</code> Just the modern TestUI <code>ui-legacy</code> The legacy TestUI interface <code>lucee</code> Lucee 5 and 6 engines <code>adobe</code> Adobe ColdFusion 2018, 2021, 2023 engines <code>db</code> All database platforms <code>mysql</code> MySQL database only <code>postgres</code> PostgreSQL database only <code>sqlserver</code> SQL Server database only <code>quick-test</code> Minimal setup for quick testing (Lucee 5 + MySQL) <code>compatibility</code> Engines used for compatibility testing <code>current</code> Latest stable versions of engines <code>legacy</code> Older versions of engines <p>You can combine multiple profiles by specifying them together:</p> <pre><code>docker compose --profile lucee --profile mysql --profile ui up -d\n</code></pre>"},{"location":"working-with-wheels/using-the-test-environment/#running-core-framework-tests","title":"Running Core Framework Tests","text":"<p>When contributing to Wheels, it's essential to run tests against various engine-database combinations to ensure compatibility. Here's how to run tests in different scenarios:</p>"},{"location":"working-with-wheels/using-the-test-environment/#via-the-testui","title":"Via the TestUI","text":"<ol> <li>Open the TestUI at http://localhost:3001</li> <li>Select the CFML engine and database you want to test against (e.g., Lucee 5 + MySQL)</li> <li>Select the test bundle or specific test to run</li> <li>Click \"Run Tests\" to execute them</li> <li>View the results in the UI</li> <li>Repeat with different engine-database combinations to ensure full compatibility</li> </ol>"},{"location":"working-with-wheels/using-the-test-environment/#via-command-line","title":"Via Command Line","text":"<p>You can also run tests directly via command line for specific engine-database combinations:</p>"},{"location":"working-with-wheels/using-the-test-environment/#testing-with-lucee-5-and-mysql","title":"Testing with Lucee 5 and MySQL","text":"<pre><code># Connect to the Lucee 5 container\ndocker exec -it cfwheels-test-lucee5 /bin/bash\n\n# Run all tests\ncd /cfwheels-test-suite\nbox wheels test app\n\n# Run a specific test\nbox wheels test app TestName\n\n# Run a specific test bundle\nbox wheels test app testBundles=controllers\n</code></pre>"},{"location":"working-with-wheels/using-the-test-environment/#testing-with-adobe-coldfusion-2021-and-sql-server","title":"Testing with Adobe ColdFusion 2021 and SQL Server","text":"<pre><code># Connect to the Adobe 2021 container\ndocker exec -it cfwheels-test-adobe2021 /bin/bash\n\n# Run all tests\ncd /cfwheels-test-suite\nbox wheels test app\n\n# Specify a test bundle\nbox wheels test app testBundles=models\n</code></pre>"},{"location":"working-with-wheels/using-the-test-environment/#testing-with-lucee-6-and-postgresql","title":"Testing with Lucee 6 and PostgreSQL","text":"<pre><code># Connect to the Lucee 6 container\ndocker exec -it cfwheels-test-lucee6 /bin/bash\n\n# Run all tests\ncd /cfwheels-test-suite\nbox wheels test app\n\n# Run a specific test with specific options\nbox wheels test app testBundles=core&amp;testSpecs=testCaseOne\n</code></pre>"},{"location":"working-with-wheels/using-the-test-environment/#running-comprehensive-test-suite","title":"Running Comprehensive Test Suite","text":"<p>For thorough testing before submitting a PR, you should run tests on multiple engine-database combinations:</p> <ol> <li>Test with Lucee 5 + MySQL (minimum requirement)</li> <li>Test with at least one Adobe ColdFusion version (e.g., CF 2021)</li> <li>Test with at least one alternative database (e.g., SQL Server or PostgreSQL)</li> </ol>"},{"location":"working-with-wheels/using-the-test-environment/#via-commandbox-locally","title":"Via CommandBox Locally","text":"<p>You can also run tests locally using CommandBox without Docker, though this will only test against your locally installed CFML engine:</p> <pre><code># Start a server\nbox server start\n\n# Run all tests\nbox wheels test app\n\n# Run a specific test\nbox wheels test app TestName\n\n# Run tests with specific parameters\nbox wheels test app testBundles=controllers\n</code></pre>"},{"location":"working-with-wheels/using-the-test-environment/#test-environment-components","title":"Test Environment Components","text":""},{"location":"working-with-wheels/using-the-test-environment/#cfml-engines","title":"CFML Engines","text":"Engine Container Name Port Lucee 5 cfwheels-test-lucee5 60005 Lucee 6 cfwheels-test-lucee6 60006 Adobe 2018 cfwheels-test-adobe2018 62018 Adobe 2021 cfwheels-test-adobe2021 62021 Adobe 2023 cfwheels-test-adobe2023 62023"},{"location":"working-with-wheels/using-the-test-environment/#databases","title":"Databases","text":"Database Container Name Port MySQL mysql 3307 (3306 internal) PostgreSQL postgres 5433 (5432 internal) SQL Server sqlserver_cicd 1434 (1433 internal) H2 (embedded) n/a"},{"location":"working-with-wheels/using-the-test-environment/#test-user-interface","title":"Test User Interface","text":"Component URL Description Modern TestUI http://localhost:3001 Vue.js based interface with dark/light theme Legacy TestUI http://localhost:3000 Original test interface"},{"location":"working-with-wheels/using-the-test-environment/#pre-flight-checks-and-container-management","title":"Pre-flight Checks and Container Management","text":"<p>The TestUI includes features to help manage the test environment:</p> <ol> <li>Pre-flight Checks: Verify that all required containers are running before executing tests</li> <li>Container Management: Start, stop, and restart containers directly from the UI</li> <li>Container Profiles: Manage predefined sets of containers for specific testing needs</li> </ol>"},{"location":"working-with-wheels/using-the-test-environment/#creating-new-core-framework-tests","title":"Creating New Core Framework Tests","text":"<p>When contributing to Wheels, you may need to create new tests for your code changes:</p> <ol> <li>Create a new test file in the appropriate directory:</li> <li>For core functions: <code>/tests/functions/YourTest.cfc</code></li> <li> <p>For request tests: <code>/tests/requests/YourTest.cfc</code></p> </li> <li> <p>Follow the TestBox syntax for your tests:</p> </li> </ol> <pre><code>component extends=\"wheels.Test\" {\n\n    function setup() {\n        // Code to run before each test\n    }\n\n    function teardown() {\n        // Code to run after each test\n    }\n\n    function test_your_feature() {\n        // Your test code\n        assert(true);\n    }\n}\n</code></pre> <ol> <li>Run your new test using the methods described above to ensure it passes on all engine-database combinations</li> </ol>"},{"location":"working-with-wheels/using-the-test-environment/#troubleshooting","title":"Troubleshooting","text":""},{"location":"working-with-wheels/using-the-test-environment/#common-issues","title":"Common Issues","text":"<ol> <li>Container won't start: </li> <li>Check container logs: <code>docker logs container_name</code></li> <li>Ensure ports aren't already in use on your system</li> <li> <p>Try stopping and removing all containers: <code>docker compose down</code></p> </li> <li> <p>Tests fail inconsistently:</p> </li> <li>Ensure your database container is healthy</li> <li>Check for resource constraints (memory/CPU)</li> <li> <p>Use the pre-flight feature in the TestUI to verify container health</p> </li> <li> <p>Port conflicts:</p> </li> <li>Edit the port mappings in compose.yml if needed</li> <li> <p>Use <code>docker ps</code> to see what ports are in use</p> </li> <li> <p>CommandBox issues:</p> </li> <li>Make sure CommandBox is properly installed and in your PATH</li> <li>Try running <code>box version</code> to verify installation</li> <li> <p>Update CommandBox with <code>box upgrade</code> if you encounter compatibility issues</p> </li> <li> <p>Tests pass on one engine but fail on another:</p> </li> <li>This typically indicates an engine compatibility issue</li> <li>Check for engine-specific functions or behaviors</li> <li>Use conditional code with proper engine detection when necessary</li> </ol>"},{"location":"working-with-wheels/using-the-test-environment/#viewing-logs","title":"Viewing Logs","text":"<pre><code># View logs from a specific container\ndocker logs cfwheels-test-lucee5\n\n# Follow logs in real-time\ndocker logs -f cfwheels-test-lucee5\n</code></pre>"},{"location":"working-with-wheels/using-the-test-environment/#container-shell-access","title":"Container Shell Access","text":"<pre><code># Connect to a running container\ndocker exec -it cfwheels-test-lucee5 /bin/bash\n</code></pre>"},{"location":"working-with-wheels/using-the-test-environment/#keeping-the-test-environment-updated","title":"Keeping the Test Environment Updated","text":"<p>To update your test environment to the latest version:</p> <pre><code># Pull the latest code\ngit pull\n\n# Update dependencies\nbox install\n\n# Rebuild the containers\ndocker compose build\n\n# Restart the environment\ndocker compose --profile all down\ndocker compose --profile all up -d\n</code></pre>"},{"location":"working-with-wheels/using-the-test-environment/#conclusion","title":"Conclusion","text":"<p>The Wheels test environment is a critical tool for ensuring that contributions to the core framework work consistently across all supported platforms. By thoroughly testing your changes across different CFML engines and databases, you help maintain the high quality and broad compatibility that Wheels users expect.</p> <p>After verifying that your changes pass all tests, you're ready to submit a pull request. For detailed instructions on the PR process, see Submitting Pull Requests.</p>"}]}
